!function(e){var t=this.webpackHotUpdate;this.webpackHotUpdate=function(e,n){!function(e,t){if(!E[e]||!A[e])return;for(var n in A[e]=!1,t)Object.prototype.hasOwnProperty.call(t,n)&&(p[n]=t[n]);0==--y&&0===v&&x()}(e,n),t&&t(e,n)};var n,r=!0,i="1f2a339090ea11423474",o={},a=[],s=[];function u(e){var t=T[e];if(!t)return M;var r=function(r){return t.hot.active?(T[r]?-1===T[r].parents.indexOf(e)&&T[r].parents.push(e):(a=[e],n=r),-1===t.children.indexOf(r)&&t.children.push(r)):(console.warn("[HMR] unexpected require("+r+") from disposed module "+e),a=[]),M(r)},i=function(e){return{configurable:!0,enumerable:!0,get:function(){return M[e]},set:function(t){M[e]=t}}};for(var o in M)Object.prototype.hasOwnProperty.call(M,o)&&"e"!==o&&"t"!==o&&Object.defineProperty(r,o,i(o));return r.e=function(e){return"ready"===h&&d("prepare"),v++,M.e(e).then(t,(function(e){throw t(),e}));function t(){v--,"prepare"===h&&(b[e]||_(e),0===v&&0===y&&x())}},r.t=function(e,t){return 1&t&&(e=r(e)),M.t(e,-2&t)},r}function l(t){var r={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:n!==t,active:!0,accept:function(e,t){if(void 0===e)r._selfAccepted=!0;else if("function"==typeof e)r._selfAccepted=e;else if("object"==typeof e)for(var n=0;n<e.length;n++)r._acceptedDependencies[e[n]]=t||function(){};else r._acceptedDependencies[e]=t||function(){}},decline:function(e){if(void 0===e)r._selfDeclined=!0;else if("object"==typeof e)for(var t=0;t<e.length;t++)r._declinedDependencies[e[t]]=!0;else r._declinedDependencies[e]=!0},dispose:function(e){r._disposeHandlers.push(e)},addDisposeHandler:function(e){r._disposeHandlers.push(e)},removeDisposeHandler:function(e){var t=r._disposeHandlers.indexOf(e);t>=0&&r._disposeHandlers.splice(t,1)},invalidate:function(){switch(this._selfInvalidated=!0,h){case"idle":(p={})[t]=e[t],d("ready");break;case"ready":N(t);break;case"prepare":case"check":case"dispose":case"apply":(g=g||[]).push(t)}},check:S,apply:k,status:function(e){if(!e)return h;c.push(e)},addStatusHandler:function(e){c.push(e)},removeStatusHandler:function(e){var t=c.indexOf(e);t>=0&&c.splice(t,1)},data:o[t]};return n=void 0,r}var c=[],h="idle";function d(e){h=e;for(var t=0;t<c.length;t++)c[t].call(null,e)}var f,p,m,g,y=0,v=0,b={},A={},E={};function w(e){return+e+""===e?+e:e}function S(e){if("idle"!==h)throw new Error("check() is only allowed in idle status");return r=e,d("check"),(t=1e4,t=t||1e4,new Promise((function(e,n){if("undefined"==typeof XMLHttpRequest)return n(new Error("No browser support"));try{var r=new XMLHttpRequest,o=M.p+""+i+".hot-update.json";r.open("GET",o,!0),r.timeout=t,r.send(null)}catch(e){return n(e)}r.onreadystatechange=function(){if(4===r.readyState)if(0===r.status)n(new Error("Manifest request to "+o+" timed out."));else if(404===r.status)e();else if(200!==r.status&&304!==r.status)n(new Error("Manifest request to "+o+" failed."));else{try{var t=JSON.parse(r.responseText)}catch(e){return void n(e)}e(t)}}}))).then((function(e){if(!e)return d(R()?"ready":"idle"),null;A={},b={},E=e.c,m=e.h,d("prepare");var t=new Promise((function(e,t){f={resolve:e,reject:t}}));p={};return _(0),"prepare"===h&&0===v&&0===y&&x(),t}));var t}function _(e){E[e]?(A[e]=!0,y++,function(e){var t=document.createElement("script");t.charset="utf-8",t.src=M.p+""+e+"."+i+".hot-update.js",document.head.appendChild(t)}(e)):b[e]=!0}function x(){d("ready");var e=f;if(f=null,e)if(r)Promise.resolve().then((function(){return k(r)})).then((function(t){e.resolve(t)}),(function(t){e.reject(t)}));else{var t=[];for(var n in p)Object.prototype.hasOwnProperty.call(p,n)&&t.push(w(n));e.resolve(t)}}function k(t){if("ready"!==h)throw new Error("apply() is only allowed in ready status");return function t(r){var s,u,l,c,h;function f(e){for(var t=[e],n={},r=t.map((function(e){return{chain:[e],id:e}}));r.length>0;){var i=r.pop(),o=i.id,a=i.chain;if((c=T[o])&&(!c.hot._selfAccepted||c.hot._selfInvalidated)){if(c.hot._selfDeclined)return{type:"self-declined",chain:a,moduleId:o};if(c.hot._main)return{type:"unaccepted",chain:a,moduleId:o};for(var s=0;s<c.parents.length;s++){var u=c.parents[s],l=T[u];if(l){if(l.hot._declinedDependencies[o])return{type:"declined",chain:a.concat([u]),moduleId:o,parentId:u};-1===t.indexOf(u)&&(l.hot._acceptedDependencies[o]?(n[u]||(n[u]=[]),y(n[u],[o])):(delete n[u],t.push(u),r.push({chain:a.concat([u]),id:u})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];-1===e.indexOf(r)&&e.push(r)}}R();var v={},b=[],A={},S=function(){console.warn("[HMR] unexpected require("+x.moduleId+") to disposed module")};for(var _ in p)if(Object.prototype.hasOwnProperty.call(p,_)){var x;h=w(_),x=p[_]?f(h):{type:"disposed",moduleId:_};var k=!1,N=!1,D=!1,O="";switch(x.chain&&(O="\nUpdate propagation: "+x.chain.join(" -> ")),x.type){case"self-declined":r.onDeclined&&r.onDeclined(x),r.ignoreDeclined||(k=new Error("Aborted because of self decline: "+x.moduleId+O));break;case"declined":r.onDeclined&&r.onDeclined(x),r.ignoreDeclined||(k=new Error("Aborted because of declined dependency: "+x.moduleId+" in "+x.parentId+O));break;case"unaccepted":r.onUnaccepted&&r.onUnaccepted(x),r.ignoreUnaccepted||(k=new Error("Aborted because "+h+" is not accepted"+O));break;case"accepted":r.onAccepted&&r.onAccepted(x),N=!0;break;case"disposed":r.onDisposed&&r.onDisposed(x),D=!0;break;default:throw new Error("Unexception type "+x.type)}if(k)return d("abort"),Promise.reject(k);if(N)for(h in A[h]=p[h],y(b,x.outdatedModules),x.outdatedDependencies)Object.prototype.hasOwnProperty.call(x.outdatedDependencies,h)&&(v[h]||(v[h]=[]),y(v[h],x.outdatedDependencies[h]));D&&(y(b,[x.moduleId]),A[h]=S)}var F,C=[];for(u=0;u<b.length;u++)h=b[u],T[h]&&T[h].hot._selfAccepted&&A[h]!==S&&!T[h].hot._selfInvalidated&&C.push({module:h,parents:T[h].parents.slice(),errorHandler:T[h].hot._selfAccepted});d("dispose"),Object.keys(E).forEach((function(e){!1===E[e]&&function(e){delete installedChunks[e]}(e)}));var I,P,L=b.slice();for(;L.length>0;)if(h=L.pop(),c=T[h]){var j={},B=c.hot._disposeHandlers;for(l=0;l<B.length;l++)(s=B[l])(j);for(o[h]=j,c.hot.active=!1,delete T[h],delete v[h],l=0;l<c.children.length;l++){var H=T[c.children[l]];H&&((F=H.parents.indexOf(h))>=0&&H.parents.splice(F,1))}}for(h in v)if(Object.prototype.hasOwnProperty.call(v,h)&&(c=T[h]))for(P=v[h],l=0;l<P.length;l++)I=P[l],(F=c.children.indexOf(I))>=0&&c.children.splice(F,1);d("apply"),void 0!==m&&(i=m,m=void 0);for(h in p=void 0,A)Object.prototype.hasOwnProperty.call(A,h)&&(e[h]=A[h]);var V=null;for(h in v)if(Object.prototype.hasOwnProperty.call(v,h)&&(c=T[h])){P=v[h];var q=[];for(u=0;u<P.length;u++)if(I=P[u],s=c.hot._acceptedDependencies[I]){if(-1!==q.indexOf(s))continue;q.push(s)}for(u=0;u<q.length;u++){s=q[u];try{s(P)}catch(e){r.onErrored&&r.onErrored({type:"accept-errored",moduleId:h,dependencyId:P[u],error:e}),r.ignoreErrored||V||(V=e)}}}for(u=0;u<C.length;u++){var W=C[u];h=W.module,a=W.parents,n=h;try{M(h)}catch(e){if("function"==typeof W.errorHandler)try{W.errorHandler(e)}catch(t){r.onErrored&&r.onErrored({type:"self-accept-error-handler-errored",moduleId:h,error:t,originalError:e}),r.ignoreErrored||V||(V=t),V||(V=e)}else r.onErrored&&r.onErrored({type:"self-accept-errored",moduleId:h,error:e}),r.ignoreErrored||V||(V=e)}}if(V)return d("fail"),Promise.reject(V);if(g)return t(r).then((function(e){return b.forEach((function(t){e.indexOf(t)<0&&e.push(t)})),e}));return d("idle"),new Promise((function(e){e(b)}))}(t=t||{})}function R(){if(g)return p||(p={}),g.forEach(N),g=void 0,!0}function N(t){Object.prototype.hasOwnProperty.call(p,t)||(p[t]=e[t])}var T={};function M(t){if(T[t])return T[t].exports;var n=T[t]={i:t,l:!1,exports:{},hot:l(t),parents:(s=a,a=[],s),children:[]};return e[t].call(n.exports,n,n.exports,u(t)),n.l=!0,n.exports}M.m=e,M.c=T,M.d=function(e,t,n){M.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},M.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},M.t=function(e,t){if(1&t&&(e=M(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(M.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)M.d(n,r,function(t){return e[t]}.bind(null,r));return n},M.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return M.d(t,"a",t),t},M.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},M.p="",M.h=function(){return i},u(0)(M.s=0)}([function(e,t,n){const r=n(1);r.startApi(),window.onload=function(){const e=document.getElementById("begin"),t=document.getElementById("testPlay");document.getElementById("listSongs").addEventListener("change",(function(){r.objet_api.listDifficulties("listSongs","listDifficulties")})),e.addEventListener("click",(function(){r.objet_api.start(),r.objet_api.listSongs("listSongs"),r.objet_api.listDifficulties("listSongs","listDifficulties")})),t.addEventListener("click",(function(){r.objet_api.playMusic("listSongs","listDifficulties")}))}},function(e,t,n){if(e.exports=function(e){var t=this.webpackHotUpdate$;this.webpackHotUpdate$=function(e,n){!function(e,t){if(A[e]&&b[e]){for(var n in b[e]=!1,t)Object.prototype.hasOwnProperty.call(t,n)&&(p[n]=t[n]);0==--g&&0===y&&_()}}(e,n),t&&t(e,n)};var n,r=!0,i="8d042944e4e16f499252",o={},a=[],s=[];function u(e){var t=k[e];if(!t)return R;var r=function(r){return t.hot.active?(k[r]?-1===k[r].parents.indexOf(e)&&k[r].parents.push(e):(a=[e],n=r),-1===t.children.indexOf(r)&&t.children.push(r)):(console.warn("[HMR] unexpected require("+r+") from disposed module "+e),a=[]),R(r)},i=function(e){return{configurable:!0,enumerable:!0,get:function(){return R[e]},set:function(t){R[e]=t}}};for(var o in R)Object.prototype.hasOwnProperty.call(R,o)&&"e"!==o&&"t"!==o&&Object.defineProperty(r,o,i(o));return r.e=function(e){return"ready"===h&&d("prepare"),y++,R.e(e).then(t,(function(e){throw t(),e}));function t(){y--,"prepare"===h&&(v[e]||S(e),0===y&&0===g&&_())}},r.t=function(e,t){return 1&t&&(e=r(e)),R.t(e,-2&t)},r}function l(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:n!==e,active:!0,accept:function(e,n){if(void 0===e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var r=0;r<e.length;r++)t._acceptedDependencies[e[r]]=n||function(){};else t._acceptedDependencies[e]=n||function(){}},decline:function(e){if(void 0===e)t._selfDeclined=!0;else if("object"==typeof e)for(var n=0;n<e.length;n++)t._declinedDependencies[e[n]]=!0;else t._declinedDependencies[e]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var n=t._disposeHandlers.indexOf(e);n>=0&&t._disposeHandlers.splice(n,1)},check:w,apply:x,status:function(e){if(!e)return h;c.push(e)},addStatusHandler:function(e){c.push(e)},removeStatusHandler:function(e){var t=c.indexOf(e);t>=0&&c.splice(t,1)},data:o[e]};return n=void 0,t}var c=[],h="idle";function d(e){h=e;for(var t=0;t<c.length;t++)c[t].call(null,e)}var f,p,m,g=0,y=0,v={},b={},A={};function E(e){return+e+""===e?+e:e}function w(e){if("idle"!==h)throw new Error("check() is only allowed in idle status");return r=e,d("check"),(t=1e4,t=t||1e4,new Promise((function(e,n){if("undefined"==typeof XMLHttpRequest)return n(new Error("No browser support"));try{var r=new XMLHttpRequest,o=R.p+""+i+".hot-update.json";r.open("GET",o,!0),r.timeout=t,r.send(null)}catch(e){return n(e)}r.onreadystatechange=function(){if(4===r.readyState)if(0===r.status)n(new Error("Manifest request to "+o+" timed out."));else if(404===r.status)e();else if(200!==r.status&&304!==r.status)n(new Error("Manifest request to "+o+" failed."));else{try{var t=JSON.parse(r.responseText)}catch(e){return void n(e)}e(t)}}}))).then((function(e){if(!e)return d("idle"),null;b={},v={},A=e.c,m=e.h,d("prepare");var t=new Promise((function(e,t){f={resolve:e,reject:t}}));return p={},S(0),"prepare"===h&&0===y&&0===g&&_(),t}));var t}function S(e){A[e]?(b[e]=!0,g++,function(e){var t=document.createElement("script");t.charset="utf-8",t.src=R.p+""+e+"."+i+".hot-update.js",document.head.appendChild(t)}(e)):v[e]=!0}function _(){d("ready");var e=f;if(f=null,e)if(r)Promise.resolve().then((function(){return x(r)})).then((function(t){e.resolve(t)}),(function(t){e.reject(t)}));else{var t=[];for(var n in p)Object.prototype.hasOwnProperty.call(p,n)&&t.push(E(n));e.resolve(t)}}function x(t){if("ready"!==h)throw new Error("apply() is only allowed in ready status");var n,r,s,u,l;function c(e){for(var t=[e],n={},r=t.map((function(e){return{chain:[e],id:e}}));r.length>0;){var i=r.pop(),o=i.id,a=i.chain;if((u=k[o])&&!u.hot._selfAccepted){if(u.hot._selfDeclined)return{type:"self-declined",chain:a,moduleId:o};if(u.hot._main)return{type:"unaccepted",chain:a,moduleId:o};for(var s=0;s<u.parents.length;s++){var l=u.parents[s],c=k[l];if(c){if(c.hot._declinedDependencies[o])return{type:"declined",chain:a.concat([l]),moduleId:o,parentId:l};-1===t.indexOf(l)&&(c.hot._acceptedDependencies[o]?(n[l]||(n[l]=[]),f(n[l],[o])):(delete n[l],t.push(l),r.push({chain:a.concat([l]),id:l})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];-1===e.indexOf(r)&&e.push(r)}}t=t||{};var g={},y=[],v={},b=function(){console.warn("[HMR] unexpected require("+S.moduleId+") to disposed module")};for(var w in p)if(Object.prototype.hasOwnProperty.call(p,w)){var S;l=E(w);var _=!1,x=!1,N=!1,T="";switch((S=p[w]?c(l):{type:"disposed",moduleId:w}).chain&&(T="\nUpdate propagation: "+S.chain.join(" -> ")),S.type){case"self-declined":t.onDeclined&&t.onDeclined(S),t.ignoreDeclined||(_=new Error("Aborted because of self decline: "+S.moduleId+T));break;case"declined":t.onDeclined&&t.onDeclined(S),t.ignoreDeclined||(_=new Error("Aborted because of declined dependency: "+S.moduleId+" in "+S.parentId+T));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(S),t.ignoreUnaccepted||(_=new Error("Aborted because "+l+" is not accepted"+T));break;case"accepted":t.onAccepted&&t.onAccepted(S),x=!0;break;case"disposed":t.onDisposed&&t.onDisposed(S),N=!0;break;default:throw new Error("Unexception type "+S.type)}if(_)return d("abort"),Promise.reject(_);if(x)for(l in v[l]=p[l],f(y,S.outdatedModules),S.outdatedDependencies)Object.prototype.hasOwnProperty.call(S.outdatedDependencies,l)&&(g[l]||(g[l]=[]),f(g[l],S.outdatedDependencies[l]));N&&(f(y,[S.moduleId]),v[l]=b)}var M,D=[];for(r=0;r<y.length;r++)l=y[r],k[l]&&k[l].hot._selfAccepted&&v[l]!==b&&D.push({module:l,errorHandler:k[l].hot._selfAccepted});d("dispose"),Object.keys(A).forEach((function(e){!1===A[e]&&function(e){delete installedChunks[e]}(e)}));for(var O,F,C=y.slice();C.length>0;)if(l=C.pop(),u=k[l]){var I={},P=u.hot._disposeHandlers;for(s=0;s<P.length;s++)(n=P[s])(I);for(o[l]=I,u.hot.active=!1,delete k[l],delete g[l],s=0;s<u.children.length;s++){var L=k[u.children[s]];L&&(M=L.parents.indexOf(l))>=0&&L.parents.splice(M,1)}}for(l in g)if(Object.prototype.hasOwnProperty.call(g,l)&&(u=k[l]))for(F=g[l],s=0;s<F.length;s++)O=F[s],(M=u.children.indexOf(O))>=0&&u.children.splice(M,1);for(l in d("apply"),i=m,v)Object.prototype.hasOwnProperty.call(v,l)&&(e[l]=v[l]);var j=null;for(l in g)if(Object.prototype.hasOwnProperty.call(g,l)&&(u=k[l])){F=g[l];var B=[];for(r=0;r<F.length;r++)if(O=F[r],n=u.hot._acceptedDependencies[O]){if(-1!==B.indexOf(n))continue;B.push(n)}for(r=0;r<B.length;r++){n=B[r];try{n(F)}catch(e){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:l,dependencyId:F[r],error:e}),t.ignoreErrored||j||(j=e)}}}for(r=0;r<D.length;r++){var H=D[r];l=H.module,a=[l];try{R(l)}catch(e){if("function"==typeof H.errorHandler)try{H.errorHandler(e)}catch(n){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:l,error:n,originalError:e}),t.ignoreErrored||j||(j=n),j||(j=e)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:l,error:e}),t.ignoreErrored||j||(j=e)}}return j?(d("fail"),Promise.reject(j)):(d("idle"),new Promise((function(e){e(y)})))}var k={};function R(t){if(k[t])return k[t].exports;var n=k[t]={i:t,l:!1,exports:{},hot:l(t),parents:(s=a,a=[],s),children:[]};return e[t].call(n.exports,n,n.exports,u(t)),n.l=!0,n.exports}return R.m=e,R.c=k,R.d=function(e,t,n){R.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},R.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},R.t=function(e,t){if(1&t&&(e=R(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(R.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)R.d(n,r,function(t){return e[t]}.bind(null,r));return n},R.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return R.d(t,"a",t),t},R.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},R.p="",R.h=function(){return i},u(32)(R.s=32)}([function(e,t){const n={OFF:"#111",WHITE:"#f0f0f0",DARKRED:"#5A354B",RED:"#f971c3",BRIGHTRED:"#ffd3ee",DARKBLUE:"#2B4D4C",BLUE:"#6ff9ea",BRIGHTBLUE:"#d7fdf9",YELLOW:"#fff568",UI_ACCENT:"#08bfa2",UI_ACCENT2:"#f01978"};n.schemes={default:{name:"Super Medium",off:"#111",primary:n.RED,primarybright:n.BRIGHTRED,secondary:n.BLUE,secondarybright:n.BRIGHTBLUE,tertiary:n.YELLOW},blue:{name:"Star Warrior",off:"#111",primary:"#1e4482",primarybright:"#0B4BB3",secondary:"#c27727",secondarybright:"#FFD840",tertiary:"#d7fdf9"},purple:{name:"Galactic Royal",off:"#111",primary:"#6A39B3",primarybright:"#B685FF",secondary:"#FAF239",secondarybright:"#FFFC9E",tertiary:"#50FFF2"},green:{name:"Space Joker",off:"#111",primary:"#779E37",primarybright:"#C0FF59",secondary:"#6A39B3",secondarybright:"#B685FF",tertiary:"#FAFAFA"},yellow:{name:"Solar Flare",off:"#111",primary:"#C2C04C",primarybright:"#FAF761",secondary:"#E03A3E",secondarybright:"#FA7578",tertiary:"#278ECC"},red:{name:"Trail Blazer",off:"#111",primary:"#E03A3E",primarybright:"#FA7578",secondary:"#DADADA",secondarybright:"#EFEFEF",tertiary:"#666"},rgb:{name:"Mint Choco",off:"#111",primary:"#34eb89",primarYBRIGht:"#40fb95",secondary:"#34ebd8",secondarybright:"#40fbeA",tertiary:"#eb3434"},cheetah:{name:"Cheetah SoL",off:"#111",primary:"#c27727",primarYBright:"#e68319",secondary:"#635c54",secondarybright:"#8a857f",tertiary:"#ebebeb"},black:{name:"Ash Nova",off:"#111",primary:"#555",primarybright:"#808080",secondary:"#FFF",secondarybright:"#FFF",tertiary:"#B8B8B8"}},n.options=Object.keys(n.schemes),"undefined"==typeof localStorage?n.initial="default":n.initial=n.schemes[localStorage.getItem("colorScheme")||"default"],e.exports=n},function(e,t){var n;e.exports.getS3FileUrl=function(e,t){return`https://previews.moonrider.xyz/${e}-${t}?v=2`},console.line=(n={},function(e,t,r,i){i=i||"#FFF",n[r=r||"default"]||(n[r]=document.createElement("a-entity"),n[r].setAttribute("line","color",i||"#FFF"),n[r].setAttribute("id",r),AFRAME.scenes[0].appendChild(n[r])),n[r].setAttribute("line","start",e.clone()),n[r].setAttribute("line","end",t.clone())}),console.vec3=function(){const e={},t={primitive:"box",width:.05,height:.05,depth:.05},n={shader:"flat"};return function(r,i,o){o=o||"#FFF",e[i=i||"default"]||(e[i]=document.createElement("a-entity"),n.color=o||"#FFF",e[i].setAttribute("geometry",t),e[i].setAttribute("material",n),e[i].setAttribute("id",i),e[i].setAttribute("text",{align:"center",value:i,side:"double"}),AFRAME.scenes[0].appendChild(e[i])),e[i].object3D.position.copy(r)}}()},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){var n=Object.prototype.hasOwnProperty,r=Object.prototype.toString;e.exports=function(e,t,i){if("[object Function]"!==r.call(t))throw new TypeError("iterator must be a function");var o=e.length;if(o===+o)for(var a=0;a<o;a++)t.call(i,e[a],a,e);else for(var s in e)n.call(e,s)&&t.call(i,e[s],s,e)}},function(e,t){e.exports=function(e){return JSON.parse(JSON.stringify(e))}},function(e,t){e.exports="varying vec2 uvs;\nvarying float distance;\nvoid main() {\n  uvs.xy = uv.xy;\n  distance = length((modelMatrix * vec4(position, 1.0)).xyz - cameraPosition);\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n"},function(e,t){e.exports="varying vec2 uvs;\nvarying float distance;\nuniform sampler2D src;\nuniform vec3 color;\n\nvoid main() {\n  float alpha = texture2D(src, uvs).a;\n  alpha *= 1.0 - clamp(distance / 40.0, 0.0, 1.0);\n  gl_FragColor = vec4(color, alpha);\n}\n"},function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return i})),n.d(t,"__assign",(function(){return o})),n.d(t,"__rest",(function(){return a})),n.d(t,"__decorate",(function(){return s})),n.d(t,"__param",(function(){return u})),n.d(t,"__metadata",(function(){return l})),n.d(t,"__awaiter",(function(){return c})),n.d(t,"__generator",(function(){return h})),n.d(t,"__exportStar",(function(){return d})),n.d(t,"__values",(function(){return f})),n.d(t,"__read",(function(){return p})),n.d(t,"__spread",(function(){return m})),n.d(t,"__spreadArrays",(function(){return g})),n.d(t,"__await",(function(){return y})),n.d(t,"__asyncGenerator",(function(){return v})),n.d(t,"__asyncDelegator",(function(){return b})),n.d(t,"__asyncValues",(function(){return A})),n.d(t,"__makeTemplateObject",(function(){return E})),n.d(t,"__importStar",(function(){return w})),n.d(t,"__importDefault",(function(){return S}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function u(e,t){return function(n,r){t(n,r,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function c(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function h(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function d(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function f(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function g(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function y(e){return this instanceof y?(this.v=e,this):new y(e)}function v(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=i[e](t)).value instanceof y?Promise.resolve(n.value.v).then(u,l):c(o[0][2],n)}catch(e){c(o[0][3],e)}var n}function u(e){s("next",e)}function l(e){s("throw",e)}function c(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function b(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:y(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function A(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=f(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,i,(t=e[n](t)).done,t.value)}))}}}function E(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function w(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,l=[],c=!1,h=-1;function d(){c&&u&&(c=!1,u.length?l=u.concat(l):h=-1,l.length&&f())}function f(){if(!c){var e=s(d);c=!0;for(var t=l.length;t;){for(u=l,l=[];++h<t;)u&&u[h].run();h=-1,t=l.length}u=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new p(e,t)),1!==l.length||c||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";var r=n(27);function i(e,t){var r=n(3),i=this;"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):i.stack=(new Error).stack||"Cannot get a stacktrace, browser is too old",this.name="AlgoliaSearchError",this.message=e||"Unknown error",t&&r(t,(function(e,t){i[t]=e}))}function o(e,t){function n(){var n=Array.prototype.slice.call(arguments,0);"string"!=typeof n[0]&&n.unshift(t),i.apply(this,n),this.name="AlgoliaSearch"+e+"Error"}return r(n,i),n}r(i,Error),e.exports={AlgoliaSearchError:i,UnparsableJSON:o("UnparsableJSON","Could not parse the incoming response as JSON, see err.more for details"),RequestTimeout:o("RequestTimeout","Request timed out before getting a response"),Network:o("Network","Network issue, see err.more for details"),JSONPScriptFail:o("JSONPScriptFail","<script> was loaded but did not call our provided callback"),ValidUntilNotFound:o("ValidUntilNotFound","The SecuredAPIKey does not have a validUntil parameter."),JSONPScriptError:o("JSONPScriptError","<script> unable to load due to an `error` event on it"),ObjectNotFound:o("ObjectNotFound","Object not found"),Unknown:o("Unknown","Unknown error occured")}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){var r=n(3);e.exports=function(e,t){var n=[];return r(e,(function(r,i){n.push(t(r,i,e))})),n}},function(e,t,n){(function(r){t.log=function(...e){return"object"==typeof console&&console.log&&console.log(...e)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(r++,"%c"===e&&(i=r))}),t.splice(i,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=n(159)(t);const{formatters:i}=e.exports;i.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,n(8))},function(e,t,n){"use strict";n.r(t),n.d(t,"BEAT_ANTICIPATION_TIME",(function(){return o})),n.d(t,"BEAT_PRELOAD_TIME",(function(){return a})),n.d(t,"PUNCH_OFFSET",(function(){return s})),n.d(t,"SWORD_OFFSET",(function(){return u})),n(1);let r=AFRAME.utils.getUrlParameter("skip")||0;r=parseInt(r,10);const i=AFRAME.utils.getUrlParameter("debugmines"),o=1.1,a=1.1,s=.5,u=1.5,l=AFRAME.utils.device.isMobile(),c=l?2e3:3500,h=l?7500:1e4;function d(e,t){return e._time-t._time}if(AFRAME.registerComponent("beat-generator",{dependencies:["stage-colors"],schema:{challengeId:{type:"string"},gameMode:{type:"string"},difficulty:{type:"string"},has3DOFVR:{default:!1},hasSongLoadError:{default:!1},isPlaying:{default:!1},isZipFetching:{default:!1},menuSelectedChallengeId:{type:"string"},songDuration:{type:"number"},speed:{type:"number"}},orientationsHumanized:["up","down","left","right","upleft","upright","downleft","downright"],horizontalPositions:[-.75,-.25,.25,.75],horizontalPositionsHumanized:{0:"left",1:"middleleft",2:"middleright",3:"right"},positionHumanized:{topLeft:{layer:2,index:0},topCenterLeft:{layer:2,index:1},topCenterRight:{layer:2,index:2},topRight:{layer:2,index:3},middleLeft:{layer:1,index:0},middleCenterLeft:{layer:1,index:1},middleCenterRight:{layer:1,index:2},middleRight:{layer:1,index:3},bottomLeft:{layer:0,index:0},bottomCenterLeft:{layer:0,index:1},bottomCenterRight:{layer:0,index:2},bottomRight:{layer:0,index:3}},verticalPositionsHumanized:{0:"bottom",1:"middle",2:"top"},init:function(){this.audioAnalyserEl=document.getElementById("audioanalyser"),this.beatContainer=document.getElementById("beatContainer"),this.beats=null,this.beatData=null,this.beatDataProcessed=!1,this.preloadTime=0,this.songTime=void 0,this.bpm=void 0,this.curve=null,this.curveEl=document.getElementById("curve"),this.curveFollowRigEl=document.getElementById("curveFollowRig"),this.tube=document.getElementById("tube"),this.index={events:0,notes:0,obstacles:0},this.wallContainer=document.getElementById("wallContainer"),this.leftStageLasers=document.getElementById("leftStageLasers"),this.rightStageLasers=document.getElementById("rightStageLasers"),this.stageColors=this.el.components["stage-colors"],this.el.addEventListener("cleargame",this.onClearGame.bind(this)),this.el.addEventListener("gamemenurestart",this.onRestart.bind(this)),this.el.addEventListener("ziploaderend",e=>{this.beats=e.detail.beats,this.data.challengeId&&!this.data.hasSongLoadError&&(this.beatData=this.beats[this.data.difficulty],this.processBeats())})},play:function(){this.playerHeight=document.querySelector("[player-height]").components["player-height"]},update:function(e){const t=this.data;e.challengeId!==t.challengeId&&t.challengeId&&(this.index.events=0,this.index.notes=0,this.index.obstacles=0,this.data.isZipFetching||!this.beats||this.data.hasSongLoadError||(this.beatData=this.beats[this.data.difficulty],this.processBeats()),this.curveEl.components.supercurve.generateCurve(t.speed*t.songDuration),this.curve=this.curveEl.components.supercurve.curve)},processBeats:function(){if(this.data.hasSongLoadError)return;this.songTime=0,this.preloadTime=0,this.beatData._events.sort(d),this.beatData._obstacles.sort(d),this.beatData._notes.sort(d),this.bpm=this.beatData._beatsPerMinute;const e=this.beatData._events;if(e.length&&e[0]._time<0)for(let t=0;e[t]._time<0;t++)this.generateEvent(e[t]);this.beatDataProcessed=!0,console.log("[beat-generator] Finished processing beat data.")},tick:function(e,t){if(!this.data.isPlaying||!this.data.challengeId||!this.beatData)return;let n;const i=this.el.components.song;if(void 0===this.preloadTime){if(!i.isAudioPlaying)return;n=1e3*i.getCurrentTime()+r}else n=this.preloadTime;this.beatData._beatsPerMinute;const o=6e4/this.beatData._beatsPerMinute,s=this.beatData._notes;for(let e=this.index.notes;e<s.length;++e)n+c>s[e]._time*o&&(this.generateBeat(s[e]),this.index.notes++);if("ride"!==this.data.gameMode){const e=this.beatData._obstacles;for(let t=this.index.obstacles;t<e.length;++t)n+h>=e[t]._time*o&&(this.generateWall(e[t]),this.index.obstacles++)}const u=this.beatData._events;for(let e=this.index.events;e<u.length;++e)n>=u[e]._time*o&&(this.generateEvent(u[e]),this.index.events++);void 0!==this.preloadTime&&(this.preloadTime>=1e3*a?(this.el.sceneEl.emit("beatloaderpreloadfinish",null,!1),this.preloadTime=void 0):this.preloadTime+=t)},generateBeat:function(e,t){const n=this.data;let r;i&&(e._type=3);let o=8===e._cutDirection?"dot":"arrow";if(0===e._type?r="red":1===e._type?r="blue":(o="mine",r=void 0),n.has3DOFVR&&"viewer"!==n.gameMode&&"ride"!==n.gameMode&&"red"===r)return;(AFRAME.utils.getUrlParameter("dot")||"punch"===n.gameMode)&&(o="dot");const a=this.requestBeat(o,r);a&&(a.components.beat||a.components.plume?this.setupBeat(a,e):setTimeout(()=>{this.setupBeat(a,e)}))},setupBeat:function(e,t){const n=this.data,r=this.orientationsHumanized[t._cutDirection],i=this.horizontalPositionsHumanized[t._lineIndex],a=this.verticalPositionsHumanized[t._lineLayer],l=(("classic"===this.data.gameMode?u:s)/n.speed+o)/n.songDuration,c=1e3*n.songDuration,h=6e4/this.beatData._beatsPerMinute,d=t._time*h/c+l,f=this.el.systems["render-order"].order.beats+1-d;"ride"===n.gameMode?(e.components.plume.onGenerate(d,i,a,this.playerHeight.beatOffset),e.setAttribute("render-order",f)):(e.components.beat.onGenerate(d,i,a,r,this.playerHeight.beatOffset),e.components.beat.blockEl.object3D.renderOrder=f),e.play()},generateWall:function(e){this.data;const t=this.el.sceneEl.components.pool__wall.requestEntity();t&&(t.components.wall?this.setupWall(t,e):setTimeout(()=>{this.setupWall(t,e)}))},setupWall:function(e,t){const n=this.data;if(n.has3DOFVR&&"viewer"!==n.gameMode)return;const r=t._duration/this.bpm*60,i=this.horizontalPositionsHumanized[t._lineIndex],a=1===t._type,s=r*n.speed,u=t._width/2,l=o/n.songDuration,c=1e3*n.songDuration,h=6e4/this.beatData._beatsPerMinute,d=t._time*h/c+l,f=s/this.curveEl.components.supercurve.length;e.components.wall.onGenerate(d,i,u,s,a,d+f),e.play(),e.object3D.renderOrder=this.el.systems["render-order"].order.beats+1-(d+f)},generateEvent:function(e){switch(e._type){case 0:this.stageColors.setColor("bg",e._value),this.stageColors.setColorInstant("moon",e._value);break;case 1:this.stageColors.setColorInstant("stars",e._value);break;case 2:this.stageColors.setColor("curveeven",e._value);break;case 3:this.stageColors.setColor("curveodd",e._value);break;case 4:this.stageColors.setColor("floor",e._value);break;case 8:case 9:this.tube.emit("pulse",null,!1);break;case 12:this.stageColors.setColor("leftglow",e._value);break;case 13:this.stageColors.setColor("rightglow",e._value)}},requestBeat:function(e,t){let n="pool__beat-"+e;"ride"===this.data.gameMode&&(n="pool__plume-"+e),"mine"!==e&&t&&(n+="-"+t);const r=this.el.sceneEl.components[n];if(r)return r.requestEntity();console.warn("Pool "+n+" unavailable")},onClearGame:function(){this.preloadTime=0,this.index.events=0,this.index.notes=0,this.index.obstacles=0;for(let e=0;e<this.beatContainer.children.length;e++){const t=this.beatContainer.children[e];t.object3D.position.set(0,0,-9999),t.components.beat&&t.components.beat.returnToPool()}for(let e=0;e<this.wallContainer.children.length;e++){const t=this.wallContainer.children[e];t.object3D.position.set(0,-9999,0),t.components.wall&&t.components.wall.returnToPool()}},onRestart:function(){const e=this.data;this.curveEl.components.supercurve.generateCurve(e.speed*e.songDuration),this.curve=this.curveEl.components.supercurve.curve}}),window.AFRAME){const t=["beat-generator"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t){e.exports="varying vec2 uvs;\nvoid main() {\n  uvs.xy = uv.xy;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}"},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(e,t){if(!e)throw a(t)},a=function(e){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},s=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=o>>2,h=(3&o)<<4|s>>4,d=(15&s)<<2|l>>6,f=63&l;u||(f=64,a||(d=64)),r.push(n[c],n[h],n[d],n[f])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=e[n++]))<<12|(63&(s=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{o=e[n++];var s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var l=o<<2|a>>4;if(r.push(l),64!==s){var c=a<<4&240|s>>2;if(r.push(c),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},l=function(e){try{return u.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&(e[n]=c(e[n],t[n]));return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var h=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function f(){try{return"[object process]"===Object.prototype.toString.call(e.process)}catch(e){return!1}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var p=function(e){function t(n,r){var i=e.call(this,r)||this;return i.code=n,i.name="FirebaseError",Object.setPrototypeOf(i,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,m.prototype.create),i}return r.__extends(t,e),t}(Error),m=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],a=o?g(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new p(i,s),l=0,c=Object.keys(r);l<c.length;l++){var h=c[l];"_"!==h.slice(-1)&&(h in u&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),u[h]=r[h])}return u},e}();function g(e,t){return e.replace(y,(function(e,n){var r=t[n];return null!=r?String(r):"<"+n+"?>"}))}var y=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v(e){return JSON.parse(e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var b=function(e){var t={},n={},r={},i="";try{var o=e.split(".");t=v(l(o[0])||""),n=v(l(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:r,signature:i}},A=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],l=this.chain_[2],c=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++)r<40?r<20?(o=c^u&(l^c),a=1518500249):(o=u^l^c,a=1859775393):r<60?(o=u&l|c&(u|l),a=2400959708):(o=u^l^c,a=3395469782),i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295,h=c,c=l,l=4294967295&(u<<30|u>>>2),u=s,s=i;this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},e}(),E=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}return e.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},e.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},e.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e)?e:{next:e,error:t,complete:n}).next&&(r.next=w),void 0===r.error&&(r.error=w),void 0===r.complete&&(r.complete=w);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return e+" failed: "+r+" argument "}t.CONSTANTS=i,t.Deferred=h,t.ErrorFactory=m,t.FirebaseError=p,t.Sha1=A,t.areCookiesEnabled=function(){return!(!navigator||!navigator.cookieEnabled)},t.assert=o,t.assertionError=a,t.async=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){e.apply(void 0,n)})).catch((function(e){t&&t(e)}))}},t.base64=u,t.base64Decode=l,t.base64Encode=function(e){var t=s(e);return u.encodeByteArray(t,!0)},t.contains=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.createSubscribe=function(e,t){var n=new E(e,t);return n.subscribe.bind(n)},t.decode=b,t.deepCopy=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){return c(void 0,e)},t.deepExtend=c,t.errorPrefix=S,t.getUA=d,t.isAdmin=function(e){var t=b(e).claims;return"object"==typeof t&&!0===t.admin},t.isBrowser=function(){return"object"==typeof self&&self.self===self},t.isBrowserExtension=function(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id},t.isElectron=function(){return d().indexOf("Electron/")>=0},t.isEmpty=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},t.isIE=function(){var e=d();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0},t.isIndexedDBAvailable=function(){return"indexedDB"in self&&null!==indexedDB},t.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())},t.isNode=f,t.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},t.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},t.isSafari=function(){return!f()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")},t.isUWP=function(){return d().indexOf("MSAppHost/")>=0},t.isValidFormat=function(e){var t=b(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},t.isValidTimestamp=function(e){var t=b(e).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof t&&(t.hasOwnProperty("nbf")?r=t.nbf:t.hasOwnProperty("iat")&&(r=t.iat),i=t.hasOwnProperty("exp")?t.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},t.issuedAtTime=function(e){var t=b(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null},t.jsonEval=v,t.map=function(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,t.querystring=function(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach((function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var o=i[r];n(o[0],o[1])}return t.length?"&"+t.join("&"):""},t.querystringDecode=function(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("=");t[n[0]]=n[1]}})),t},t.safeGet=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0},t.stringLength=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},t.stringToByteArray=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,o(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},t.stringify=function(e){return JSON.stringify(e)},t.validateArgCount=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},t.validateCallback=function(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(S(e,t,r)+"must be a valid function.")},t.validateContextObject=function(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(S(e,t,r)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,t.validateIndexedDBOpenable=function(){return new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))},t.validateNamespace=function(e,t,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(S(e,t,r)+"must be a valid firebase namespace.")}}).call(this,n(2))},function(e,t,n){var r=n(214);(e.exports=n(215)(!1)).push([e.i,"html {\n  background: #000;\n}\n#play,#begin{\n  position: absolute;\n  background-size: cover;\n  border: 0;\n  cursor: pointer;\n  left: 50px;\n  top: 20px;\n  text-decoration: none;\n  z-index: 9999999;\n  margin-left: 35%;\n  margin-top: 25%;\n width: 10%;\n height: 5%;\n font-size: 15px;\n}\n\n#pause{\n  position: absolute;\n  background-size: cover;\n  border: 0;\n  cursor: pointer;\n  left: 70px;\n  top: 40px;\n  text-decoration: none;\n  z-index: 9999999;\n  margin-left: 10%;\n  margin-top: 25%;\n  width: 10%;\n  height: 5%;\n  font-size: 15px;\n}\n#restart{\n  position: absolute;\n  background-size: cover;\n  border: 0;\n  cursor: pointer;\n  left: 70px;\n  top: 40px;\n  text-decoration: none;\n  z-index: 9999999;\n  margin-left: 10%;\n  margin-top: 35%;\n  width: 10%;\n  height: 5%;\n  font-size: 15px;\n}\n\n#genres{\n  position: absolute;\n  background-size: cover;\n  border: 0;\n  cursor: pointer;\n  left: 70px;\n  top: 40px;\n  text-decoration: none;\n  z-index: 9999999;\n  margin-left: 55%;\n  margin-top: 13%;\n  width: 10%;\n  height: 5%;\n  font-size: 15px;\n\n}\n\n#genreclear{\n  position: absolute;\n  background-size: cover;\n  border: 0;\n  cursor: pointer;\n  left: 70px;\n  top: 40px;\n  text-decoration: none;\n  z-index: 9999999;\n  margin-left: 55%;\n  margin-top: 8%;\n  width: 10%;\n  height: 5%;\n  font-size: 15px;\n\n}\n#difficulty{\n  position: absolute;\n  background-size: cover;\n  border: 0;\n  cursor: pointer;\n  left: 70px;\n  top: 40px;\n  text-decoration: none;\n  z-index: 9999999;\n  margin-left: 45%;\n  margin-top: 13%;\n  width: 10%;\n  height: 5%;\n  font-size: 15px;\n}\n#option{\n  position: absolute;\n  background-size: cover;\n  border: 0;\n  cursor: pointer;\n  left: 70px;\n  top: 40px;\n  text-decoration: none;\n  z-index: 9999999;\n  margin-left: 40%;\n  margin-top: 33%;\n  width: 10%;\n  height: 5%;\n  font-size: 15px;\n}\n\n#search{\n  position: absolute;\n  background-size: cover;\n  border: 0;\n  cursor: pointer;\n  left: 70px;\n  top: 40px;\n  text-decoration: none;\n  z-index: 9999999;\n  margin-left: 35%;\n  margin-top: 13%;\n  width: 10%;\n  height: 5%;\n  font-size: 15px; \n}\n#searchclear{\n  position: absolute;\n  background-size: cover;\n  border: 0;\n  cursor: pointer;\n  left: 70px;\n  top: 40px;\n  text-decoration: none;\n  z-index: 9999999;\n  margin-left: 35%;\n  margin-top: 8%;\n  width: 10%;\n  height: 5%;\n  font-size: 15px;\n}\n\n#playlist{\n  position: absolute;\n  background-size: cover;\n  border: 0;\n  cursor: pointer;\n  left: 70px;\n  top: 40px;\n  text-decoration: none;\n  z-index: 9999999;\n  margin-left: 25%;\n  margin-top: 13%;\n  width: 10%;\n  height: 5%;\n  font-size: 15px;\n}\n\n#playlistclear{\n  position: absolute;\n  background-size: cover;\n  border: 0;\n  cursor: pointer;\n  left: 70px;\n  top: 40px;\n  text-decoration: none;\n  z-index: 9999999;\n  margin-left: 25%;\n  margin-top: 8%;\n  width: 10%;\n  height: 5%;\n  font-size: 15px;\n}\n\n#back{\n  position: absolute;\n  background-size: cover;\n  border: 0;\n  cursor: pointer;\n  left: 70px;\n  top: 40px;\n  text-decoration: none;\n  z-index: 9999999;\n  margin-left: 25%;\n  margin-top: 5%;\n  width: 10%;\n  height: 5%;\n  font-size: 15px;\n\n}\n#vrButton {\n  position: absolute;\n  background: url("+r(n(216))+") no-repeat;\n  background-size: cover;\n  border: 0;\n  cursor: pointer;\n  right: 20px;\n  bottom: 20px;\n  text-decoration: none;\n  z-index: 9999999;\n  width: 84px;\n  height: 47px;\n}\n\n#vrButton.a-hidden {\n  visibility: hidden;\n}\n\n#vrButton:active {\n  border: 0;\n}\n\n#vrButton:hover {\n  background-position: 0 -50.5px;\n}\n\n#vrButton p {\n  bottom: 45px;\n  color: #FFF;\n  font-size: 12px;\n  font-family: monospace;\n  font-weight: bold;\n  text-align: center;\n  text-transform: uppercase;\n  position: relative;\n}\n\n\n\n.a-loader-title {\n  animation: loaderTitle 1s infinite alternate;\n  color: rgba(0,0,0,0);\n  background: none;\n  background-image: url("+r(n(217))+');\n  height: 36.2vh;\n  background-repeat: no-repeat;\n  background-position: center;\n  margin-top: 0;\n  background-size: contain;\n}\n\n@keyframes loaderTitle {\n  0% { opacity: 1; }\n  50% { opacity: 0.8; }\n  100% { opacity: 1; }\n}\n#list{\n  background: rgba(0, 0, 0, 0.75);\n  box-shadow: 0px 0 1px #888;\n  bottom: 0;\n  color: #FAFAFA;\n  font-family: monospace;\n  height: 100px;\n  left: 500px;\n  margin: 0;\n  min-width: 400px;\n  padding: 5px 20px 0 5px;\n  position: fixed;\n  text-align: center;\n  z-index: 9999999;\n}\n\n#subscribeForm {\n  background: rgba(0, 0, 0, 0.75);\n  box-shadow: 0px 0 1px #888;\n  bottom: 0;\n  color: #FAFAFA;\n  font-family: monospace;\n  height: 100px;\n  left: 0;\n  margin: 0;\n  min-width: 400px;\n  padding: 5px 20px 0 5px;\n  position: fixed;\n  text-align: center;\n  z-index: 9999999;\n}\n\n#subscribeForm h2 {\n  font-size: 16px;\n  font-weight: 300;\n}\n\n#subscribeForm #subscribeClose {\n  cursor: pointer;\n  font-size: 26px;\n  font-weight: 600;\n  position: absolute;\n  top: 0;\n  right: 5px;\n}\n\ninput[type="email"] {\n  background: #FAFAFA;\n  border: 0;\n  border-radius: 5px;\n  color: gray;\n  height: 40px;\n  padding-left: 20px;\n  margin-right: 10px;\n  max-width: 480px;\n  text-transform: uppercase;\n  vertical-align: middle;\n  width: 50%;\n}\n\nbutton {\n  border: 0;\n  background: #414ec0;\n  border-radius: 20px;\n  cursor: pointer;\n  font-size: 14px;\n  color: #FAFAFA;\n  text-transform: uppercase;\n  transition: .1s all;\n  padding: 11px 20px;\n  vertical-align: middle;\n}\n\nbutton:hover {\n  background: #FF94C8;\n}\n',""])},function(e,t,n){"use strict";n.r(t),n.d(t,"obj",(function(){return a}));var r=n(1),i=n.n(r);const{search:o}=n(33);n(19);var a={start(){AFRAME.scenes[0].systems.state.dispatch("startgame"),AFRAME.scenes[0].systems.state.dispatch("menuopeningend")},genres(){AFRAME.scenes[0].systems.state.dispatch("genremenuopen")},clearGenre(){AFRAME.scenes[0].systems.state.dispatch("genreclear")},difficulties(){AFRAME.scenes[0].systems.state.dispatch("difficultyfiltermenuopen")},options(){AFRAME.scenes[0].systems.state.dispatch("optionsmenuopen")},searchMusic(){AFRAME.scenes[0].systems.state.dispatch("keyboardopen")},playlistsChoice(){AFRAME.scenes[0].systems.state.dispatch("playlistmenuopen")},clearPlaylist(){AFRAME.scenes[0].systems.state.dispatch("playlistclear")},back(){AFRAME.scenes[0].systems.state.dispatch("menuback")},addList(e,t){var n=document.getElementById(e),r=document.createElement("option"),i=document.createTextNode(t);return r.appendChild(i),n.appendChild(r),r},listSongs(e){var t,n=AFRAME.scenes[0].systems.state.state.search.results;for(document.getElementById(e).length=0,t=0;t<n.length;t++)"Unknown Artist"==n[t].songSubName?a.addList(e,n[t].author+" ; "+n[t].songName+" ; "+n[t].id):a.addList(e,n[t].songSubName+" ; "+n[t].songName+" ; "+n[t].id)},getIdMusic(e){var t=document.getElementById(e).value;return(t=t.split(" ; "))[2]},getDifficultiesTab(e){var t=AFRAME.scenes[0].systems.state.state.search.results;for(let n=0;n<t.length;n++)if(t[n].id==e)return t[n].difficulties},listDifficulties(e,t){var n,r=a.getIdMusic(e),i=a.getDifficultiesTab(r);n=i.length,document.getElementById(t).length=0;for(var o=0;o<n;o++)a.addList(t,i[o])},getDifficulty:e=>document.getElementById(e).value,getSrcImage(e){const t=AFRAME.scenes[0].systems.state.state.search.results;for(let n=0;n<t.length;n++)if(t[n].id==e)return i.a.getS3FileUrl(t[n].id,"image.jpg")},selectMusic(e){AFRAME.scenes[0].systems.state.dispatch("menuchallengeselect",e)},selectDifficulty(e){AFRAME.scenes[0].systems.state.dispatch("menudifficultyselect",e)},play(e){AFRAME.scenes[0].systems.state.dispatch("playbuttonclick",e)},playMusic(e,t){var n=a.getIdMusic(e),r=a.getDifficulty(t);a.selectMusic(n),a.selectDifficulty(r),a.play(n)},pause(){AFRAME.scenes[0].systems.state.dispatch("pausegame")},resume(){AFRAME.scenes[0].emit("gamemenuresume")},restart(){AFRAME.scenes[0].emit("gamemenurestart"),AFRAME.scenes[0].emit("cleargame")},exit(){AFRAME.scenes[0].emit("gamemenuexit"),AFRAME.scenes[0].emit("cleargame")}}},function(e,t,n){"use strict";e.exports=function(e){return null!==e&&"object"==typeof e}},function(e,t){e.exports=[{name:"favorites",author:"You!",title:"Your Saved Favorites"},{name:"maps-for-new-players",author:"hoppaw",title:"Maps for New Players"},{name:"bsmg-anniversary-song-pack",author:"elliotttate",title:"BeastSaber Anniversary Pack"},{name:"fantasticflowvol1",author:"elliotttate",title:"Songs with Fantastic Flow Vol. 1"},{name:"fantasticflowvol2",author:"elliotttate",title:"Songs with Fantastic Flow Vol. 2"},{name:"songs-with-fantastic-flow-vol-3",author:"elliotttate",title:"Songs with Fantastic Flow Vol. 3"},{name:"songs-with-fantastic-flow-vol-4",author:"elliotttate",title:"Songs with Fantastic Flow Vol. 4"},{name:"songs-with-fantastic-flow-vol-5",author:"elliotttate",title:"Songs with Fantastic Flow Vol. 5"},{name:"workout-flow",author:"Quinn2018",title:"Workout Flow"},{name:"lemme-see-you-dance",author:"BennyDaBeast",title:"Lemme See You Dance"},{name:"best-of-kpop-vol-1",author:"K-Pop BS Discord",title:"Best of K-Pop Vol. 1"},{name:"best-of-k-pop-vol-2",author:"K-Pop BS Discord",title:"Best of K-Pop Vol. 2"}]},function(e,t,n){"use strict";n.r(t);var r=n(13);n(0),new THREE.Object3D,new THREE.Box3,new THREE.Box3;const i=2*Math.PI,o=e=>1-function(e,t){function n(e,t,n){return Math.min(Math.max(e,t),n)}const r=n(1.33,1,10),i=n(.5,.1,2);return e=>0===e||1===e?e:-r*Math.pow(2,10*(e-1))*Math.sin((e-1-i/(2*Math.PI)*Math.asin(1/r))*(2*Math.PI)/i)}()(1-e),a={once:!0},s=!!AFRAME.utils.getUrlParameter("synctest"),u=(new THREE.Object3D,new THREE.Vector3,"mine"),l={up:new THREE.Vector3(0,1,0),down:new THREE.Vector3(0,-1,0),left:new THREE.Vector3(-1,0,0),right:new THREE.Vector3(1,0,0),upleft:new THREE.Vector3(-1,1,0).normalize(),upright:new THREE.Vector3(1,1,0).normalize(),downleft:new THREE.Vector3(-1,-1,0).normalize(),downright:new THREE.Vector3(1,-1,0).normalize()},c={arrowblue:"blueBeatObjTemplate",arrowred:"redBeatObjTemplate",dotblue:"dotBlueObjTemplate",dotred:"dotRedObjTemplate",mine:"mineObjTemplate"},h={right:"blue",left:"red"},d={right:0,upright:45,up:90,upleft:135,left:180,downleft:225,down:270,downright:315},f={classic:.48,punch:.35,ride:.4};AFRAME.registerComponent("beat-system",{schema:{gameMode:{default:"classic",oneOf:["classic","punch","ride"]},hasVR:{default:!1},inVR:{default:!1},isLoading:{default:!1},isPlaying:{default:!1}},init:function(){this.beats=[],this.beatsToCheck=[],this.blades=[],this.fists=[],this.weapons=null,this.bladeEls=this.el.sceneEl.querySelectorAll("a-entity[blade]"),this.curveFollowRig=document.getElementById("curveFollowRig"),this.punchEls=this.el.sceneEl.querySelectorAll("a-entity[punch]"),this.curveEl=document.getElementById("curve"),this.size=f[this.data.gameMode],this.supercurveFollow=null},play:function(){for(let e=0;e<2;e++)this.blades.push(this.bladeEls[e].components.blade),this.fists.push(this.punchEls[e].components.punch);this.supercurve=this.curveEl.components.supercurve,this.supercurveFollow=this.curveFollowRig.components["supercurve-follow"]},update:function(e){this.size=f[this.data.gameMode],e.isLoading&&!this.data.isLoading&&(this.updateBeatPositioning(),this.weaponOffset="classic"===this.data.gameMode?1.15*r.SWORD_OFFSET:r.PUNCH_OFFSET,this.weaponOffset=this.weaponOffset/this.supercurve.curve.getLength()),e.gameMode!==this.data.gameMode&&(this.weapons="classic"===this.data.gameMode?this.blades:this.fists)},tick:function(e,t){if(!this.data.isPlaying||"ride"===this.data.gameMode)return;const n=this.beatsToCheck,r=(this.supercurve.curve,this.supercurveFollow.songProgress);n.length=0;for(let e=0;e<this.beats.length;e++){const t=this.beats[e];if(t.destroyed)continue;if(r<t.songPosition-this.weaponOffset)continue;let i=!0;for(let e=0;e<n.length&&(t.horizontalPosition===n[e].horizontalPosition&&t.verticalPosition===n[e].verticalPosition&&t.songPosition>n[e].songPosition&&(i=!1),i);e++);i&&n.push(t)}if(this.weapons[0].tickBeatSystem(e,t),this.weapons[1].tickBeatSystem(e,t),n.length)for(let e=0;e<n.length;e++)!s&&this.data.hasVR||n[e].data.type===u?this.checkCollision(n[e],this.weapons[0],this.weapons[1]):n[e].autoHit(this.weapons[0].el)},checkCollision:function(e,t,n){if(e.data.type===u)return t.checkCollision(e)?void e.onHit(t.el):void(n.checkCollision(e)&&e.onHit(n.el));const r=h[t.el.dataset.hand]===e.data.color?t:n;if(r.checkCollision(e))return void e.onHit(r.el);const i=r===t?n:t;if(i.checkCollision(e)){if("classic"===this.data.gameMode&&i.strokeSpeed<15)return;if("punch"===this.data.gameMode&&i.speed<2)return;e.onHit(i.el,!0),e.destroyBeat(i.el,!1)}},horizontalPositions:{},verticalPositions:{},updateBeatPositioning:function(){const e={classic:.95,ride:.95,punch:1.2};return function(){const t=this.data.gameMode,n=this.horizontalPositions,r=this.verticalPositions,i=this.el.sceneEl.camera.el.object3D.position.y-1.6,o=f[t],a="classic"===t?o:1.2*o;n.left=-1.5*a,n.middleleft=-.5*a,n.middleright=.5*a,n.right=1.5*a;const s=e[t],u=o;r.bottom=Math.max(.4,s+i),r.middle=Math.max(.4+u,s+u+i),r.top=Math.max(.4+2*u,s+2*u+i)}}(),registerBeat:function(e){this.beats.push(e)},unregisterBeat:function(e){this.beats.splice(this.beats.indexOf(e),1)}}),AFRAME.registerComponent("beat",{schema:{color:{default:"red",oneOf:["red","blue"]},debug:{default:!1},type:{default:"arrow",oneOf:["arrow","dot",u]}},init:function(){this.bbox=null,this.beatSystem=this.el.sceneEl.components["beat-system"],this.broken=null,this.brokenPoolName=void 0,this.destroyed=!1,this.hitEventDetail={},this.poolName=void 0,this.returnToPoolTimer=1e3,this.rotationAxis=new THREE.Vector3,this.superCutIdx=0,this.startPositionZ=void 0,this.warmupTime=0,this.weaponColors={right:"blue",left:"red"},this.curveEl=document.getElementById("curve"),this.curveFollowRig=document.getElementById("curveFollowRig"),this.mineParticles=document.getElementById("mineParticles"),this.rigContainer=document.getElementById("rigContainer"),this.superCuts=document.querySelectorAll(".superCutFx"),this.verticalPositions=this.beatSystem.verticalPositions,this.explodeEventDetail={beatDirection:"",color:this.data.color,correctHit:!1,direction:new THREE.Vector3,gameMode:"",position:new THREE.Vector3,rotation:new THREE.Euler},this.blockEl=document.createElement("a-entity"),this.blockEl.setAttribute("mixin","beatBlock"),this.el.appendChild(this.blockEl),this.initMesh(),this.data.type===u?this.poolName="pool__beat-mine":this.poolName=`pool__beat-${this.data.type}-${this.data.color}`},tick:function(e,t){const n=this.el;if(this.data,this.queueBeatHitEvent?(n.sceneEl.emit("beathit",this.queueBeatHitEvent,!0),this.queueBeatHitEvent=null):this.queueBeatWrongEvent&&(n.sceneEl.emit("beatwrong",null,!0),this.queueBeatWrongEvent=null),this.destroyed)return this.returnToPoolTimer-=t,void(this.returnToPoolTimer<=0&&this.returnToPool());if(this.warmupTime<2e3){const e=o(this.warmupTime/2e3);n.object3D.rotation.y=this.rotationStart+e*this.rotationChange,n.object3D.position.y=this.positionStart+e*this.positionChange,this.warmupTime+=t}const r="mine"===this.data.type?.25:1.25;n.object3D.position.z-r>this.curveFollowRig.object3D.position.z&&(this.returnToPool(),this.missHit())},onGenerate:function(e,t,n,r,o){const a=this.data,s=this.el;this.beatSystem.registerBeat(this);const u=f[this.beatSystem.data.gameMode]*(1/.29);if(this.blockEl.object3D.scale.set(u,u,u),r=r||"down",this.cutDirection=r,this.horizontalPosition=t,this.verticalPosition=n,this.songPosition=e,!this.blockEl)return void console.warn("Unable to generate beat. blockEl was undefined.");this.blockEl.object3D.visible=!0,this.destroyed=!1,s.object3D.visible=!0,this.warmupTime=0;const l=this.curveEl.components.supercurve;l.getPointAt(e,s.object3D.position),l.alignToCurve(e,s.object3D),s.object3D.position.x+=this.beatSystem.horizontalPositions[t],"dot"!==a.type&&(s.object3D.rotation.z=THREE.Math.degToRad(d[r])),this.rotationStart=s.object3D.rotation.y,this.rotationChange=i,Math.random>.5&&(this.rotationChange*=-1),s.object3D.position.y-=.5,this.positionStart=s.object3D.position.y,this.positionChange=this.verticalPositions[n]+.5+o},initMesh:function(){const e=this.blockEl,t=(this.el,this.data.type);!function e(t,n){if(!p[n]){const r=document.getElementById(n);if(!r.getObject3D("mesh"))return void r.addEventListener("object3dset",r=>{"mesh"===r.detail.type&&e(t,n)},a);p[n]=r.getObject3D("mesh").children[0].geometry}p[n]&&(t.getObject3D("mesh")||t.setObject3D("mesh",new THREE.Mesh),t.getObject3D("mesh").geometry=p[n])}(e,c["mine"!==t?`${t}${this.data.color}`:t]),e.setAttribute("materials","name","beat");const n=e.getObject3D("mesh");n.geometry.computeBoundingBox(),this.bbox=n.geometry.boundingBox,"mine"===this.data.type&&this.bbox.expandByScalar(-.25)},wrongHit:function(){this.destroyed=!0,this.queueBeatWrongEvent=!0},missHit:function(){this.data.type!==u&&this.el.sceneEl.emit("beatmiss",null,!0)},destroyBeat:function(e,t){this.data;const n=this.explodeEventDetail,r=this.rigContainer.object3D;let i;this.blockEl.object3D.visible=!1,this.destroyed=!0,this.returnToPoolTimer=1e3,n.beatDirection=this.cutDirection,n.color=this.data.color,n.correctHit=t,n.gameMode=this.beatSystem.data.gameMode,n.position.copy(this.el.object3D.position),r.worldToLocal(n.position),this.data.type===u?i="pool__beat-broken-mine":(i=`pool__${"classic"===this.beatSystem.data.gameMode?"beat":"punch"}-broken-${this.data.color}`,"dot"===this.data.type&&(i+="-dot")),this.broken=this.el.sceneEl.components[i].requestEntity(),this.broken&&this.broken.emit("explode",this.explodeEventDetail,!1),"classic"===this.beatSystem.data.gameMode&&t&&e.components.trail.pulse()},returnToPool:function(){this.beatSystem.unregisterBeat(this),this.el.object3D.position.set(0,0,-9999),this.el.object3D.visible=!1,this.el.sceneEl.components[this.poolName].returnEntity(this.el)},onHit:function(e,t){const n=this.data;try{e.components.haptics__beat.pulse()}catch(e){console.log(e)}if(this.el.parentNode.components["beat-hit-sound"].playSound(this.el,this.cutDirection),t)this.wrongHit();else{if(n.type===u)return this.destroyBeat(e,!1),void this.el.sceneEl.emit("minehit",null,!0);if("classic"===this.beatSystem.data.gameMode){let t=0;return"arrow"===n.type&&(t=e.components.blade.strokeDirectionVector.dot(l[this.cutDirection]))<.625?(this.destroyBeat(e,!1),void this.wrongHit()):(this.destroyBeat(e,!0),void this.calculateScoreBlade(e,t))}"punch"===this.beatSystem.data.gameMode&&(this.destroyBeat(e,!0),this.calculateScorePunch(e))}},score:function(e,t){const n=this.el,r=this.hitEventDetail;e=10*Math.ceil(parseInt(e,10)/10),r.percent=t,r.score=e,this.queueBeatHitEvent=r,t>=100&&(this.superCuts[this.superCutIdx].components.supercutfx.createSuperCut(n.object3D,this.data.color),this.superCutIdx=(this.superCutIdx+1)%this.superCuts.length)},calculateScoreBlade:function(e,t){const n=e.components.blade.strokeSpeed,r=e.components.blade.strokeSpeed/10*30;let i;i=n<=10?Math.min(r,30):m(g(n,10,25),10,25,30,50);let o=Math.min(r,30);"dot"===this.data.type?(i+=70,o+=70):(i+=70*t,o+=t>.97?70:70*t),this.score(i,o)},calculateScorePunch:function(e){const t=e.components.punch.speed,n=t/1.5*40;let r;r=t<=1.5?60+Math.min(n,40):60+m(g(t,1.5,6),1.5,6,40,70);const i=60+Math.min(n,40);this.score(r,i)},autoHit:function(e){const t=this.el;this.destroyBeat(e,Math.random()<.9),t.parentNode.components["beat-hit-sound"].playSound(t,this.cutDirection);const n=this.hitEventDetail;n.percent=100,n.score=100,this.queueBeatHitEvent=n}});const p={};function m(e,t,n,r,i){return r+(i-r)*(e-t)/(n-t)}function g(e,t,n){return Math.min(Math.max(e,t),n)}if(window.AFRAME){const t=["beat-system","beat"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i,o=n(7),a=n(15),s=n(22),u=n(23),l=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),c=new a.ErrorFactory("app","Firebase",l),h="@firebase/app",d="[DEFAULT]",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.Logger("@firebase/app"),m=function(){function e(e,t,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=a.deepCopy(e),this.container=new s.ComponentContainer(t.name),this._addComponent(new s.Component("app",(function(){return u}),"PUBLIC"));try{for(var l=o.__values(this.firebase_.INTERNAL.components.values()),c=l.next();!c.done;c=l.next()){var h=c.value;this._addComponent(h)}}catch(e){r={error:e}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map((function(e){return e.delete()})))})).then((function(){e.isDeleted_=!0}))},e.prototype._getService=function(e,t){return void 0===t&&(t=d),this.checkDestroyed_(),this.container.getProvider(e).getImmediate({identifier:t})},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=d),this.container.getProvider(e).clearInstance(t)},e.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){p.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},e.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw c.create("app-deleted",{appName:this.name_})},e}();m.prototype.name&&m.prototype.options||m.prototype.delete||console.log("dc");var g=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function e(){var t=function(e){var t={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=d);var s=o.name;if("string"!=typeof s||!s)throw c.create("bad-app-name",{appName:String(s)});if(a.contains(t,s))throw c.create("duplicate-app",{appName:s});var u=new e(n,o,r);return t[s]=u,u},app:i,registerVersion:function(e,t,n){var r,i=null!==(r=f[e])&&void 0!==r?r:e;n&&(i+="-"+n);var o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){var u=['Unable to register library "'+i+'" with version "'+t+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&a&&u.push("and"),a&&u.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void p.warn(u.join(" "))}l(new s.Component(i+"-version",(function(){return{library:i,version:t}}),"VERSION"))},setLogLevel:u.setLogLevel,onLog:function(e,t){if(null!==e&&"function"!=typeof e)throw c.create("invalid-log-argument",{appName:name});u.setUserLogHandler(e,t)},apps:null,SDK_VERSION:"7.18.0",INTERNAL:{registerComponent:l,removeApp:function(e){delete t[e]},components:n,useAsService:function(e,t){return"serverAuth"===t?null:t}}};function i(e){if(e=e||d,!a.contains(t,e))throw c.create("no-app",{appName:e});return t[e]}function l(s){var u,l,h=s.name;if(n.has(h))return p.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===s.type?r[h]:null;if(n.set(h,s),"PUBLIC"===s.type){var d=function(e){if(void 0===e&&(e=i()),"function"!=typeof e[h])throw c.create("invalid-app-argument",{appName:h});return e[h]()};void 0!==s.serviceProps&&a.deepExtend(d,s.serviceProps),r[h]=d,e.prototype[h]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this._getService.bind(this,h);return n.apply(this,s.multipleInstances?e:[])}}try{for(var f=o.__values(Object.keys(t)),m=f.next();!m.done;m=f.next()){var g=m.value;t[g]._addComponent(s)}}catch(e){u={error:e}}finally{try{m&&!m.done&&(l=f.return)&&l.call(f)}finally{if(u)throw u.error}}return"PUBLIC"===s.type?r[h]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(t).map((function(e){return t[e]}))}}),i.App=e,r}(m);return t.INTERNAL=o.__assign(o.__assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){a.deepExtend(t,e)},createSubscribe:a.createSubscribe,ErrorFactory:a.ErrorFactory,deepExtend:a.deepExtend}),t}(),y=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)){var t=e.getImmediate();return t.library+"/"+t.version}return null})).filter((function(e){return e})).join(" ")},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if(a.isBrowser()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=g.initializeApp;g.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.isNode()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),b.apply(void 0,e)};var A=g;!function(e,t){e.INTERNAL.registerComponent(new s.Component("platform-logger",(function(e){return new y(e)}),"PRIVATE")),e.registerVersion(h,"0.6.10",void 0),e.registerVersion("fire-js","")}(A),t.default=A,t.firebase=A},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),i=n(15),o=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e}(),a="[DEFAULT]",s=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return e.prototype.get=function(e){void 0===e&&(e=a);var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new i.Deferred;this.instancesDeferred.set(t,n);try{var r=this.getOrInitializeService(t);r&&n.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t=r.__assign({identifier:a,optional:!1},e),n=t.identifier,i=t.optional,o=this.normalizeInstanceIdentifier(n);try{var s=this.getOrInitializeService(o);if(!s){if(i)return null;throw Error("Service "+this.name+" is not available")}return s}catch(e){if(i)return null;throw e}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))try{this.getOrInitializeService(a)}catch(e){}try{for(var i=r.__values(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=r.__read(o.value,2),u=s[0],l=s[1],c=this.normalizeInstanceIdentifier(u);try{var h=this.getOrInitializeService(c);l.resolve(h)}catch(e){}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e.prototype.clearInstance=function(e){void 0===e&&(e=a),this.instancesDeferred.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))];case 1:return t.sent(),[2]}}))}))},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.getOrInitializeService=function(e){var t=this.instances.get(e);return!t&&this.component&&(t=this.component.instanceFactory(this.container,function(e){return e===a?void 0:e}(e)),this.instances.set(e,t)),t||null},e.prototype.normalizeInstanceIdentifier=function(e){return this.component?this.component.multipleInstances?e:a:e},e}(),u=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new s(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();t.Component=o,t.ComponentContainer=u,t.Provider=s},function(e,t,n){"use strict";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function r(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var i;n.r(t),n.d(t,"LogLevel",(function(){return o})),n.d(t,"Logger",(function(){return h})),n.d(t,"setLogLevel",(function(){return d})),n.d(t,"setUserLogHandler",(function(){return f}));var o,a=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(o||(o={}));var s={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,l=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),c=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(t<e.logLevel)){var o=(new Date).toISOString(),a=l[t];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[a].apply(console,r(["["+o+"]  "+e.name+":"],n))}},h=function(){function e(e){this.name=e,this._logLevel=u,this._logHandler=c,this._userLogHandler=null,a.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in o))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?s[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],e)),this._logHandler.apply(this,r([this,o.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],e)),this._logHandler.apply(this,r([this,o.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],e)),this._logHandler.apply(this,r([this,o.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],e)),this._logHandler.apply(this,r([this,o.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],e)),this._logHandler.apply(this,r([this,o.ERROR],e))},e}();function d(e){a.forEach((function(t){t.setLogLevel(e)}))}function f(e,t){for(var n=function(n){var r=null;t&&t.level&&(r=s[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=i.map((function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}})).filter((function(e){return e})).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:o[n].toLowerCase(),message:s,args:i,type:t.name})}},r=0,i=a;r<i.length;r++)n(i[r])}},function(e,t){e.exports="#define T time * 0.06\nvarying vec2 uvs;\nuniform float time;\nuniform float thickness;\nvoid main() {\n  uvs.xy = uv.xy;\n  vec3 pos = position;\n\n  pos.x *= thickness + sin(T) * ((0.1 + uv.x) * 16.0 + uv.y * 4.9) * thickness * 0.005;\n  pos.z *= thickness + cos(T) * ((0.1 + uv.x) * 13.0 + uv.y * 14.9) * thickness * 0.005;\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n}"},function(e,t){e.exports="varying vec2 uvs;\nuniform sampler2D src;\nuniform vec3 color;\nuniform float time;\n\n#define T time * 0.04\n\nvoid main() {\n  vec2 uv = uvs;\n  uv += T * 0.05;\n  vec3 col = texture2D(src, uv).xyz;\n  float core = step(0.125, uvs.x);\n  gl_FragColor = vec4(col * color, mix(1.0, 0.07, core));\n}"},function(e,t){e.exports="varying vec2 uvs;\nuniform sampler2D src;\nuniform vec3 color;\nuniform float time;\n\n#define T time * 0.03\n\nvoid main() {\n  vec3 col = texture2D(src, uvs * vec2(1.0, 0.7) + vec2(T * 0.01, T * 0.05)).xyz;\n  gl_FragColor = vec4(col * color, 0.4 * uvs.y);\n}\n"},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},function(e,t,n){e.exports=function(e,t){return function(n,i,o){if("function"==typeof n&&"object"==typeof i||"object"==typeof o)throw new r.AlgoliaSearchError("index.search usage is index.search(query, params, cb)");0===arguments.length||"function"==typeof n?(o=n,n=""):1!==arguments.length&&"function"!=typeof i||(o=i,i=void 0),"object"==typeof n&&null!==n?(i=n,n=void 0):null==n&&(n="");var a,s="";return void 0!==n&&(s+=e+"="+encodeURIComponent(n)),void 0!==i&&(i.additionalUA&&(a=i.additionalUA,delete i.additionalUA),s=this.as._getSearchParams(i,s)),this._search(s,t,o,a)}};var r=n(9)},function(e,t,n){e.exports=function(e,t){var r=n(156),i=n(3),o={};return i(r(e),(function(n){!0!==t(n)&&(o[n]=e[n])})),o}},function(e,t,n){"use strict";var r=Object.prototype.toString;e.exports=function(e){var t=r.call(e),n="[object Arguments]"===t;return n||(n="[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===r.call(e.callee)),n}},function(e,t,n){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?o(a(e),(function(a){var s=encodeURIComponent(r(a))+n;return i(e[a])?o(e[a],(function(e){return s+encodeURIComponent(r(e))})).join(t):s+encodeURIComponent(r(e[a]))})).join(t):s?encodeURIComponent(r(s))+n+encodeURIComponent(r(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function o(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){"use strict";n.r(t),n.d(t,"objet_api",(function(){return r})),n.d(t,"startApi",(function(){return o}));var r=n(17).obj;function i(e){e.keys().forEach(e)}function o(){console.time=()=>{},console.timeEnd=()=>{},n(39),n(40),n(41),n(42),n(43),n(44),n(46),n(47),AFRAME.log=()=>{},n(49),n(51),n(52),n(53),n(54),n(55),i(n(56)),i(n(210)),n(213),n(220),e.hot.accept(),document.addEventListener("DOMContentLoaded",()=>{!function(){const e=document.querySelector("div.subscribeForm form");if(!e)return;if(localStorage.getItem("subscribeClosed")){const t=e.parentNode;return void t.parentNode.removeChild(t)}document.getElementById("subscribeClose").addEventListener("click",()=>{const t=e.parentNode;t.parentNode.removeChild(t),localStorage.setItem("subscribeClosed",!0)});const t=e.querySelector(".submit"),n=e.querySelector('input[type="email"]'),r=document.querySelector("#subscribeForm > h2");let i="";r&&(i=r.innerHTML),e.addEventListener("submit",e=>{e.preventDefault();const n=new XMLHttpRequest;let i="http://localhost:5000/mail/subscribe";return i="https://supermedium.com/mail/subscribe",n.open("POST","https://supermedium.com/mail/subscribe"),n.addEventListener("load",()=>{200!==parseInt(n.status,10)&&(window.location.href="https://supermedium/subscribe/"),t&&(t.disabled=!0,t.innerHTML="Subscribed!"),r&&(r.innerHTML="Successfully subscribed, thank you!")}),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.send(JSON.stringify({email:document.querySelector('[name="email"]').value,source:"moonrider"})),!1}),t&&n.addEventListener("keydown",()=>{t.hasAttribute("disabled")&&(t.innerHTML="Subscribe",t.removeAttribute("disabled")),r&&i&&(r.innerHTML=i)})}()}),"http:"!==window.location.protocol||window.location.host.startsWith("localhost")||window.location.replace("https:"+location.href.substring(location.protocol.length))}},function(e,t,n){var r;"undefined"!=typeof window?r=window:"undefined"!=typeof self?r=self:(console.warn("Using browser-only version of superagent in non-browser environment"),r=this);var i=n(34),o=n(35),a=n(18),s=n(36),u=n(38);function l(){}var c=t=e.exports=function(e,n){return"function"==typeof n?new t.Request("GET",e).end(n):1==arguments.length?new t.Request("GET",e):new t.Request(e,n)};t.Request=y,c.getXHR=function(){if(!(!r.XMLHttpRequest||r.location&&"file:"==r.location.protocol&&r.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw Error("Browser-only version of superagent could not find XHR")};var h="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};function d(e){if(!a(e))return e;var t=[];for(var n in e)f(t,n,e[n]);return t.join("&")}function f(e,t,n){if(null!=n)if(Array.isArray(n))n.forEach((function(n){f(e,t,n)}));else if(a(n))for(var r in n)f(e,t+"["+r+"]",n[r]);else e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));else null===n&&e.push(encodeURIComponent(t))}function p(e){for(var t,n,r={},i=e.split("&"),o=0,a=i.length;o<a;++o)-1==(n=(t=i[o]).indexOf("="))?r[decodeURIComponent(t)]="":r[decodeURIComponent(t.slice(0,n))]=decodeURIComponent(t.slice(n+1));return r}function m(e){return/[\/+]json($|[^-\w])/.test(e)}function g(e){this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var t=this.xhr.status;1223===t&&(t=204),this._setStatusProperties(t),this.header=this.headers=function(e){for(var t,n,r,i,o=e.split(/\r?\n/),a={},s=0,u=o.length;s<u;++s)-1!==(t=(n=o[s]).indexOf(":"))&&(r=n.slice(0,t).toLowerCase(),i=h(n.slice(t+1)),a[r]=i);return a}(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&e._responseType?this.body=this.xhr.response:this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function y(e,t){var n=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",(function(){var e,t=null,r=null;try{r=new g(n)}catch(e){return(t=new Error("Parser is unable to parse the response")).parse=!0,t.original=e,n.xhr?(t.rawResponse=void 0===n.xhr.responseType?n.xhr.responseText:n.xhr.response,t.status=n.xhr.status?n.xhr.status:null,t.statusCode=t.status):(t.rawResponse=null,t.status=null),n.callback(t)}n.emit("response",r);try{n._isResponseOK(r)||(e=new Error(r.statusText||"Unsuccessful HTTP response"))}catch(t){e=t}e?(e.original=t,e.response=r,e.status=r.status,n.callback(e,r)):n.callback(null,r)}))}function v(e,t,n){var r=c("DELETE",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r}c.serializeObject=d,c.parseString=p,c.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},c.serialize={"application/x-www-form-urlencoded":d,"application/json":JSON.stringify},c.parse={"application/x-www-form-urlencoded":p,"application/json":JSON.parse},s(g.prototype),g.prototype._parseBody=function(e){var t=c.parse[this.type];return this.req._parser?this.req._parser(this,e):(!t&&m(this.type)&&(t=c.parse["application/json"]),t&&e&&(e.length||e instanceof Object)?t(e):null)},g.prototype.toError=function(){var e=this.req,t=e.method,n=e.url,r="cannot "+t+" "+n+" ("+this.status+")",i=new Error(r);return i.status=this.status,i.method=t,i.url=n,i},c.Response=g,i(y.prototype),o(y.prototype),y.prototype.type=function(e){return this.set("Content-Type",c.types[e]||e),this},y.prototype.accept=function(e){return this.set("Accept",c.types[e]||e),this},y.prototype.auth=function(e,t,n){1===arguments.length&&(t=""),"object"==typeof t&&null!==t&&(n=t,t=""),n||(n={type:"function"==typeof btoa?"basic":"auto"});var r=function(e){if("function"==typeof btoa)return btoa(e);throw new Error("Cannot use basic auth, btoa is not a function")};return this._auth(e,t,n,r)},y.prototype.query=function(e){return"string"!=typeof e&&(e=d(e)),e&&this._query.push(e),this},y.prototype.attach=function(e,t,n){if(t){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(e,t,n||t.name)}return this},y.prototype._getFormData=function(){return this._formData||(this._formData=new r.FormData),this._formData},y.prototype.callback=function(e,t){if(this._shouldRetry(e,t))return this._retry();var n=this._callback;this.clearTimeout(),e&&(this._maxRetries&&(e.retries=this._retries-1),this.emit("error",e)),n(e,t)},y.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},y.prototype.buffer=y.prototype.ca=y.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},y.prototype.pipe=y.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},y.prototype._isHost=function(e){return e&&"object"==typeof e&&!Array.isArray(e)&&"[object Object]"!==Object.prototype.toString.call(e)},y.prototype.end=function(e){return this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=e||l,this._finalizeQueryString(),this._end()},y.prototype._end=function(){var e=this,t=this.xhr=c.getXHR(),n=this._formData||this._data;this._setTimeouts(),t.onreadystatechange=function(){var n=t.readyState;if(n>=2&&e._responseTimeoutTimer&&clearTimeout(e._responseTimeoutTimer),4==n){var r;try{r=t.status}catch(e){r=0}if(!r){if(e.timedout||e._aborted)return;return e.crossDomainError()}e.emit("end")}};var r=function(t,n){n.total>0&&(n.percent=n.loaded/n.total*100),n.direction=t,e.emit("progress",n)};if(this.hasListeners("progress"))try{t.onprogress=r.bind(null,"download"),t.upload&&(t.upload.onprogress=r.bind(null,"upload"))}catch(e){}try{this.username&&this.password?t.open(this.method,this.url,!0,this.username,this.password):t.open(this.method,this.url,!0)}catch(e){return this.callback(e)}if(this._withCredentials&&(t.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof n&&!this._isHost(n)){var i=this._header["content-type"],o=this._serializer||c.serialize[i?i.split(";")[0]:""];!o&&m(i)&&(o=c.serialize["application/json"]),o&&(n=o(n))}for(var a in this.header)null!=this.header[a]&&this.header.hasOwnProperty(a)&&t.setRequestHeader(a,this.header[a]);return this._responseType&&(t.responseType=this._responseType),this.emit("request",this),t.send(void 0!==n?n:null),this},c.agent=function(){return new u},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach((function(e){u.prototype[e.toLowerCase()]=function(t,n){var r=new c.Request(e,t);return this._setDefaults(r),n&&r.end(n),r}})),u.prototype.del=u.prototype.delete,c.get=function(e,t,n){var r=c("GET",e);return"function"==typeof t&&(n=t,t=null),t&&r.query(t),n&&r.end(n),r},c.head=function(e,t,n){var r=c("HEAD",e);return"function"==typeof t&&(n=t,t=null),t&&r.query(t),n&&r.end(n),r},c.options=function(e,t,n){var r=c("OPTIONS",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},c.del=v,c.delete=v,c.patch=function(e,t,n){var r=c("PATCH",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},c.post=function(e,t,n){var r=c("POST",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},c.put=function(e,t,n){var r=c("PUT",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r}},function(e,t,n){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){"use strict";var r=n(18);function i(e){if(e)return function(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}(e)}e.exports=i,i.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},i.prototype.parse=function(e){return this._parser=e,this},i.prototype.responseType=function(e){return this._responseType=e,this},i.prototype.serialize=function(e){return this._serializer=e,this},i.prototype.timeout=function(e){if(!e||"object"!=typeof e)return this._timeout=e,this._responseTimeout=0,this;for(var t in e)switch(t){case"deadline":this._timeout=e.deadline;break;case"response":this._responseTimeout=e.response;break;default:console.warn("Unknown timeout option",t)}return this},i.prototype.retry=function(e,t){return 0!==arguments.length&&!0!==e||(e=1),e<=0&&(e=0),this._maxRetries=e,this._retries=0,this._retryCallback=t,this};var o=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];i.prototype._shouldRetry=function(e,t){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var n=this._retryCallback(e,t);if(!0===n)return!0;if(!1===n)return!1}catch(e){console.error(e)}if(t&&t.status&&t.status>=500&&501!=t.status)return!0;if(e){if(e.code&&~o.indexOf(e.code))return!0;if(e.timeout&&"ECONNABORTED"==e.code)return!0;if(e.crossDomain)return!0}return!1},i.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},i.prototype.then=function(e,t){if(!this._fullfilledPromise){var n=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise((function(e,t){n.end((function(n,r){n?t(n):e(r)}))}))}return this._fullfilledPromise.then(e,t)},i.prototype.catch=function(e){return this.then(void 0,e)},i.prototype.use=function(e){return e(this),this},i.prototype.ok=function(e){if("function"!=typeof e)throw Error("Callback required");return this._okCallback=e,this},i.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):e.status>=200&&e.status<300)},i.prototype.get=function(e){return this._header[e.toLowerCase()]},i.prototype.getHeader=i.prototype.get,i.prototype.set=function(e,t){if(r(e)){for(var n in e)this.set(n,e[n]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},i.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},i.prototype.field=function(e,t){if(null==e)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),r(e)){for(var n in e)this.field(n,e[n]);return this}if(Array.isArray(t)){for(var i in t)this.field(e,t[i]);return this}if(null==t)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof t&&(t=""+t),this._getFormData().append(e,t),this},i.prototype.abort=function(){return this._aborted||(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort")),this},i.prototype._auth=function(e,t,n,r){switch(n.type){case"basic":this.set("Authorization","Basic "+r(e+":"+t));break;case"auto":this.username=e,this.password=t;break;case"bearer":this.set("Authorization","Bearer "+e)}return this},i.prototype.withCredentials=function(e){return null==e&&(e=!0),this._withCredentials=e,this},i.prototype.redirects=function(e){return this._maxRedirects=e,this},i.prototype.maxResponseSize=function(e){if("number"!=typeof e)throw TypeError("Invalid argument");return this._maxResponseSize=e,this},i.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},i.prototype.send=function(e){var t=r(e),n=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),t&&!this._data)Array.isArray(e)?this._data=[]:this._isHost(e)||(this._data={});else if(e&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(t&&r(this._data))for(var i in e)this._data[i]=e[i];else"string"==typeof e?(n||this.type("form"),n=this._header["content-type"],this._data="application/x-www-form-urlencoded"==n?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return!t||this._isHost(e)||n||this.type("json"),this},i.prototype.sortQuery=function(e){return this._sort=void 0===e||e,this},i.prototype._finalizeQueryString=function(){var e=this._query.join("&");if(e&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+e),this._query.length=0,this._sort){var t=this.url.indexOf("?");if(t>=0){var n=this.url.substring(t+1).split("&");"function"==typeof this._sort?n.sort(this._sort):n.sort(),this.url=this.url.substring(0,t)+"?"+n.join("&")}}},i.prototype._appendQueryString=function(){console.trace("Unsupported")},i.prototype._timeoutError=function(e,t,n){if(!this._aborted){var r=new Error(e+t+"ms exceeded");r.timeout=t,r.code="ECONNABORTED",r.errno=n,this.timedout=!0,this.abort(),this.callback(r)}},i.prototype._setTimeouts=function(){var e=this;this._timeout&&!this._timer&&(this._timer=setTimeout((function(){e._timeoutError("Timeout of ",e._timeout,"ETIME")}),this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout((function(){e._timeoutError("Response timeout of ",e._responseTimeout,"ETIMEDOUT")}),this._responseTimeout))}},function(e,t,n){"use strict";var r=n(37);function i(e){if(e)return function(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}(e)}e.exports=i,i.prototype.get=function(e){return this.header[e.toLowerCase()]},i.prototype._setHeaderProperties=function(e){var t=e["content-type"]||"";this.type=r.type(t);var n=r.params(t);for(var i in n)this[i]=n[i];this.links={};try{e.link&&(this.links=r.parseLinks(e.link))}catch(e){}},i.prototype._setStatusProperties=function(e){var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.redirect=3==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.created=201==e,this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.forbidden=403==e,this.notFound=404==e,this.unprocessableEntity=422==e}},function(e,t,n){"use strict";t.type=function(e){return e.split(/ *; */).shift()},t.params=function(e){return e.split(/ *; */).reduce((function(e,t){var n=t.split(/ *= */),r=n.shift(),i=n.shift();return r&&i&&(e[r]=i),e}),{})},t.parseLinks=function(e){return e.split(/ *, */).reduce((function(e,t){var n=t.split(/ *; */),r=n[0].slice(1,-1);return e[n[1].split(/ *= */)[1].slice(1,-1)]=r,e}),{})},t.cleanHeader=function(e,t){return delete e["content-type"],delete e["content-length"],delete e["transfer-encoding"],delete e.host,t&&(delete e.authorization,delete e.cookie),e}},function(e,t){function n(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach((function(e){n.prototype[e]=function(){return this._defaults.push({fn:e,arguments:arguments}),this}})),n.prototype._setDefaults=function(e){this._defaults.forEach((function(t){e[t.fn].apply(e,t.arguments)}))},e.exports=n},function(e,t){THREE.BufferGeometryUtils={computeTangents:function(e){var t=e.index,n=e.attributes;if(null!==t&&void 0!==n.position&&void 0!==n.normal&&void 0!==n.uv){var r=t.array,i=n.position.array,o=n.normal.array,a=n.uv.array,s=i.length/3;void 0===n.tangent&&e.addAttribute("tangent",new THREE.BufferAttribute(new Float32Array(4*s),4));for(var u=n.tangent.array,l=[],c=[],h=0;h<s;h++)l[h]=new THREE.Vector3,c[h]=new THREE.Vector3;var d=new THREE.Vector3,f=new THREE.Vector3,p=new THREE.Vector3,m=new THREE.Vector2,g=new THREE.Vector2,y=new THREE.Vector2,v=new THREE.Vector3,b=new THREE.Vector3,A=e.groups;0===A.length&&(A=[{start:0,count:r.length}]);for(var E=0,w=A.length;E<w;++E)for(var S=F=(O=A[E]).start,_=F+O.count;S<_;S+=3)C(r[S+0],r[S+1],r[S+2]);var x,k,R,N=new THREE.Vector3,T=new THREE.Vector3,M=new THREE.Vector3,D=new THREE.Vector3;for(E=0,w=A.length;E<w;++E){var O,F;for(S=F=(O=A[E]).start,_=F+O.count;S<_;S+=3)I(r[S+0]),I(r[S+1]),I(r[S+2])}}else console.warn("THREE.BufferGeometry: Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");function C(e,t,n){d.fromArray(i,3*e),f.fromArray(i,3*t),p.fromArray(i,3*n),m.fromArray(a,2*e),g.fromArray(a,2*t),y.fromArray(a,2*n);var r=f.x-d.x,o=p.x-d.x,s=f.y-d.y,u=p.y-d.y,h=f.z-d.z,A=p.z-d.z,E=g.x-m.x,w=y.x-m.x,S=g.y-m.y,_=y.y-m.y,x=1/(E*_-w*S);v.set((_*r-S*o)*x,(_*s-S*u)*x,(_*h-S*A)*x),b.set((E*o-w*r)*x,(E*u-w*s)*x,(E*A-w*h)*x),l[e].add(v),l[t].add(v),l[n].add(v),c[e].add(b),c[t].add(b),c[n].add(b)}function I(e){M.fromArray(o,3*e),D.copy(M),k=l[e],N.copy(k),N.sub(M.multiplyScalar(M.dot(k))).normalize(),T.crossVectors(D,k),R=T.dot(c[e]),x=R<0?-1:1,u[4*e]=N.x,u[4*e+1]=N.y,u[4*e+2]=N.z,u[4*e+3]=x}},mergeBufferGeometries:function(e,t){for(var n=null!==e[0].index,r=new Set(Object.keys(e[0].attributes)),i=new Set(Object.keys(e[0].morphAttributes)),o={},a={},s=new THREE.BufferGeometry,u=0,l=0;l<e.length;++l){var c=e[l];if(n!==(null!==c.index))return null;for(var h in c.attributes){if(!r.has(h))return null;void 0===o[h]&&(o[h]=[]),o[h].push(c.attributes[h])}for(var h in c.morphAttributes){if(!i.has(h))return null;void 0===a[h]&&(a[h]=[]),a[h].push(c.morphAttributes[h])}if(s.userData.mergedUserData=s.userData.mergedUserData||[],s.userData.mergedUserData.push(c.userData),t){var d;if(n)d=c.index.count;else{if(void 0===c.attributes.position)return null;d=c.attributes.position.count}s.addGroup(u,d,l),u+=d}}if(n){var f=0,p=[];for(l=0;l<e.length;++l){var m=e[l].index;if(f>0){m=m.clone();for(var g=0;g<m.count;++g)m.setX(g,m.getX(g)+f)}p.push(m),f+=e[l].attributes.position.count}var y=this.mergeBufferAttributes(p);if(!y)return null;s.index=y}for(var h in o){var v=this.mergeBufferAttributes(o[h]);if(!v)return null;s.addAttribute(h,v)}for(var h in a){var b=a[h][0].length;if(0===b)break;for(s.morphAttributes=s.morphAttributes||{},s.morphAttributes[h]=[],l=0;l<b;++l){var A=[];for(g=0;g<a[h].length;++g)A.push(a[h][g][l]);var E=this.mergeBufferAttributes(A);if(!E)return null;s.morphAttributes[h].push(E)}}return s},mergeBufferAttributes:function(e){for(var t,n,r,i=0,o=0;o<e.length;++o){var a=e[o];if(a.isInterleavedBufferAttribute)return null;if(void 0===t&&(t=a.array.constructor),t!==a.array.constructor)return null;if(void 0===n&&(n=a.itemSize),n!==a.itemSize)return null;if(void 0===r&&(r=a.normalized),r!==a.normalized)return null;i+=a.array.length}for(var s=new t(i),u=0,l=0;l<e.length;++l)s.set(e[l].array,u),u+=e[l].array.length;return new THREE.BufferAttribute(s,n,r)},toTrianglesDrawMode:function(e,t){if(t===THREE.TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===THREE.TriangleFanDrawMode||t===THREE.TriangleStripDrawMode){var n=e.getIndex();if(null===n){var r=[],i=e.getAttribute("position");if(void 0===i)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var o=0;o<i.count;o++)r.push(o);e.setIndex(r),n=e.getIndex()}var a=n.count-2,s=[];if(t===THREE.TriangleFanDrawMode)for(o=1;o<=a;o++)s.push(n.getX(0)),s.push(n.getX(o)),s.push(n.getX(o+1));else for(o=0;o<a;o++)o%2==0?(s.push(n.getX(o)),s.push(n.getX(o+1)),s.push(n.getX(o+2))):(s.push(n.getX(o+2)),s.push(n.getX(o+1)),s.push(n.getX(o)));s.length/3!==a&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var u=e.clone();return u.setIndex(s),u.clearGroups(),u}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}}},function(e,t){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");const n={childList:!0,attributes:!0,subtree:!0};AFRAME.registerComponent("aabb-collider",{schema:{collideNonVisible:{default:!1},debug:{default:!1},enabled:{default:!0},interval:{default:80},objects:{default:""}},init:function(){this.centerDifferenceVec3=new THREE.Vector3,this.clearedIntersectedEls=[],this.closestIntersectedEl=null,this.boundingBox=new THREE.Box3,this.boxCenter=new THREE.Vector3,this.boxHelper=new THREE.BoxHelper,this.boxMax=new THREE.Vector3,this.boxMin=new THREE.Vector3,this.hitClosestClearEventDetail={},this.hitClosestEventDetail={},this.intersectedEls=[],this.objectEls=[],this.newIntersectedEls=[],this.prevCheckTime=void 0,this.previousIntersectedEls=[],this.setDirty=this.setDirty.bind(this),this.observer=new MutationObserver(this.setDirty),this.dirty=!0,this.hitStartEventDetail={intersectedEls:this.newIntersectedEls}},play:function(){this.observer.observe(this.el.sceneEl,n),this.el.sceneEl.addEventListener("object3dset",this.setDirty),this.el.sceneEl.addEventListener("object3dremove",this.setDirty)},remove:function(){this.observer.disconnect(),this.el.sceneEl.removeEventListener("object3dset",this.setDirty),this.el.sceneEl.removeEventListener("object3dremove",this.setDirty)},tick:function(e){const t=this.boundingBox,n=this.centerDifferenceVec3,r=this.clearedIntersectedEls,i=this.el,o=this.intersectedEls,a=this.newIntersectedEls,s=this.objectEls,u=this.prevCheckTime,l=this.previousIntersectedEls;let c,h,d;if(this.data.enabled&&!(u&&e-u<this.data.interval)){for(this.prevCheckTime=e,this.dirty&&this.refreshObjects(),t.setFromObject(i.object3D),this.boxMin.copy(t.min),this.boxMax.copy(t.max),t.getCenter(this.boxCenter),this.data.debug&&(this.boxHelper.setFromObject(i.object3D),this.boxHelper.parent||i.sceneEl.object3D.add(this.boxHelper)),function(e,t){e.length=0;for(let n=0;n<t.length;n++)e[n]=t[n]}(l,o),o.length=0,d=0;d<s.length;d++)if(s[d]!==this.el)if(this.data.collideNonVisible||s[d].getAttribute("visible"))this.isIntersecting(s[d])&&o.push(s[d]);else if(this.data.debug){const e=s[d].object3D.boxHelper;e&&(i.sceneEl.object3D.remove(e),s[d].object3D.boxHelper=null)}for(a.length=0,d=0;d<o.length;d++)-1===l.indexOf(o[d])&&a.push(o[d]);for(r.length=0,d=0;d<l.length;d++)-1===o.indexOf(l[d])&&(l[d].hasAttribute("aabb-collider")||l[d].emit("hitend"),r.push(l[d]));for(d=0;d<a.length;d++)a[d]!==this.el&&(a[d].hasAttribute("aabb-collider")||a[d].emit("hitstart"));for(d=0;d<o.length;d++)o[d]!==this.el&&(n.copy(o[d].object3D.boundingBoxCenter).sub(this.boxCenter),(void 0===c||n.length()<c)&&(c=n.length(),h=o[d]));!o.length&&this.closestIntersectedEl?(this.hitClosestClearEventDetail.el=this.closestIntersectedEl,this.closestIntersectedEl.emit("hitclosestclear"),this.closestIntersectedEl=null,i.emit("hitclosestclear",this.hitClosestClearEventDetail)):h!==this.closestIntersectedEl&&(this.closestIntersectedEl&&(this.hitClosestClearEventDetail.el=this.closestIntersectedEl,this.closestIntersectedEl.emit("hitclosestclear",this.hitClosestClearEventDetail)),h&&(h.emit("hitclosest"),this.closestIntersectedEl=h,this.hitClosestEventDetail.el=h,i.emit("hitclosest",this.hitClosestEventDetail))),r.length&&i.emit("hitend"),a.length&&i.emit("hitstart",this.hitStartEventDetail)}},isIntersecting:function(){const e=new THREE.Box3;return function(t){let n;t.dataset.aabbColliderDynamic&&(e.setFromObject(t.object3D),n=e,t.object3D.boundingBoxCenter=t.object3D.boundingBoxCenter||new THREE.Vector3,n.getCenter(t.object3D.boundingBoxCenter)),t.dataset.aabbColliderDynamic||(t.object3D.aabbBox||(t.object3D.aabbBox=(new THREE.Box3).setFromObject(t.object3D),t.object3D.boundingBoxCenter=new THREE.Vector3,t.object3D.aabbBox.getCenter(t.object3D.boundingBoxCenter)),n=t.object3D.aabbBox),this.data.debug&&(t.object3D.boxHelper||(t.object3D.boxHelper=new THREE.BoxHelper(t.object3D,new THREE.Color(Math.random(),Math.random(),Math.random())),t.sceneEl.object3D.add(t.object3D.boxHelper)),t.object3D.boxHelper.setFromObject(t.object3D));const r=n.min,i=n.max;return this.boxMin.x<=i.x&&this.boxMax.x>=r.x&&this.boxMin.y<=i.y&&this.boxMax.y>=r.y&&this.boxMin.z<=i.z&&this.boxMax.z>=r.z}}(),setDirty:function(){this.dirty=!0},refreshObjects:function(){const e=this.data;this.objectEls=e.objects?this.el.sceneEl.querySelectorAll(e.objects):this.el.sceneEl.children,this.dirty=!1}})},function(e,t){var n=[new THREE.Vector2,new THREE.Vector2,new THREE.Vector2,new THREE.Vector2];function r(e,t,r,i){const o=1/i,a=1/r;return n[0].set(o*t,a*e+a),n[1].set(o*t,a*e),n[2].set(o*t+o,a*e),n[3].set(o*t+o,a*e+a),n}AFRAME.registerComponent("atlas-uvs",{dependencies:["geometry"],schema:{totalColumns:{type:"int",default:1},totalRows:{type:"int",default:1},column:{type:"int",default:1},row:{type:"int",default:1}},update:function(){const e=this.data,t=r(e.row-1,e.column-1,e.totalRows,e.totalColumns),n=this.el.getObject3D("mesh").geometry;n.faceVertexUvs[0][0][0].copy(t[0]),n.faceVertexUvs[0][0][1].copy(t[1]),n.faceVertexUvs[0][0][2].copy(t[3]),n.faceVertexUvs[0][1][0].copy(t[1]),n.faceVertexUvs[0][1][1].copy(t[2]),n.faceVertexUvs[0][1][2].copy(t[3]),n.uvsNeedUpdate=!0}}),AFRAME.registerComponent("dynamic-texture-atlas",{schema:{canvasId:{default:"dynamicAtlas"},canvasHeight:{default:1024},canvasWidth:{default:1024},debug:{default:!1},numColumns:{default:8},numRows:{default:8}},multiple:!0,init:function(){const e=this.canvas=document.createElement("canvas");e.id=this.data.canvasId,e.height=this.data.canvasHeight,e.width=this.data.canvasWidth,this.ctx=e.getContext("2d"),document.body.appendChild(e),this.data.debug&&(e.style.left=0,e.style.top=0,e.style.position="fixed",e.style.zIndex=9999999999)},drawTexture:function(e,t,n,i,o){const a=this.canvas,s=this.data;e.complete||(e.onload=()=>{this.drawTexture(e,t,n)});const u=o||a.height/s.numRows,l=i||a.width/s.numColumns;return this.ctx.drawImage(e,l*t,l*n,l,u),r(t,n,s.numRows,s.numColumns)}}),e.exports.getGridUvs=r},function(e,t){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");var n={};AFRAME.registerComponent("audioanalyser",{schema:{buffer:{default:!1},beatDetectionDecay:{default:.99},beatDetectionMinVolume:{default:15},beatDetectionThrottle:{default:250},cache:{default:!1},enabled:{default:!0},enableBeatDetection:{default:!0},enableLevels:{default:!0},enableWaveform:{default:!0},enableVolume:{default:!0},fftSize:{default:2048},smoothingTimeConstant:{default:.8},src:{parse:function(e){return e.constructor!==String?e:e.startsWith("#")||e.startsWith(".")?document.querySelector(e):e}},unique:{default:!1}},init:function(){this.audioEl=null,this.levels=null,this.waveform=null,this.volume=0,this.xhr=null,this.initContext()},update:function(e){var t=this.analyser,n=this.data;e.fftSize===n.fftSize&&e.smoothingTimeConstant===n.smoothingTimeConstant||(t.fftSize=n.fftSize,t.smoothingTimeConstant=n.smoothingTimeConstant,this.levels=new Uint8Array(t.frequencyBinCount),this.waveform=new Uint8Array(t.fftSize)),n.src&&this.refreshSource()},tick:function(e,t){var n,r=this.data;if(r.enabled){if((r.enableLevels||r.enableVolume)&&this.analyser.getByteFrequencyData(this.levels),r.enableWaveform&&this.analyser.getByteTimeDomainData(this.waveform),r.enableVolume||r.enableBeatDetection){for(var i=0,o=0;o<this.levels.length;o++)i+=this.levels[o];this.volume=i/this.levels.length}r.enableBeatDetection&&(n=this.volume,this.beatCutOff||(this.beatCutOff=n),n>this.beatCutOff&&n>this.data.beatDetectionMinVolume?(this.el.emit("audioanalyserbeat",null,!1),this.beatCutOff=1.5*n,this.beatTime=0):this.beatTime<=this.data.beatDetectionThrottle?this.beatTime+=t:(this.beatCutOff*=this.data.beatDetectionDecay,this.beatCutOff=Math.max(this.beatCutOff,this.data.beatDetectionMinVolume)))}},initContext:function(){var e,t=this.data;this.context=new(window.webkitAudioContext||window.AudioContext),e=this.analyser=this.context.createAnalyser(),(this.gainNode=this.context.createGain()).connect(e),e.connect(this.context.destination),e.fftSize=t.fftSize,e.smoothingTimeConstant=t.smoothingTimeConstant,this.levels=new Uint8Array(e.frequencyBinCount),this.waveform=new Uint8Array(e.fftSize)},refreshSource:function(){this.analyser;var e=this.data;e.buffer&&e.src.constructor===String?this.getBufferSource().then(e=>{this.source=e,this.source.connect(this.gainNode)}):(this.source=this.getMediaSource(),this.source.connect(this.gainNode))},suspendContext:function(){this.context.suspend()},resumeContext:function(){this.context.resume()},fetchAudioBuffer:function(e){return n[e]?n[e].constructor===Promise?n[e]:Promise.resolve(n[e]):(this.data.cache||Object.keys(n).forEach((function(e){delete n[e]})),n[e]=new Promise(t=>{const r=this.xhr=new XMLHttpRequest;r.open("GET",e),r.responseType="arraybuffer",r.addEventListener("load",()=>{function i(r){n[e]=r,t(r)}const o=this.context.decodeAudioData(r.response,i);o&&o.constructor===Promise&&o.then(i).catch(console.error)}),r.send()}),n[e])},getBufferSource:function(){var e=this.data;return this.fetchAudioBuffer(e.src).then(()=>{var t;return(t=this.context.createBufferSource()).buffer=n[e.src],this.el.emit("audioanalyserbuffersource",t,!1),t}).catch(console.error)},getMediaSource:function(){const e={};return function(){const t=this.data.src.constructor===String?this.data.src:this.data.src.src;if(e[t])return e[t];this.data.src.constructor===String?(this.audio=document.createElement("audio"),this.audio.crossOrigin="anonymous",this.audio.setAttribute("src",this.data.src)):this.audio=this.data.src;const n=this.context.createMediaElementSource(this.audio);return e[t]=n,n}}()})},function(e,t){var n=AFRAME.utils.styleParser;if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("event-set",{schema:{default:"",parse:function(e){return n.parse(e)}},multiple:!0,init:function(){this.eventHandler=null,this.eventName=null},update:function(e){this.removeEventListener(),this.updateEventListener(),this.addEventListener()},remove:function(){this.removeEventListener()},pause:function(){this.removeEventListener()},play:function(){this.addEventListener()},updateEventListener:function(){var e,t,n,r=this.data,i=this.el;e=r._event||this.id,t=r._target,n=t?i.sceneEl.querySelector(t):i,this.eventName=e;const o=()=>{var e;for(e in r)"_event"!==e&&"_target"!==e&&AFRAME.utils.entity.setComponentProperty.call(this,n,e,r[e])};isNaN(r._delay)?this.eventHandler=o:this.eventHandler=()=>{setTimeout(o,parseFloat(r._delay))}},addEventListener:function(){this.el.addEventListener(this.eventName,this.eventHandler)},removeEventListener:function(){this.el.removeEventListener(this.eventName,this.eventHandler)}})},function(e,t,n){THREE.BufferGeometryUtils||n(45),AFRAME.registerComponent("geometry-merger",{schema:{preserveOriginal:{default:!1}},init:function(){var e=this;this.geometry=new THREE.Geometry,this.mesh=new THREE.Mesh(this.geometry),this.el.setObject3D("mesh",this.mesh),this.faceIndex={},this.vertexIndex={},this.el.object3D.traverse((function(t){"Mesh"===t.type&&t!==e.mesh&&(e.faceIndex[t.parent.uuid]=[e.geometry.faces.length,e.geometry.faces.length+t.geometry.faces.length-1],e.vertexIndex[t.parent.uuid]=[e.geometry.vertices.length,e.geometry.vertices.length+t.geometry.vertices.length-1],t.parent.updateMatrix(),e.geometry.merge(t.geometry,t.parent.matrix),e.data.preserveOriginal||t.parent.remove(t))}))}}),AFRAME.registerComponent("buffer-geometry-merger",{schema:{preserveOriginal:{default:!1}},init:function(){var e=[];this.el.sceneEl.object3D.updateMatrixWorld(),this.el.object3D.traverse((function(t){"Mesh"===t.type&&t.el!==self.el&&(t.geometry.applyMatrix(t.matrixWorld),e.push(t.geometry.clone()),t.parent.remove(t))}));const t=THREE.BufferGeometryUtils.mergeBufferGeometries(e);this.mesh=new THREE.Mesh(t),this.el.setObject3D("mesh",this.mesh)}})},function(e,t){THREE.BufferGeometryUtils={computeTangents:function(e){var t=e.index,n=e.attributes;if(null!==t&&void 0!==n.position&&void 0!==n.normal&&void 0!==n.uv){var r=t.array,i=n.position.array,o=n.normal.array,a=n.uv.array,s=i.length/3;void 0===n.tangent&&e.addAttribute("tangent",new THREE.BufferAttribute(new Float32Array(4*s),4));for(var u=n.tangent.array,l=[],c=[],h=0;h<s;h++)l[h]=new THREE.Vector3,c[h]=new THREE.Vector3;var d=new THREE.Vector3,f=new THREE.Vector3,p=new THREE.Vector3,m=new THREE.Vector2,g=new THREE.Vector2,y=new THREE.Vector2,v=new THREE.Vector3,b=new THREE.Vector3,A=e.groups;0===A.length&&(A=[{start:0,count:r.length}]),h=0;for(var E=A.length;h<E;++h)for(var w=O=(D=A[h]).start,S=O+D.count;w<S;w+=3)F(r[w+0],r[w+1],r[w+2]);var _,x,k,R=new THREE.Vector3,N=new THREE.Vector3,T=new THREE.Vector3,M=new THREE.Vector3;for(h=0,E=A.length;h<E;++h){var D,O;for(w=O=(D=A[h]).start,S=O+D.count;w<S;w+=3)C(r[w+0]),C(r[w+1]),C(r[w+2])}}else console.warn("THREE.BufferGeometry: Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");function F(e,t,n){d.fromArray(i,3*e),f.fromArray(i,3*t),p.fromArray(i,3*n),m.fromArray(a,2*e),g.fromArray(a,2*t),y.fromArray(a,2*n);var r=f.x-d.x,o=p.x-d.x,s=f.y-d.y,u=p.y-d.y,h=f.z-d.z,A=p.z-d.z,E=g.x-m.x,w=y.x-m.x,S=g.y-m.y,_=y.y-m.y,x=1/(E*_-w*S);v.set((_*r-S*o)*x,(_*s-S*u)*x,(_*h-S*A)*x),b.set((E*o-w*r)*x,(E*u-w*s)*x,(E*A-w*h)*x),l[e].add(v),l[t].add(v),l[n].add(v),c[e].add(b),c[t].add(b),c[n].add(b)}function C(e){T.fromArray(o,3*e),M.copy(T),x=l[e],R.copy(x),R.sub(T.multiplyScalar(T.dot(x))).normalize(),N.crossVectors(M,x),k=N.dot(c[e]),_=k<0?-1:1,u[4*e]=R.x,u[4*e+1]=R.y,u[4*e+2]=R.z,u[4*e+3]=_}},mergeBufferGeometries:function(e,t){for(var n=null!==e[0].index,r=new Set(Object.keys(e[0].attributes)),i=new Set(Object.keys(e[0].morphAttributes)),o={},a={},s=new THREE.BufferGeometry,u=0,l=0;l<e.length;++l){var c=e[l];if(n!==(null!==c.index))return null;for(var h in c.attributes){if(!r.has(h))return null;void 0===o[h]&&(o[h]=[]),o[h].push(c.attributes[h])}for(var h in c.morphAttributes){if(!i.has(h))return null;void 0===a[h]&&(a[h]=[]),a[h].push(c.morphAttributes[h])}if(s.userData&&(s.userData.mergedUserData=s.userData.mergedUserData||[],s.userData.mergedUserData.push(c.userData)),t){var d;if(n)d=c.index.count;else{if(void 0===c.attributes.position)return null;d=c.attributes.position.count}s.addGroup(u,d,l),u+=d}}if(n){var f=0,p=[];for(l=0;l<e.length;++l){for(var m=e[l].index,g=0;g<m.count;++g)p.push(m.getX(g)+f);f+=e[l].attributes.position.count}s.setIndex(p)}for(var h in o){var y=this.mergeBufferAttributes(o[h]);if(!y)return null;s.addAttribute(h,y)}for(var h in a){var v=a[h][0].length;if(0===v)break;for(s.morphAttributes=s.morphAttributes||{},s.morphAttributes[h]=[],l=0;l<v;++l){var b=[];for(g=0;g<a[h].length;++g)b.push(a[h][g][l]);var A=this.mergeBufferAttributes(b);if(!A)return null;s.morphAttributes[h].push(A)}}return s},mergeBufferAttributes:function(e){for(var t,n,r,i=0,o=0;o<e.length;++o){var a=e[o];if(a.isInterleavedBufferAttribute)return null;if(void 0===t&&(t=a.array.constructor),t!==a.array.constructor)return null;if(void 0===n&&(n=a.itemSize),n!==a.itemSize)return null;if(void 0===r&&(r=a.normalized),r!==a.normalized)return null;i+=a.array.length}var s=new t(i),u=0;for(o=0;o<e.length;++o)s.set(e[o].array,u),u+=e[o].array.length;return new THREE.BufferAttribute(s,n,r)}}},function(e,t){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("haptics",{schema:{actuatorIndex:{default:0},dur:{default:100},enabled:{default:!0},events:{type:"array"},eventsFrom:{type:"string"},force:{default:1}},multiple:!0,init:function(){this.data;var e=this;this.callPulse=function(){e.pulse()};var t=function(){e.gamepad=e.el.components["tracked-controls"].controller,e.gamepad.gamepad&&(e.gamepad=e.gamepad.gamepad),e.gamepad&&e.gamepad.hapticActuators&&e.gamepad.hapticActuators.length&&e.addEventListeners()};this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller?t():this.el.addEventListener("controllerconnected",(function(){t()}))},remove:function(){this.removeEventListeners()},pulse:function(e,t){var n=this.data;n.enabled&&this.gamepad&&this.gamepad.hapticActuators&&this.gamepad.hapticActuators[n.actuatorIndex].pulse(e||n.force,t||n.dur)},addEventListeners:function(){var e,t,n=this.data;for(t=n.eventsFrom?document.querySelector(n.eventsFrom):this.el,e=0;e<n.events.length;e++)t.addEventListener(n.events[e],this.callPulse)},removeEventListeners:function(){var e,t,n=this.data;for(t=n.eventsFrom?document.querySelector(n.eventsFrom):this.el,e=0;e<n.events.length;e++)t.removeEventListener(n.events[e],this.callPulse)}})},function(e,t){var n=[],r=new THREE.Vector3;function i(e,t,i){var o,a,s,u,l,h,d=Math.ceil(t/e.columns);for(a=e.marginColumn,s=e.marginRow,i&&(a=e.margin,s=e.margin),l=c(e.align,d),u=c(e.align,e.columns),h=0;h<d;h++)for(o=0;o<e.columns;o++)r.set(0,0,0),0===e.plane.indexOf("x")&&(r.x=(o-u)*a),0===e.plane.indexOf("y")&&(r.y=(o-u)*a),1===e.plane.indexOf("y")&&(r.y=(h-l)*s),1===e.plane.indexOf("z")&&(r.z=(h-l)*s),p(r);return n}function o(e,t){var i,o;for(i=0;i<t;i++)o=isNaN(e.angle)?i*(2*Math.PI)/t:i*e.angle*.01745329252,r.set(0,0,0),0===e.plane.indexOf("x")&&(r.x=e.radius*Math.cos(o)),0===e.plane.indexOf("y")&&(r.y=e.radius*Math.cos(o)),1===e.plane.indexOf("y")&&(r.y=e.radius*Math.sin(o)),1===e.plane.indexOf("z")&&(r.z=e.radius*Math.sin(o)),p(r);return n}function a(e,t){return e.columns=t,i(e,t,!0)}function s(e,t){return f(1,0,0,0,1,0,0,0,1,-1,0,0,0,-1,0,0,0,-1),h(e.radius/2),n}function u(e,t){var r=(1+Math.sqrt(5))/2,i=1/r,o=2-r,a=-1*i,s=-1*o;return f(-1,o,0,-1,s,0,0,-1,o,0,-1,s,0,1,o,0,1,s,1,o,0,1,s,0,i,i,i,i,i,a,i,a,i,i,a,a,o,0,1,o,0,-1,a,i,i,a,i,a,a,a,i,a,a,a,s,0,1,s,0,-1),h(e.radius/2),n}function l(e,t){var r=Math.sqrt(3),i=-1/Math.sqrt(3);return f(0,0,r+i,-1,0,i,1,0,i,0,2*Math.sqrt(2/3),0),h(e.radius/2),n}function c(e,t){switch(e){case"start":return t-1;case"center":return(t-1)/2;case"end":return 0}}function h(e){var t;for(t=0;t<n.length;t++)n[t]=n[t]*e}function d(e,t,n){var r,i,o;if(n)for(i=0;i<e.length;i++)null!=(r=e[i].getAttribute(n))&&(o=3*parseInt(r,10),e[i].object3D.position.set(t[o],t[o+1],t[o+2]));else for(i=0;i<t.length;i+=3){if(!e[i/3])return;e[i/3].object3D.position.set(t[i],t[i+1],t[i+2])}}function f(){var e;for(e=0;e<arguments.length;e++)n.push(e)}function p(e){n.push(e.x),n.push(e.y),n.push(e.z)}AFRAME.registerComponent("layout",{schema:{angle:{type:"number",default:!1,min:0,max:360,if:{type:["circle"]}},columns:{default:1,min:0,if:{type:["box"]}},margin:{default:1,min:0,if:{type:["box","line"]}},marginColumn:{default:1,min:0,if:{type:["box"]}},marginRow:{default:1,min:0,if:{type:["box"]}},orderAttribute:{default:""},plane:{default:"xy"},radius:{default:1,min:0,if:{type:["circle","cube","dodecahedron","pyramid"]}},reverse:{default:!1},type:{default:"line",oneOf:["box","circle","cube","dodecahedron","line","pyramid"]},fill:{default:!0,if:{type:["circle"]}},align:{default:"end",oneOf:["start","center","end"]}},init:function(){var e=this,t=this.el;this.children=t.getChildEntities(),this.initialPositions=[],this.children.forEach((function(t){if(t.hasLoaded)return n();function n(){e.initialPositions.push(t.object3D.position.x),e.initialPositions.push(t.object3D.position.y),e.initialPositions.push(t.object3D.position.z)}t.addEventListener("loaded",n)})),this.handleChildAttached=this.handleChildAttached.bind(this),this.handleChildDetached=this.handleChildDetached.bind(this),t.addEventListener("child-attached",this.handleChildAttached),t.addEventListener("child-detached",this.handleChildDetached),t.addEventListener("layoutrefresh",this.update.bind(this))},update:function(e){var t,r,c,h=this.children,f=this.data,p=this.el;switch(r=h.length,f.type){case"box":c=i;break;case"circle":c=o;break;case"cube":c=s;break;case"dodecahedron":c=u;break;case"pyramid":c=l;break;default:c=a}t=p.getDOMAttribute("layout"),n.length=0,n=c(f,r,"string"==typeof t?-1!==t.indexOf("margin"):"margin"in t),f.reverse&&n.reverse(),d(h,n,f.orderAttribute)},remove:function(){this.el.removeEventListener("child-attached",this.handleChildAttached),this.el.removeEventListener("child-detached",this.handleChildDetached),d(this.children,this.initialPositions)},handleChildAttached:function(e){var t=this.el;e.detail.el.parentNode===t&&(this.children.push(e.detail.el),this.update())},handleChildDetached:function(e){-1!==this.children.indexOf(e.detail.el)&&(this.children.splice(this.children.indexOf(e.detail.el),1),this.initialPositions.splice(this.children.indexOf(e.detail.el),1),this.update())}}),e.exports.getBoxPositions=i,e.exports.getCirclePositions=o,e.exports.getLinePositions=a,e.exports.getCubePositions=s,e.exports.getDodecahedronPositions=u,e.exports.getPyramidPositions=l},function(e,t){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerPrimitive("a-log",{defaultComponents:{geometry:{primitive:"plane",height:5},log:{},material:{color:"#111",shader:"flat",side:"double"},text:{color:"lightgreen",baseline:"top",align:"center",height:5}},mappings:{channel:"log.channel"}}),AFRAME.registerSystem("log",{schema:{console:{default:!0}},init:function(){var e=this.data,t=this.logs=[],n=this.loggers=[];AFRAME.log=function(r,i){t.push([r,i]),n.forEach((function(e){e.receiveLog(r,i)})),e.console&&console.log("[log:"+(i||"")+"] "+r)}},registerLogger:function(e){this.loggers.push(e),this.logs.forEach((function(t){e.receiveLog.apply(e,t)}))},unregisterLogger:function(e){this.loggers.splice(this.loggers.indexOf(e),1)}}),AFRAME.registerComponent("log",{schema:{channel:{type:"string"},filter:{type:"string"},max:{default:100},showErrors:{default:!0}},init:function(){this.logs=[],this.system.registerLogger(this)},play:function(){var e=this;this.el.sceneEl.addEventListener("log",(function(t){t.detail&&e.receiveLog(t.detail.message,t.detail.channel)})),window.onerror=function(t,n,r,i,o){e.receiveLog("Error: "+t)}},receiveLog:function(e,t){var n=this.data;"string"!=typeof e&&(e=JSON.stringify(e)),n.channel&&t&&n.channel!==t||n.filter&&-1===e.indexOf(n.filter)||(this.logs.push(e),n.max&&this.logs.length>n.max&&this.logs.shift(),this.el.setAttribute("text",{value:this.logs.join("\n")}))},remove:function(){this.el.removeAttribute("text"),this.system.unregisterLogger(this)}})},function(e,t,n){n(50),AFRAME.registerComponent("orbit-controls",{dependencies:["camera"],schema:{autoRotate:{type:"boolean"},autoRotateSpeed:{default:2},dampingFactor:{default:.1},enabled:{default:!0},enableDamping:{default:!0},enableKeys:{default:!0},enablePan:{default:!0},enableRotate:{default:!0},enableZoom:{default:!0},initialPosition:{type:"vec3"},keyPanSpeed:{default:7},minAzimuthAngle:{type:"number",default:1/0},maxAzimuthAngle:{type:"number",default:1/0},maxDistance:{default:1e3},maxPolarAngle:{default:AFRAME.utils.device.isMobile()?90:120},minDistance:{default:1},minPolarAngle:{default:0},minZoom:{default:0},panSpeed:{default:1},rotateSpeed:{default:.05},screenSpacePanning:{default:!1},target:{type:"vec3"},zoomSpeed:{default:.5}},init:function(){var e,t=this.el;this.controls=new THREE.OrbitControls(t.getObject3D("camera"),t.sceneEl.renderer.domElement),e=new THREE.Vector3,t.sceneEl.addEventListener("enter-vr",()=>{(AFRAME.utils.device.checkHeadsetConnected()||AFRAME.utils.device.isMobile())&&(this.controls.enabled=!1,t.hasAttribute("look-controls")&&(t.setAttribute("look-controls","enabled",!0),e.copy(t.getObject3D("camera").position),t.getObject3D("camera").position.set(0,0,0)))}),t.sceneEl.addEventListener("exit-vr",()=>{(AFRAME.utils.device.checkHeadsetConnected()||AFRAME.utils.device.isMobile())&&(this.controls.enabled=!0,t.getObject3D("camera").position.copy(e),t.hasAttribute("look-controls")&&t.setAttribute("look-controls","enabled",!1))}),document.body.style.cursor="grab",document.addEventListener("mousedown",()=>{document.body.style.cursor="grabbing"}),document.addEventListener("mouseup",()=>{document.body.style.cursor="grab"}),this.target=new THREE.Vector3,t.getObject3D("camera").position.copy(this.data.initialPosition)},update:function(e){var t=this.controls,n=this.data;t.target=this.target.copy(n.target),t.autoRotate=n.autoRotate,t.autoRotateSpeed=n.autoRotateSpeed,t.dampingFactor=n.dampingFactor,t.enabled=n.enabled,t.enableDamping=n.enableDamping,t.enableKeys=n.enableKeys,t.enablePan=n.enablePan,t.enableRotate=n.enableRotate,t.enableZoom=n.enableZoom,t.keyPanSpeed=n.keyPanSpeed,t.maxPolarAngle=THREE.Math.degToRad(n.maxPolarAngle),t.maxDistance=n.maxDistance,t.minDistance=n.minDistance,t.minPolarAngle=THREE.Math.degToRad(n.minPolarAngle),t.minZoom=n.minZoom,t.panSpeed=n.panSpeed,t.rotateSpeed=n.rotateSpeed,t.screenSpacePanning=n.screenSpacePanning,t.zoomSpeed=n.zoomSpeed},tick:function(){var e=this.controls;this.data.enabled&&e.enabled&&(e.enableDamping||e.autoRotate)&&this.controls.update()}})},function(e,t){THREE.OrbitControls=function(e,t){var n,r,i,o,a;this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new THREE.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return p.phi},this.getAzimuthalAngle=function(){return p.theta},this.saveState=function(){s.target0.copy(s.target),s.position0.copy(s.object.position),s.zoom0=s.object.zoom},this.reset=function(){s.target.copy(s.target0),s.object.position.copy(s.position0),s.object.zoom=s.zoom0,s.object.updateProjectionMatrix(),s.dispatchEvent(u),s.update(),d=h.NONE},this.update=(n=new THREE.Vector3,r=(new THREE.Quaternion).setFromUnitVectors(e.up,new THREE.Vector3(0,1,0)),i=r.clone().inverse(),o=new THREE.Vector3,a=new THREE.Quaternion,function(){var e=s.object.position;return n.copy(e).sub(s.target),n.applyQuaternion(r),p.setFromVector3(n),s.autoRotate&&d===h.NONE&&T(2*Math.PI/60/60*s.autoRotateSpeed),p.theta+=m.theta,p.phi+=m.phi,p.theta=Math.max(s.minAzimuthAngle,Math.min(s.maxAzimuthAngle,p.theta)),p.phi=Math.max(s.minPolarAngle,Math.min(s.maxPolarAngle,p.phi)),p.makeSafe(),p.radius*=g,p.radius=Math.max(s.minDistance,Math.min(s.maxDistance,p.radius)),s.target.add(y),n.setFromSpherical(p),n.applyQuaternion(i),e.copy(s.target).add(n),s.object.lookAt(s.target),!0===s.enableDamping?(m.theta*=1-s.dampingFactor,m.phi*=1-s.dampingFactor):m.set(0,0,0),g=1,y.set(0,0,0),!!(v||o.distanceToSquared(s.object.position)>f||8*(1-a.dot(s.object.quaternion))>f)&&(s.dispatchEvent(u),o.copy(s.object.position),a.copy(s.object.quaternion),v=!1,!0)}),this.dispose=function(){s.domElement.removeEventListener("contextmenu",z,!1),s.domElement.removeEventListener("mousedown",L,!1),s.domElement.removeEventListener("wheel",H,!1),s.domElement.removeEventListener("touchstart",q,!1),s.domElement.removeEventListener("touchend",U,!1),s.domElement.removeEventListener("touchmove",W,!1),document.removeEventListener("mousemove",j,!1),document.removeEventListener("mouseup",B,!1),window.removeEventListener("keydown",V,!1)};var s=this,u={type:"change"},l={type:"start"},c={type:"end"},h={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},d=h.NONE,f=1e-6,p=new THREE.Spherical,m=new THREE.Spherical,g=1,y=new THREE.Vector3,v=!1,b=new THREE.Vector2,A=new THREE.Vector2,E=new THREE.Vector2,w=new THREE.Vector2,S=new THREE.Vector2,_=new THREE.Vector2,x=new THREE.Vector2,k=new THREE.Vector2,R=new THREE.Vector2;function N(){return Math.pow(.95,s.zoomSpeed)}function T(e){m.theta-=e}function M(e){m.phi-=e}var D,O=(D=new THREE.Vector3,function(e,t){D.setFromMatrixColumn(t,0),D.multiplyScalar(-e),y.add(D)}),F=function(){var e=new THREE.Vector3;return function(t,n){e.setFromMatrixColumn(n,1),e.multiplyScalar(t),y.add(e)}}(),C=function(){var e=new THREE.Vector3;return function(t,n){var r=s.domElement===document?s.domElement.body:s.domElement;if(s.object.isPerspectiveCamera){var i=s.object.position;e.copy(i).sub(s.target);var o=e.length();o*=Math.tan(s.object.fov/2*Math.PI/180),O(2*t*o/r.clientHeight,s.object.matrix),F(2*n*o/r.clientHeight,s.object.matrix)}else s.object.isOrthographicCamera?(O(t*(s.object.right-s.object.left)/s.object.zoom/r.clientWidth,s.object.matrix),F(n*(s.object.top-s.object.bottom)/s.object.zoom/r.clientHeight,s.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),s.enablePan=!1)}}();function I(e){s.object.isPerspectiveCamera?g/=e:s.object.isOrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom*e)),s.object.updateProjectionMatrix(),v=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function P(e){s.object.isPerspectiveCamera?g*=e:s.object.isOrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom/e)),s.object.updateProjectionMatrix(),v=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function L(e){if(!1!==s.enabled){switch(e.preventDefault(),e.button){case s.mouseButtons.ORBIT:if(!1===s.enableRotate)return;!function(e){b.set(e.clientX,e.clientY)}(e),d=h.ROTATE;break;case s.mouseButtons.ZOOM:if(!1===s.enableZoom)return;!function(e){x.set(e.clientX,e.clientY)}(e),d=h.DOLLY;break;case s.mouseButtons.PAN:if(!1===s.enablePan)return;!function(e){w.set(e.clientX,e.clientY)}(e),d=h.PAN}d!==h.NONE&&(document.addEventListener("mousemove",j,!1),document.addEventListener("mouseup",B,!1),s.dispatchEvent(l))}}function j(e){if(!1!==s.enabled)switch(e.preventDefault(),d){case h.ROTATE:if(!1===s.enableRotate)return;!function(e){A.set(e.clientX,e.clientY),E.subVectors(A,b);var t=s.domElement===document?s.domElement.body:s.domElement;T(2*Math.PI*E.x/t.clientWidth*s.rotateSpeed),M(2*Math.PI*E.y/t.clientHeight*s.rotateSpeed),b.copy(A),s.update()}(e);break;case h.DOLLY:if(!1===s.enableZoom)return;!function(e){k.set(e.clientX,e.clientY),R.subVectors(k,x),R.y>0?I(N()):R.y<0&&P(N()),x.copy(k),s.update()}(e);break;case h.PAN:if(!1===s.enablePan)return;!function(e){S.set(e.clientX,e.clientY),_.subVectors(S,w),C(_.x,_.y),w.copy(S),s.update()}(e)}}function B(e){!1!==s.enabled&&(document.removeEventListener("mousemove",j,!1),document.removeEventListener("mouseup",B,!1),s.dispatchEvent(c),d=h.NONE)}function H(e){!1===s.enabled||!1===s.enableZoom||d!==h.NONE&&d!==h.ROTATE||(e.preventDefault(),e.stopPropagation(),s.dispatchEvent(l),function(e){e.deltaY<0?P(N()):e.deltaY>0&&I(N()),s.update()}(e),s.dispatchEvent(c))}function V(e){!1!==s.enabled&&!1!==s.enableKeys&&!1!==s.enablePan&&function(e){switch(e.keyCode){case s.keys.UP:C(0,s.keyPanSpeed),s.update();break;case s.keys.BOTTOM:C(0,-s.keyPanSpeed),s.update();break;case s.keys.LEFT:C(s.keyPanSpeed,0),s.update();break;case s.keys.RIGHT:C(-s.keyPanSpeed,0),s.update()}}(e)}function q(e){if(!1!==s.enabled){switch(e.touches.length){case 1:if(!1===s.enableRotate)return;!function(e){b.set(e.touches[0].pageX,e.touches[0].pageY)}(e),d=h.TOUCH_ROTATE;break;case 2:if(!1===s.enableZoom)return;!function(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);x.set(0,r)}(e),d=h.TOUCH_DOLLY;break;case 3:if(!1===s.enablePan)return;!function(e){w.set(e.touches[0].pageX,e.touches[0].pageY)}(e),d=h.TOUCH_PAN;break;default:d=h.NONE}d!==h.NONE&&s.dispatchEvent(l)}}function W(e){if(!1!==s.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===s.enableRotate)return;if(d!==h.TOUCH_ROTATE)return;!function(e){A.set(e.touches[0].pageX,e.touches[0].pageY),E.subVectors(A,b);var t=s.domElement===document?s.domElement.body:s.domElement;T(2*Math.PI*E.x/t.clientWidth*s.rotateSpeed),M(2*Math.PI*E.y/t.clientHeight*s.rotateSpeed),b.copy(A),s.update()}(e);break;case 2:if(!1===s.enableZoom)return;if(d!==h.TOUCH_DOLLY)return;!function(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);k.set(0,r),R.subVectors(k,x),R.y>0?P(N()):R.y<0&&I(N()),x.copy(k),s.update()}(e);break;case 3:if(!1===s.enablePan)return;if(d!==h.TOUCH_PAN)return;!function(e){S.set(e.touches[0].pageX,e.touches[0].pageY),_.subVectors(S,w),C(_.x,_.y),w.copy(S),s.update()}(e);break;default:d=h.NONE}}function U(e){!1!==s.enabled&&(s.dispatchEvent(c),d=h.NONE)}function z(e){!1!==s.enabled&&e.preventDefault()}s.domElement.addEventListener("contextmenu",z,!1),s.domElement.addEventListener("mousedown",L,!1),s.domElement.addEventListener("wheel",H,!1),s.domElement.addEventListener("touchstart",q,!1),s.domElement.addEventListener("touchend",U,!1),s.domElement.addEventListener("touchmove",W,!1),window.addEventListener("keydown",V,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,Object.defineProperties(THREE.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}})},function(e,t){AFRAME.registerComponent("proxy-event",{schema:{captureBubbles:{default:!1},enabled:{default:!0},event:{type:"string"},from:{type:"string"},to:{type:"string"},as:{type:"string"},bubbles:{default:!1}},multiple:!0,init:function(){var e,t,n,r=this.data,i=this.el,o=this;if(r.from?e="PARENT"===r.from?[i.parentNode]:document.querySelectorAll(r.from):n="CHILDREN"===r.to?i.querySelectorAll("*"):"SELF"===r.to?[i]:document.querySelectorAll(r.to),r.from)for(t=0;t<e.length;t++)this.addEventListenerFrom(e[t]);else i.addEventListener(r.event,(function(e){var r=o.data;if(r.enabled&&(r.captureBubbles||e.target===i))for(t=0;t<n.length;t++)n[t].emit(r.as||r.event,e.detail?e.detail:null,r.bubbles)}))},addEventListenerFrom:function(e){var t=this.data,n=this;e.addEventListener(t.event,(function(t){var r=n.data;r.enabled&&(r.captureBubbles||t.target===e)&&n.el.emit(r.as||r.event,t.detail?t.detail:null,!1)}))}})},function(e,t){AFRAME.registerSystem("render-order",{schema:{type:"array"},init:function(){this.el.renderer.sortObjects=!0},update:function(){for(this.order={},i=0;i<this.data.length;i++)this.order[this.data[i]]=i}}),AFRAME.registerComponent("render-order",{schema:{type:"string"},multiple:!0,init:function(){this.set=this.set.bind(this),this.el.addEventListener("object3dset",e=>{"nonrecursive"!==this.id&&e.detail.object.traverse(this.set)})},update:function(){"nonrecursive"===this.id?this.set(this.el.object3D):this.el.object3D.traverse(this.set)},set:function(e){isNaN(this.data)?e.renderOrder=this.system.order[this.data]:e.renderOrder=parseFloat(this.data)}}),AFRAME.registerComponent("render-order-recursive",{init:function(){this.el.addEventListener("child-attached",e=>{e.detail.el.setAttribute("render-order",this.el.getAttribute("render-order"))})}})},function(e,t,n){var r;"undefined"!=typeof self&&self,r=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";var r={};e.exports.select=function(e,t,n){return r[t]||(r[t]=new Function("state","item","return "+u(t)+";")),r[t](e,n)};var i=/\.([A-Za-z][\w_-]*)/g,o=/([=&|!?:+-])(\s*)([\(]?)([A-Za-z][\w_-]*)/g,a=/^([\(]?)([A-Za-z][\w_-]*)/g,s=/state\["item"\]/g;function u(e){return(e=(e=(e=e.replace(i,'["$1"]')).replace(a,'$1state["$2"]')).replace(o,'$1$2$3state["$4"]')).replace(s,"item")}function l(){var e=arguments;return function(){var t;for(t=0;t<e.length;t++)e[t].apply(this,arguments)}}e.exports.generateExpression=u,e.exports.clearObject=function(e){for(var t in e)delete e[t]},e.exports.composeHandlers=function(){var e,t,n,r=arguments;for(n={},t=0;t<r.length;t++)for(e in r[t])e in n?n[e].constructor===Array?n[e].push(r[t][e]):n[e]=[n[e],r[t][e]]:n[e]=r[t][e];for(e in n)n[e].constructor===Array&&(n[e]=l.apply(this,n[e]));return n},e.exports.composeFunctions=l;var c=["||","&&","!=","!==","==","===",">","<","<=",">="],h=/\s+/,d=/\(|\)|\!/g;function f(e){return-1===(e=function(e){return 0===e.indexOf("!!")?e.replace("!!",""):0===e.indexOf("!")?e.replace("!",""):e}(e.trim())).indexOf(".")?e:e.substring(0,e.indexOf("."))}e.exports.parseKeysToWatch=function(e,t,n){var r,i;for(i=m(t,h),r=0;r<i.length;r++)if(-1===c.indexOf(i[r])&&!i[r].startsWith("'")&&-1===e.indexOf(i[r])){if(n&&"item"===i[r])continue;e.push(f(i[r]).replace(d,""))}return e};var p={};function m(e,t){return p[t]||(p[t]={}),p[t][e]||(p[t][e]=e.split(t)),p[t][e]}e.exports.split=m,e.exports.copyArray=function(e,t){var n;for(e.length=0,n=0;n<t.length;n++)e[n]=t[n]}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n(2);var i,o,a=n(3),s=n(0),u=n(4).wrapArray,l={initialState:{},nonBindedStateKeys:[],handlers:{},computeState:function(){}};AFRAME.registerState=function(e){AFRAME.utils.extend(l,e)},AFRAME.registerSystem("state",{init:function(){var e,t=this;for(e in this.arrays=[],this.dirtyArrays=[],this.diff={},this.state=AFRAME.utils.clone(l.initialState),this.subscriptions=[],this.initEventHandlers(),this.state)this.state[e]&&this.state[e].constructor===Array&&(this.arrays.push(e),this.state[e].__dirty=!0,u(this.state[e]));this.lastState=AFRAME.utils.clone(this.state),this.eventDetail={lastState:this.lastState,state:this.state},this.el.addEventListener("loaded",(function(){var e;for(l.computeState(t.state,"@@INIT"),e=0;e<t.subscriptions.length;e++)t.subscriptions[e].onStateUpdate(t.state)}))},dispatch:(o=[],function(e,t){var n,r;for(r in l.handlers[e](this.state,t),l.computeState(this.state,e,t),this.diff)delete this.diff[r];for(a(this.lastState,this.state,this.diff,l.nonBindedStateKeys),this.dirtyArrays.length=0,n=0;n<this.arrays.length;n++)this.state[this.arrays[n]].__dirty&&this.dirtyArrays.push(this.arrays[n]);for(o.length=0,n=0;n<this.subscriptions.length;n++){if("bind-for"===this.subscriptions[n].name){if(!this.state[this.subscriptions[n].keysToWatch[0]].__dirty)continue}else if(!this.shouldUpdate(this.subscriptions[n].keysToWatch,this.diff,this.dirtyArrays))continue;-1===o.indexOf(this.subscriptions[n])&&o.push(this.subscriptions[n])}for(n=0;n<o.length;n++)o[n].onStateUpdate();for(r in this.state)this.state[r]&&this.state[r].constructor===Array&&(this.state[r].__dirty=!1);this.copyState(this.lastState,this.state),this.eventDetail.action=e,this.eventDetail.payload=t,this.el.emit("stateupdate",this.eventDetail)}),copyState:function(e,t,n){var r;for(r in t)if(n||-1===l.nonBindedStateKeys.indexOf(r))if(t[r]&&t[r].constructor===Object){if(!(r in e)){e[r]=AFRAME.utils.clone(t[r]);continue}this.copyState(e[r],t[r],!0)}else e[r]=t[r]},subscribe:function(e){this.subscriptions.push(e)},unsubscribe:function(e){this.subscriptions.splice(this.subscriptions.indexOf(e),1)},shouldUpdate:function(e,t,n){for(var r=0;r<e.length;r++)if(e[r]in t||-1!==n.indexOf(e[r]))return!0;return!1},initEventHandlers:function(){var e,t=[];for(e in n=n.bind(this),l.handlers)-1===t.indexOf(e)&&(t.push(e),n(e));function n(e){var t=this;this.el.addEventListener(e,(function(n){t.dispatch(e,n.detail)}))}},renderTemplate:(i=/{{\s*(\w*\.)?([\w.]+)\s*}}/g,function(e,t,n){var o,a;if(a=e,t)for(;o=i.exec(e);)a=a.replace(o[0],"object"===(void 0===t?"undefined":r(t))?s.select(t,o[2])||"":t);return n?a:document.createRange().createContextualFragment(a)}),select:s.select}),AFRAME.registerComponent("bind",{schema:{default:{},parse:function(e){var t,n,r,i;if(e.constructor===Object)return e;if(-1===e.indexOf(":"))return e;for(t={},r=s.split(e,";"),n=0;n<r.length;n++)t[(i=s.split(r[n].trim(),":"))[0]]=i[1].trim();return t}},multiple:!0,init:function(){var e;this.data,this.keysToWatch=[],this.onStateUpdate=this.onStateUpdate.bind(this),this.system=this.el.sceneEl.systems.state,this.id&&(e=s.split(this.id,"__")[0]),this.isNamespacedBind=this.id&&e in AFRAME.components&&!AFRAME.components[e].isSingleProp||e in AFRAME.systems,this.lastData={},this.updateObj={},this.system.subscribe(this),this.onStateUpdate=this.onStateUpdate.bind(this)},update:function(){var e,t=this.data;if(this.keysToWatch.length=0,"string"==typeof t)s.parseKeysToWatch(this.keysToWatch,t);else for(e in t)s.parseKeysToWatch(this.keysToWatch,t[e]);this.onStateUpdate()},onStateUpdate:function(){var e,t,n,i,o=!1,a=this.el;if(a.parentNode){if(this.isNamespacedBind&&s.clearObject(this.updateObj),n=this.system.state,"object"!==r(this.data)){try{i=s.select(n,this.data)}catch(e){throw new Error("[aframe-state-component] Key '"+this.data+"' not found in state. #"+this.el.getAttribute("id")+"["+this.attrName+"]")}if("object"!==(void 0===i?"undefined":r(i))&&"object"!==r(this.lastData)&&this.lastData===i)return;return AFRAME.utils.entity.setComponentProperty(a,this.id,i),void(this.lastData=i)}for(e in this.data){t=this.data[e].trim();try{i=s.select(n,t)}catch(e){throw console.log(e),new Error("[aframe-state-component] Key '"+t+"' not found in state. #"+this.el.getAttribute("id")+"["+this.attrName+"]")}if("object"===(void 0===i?"undefined":r(i))||"object"===r(this.lastData[e])||this.lastData[e]!==i){if(e in AFRAME.components&&void 0===i)return void a.removeAttribute(e);this.isNamespacedBind?this.updateObj[e]=i:AFRAME.utils.entity.setComponentProperty(a,e,i),this.lastData[e]=i}}for(o in this.updateObj);this.isNamespacedBind&&o&&a.setAttribute(this.id,this.updateObj)}},remove:function(){this.system.unsubscribe(this)}}),AFRAME.registerComponent("bind-toggle",{schema:{type:"string"},multiple:!0,init:function(){this.system=this.el.sceneEl.systems.state,this.keysToWatch=[],this.onStateUpdate=this.onStateUpdate.bind(this),this.system.subscribe(this),this.onStateUpdate()},update:function(){this.keysToWatch.length=0,s.parseKeysToWatch(this.keysToWatch,this.data)},onStateUpdate:function(){var e,t,n=this.el;e=this.system.state;try{t=s.select(e,this.data)}catch(e){throw new Error("[aframe-state-component] Key '"+this.data+"' not found in state. #"+this.el.getAttribute("id")+"["+this.attrName+"]")}t?n.setAttribute(this.id,""):n.removeAttribute(this.id)},remove:function(){this.system.unsubscribe(this)}}),e.exports={composeFunctions:s.composeFunctions,composeHandlers:s.composeHandlers,select:s.select}},function(e,t,n){"use strict";var r,i,o=n(0);AFRAME.registerComponent("bind-for",{schema:{delay:{default:0},for:{type:"string",default:"item"},in:{type:"string"},key:{type:"string"},pool:{default:0},template:{type:"string"},updateInPlace:{default:!1}},init:function(){this.system=this.el.sceneEl.systems.state,this.onStateUpdate=this.onStateUpdate.bind(this),this.keysToWatch=[],this.renderedKeys=[],this.system.subscribe(this),this.el.children[0]&&"TEMPLATE"===this.el.children[0].tagName?this.template=this.el.children[0].innerHTML.trim():this.template=document.querySelector(this.data.template).innerHTML.trim();for(var e=0;e<this.data.pool;e++)this.el.appendChild(this.generateFromTemplate(null,e))},update:function(){this.keysToWatch[0]=o.split(this.data.in,".")[0],this.onStateUpdate()},onStateUpdateNaive:(i=[],function(){var e,t=this.data,n=this.el;try{e=o.select(this.system.state,t.in)}catch(e){throw new Error("[aframe-state-component] Key '"+t.in+"' not found in state. #"+n.getAttribute("id")+"["+this.attrName+"]")}i.length=0;for(var r=0;r<e.length;r++){var a=e[r];i.push(t.key?a[t.key].toString():a.toString())}for(var s=this.getElsToRemove(i,this.renderedKeys),u=0;u<s.length;u++)s[u].parentNode.removeChild(s[u]);e.length&&this.renderItems(e,i,0)}),renderItems:function(e,t,n){var r,i=this,o=this.data,a=this.el,s=e[n],u=o.key?s[o.key].toString():s.toString();if(-1===this.renderedKeys.indexOf(u))r=this.generateFromTemplate(s,n),a.appendChild(r),this.renderedKeys.push(u);else{if(e.length&&e[0].constructor===String){var l=o.key?s[o.key].toString():s.toString();(r=a.querySelector('[data-bind-for-value="'+l+'"]')).setAttribute("data-bind-for-key",n)}else{var c=this.getBindForKey(s,n);r=a.querySelector('[data-bind-for-key="'+c+'"]')}r.emit("bindforupdate",s,!1)}e[n+1]&&(this.data.delay?setTimeout((function(){i.renderItems(e,t,n+1)}),this.data.delay):this.renderItems(e,t,n+1))},onStateUpdateInPlace:function(){var e=[];return function(){var t,n,r=this.data,i=this.el;try{t=o.select(this.system.state,r.in)}catch(e){throw console.log(e),new Error("[aframe-state-component] Key '"+r.in+"' not found in state. #"+i.getAttribute("id")+"["+this.attrName+"]")}e.length=0;for(var a=0;a<t.length;a++){var s=t[a];n=r.key?s[r.key].toString():s.toString(),e.push(n)}for(var u=this.getElsToRemove(e,this.renderedKeys),l=0;l<u.length;l++)u[l].object3D.visible=!1,u[l].setAttribute("data-bind-for-active","false"),u[l].removeAttribute("data-bind-for-key"),u[l].removeAttribute("data-bind-for-value"),u[l].emit("bindfordeactivate",null,!1),u[l].pause();t.length&&this.renderItemsInPlace(t,e,0)}}(),renderItemsInPlace:function(e,t,n){var r,i=this,o=this.data,a=this.el,s=e[n],u=this.getBindForKey(s,n),l=o.key?s[o.key].toString():s.toString();if(-1===this.renderedKeys.indexOf(l)){if(a.querySelector(':scope > [data-bind-for-active="false"]'))(r=a.querySelector('[data-bind-for-active="false"]')).setAttribute("data-bind-for-key",u),r.setAttribute("data-bind-for-value",l),r.object3D.visible=!0,r.play(),r.setAttribute("data-bind-for-active","true"),r.emit("bindforupdateinplace",s,!1);else{var c=this.generateFromTemplate(s,n);c.addEventListener("loaded",(function(){c.emit("bindforupdateinplace",s,!1)})),a.appendChild(c)}this.renderedKeys.push(l)}else-1!==t.indexOf(l)&&(e.length&&e[0].constructor===String?(r=a.querySelector('[data-bind-for-value="'+l+'"]')).setAttribute("data-bind-for-key",n):r=a.querySelector('[data-bind-for-key="'+u+'"]'),r.emit("bindforupdateinplace",s,!1));e[n+1]&&(this.data.delay?setTimeout((function(){i.renderItemsInPlace(e,t,n+1)}),this.data.delay):this.renderItemsInPlace(e,t,n+1))},generateFromTemplate:function(e,t){var n=this.data;this.el.appendChild(this.system.renderTemplate(this.template,e));var r=this.el.children[this.el.children.length-1];if(!e)return r.setAttribute("data-bind-for-key",""),r.setAttribute("data-bind-for-active","false"),r;var i=this.getBindForKey(e,t);return r.setAttribute("data-bind-for-key",i),n.key||r.setAttribute("data-bind-for-value",e),r.setAttribute("data-bind-for-active","true"),r},getElsToRemove:(r=[],function(e,t){var n=this.data,i=this.el;r.length=0;for(var o=0;o<i.children.length;o++)if("TEMPLATE"!==i.children[o].tagName){var a=n.key?i.children[o].getAttribute("data-bind-for-key"):i.children[o].getAttribute("data-bind-for-value");-1===e.indexOf(a)&&-1!==t.indexOf(a)&&(r.push(i.children[o]),t.splice(t.indexOf(a),1))}return r}),getBindForKey:function(e,t){return this.data.key?e[this.data.key].toString():t.toString()},onStateUpdate:function(){this.data.updateInPlace?this.onStateUpdateInPlace():this.onStateUpdateNaive()}}),AFRAME.registerComponent("bind-item",{schema:{type:"string"},multiple:!0,init:function(){this.itemData=null,this.keysToWatch=[],this.prevValues={};var e=this.rootEl=this.el.closest("[data-bind-for-key]");if(!e)throw new Error("bind-item component must be attached to entity under a bind-for item.");e.addEventListener("bindforupdateinplace",this.updateInPlace.bind(this)),e.addEventListener("bindfordeactivate",this.deactivate.bind(this)),this.el.sceneEl.systems.state.subscribe(this)},update:function(){this.parseSelector()},updateInPlace:function(e){var t=this.propertyMap;if("false"!==this.rootEl.getAttribute("data-bind-for-active"))for(var n in e&&(this.itemData=e.detail),t){var r=this.select(this.itemData,t[n]);r!==this.prevValues[n]&&(AFRAME.utils.entity.setComponentProperty(this.el,n,r),this.prevValues[n]=r)}},onStateUpdate:function(){this.updateInPlace()},select:function(e,t){return o.select(this.el.sceneEl.systems.state.state,t,e)},deactivate:function(){this.prevValues={}},parseSelector:function(){var e=this.propertyMap={};this.keysToWatch.length=0;var t=o.split(this.id,"__")[0];if(t in AFRAME.components&&!AFRAME.components[t].isSingleProp)for(var n=o.split(this.data,";"),r=0;r<n.length;r++){var i=o.split(n[r],":");e[this.id+"."+i[0].trim()]=i[1].trim(),o.parseKeysToWatch(this.keysToWatch,i[1].trim(),!0)}else e[this.id]=this.data,o.parseKeysToWatch(this.keysToWatch,this.data,!0)}})},function(e,t,n){"use strict";var r;e.exports=(r=[],function(e,t,n,i){var o,a,s,u,l,c,h;for(l in u=n||{},r.length=0,e)r.push(l);if(!t)return u;for(s in t)-1===r.indexOf(s)&&r.push(s);for(c=0;c<r.length;c++)l=r[c],i&&-1!==i.indexOf(l)||(o=e[l],a=t[l],((h=o&&a&&o.constructor===Object&&a.constructor===Object)&&!AFRAME.utils.deepEqual(o,a)||!h&&o!==a)&&(u[l]=a));return u})},function(e,t,n){"use strict";var r=["push","pop","shift","unshift","splice"];function i(e,t){var n=e[t];e[t]=function(){n.apply(e,arguments),e.__dirty=!0}}e.exports.wrapArray=function(e){var t;if(!e.__wrapped){for(t=0;t<r.length;t++)i(e,r[t]);e.__wrapped=!0}}}])},e.exports=r()},function(e,t){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("slice9",{schema:{width:{default:1,min:0},height:{default:1,min:0},left:{default:0,min:0},right:{default:0,min:0},bottom:{default:0,min:0},top:{default:0,min:0},side:{default:"front",oneOf:["front","back","double"]},padding:{default:.1,min:.01},color:{type:"color",default:"#fff"},opacity:{default:1,min:0,max:1},transparent:{default:!0},debug:{default:!1},src:{type:"map"}},multiple:!1,init:function(){var e=this.data,t=this.material=new THREE.MeshBasicMaterial({color:e.color,opacity:e.opacity,transparent:e.transparent,wireframe:e.debug}),n=this.geometry=new THREE.PlaneBufferGeometry(e.width,e.height,3,3);new THREE.TextureLoader,this.plane=new THREE.Mesh(n,t),this.el.setObject3D("mesh",this.plane),this.textureSrc=null},updateMap:function(){var e=this.data.src;if(e){if(e===this.textureSrc)return;return this.textureSrc=e,void this.el.sceneEl.systems.material.loadTexture(e,{src:e},t.bind(this))}function t(e){this.material.map=e,this.material.needsUpdate=!0,this.regenerateMesh()}this.material.map&&t(null)},regenerateMesh:function(){var e=this.data,t=this.geometry.attributes.position.array,n=this.geometry.attributes.uv.array,r=this.material.map.image;if(r){var i={left:e.left/r.width,right:e.right/r.width,top:e.top/r.height,bottom:e.bottom/r.height};d(1,i.left,1),d(2,i.right,1),d(4,0,i.bottom),d(5,i.left,i.bottom),d(6,i.right,i.bottom),d(7,1,i.bottom),d(8,0,i.top),d(9,i.left,i.top),d(10,i.right,i.top),d(11,1,i.top),d(13,i.left,0),d(14,i.right,0);var o=e.width/2,a=e.height/2,s=-o+e.padding,u=o-e.padding,l=a-e.padding,c=-a+e.padding;h(0,-o,a),h(1,s,a),h(2,u,a),h(3,o,a),h(4,-o,l),h(5,s,l),h(6,u,l),h(7,o,l),h(8,-o,c),h(9,s,c),h(10,u,c),h(11,o,c),h(13,s,-a),h(14,u,-a),h(12,-o,-a),h(15,o,-a),this.geometry.attributes.position.needsUpdate=!0,this.geometry.attributes.uv.needsUpdate=!0}function h(e,n,r){t[3*e]=n,t[3*e+1]=r}function d(e,t,r){n[2*e]=t,n[2*e+1]=r}},update:function(e){var t=this.data;this.material.color.setStyle(t.color),this.material.opacity=t.opacity,this.material.transparent=t.transparent,this.material.wireframe=t.debug,this.material.side=function(e){switch(e){case"back":return THREE.BackSide;case"double":return THREE.DoubleSide;default:return THREE.FrontSide}}(t.side);var n=AFRAME.utils.diff(t,e);"src"in n?this.updateMap():("width"in n||"height"in n||"padding"in n||"left"in n||"top"in n||"bottom"in n||"right"in n)&&this.regenerateMesh()},remove:function(){},pause:function(){},play:function(){}})},function(e,t){var n=[0,90,180,270],r=["right","up","left","down"],i={NULL:{START:"thumbstart",END:"thumbend"}};r.forEach(e=>{i[e]={},i[e].START="thumb"+e+"start",i[e].END="thumb"+e+"end"}),AFRAME.registerComponent("thumb-controls",{schema:{thresholdAngle:{default:89.5},thresholdPad:{default:.05},thresholdStick:{default:.75}},init:function(){var e=this.el;this.onTrackpadDown=this.onTrackpadDown.bind(this),this.onTrackpadUp=this.onTrackpadUp.bind(this),this.directionStick="",this.directionTrackpad="",e.components["tracked-controls"]&&(this.axis=e.components["tracked-controls"].axis),this.type="STICK",e.addEventListener("controllerconnected",t=>{this.axis=e.components["tracked-controls"].axis,"oculus-touch-controls"!==t.detail.name&&"windows-motion-controls"!==t.detail.name?this.type="PAD":this.type="STICK"})},play:function(){var e=this.el;e.addEventListener("trackpaddown",this.onTrackpadDown),e.addEventListener("trackpadup",this.onTrackpadUp),e.addEventListener("touchpaddown",this.onTrackpadDown),e.addEventListener("touchpadup",this.onTrackpadUp)},pause:function(){var e=this.el;e.removeEventListener("trackpaddown",this.onTrackpadDown),e.removeEventListener("trackpadup",this.onTrackpadUp),e.removeEventListener("touchpaddown",this.onTrackpadDown),e.removeEventListener("touchpadup",this.onTrackpadUp)},onTrackpadDown:function(){var e,t=this.el;this.getDistance()<this.data.thresholdPad||(e=this.getDirection())&&(this.directionTrackpad=e,t.emit(i.NULL.START,null,!1),t.emit(i[this.directionTrackpad].START,null,!1))},onTrackpadUp:function(){var e=this.el;this.directionTrackpad&&(e.emit(i.NULL.END,null,!1),e.emit(i[this.directionTrackpad].END,null,!1),this.directionTrackpad="")},tick:function(){var e,t=this.el;if("PAD"!==this.type){if(!this.directionStick&&this.getDistance()>this.data.thresholdStick){if(!(e=this.getDirection()))return;return this.directionStick=e,t.emit(i.NULL.START,null,!1),void t.emit(i[this.directionStick].START,null,!1)}this.directionStick&&this.getDistance()<this.data.thresholdStick&&(t.emit(i.NULL.END,null,!1),t.emit(i[this.directionStick].END,null,!1),this.directionStick="")}},getDistance:function(){var e=this.axis;return this.axis?"PAD"===this.type?Math.sqrt(e[1]*e[1]+e[0]*e[0]):Math.sqrt(e[3]*e[3]+e[2]*e[2]):0},getDirection:function(){var e,t,i,o,a;for(e=this.getAngle(),o=this.data.thresholdAngle/2,i=0;i<n.length;i++){if((a=n[i]+o)>360&&(a-=360),(t=n[i]-o)<0&&(e>=360+t&&e<=360||e>=0&&e<=a))return r[i];if(e>=t&&e<=a)return r[i]}},getAngle:function(){var e,t=this.axis;return this.axis?((e="PAD"===this.type?Math.atan2(-t[1],t[0]):Math.atan2(-t[3],t[2]))<0&&(e=2*Math.PI+e),THREE.Math.radToDeg(e)):0}}),AFRAME.registerComponent("thumb-controls-debug",{dependencies:["thumb-controls"],schema:{controllerType:{type:"string"},hand:{type:"string"},enabled:{default:!1}},init:function(){var e,t,n,r,i=this.el;if(this.data.enabled||AFRAME.utils.getUrlParameter("debug-thumb")){console.log("%c debug-thumb","background: #111; color: red");var o=function(){i.components["tracked-controls"].handleAxes=()=>{},n={axis:t=[0,0,0]},i.components["tracked-controls"].axis=t,i.components["thumb-controls"].axis=t};i.components["tracked-controls"]?o():this.el.addEventListener("controllerconnected",(function(){o()})),(r=this.createCanvas()).addEventListener("click",r=>{"vive-controls"===this.data.controllerType?e?i.emit("trackpadup"):i.emit("trackpaddown"):e&&(t[0]=0,t[1]=0,i.emit("axismove",n,!1)),e=!e}),r.addEventListener("mousemove",o=>{var a;e&&(a=r.getBoundingClientRect(),t[0]=(o.clientX-a.left)/240*2-1,t[1]=(o.clientY-a.top)/240*2-1,i.emit("axismove",n,!1))}),r.addEventListener("mouseleave",r=>{e&&(t[0]=0,t[1]=0,i.emit("axismove",n,!1))})}},createCanvas:function(){var e,t;return(e=document.createElement("canvas")).classList.add("debugThumb"),e.height=240,e.width=240,e.style.bottom=0,e.style.borderRadius="250px",e.style.opacity=.5,e.style.position="fixed",e.style.zIndex=999999999,"left"===this.data.hand?e.style.left=0:e.style.right=0,(t=e.getContext("2d")).fillStyle="#333",t.fillRect(0,0,240,240),document.body.appendChild(e),e}})},function(e,t,n){var r={"./active-item.js":57,"./beat-cut-fx.js":58,"./beat-generator.js":13,"./beat-hit-sound.js":59,"./beat.js":20,"./blade.js":60,"./check-vr.js":61,"./console-shortcuts.js":62,"./controller.js":63,"./copy-texture.js":64,"./cursor-laser.js":65,"./cursor-mesh.js":66,"./curve-follow-rig-reset.js":67,"./cutfx-shader.js":68,"./debug-beat-generator.js":71,"./debug-beat-positioning.js":72,"./debug-controller.js":73,"./debug-cursor.js":74,"./debug-intro.js":75,"./debug-song-time.js":76,"./debug-state.js":77,"./delayed-proxy-event.js":78,"./difficulty-background.js":79,"./difficulty-filter.js":80,"./difficulty-text.js":81,"./follow-position.js":82,"./follow-z.js":83,"./gameover.js":84,"./gpu-preloader.js":85,"./gradient-shader.js":86,"./hand-swapper.js":88,"./handstar-shader.js":89,"./haptics-wall.js":92,"./haptics-weapon.js":93,"./headfist.js":94,"./history.js":95,"./intro-song.js":96,"./keyboard-raycastable.js":97,"./leaderboard.js":98,"./materials.js":105,"./menu-controls.js":120,"./menu-difficulty-select.js":121,"./menu-genre.js":122,"./menu-midsection.js":123,"./menu-mode.js":124,"./menu-playlist-button.js":125,"./menu-playlist.js":126,"./menu-selected-challenge-image.js":127,"./menu-slide-animation.js":128,"./multiplier-ring.js":129,"./no-frustum-cull.js":130,"./panel-shader.js":131,"./pause.js":134,"./pauser.js":135,"./play-sound.js":136,"./player-height.js":138,"./plume.js":139,"./punch.js":140,"./raycaster-target.js":141,"./recenter.js":142,"./ring.js":143,"./score-texts.js":146,"./search-thumbnail-atlas.js":147,"./search.js":148,"./song-info-positioner.js":172,"./song-preview.js":173,"./song-progress-info.js":174,"./song.js":175,"./stage-colors.js":176,"./stage-lasers.js":177,"./stars.js":178,"./stats-param.js":179,"./stepback.js":180,"./sub-object.js":181,"./super-keyboard.js":182,"./supercurve-color.js":183,"./supercurve-shader.js":184,"./supercurve.js":187,"./supercutfx-shader.js":190,"./supercutfx.js":191,"./tail.js":192,"./text-counter.js":193,"./text-geometry.js":194,"./text-truncate.js":195,"./text-uppercase.js":196,"./toggle-pause-play.js":197,"./trail.js":198,"./tunnels.js":199,"./vertex-colors-buffer.js":200,"./victory-accuracy-ring.js":201,"./victory-rank.js":202,"./visible-raycastable.js":203,"./wall-shader.js":204,"./wall.js":207,"./weapon-particles.js":208,"./zip-loader.js":209};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=56},function(e,t,n){if(AFRAME.registerComponent("active-item",{dependencies:["material"],schema:{active:{default:!1},opacity:{default:1}},init:function(){this.defaultOpacity=this.el.getAttribute("material").opacity,this.materialObj={opacity:this.data.opacity}},update:function(){var e=this.el;this.data.active?(e.setAttribute("material",this.materialObj),e.object3D.visible=!0):(e.setAttribute("material","opacity",this.defaultOpacity),e.components.animation__mouseleave&&setTimeout(()=>{e.emit("mouseleave",null,!1)}))}}),AFRAME.registerComponent("active-text-color",{dependencies:["text"],schema:{active:{default:!1},color:{default:"#333"}},init:function(){this.defaultColor=this.el.getAttribute("text").color},update:function(){var e=this.el;this.data.active?e.setAttribute("text","color",this.data.color):e.setAttribute("text","color",this.defaultColor)}}),window.AFRAME){const t=["active-item","active-text-color"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){const r=new THREE.Vector3,i={right:0,upright:45,up:90,upleft:135,left:180,downleft:225,down:270,downright:315},o={right:new THREE.Vector2(0,1),upright:new THREE.Vector2(-.5,.5),up:new THREE.Vector2(-1,0),upleft:new THREE.Vector2(-.5,-.5),left:new THREE.Vector2(0,-1),downleft:new THREE.Vector2(.5,-.5),down:new THREE.Vector2(1,0),downright:new THREE.Vector2(.5,.5)};function a(e,t){e.x+=(Math.random()-.5)*t,e.y+=(Math.random()-.5)*t,e.z+=(Math.random()-.5)*t}if(AFRAME.registerComponent("beat-cut-fx",{schema:{color:{type:"string"},type:{oneOf:["beat","dot","mine"],default:"beat"}},init:function(){this.breaking=!1,this.fx=null,this.fxpool=null,this.pieces=[],this.pool=null,this.returnToPoolTimer=500,this.el.addEventListener("model-loaded",this.setupModel.bind(this)),this.el.addEventListener("explode",this.explode.bind(this),!1)},update:function(){const e=this.el.sceneEl,t=this.data.color;"beat"===this.data.type?(this.material=e.systems.materials[t+"BeatPieces"],this.poolBeat=e.components["pool__beat-broken-"+t],this.poolBeatFx=e.components["pool__beat-fx-"+t],this.poolPunchFx=e.components["pool__punch-fx-"+t]):"dot"===this.data.type?(this.material=e.systems.materials[t+"BeatPieces"],this.poolBeat=e.components[`pool__beat-broken-${t}-dot`],this.poolPunch=e.components[`pool__punch-broken-${t}-dot`],this.poolBeatFx=e.components["pool__beat-fx-"+t],this.poolPunchFx=e.components["pool__punch-fx-"+t]):(this.material=e.systems.materials.minePieces,this.poolBeat=e.components["pool__beat-broken-mine"],this.poolBeatFx=e.components["pool__beat-fx-mine"],this.poolPunchFx=e.components["pool__punch-fx-mine"])},setupModel:function(e){const t=e.detail.model;this.pieces=t.children;for(let e=0;e<this.pieces.length;e++){let t=this.pieces[e];t.restPosition=t.position.clone(),t.restRotation=t.rotation.clone(),t.posVelocity=new THREE.Vector3,t.rotVelocity=new THREE.Vector3,t.material=this.material}},explode:function(e){const t=e.detail.direction,n=e.detail.gameMode,s=e.detail.correctHit,u=e.detail.position,l=e.detail.rotation;let c=e.detail.beatDirection;if(u&&l&&t&&this.data.color===e.detail.color){if(this.el.object3D.position.copy(u),"classic"===n&&"mine"!==this.data.type){const e="dot"===this.data.type;e&&(c=Math.abs(t.x)>Math.abs(t.y)?"right":"down"),t.z*=.01,r.copy(t).multiplyScalar(-.0025).clampLength(0,.01);for(let t=0;t<this.pieces.length;t++){let n=this.pieces[t];if(n.posVelocity.copy(r),n.rotation.z=THREE.Math.degToRad(i[c]),s){let r=t%2==0?-.001:.001;n.posVelocity.x+=o[c].x*r,n.posVelocity.y+=o[c].y*r,!e||t<2?(a(n.posVelocity,.002),a(n.rotVelocity,.004)):(n.posVelocity.copy(this.pieces[t-2].posVelocity),n.rotVelocity.copy(this.pieces[t-2].rotVelocity))}else n.posVelocity.y+=.001,n.rotVelocity.z+=.01}}else for(let e=0;e<this.pieces.length;e++){let t=this.pieces[e];s?(t.posVelocity.copy(t.position).normalize().multiplyScalar(.002),t.posVelocity.z=-.004,a(t.posVelocity,.001),a(t.rotVelocity,.01)):(t.posVelocity.y+=.001,t.posVelocity.z-=.001)}this.pool=this["classic"===n?"poolBeat":"poolPunch"],null===this.fx&&(this.fxpool=this["classic"===n?"poolBeatFx":"poolPunchFx"],this.fx=this.fxpool.requestEntity()),this.fx&&(this.fx.play(),this.fx.object3D.position.copy(u),this.fx.object3D.rotation.copy(l),this.fx.emit("explode")),this.returnToPoolTimer=500,this.breaking=!0,this.el.play()}},returnToPool:function(){for(let e=0;e<this.pieces.length;e++){let t=this.pieces[e];t.position.copy(t.restPosition),t.rotation.copy(t.restRotation),t.posVelocity.set(0,0,0),t.rotVelocity.set(0,0,0),t.scale.set(1,1,1)}this.fx&&(this.fxpool.returnEntity(this.fx),this.fx=null),this.pool.returnEntity(this.el),this.breaking=!1},tick:function(e,t){if(this.breaking)if(this.returnToPoolTimer-=t,this.returnToPoolTimer<=0)this.returnToPool();else for(let e=0;e<this.pieces.length;e++){const n=this.pieces[e];n.position.addScaledVector(n.posVelocity,t),n.rotation.set(n.rotation.x+n.rotVelocity.x*t,n.rotation.y+n.rotVelocity.y*t,n.rotation.z+n.rotVelocity.z*t),"mine"!==this.data.type?(this.returnToPoolTimer<250&&n.scale.multiplyScalar(.94),n.posVelocity.multiplyScalar(.97),n.posVelocity.y-=3e-6*t):(n.scale.multiplyScalar(.94),n.posVelocity.multiplyScalar(.97))}}}),window.AFRAME){const t=["beat-cut-fx"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("beat-hit-sound",{directionsToSounds:{up:"",down:"",upleft:"left",upright:"right",downleft:"left",downright:"right",left:"left",right:"right"},init:function(){this.currentBeatEl=null,this.currentCutDirection="",this.processSound=this.processSound.bind(this),this.sourceCreatedCallback.bind(this);for(let e=1;e<=10;e++)this.el.setAttribute("sound__beathit"+e,{poolSize:8,positional:!1,src:"#hitSound"+e,volume:.185}),this.el.setAttribute(`sound__beathit${e}left`,{poolSize:8,positional:!1,src:`#hitSound${e}left`,volume:.185}),this.el.setAttribute(`sound__beathit${e}right`,{poolSize:8,positional:!1,src:`#hitSound${e}right`,volume:.185})},play:function(){for(let e=1;e<=10;e++)this.el.components["sound__beathit"+e].loaded||(this.el.setAttribute("sound__beathit"+e,"src",""),this.el.setAttribute("sound__beathit"+e,"src","#hitSound"+e)),this.el.components[`sound__beathit${e}left`].loaded||(this.el.setAttribute(`sound__beathit${e}left`,"src",""),this.el.setAttribute(`sound__beathit${e}left`,"src",`#hitSound${e}left`)),this.el.components[`sound__beathit${e}right`].loaded||(this.el.setAttribute(`sound__beathit${e}right`,"src",""),this.el.setAttribute(`sound__beathit${e}right`,"src",`#hitSound${e}right`))},playSound:function(e,t,n){const r=1+Math.floor(10*Math.random()),i=this.directionsToSounds[n||"up"];this.el.components[`sound__beathit${r}${i}`].playSound(this.processSound)},processSound:function(e){e.detune=0},sourceCreatedCallback:function(e){const t=this.getLayer(this.currentBeatEl.object3D.position.y);"bottom"===t?e.detune.setValueAtTime(-400,0):"top"===t&&e.detune.setValueAtTime(200,0),"down"===this.currentCutDirection&&e.detune.linearRampToValueAtTime(-400,1),"up"===this.currentCutDirection&&e.detune.linearRampToValueAtTime(400,1)},getLayer:function(e){return 1===e?"bottom":1.7===e?"top":"middle"}}),window.AFRAME){const t=["beat-hit-sound"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("blade",{schema:{enabled:{default:!1}},init:function(){const e=this.el;this.data,this.bladeHandle=e.querySelector(".bladeHandleHelper").object3D,this.bladeTip=e.querySelector(".bladeTipHelper").object3D,this.rigEl=document.getElementById("curveFollowRig"),this.strokeDirectionVector=new THREE.Vector3,this.strokeSpeed=0,this.bladeBottomPosition=new THREE.Vector3,this.bladeTipPositions=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],this.bladeWorldPositions=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],this.bladeEl=this.el.querySelector(".blade")},update:function(e){!e.enabled&&this.data.enabled&&this.bladeEl.emit("drawblade")},tickBeatSystem:function(e,t){this.data.enabled&&this.updateVelocity(t)},updateVelocity:function(e){const t=this.bladeTipPositions,n=this.bladeWorldPositions;this.data,n[2].copy(n[0]),n[3].copy(n[1]),this.bladeTip.getWorldPosition(n[0]),this.bladeHandle.getWorldPosition(n[1]),t[2].copy(n[0]),this.rigEl.object3D.worldToLocal(t[2]),this.strokeDirectionVector.copy(t[2]).sub(t[0]);const r=this.strokeDirectionVector.length();this.strokeSpeed=r/(e/1e3),this.strokeDirectionVector.z=0,this.strokeDirectionVector.normalize();const i=t.shift();t.push(i)},checkCollision:function(){const e=new THREE.Box3,t=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],n=new THREE.Triangle;return function(r){if(this.strokeSpeed<1)return!1;for(let e=0;e<3;e++)t[e].copy(this.bladeWorldPositions[e]),r.blockEl.object3D.worldToLocal(t[e]),t[e].multiplyScalar(1.75);return n.set(t[0],t[1],t[2]),e.copy(r.bbox),e.expandByScalar(.02),"left"!==r.horizontalPosition&&"right"!==r.horizontalPosition||e.expandByScalar(.07),!!e.intersectsTriangle(n)||(t[3].copy(this.bladeWorldPositions[3]),r.blockEl.object3D.worldToLocal(t[3]),n.set(t[2],t[3],t[0]),!!e.intersectsTriangle(n))}}(),createDebugCube:function(e,t){const n=new THREE.BoxGeometry(.05,.05,.05),r=new THREE.Mesh(n,new THREE.MeshBasicMaterial({color:t,side:THREE.DoubleSide}));r.position.copy(e),this.el.sceneEl.object3D.add(r)}}),window.AFRAME){const t=["blade"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerSystem("check-vr",{init:function(){AFRAME.utils.device.isMobile()&&(document.getElementById("vrButton").style.display="none"),setTimeout(()=>{AFRAME.utils.device.checkHeadsetConnected()&&this.el.emit("displayconnected")},250)}}),window.AFRAME){const t=[],n=[],r=["check-vr"];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("console-shortcuts",{play:function(){window.$=e=>document.querySelector(e),window.$$=e=>document.querySelectorAll(e),window.$$$=e=>document.querySelector(`[${e}]`).getAttribute(e),window.$$$$=e=>document.querySelector(`[${e}]`).components[e],window.scene=this.el,window.state=this.el.systems.state.state}}),window.AFRAME){const t=["console-shortcuts"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("controller",{schema:{hand:{default:"right",oneOf:["left","right"]}},init:function(){const e=this.el,t=this.data;this.controllerType="",e.addEventListener("controllerconnected",e=>{this.controllerType=e.detail.name,this.el.setAttribute("cursor",this.config[this.controllerType].cursor||{})});const n={hand:t.hand,model:!1};e.setAttribute("daydream-controls",n),e.setAttribute("oculus-go-controls",n),e.setAttribute("oculus-touch-controls",{hand:t.hand,model:!1,orientationOffset:{x:0,y:0,z:0}}),e.setAttribute("vive-controls",n),e.setAttribute("vive-focus-controls",n),e.setAttribute("windows-motion-controls",n),e.setAttribute("generic-tracked-controller-controls",n)},config:{"daydream-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"oculus-go-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"oculus-touch-controls":{cursor:{downEvents:["triggerdown","gripdown","abuttondown","bbuttondown","xbuttondown","ybuttondown"],upEvents:["triggerup","gripup","abuttonup","bbuttonup","xbuttonup","ybuttonup"]}},"vive-controls":{cursor:{downEvents:["trackpaddown","triggerdown","gripdown"],upEvents:["trackpadup","triggerup","gripup"]}},"vive-focus-controls":{cursor:{downEvents:["trackpaddown","triggerdown","gripdown"],upEvents:["trackpadup","triggerup","gripup"]}},"windows-motion-controls":{cursor:{downEvents:["trackpaddown","triggerdown","gripdown"],upEvents:["trackpadup","triggerup","gripup"]}},"generic-tracked-controller-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}}}}),window.AFRAME){const t=["controller"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("copy-texture",{dependencies:["geometry","material"],schema:{from:{type:"selector"}},init:function(){this.data.from.addEventListener("materialtextureloaded",()=>{this.copyTexture()}),this.copyTexture()},copyTexture:function(){const e=this.el,t=this.data.from,n=e.getObject3D("mesh").material;t.getObject3D("mesh")&&(n.map=t.getObject3D("mesh").material.map,n.map&&(n.map.needsUpdate=!0,n.needsUpdate=!0))}}),window.AFRAME){const t=["copy-texture"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("cursor-laser",{dependencies:["geometry"],schema:{enabled:{default:!0}},init:function(){const e=this.el;this.weaponEl=this.el.closest(".weapon");const t=this.el.getAttribute("geometry");e.object3D.position.z=-1*t.height/2,this.originalSize=t.height,this.currentLength=t.height},update:function(){this.el.object3D.visible=this.data.enabled},tick:function(){const e=this.el;if(!this.data.enabled)return;const t=this.weaponEl.components.cursor;if(!t)return;if(!t.intersectedEl)return e.object3D.position.z=-24.98,e.object3D.scale.x=.75,e.getObject3D("mesh").scale.y=50,void(this.currentLength=1);const n=this.weaponEl.components.raycaster.intersections[0];n&&(e.object3D.scale.x=1,e.object3D.position.z=-n.distance/2,e.getObject3D("mesh").scale.y=this.currentLength=n.distance)}}),window.AFRAME){const t=["cursor-laser"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("cursor-mesh",{schema:{active:{default:!0},cursorEl:{type:"selector"}},init:function(){this.scenePivotEl=document.getElementById("scenePivot")},update:function(){this.el.object3D.visible=this.data.active},tick:function(){var e,t,n=this.data.cursorEl,r=this.el,i=this.scenePivotEl;this.data.active&&n.components.cursor&&((t=n.components.cursor.intersectedEl)?(r.object3D.visible=!0,(e=n.components.raycaster.getIntersection(t))&&(r.object3D.position.copy(e.point),i&&r.object3D.rotation.copy(i.object3D.rotation))):r.object3D.visible=!1)}}),window.AFRAME){const t=["cursor-mesh"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("curve-follow-rig-reset",{schema:{isVictory:{type:"string"}},init:function(){this.el.sceneEl.addEventListener("cleargame",()=>{this.reset()})},update:function(e){const t=this.data;this.el,!e.isVictory&&t.isVictory&&this.reset()},reset:function(){this.el.components["supercurve-follow"].curveProgress=0,this.el.object3D.position.set(0,0,0),this.el.object3D.rotation.set(0,0,0)}}),window.AFRAME){const t=["curve-follow-rig-reset"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerShader("cutfxShader",{schema:{src:{type:"map",is:"uniform",default:"#cutfxImg"},color:{type:"color",is:"uniform",default:"#fff"},progress:{type:"number",is:"uniform"},transparent:{default:!0},blending:{default:"additive"},side:{default:"double"},depthTest:{default:!1},depthWrite:{default:!1}},vertexShader:n(69),fragmentShader:n(70)}),window.AFRAME){const t=[],n=["cutfxShader"],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t){e.exports="varying vec2 uvs;\nvoid main() {\n  uvs.xy = uv.xy;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n"},function(e,t){e.exports="varying vec2 uvs;\nuniform sampler2D src;\nuniform vec3 color;\nuniform float progress;\n\nvoid main() {\n  vec3 col = color;\n  float alpha = smoothstep(progress, 1.0, texture2D(src, uvs).a);\n  gl_FragColor = vec4(col, alpha);\n}\n"},function(e,t,n){if(AFRAME.registerComponent("debug-beat-generator",{dependencies:["beat-generator"],schema:{beatEnabled:{default:!1},stageEnabled:{default:!1}},init:function(){this.beatLoader=this.el.components["beat-generator"],this.selectedBeat={color:"red",position:"middleCenterLeft",type:"arrow",orientation:"up"},this.beats={},this.onKeyDown=this.onKeyDown.bind(this),(this.data.stageEnabled||AFRAME.utils.getUrlParameter("debugstage"))&&this.addDebugStageControls(),(this.data.beatEnabled||"gameplay"===AFRAME.utils.getUrlParameter("debugstate").trim())&&(window.addEventListener("keydown",this.onKeyDown),this.addDebugBeatControls())},spawn:function(){var e=this;Object.keys(this.beats).forEach((function(t){e.generateBeat(e.beats[t])}))},generateBeat:function(e){var t;"wall"!==e.type?(t="mine"===e.type?3:"red"===e.color?0:1,this.beatLoader.generateBeat({_lineIndex:this.beatLoader.positionHumanized[e.position].index,_lineLayer:this.beatLoader.positionHumanized[e.position].layer,_cutDirection:"dot"===e.type?8:this.beatLoader.orientationsHumanized.indexOf(e.orientation),_type:t})):this.generateWall(e)},generateWall:function(e){this.beatLoader.bpm=90,this.beatLoader.generateWall({_lineIndex:this.beatLoader.positionHumanized[e.position].index,_width:1,_duration:3})},onKeyDown:function(e){switch(e.keyCode){case 32:this.spawn()}},addDebugBeatControls:function(){const e=document.createElement("div"),t=this;var n;function r(t){const n=document.createElement("div");return n.id=t,n.style.marginBottom="20px",n.style.width="500px",n.style.display="inline-block",e.appendChild(n),n}function i(e,n,r){const i=document.createElement("div"),o=r||function(){const e=i.parentElement.querySelectorAll(".button");for(let t=0;t<e.length;t++)e[t].style.background="#000";i.style.background="#66f",t.selectedBeat[i.parentElement.id]=this.id,t["selected"+i.parentElement.id.charAt(0).toUpperCase()+i.parentElement.id.slice(1)+"El"]=this};return i.classList.add("button"),i.id=e,i.style.width="100px",i.style.height="30px",i.style.background="#000",i.style.color="#fff",i.style.zIndex=999999999,i.style.padding="5px",i.style.margin="5px",i.style.font="14px sans-serif",i.style.textAlign="center",i.style.lineHeight="30px",i.style.cursor="pointer",i.style.display="inline-block",i.innerHTML=e,n.appendChild(i),i.addEventListener("click",o),i}e.style.position="absolute",e.style.right="0",e.style.top="0",e.style.padding="10px",e.style.width="500px",e.style.height="600px",document.body.appendChild(e),function(){const t=r("type");i("arrow",t),i("dot",t),i("mine",t),i("wall",t),e.appendChild(t)}(),function(){const t=r("color");i("blue",t),i("red",t),e.appendChild(t)}(),function(){const t=r("orientation");i("top",t),i("left",t),i("right",t),i("down",t),e.appendChild(t)}(),(n=i("Set Beat",e,(function(){var e="mine"!==t.selectedBeat.type?" "+t.selectedBeat.color:"",n="arrow"!==t.selectedBeat.type?"":" "+t.selectedBeat.orientation;t.selectedBeat={position:t.selectedBeat.position,type:t.selectedBeat.type,orientation:t.selectedBeat.orientation,color:t.selectedBeat.color},t.selectedPositionEl&&(t.selectedPositionEl.innerHTML=t.selectedBeat.type+e+n,t.beats[t.selectedPositionEl.id]={position:t.selectedBeat.position,type:t.selectedBeat.type,orientation:t.selectedBeat.orientation,color:t.selectedBeat.color})}))).style.width="460px",n.style.bottomMargin="10px",function(){const e=r("position");i("topLeft",e),i("topCenterLeft",e),i("topCenterRight",e),i("topRight",e),i("middleLeft",e),i("middleCenterLeft",e),i("middleCenterRight",e),i("middleRight",e),i("bottomLeft",e),i("bottomCenterLeft",e),i("bottomCenterRight",e),i("bottomRight",e)}(),function(n,r){const o=i("Spawn (Space Bar)",e,()=>{t.spawn()});o.style.width="460px",o.style.bottomMargin="10px"}()},addDebugStageControls:function(){var e=0;const t=(t,n,r)=>{const i=document.createElement("div");i.style.position="absolute",i.id="stagecontrol"+t,i.style.width="100px",i.style.height="30px",i.style.top="element"===r?"20px":"70px",i.style.background="#000",i.style.color="#fff",i.style.zIndex=999999999,i.style.padding="5px",i.style.font="14px sans-serif",i.style.textAlign="center",i.style.cursor="pointer",i.style.left=20+120*t+"px",i.innerHTML=n,"element"===r?i.addEventListener("click",()=>{document.getElementById("stagecontrol"+e).style.background="#000",i.style.background="#66f",e=t}):i.addEventListener("click",()=>{this.beatLoader.generateEvent({_type:e,_value:t})}),document.body.appendChild(i)};["sky","tunnelNeon","leftStageLasers","rightStageLasers","floor"].forEach((e,n)=>{t(n,e,"element")}),["off","blue","blue","bluefade","","red","red","redfade"].forEach((e,n)=>{t(n,e,"value")})}}),window.AFRAME){const t=["debug-beat-generator"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){const r=["left","middleleft","middleright","right"],i=["bottom","middle","top"];if(AFRAME.registerComponent("debug-beat-positioning",{play:function(){let e=AFRAME.utils.getUrlParameter("debugbeatpositioning");e&&("punch"!==e&&"classic"!==e&&(e="classic"),this.el.emit("debugbeatpositioning"),setTimeout(()=>{const t=this.el.sceneEl.components["beat-generator"];t.data.gameMode=e,scene.components["beat-system"].data.gameMode=e,scene.components["beat-system"].updateBeatPositioning(),r.forEach(n=>{i.forEach(r=>{let i=t.requestBeat("punch"===e?"dot":"arrow","red"),o=Math.random()<.5?"left":"right";i.components.beat.onGenerate(.001,n,r,o),i.object3D.renderOrder=9999,i.play(),i=t.requestBeat("dot","blue"),o=Math.random()<.5?"down":"up",i.components.beat.onGenerate(.0015,n,r,o),i.object3D.renderOrder=9999,i.play()})});const n=scene.components.pool__wall.requestEntity();n.components.wall.onGenerate(.0015,"left",4,4,!0),n.play(),document.getElementById("beatContainer").removeAttribute("bind__visible"),document.getElementById("beatContainer").object3D.visible=!0},500))}}),window.AFRAME){const t=["debug-beat-positioning"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("debug-controller",{init:function(){var e,t;AFRAME.utils.getUrlParameter("debug")&&(console.log("%c debug-controller enabled ","background: #111; color: red"),e=document.getElementById("rightHand"),t=document.getElementById("leftHand"),e.setAttribute("tracked-controls","autoHide",!1),e.object3D.visible=!0,t.object3D.visible=!0,t.setAttribute("tracked-controls","autoHide",!1),AFRAME.utils.getUrlParameter("headfist")||(window.addEventListener("click",t=>{t.isTrusted&&(e.emit("triggerdown"),e.emit("triggerup"))}),"oculus"===AFRAME.utils.getUrlParameter("debug")?(e.emit("controllerconnected",{name:"oculus-touch-controls"}),t.emit("controllerconnected",{name:"oculus-touch-controls"}),e.setAttribute("controller","controllerType","oculus-touch-controls"),t.setAttribute("controller","controllerType","oculus-touch-controls")):(e.emit("controllerconnected",{name:"vive-controls"}),t.emit("controllerconnected",{name:"vive-controls"}),e.setAttribute("controller","controllerType","vive-controls"),t.setAttribute("controller","controllerType","vive-controls")),this.el.emit("enter-vr",null,!1),document.addEventListener("keydown",n=>{var r,i,o,a;n.shiftKey&&(32!==n.keyCode?81!==n.keyCode?(78===n.keyCode&&(this.secondaryGripDown?(t.emit("gripup"),this.secondaryGripDown=!1):(t.emit("gripdown"),this.secondaryGripDown=!0)),77===n.keyCode&&(this.primaryGripDown?(e.emit("gripup"),this.primaryGripDown=!1):(e.emit("gripdown"),this.primaryGripDown=!0)),49===n.keyCode&&t.emit("menudown"),n.ctrlKey?(o=t.getAttribute("position"),72===n.keyCode&&(o.x-=.02),74===n.keyCode&&(o.y-=.02),75===n.keyCode&&(o.y+=.02),76===n.keyCode&&(o.x+=.02),59!==n.keyCode&&186!==n.keyCode||(o.z-=.01),222===n.keyCode&&(o.z+=.01),t.setAttribute("position",AFRAME.utils.clone(o))):(r=e.getAttribute("position"),72===n.keyCode&&(r.x-=.02),74===n.keyCode&&(r.y-=.02),75===n.keyCode&&(r.y+=.02),76===n.keyCode&&(r.x+=.02),59!==n.keyCode&&186!==n.keyCode||(r.z-=.02),222===n.keyCode&&(r.z+=.02),e.setAttribute("position",AFRAME.utils.clone(r))),n.ctrlKey?(a=t.getAttribute("rotation"),89===n.keyCode&&(a.x-=10),79===n.keyCode&&(a.x+=10),85===n.keyCode&&(a.y-=10),73===n.keyCode&&(a.y+=10),t.setAttribute("rotation",AFRAME.utils.clone(a))):(i=e.getAttribute("rotation"),89===n.keyCode&&(i.x-=10),79===n.keyCode&&(i.x+=10),85===n.keyCode&&(i.y-=10),73===n.keyCode&&(i.y+=10),e.setAttribute("rotation",AFRAME.utils.clone(i)))):this.isSecondaryTriggerDown?(t.emit("triggerup"),this.isSecondaryTriggerDown=!1):(t.emit("triggerdown"),this.isSecondaryTriggerDown=!0):this.isTriggerDown?(e.emit("triggerup"),this.isTriggerDown=!1):(e.emit("triggerdown"),this.isTriggerDown=!0))})))},play:function(){var e,t;if(this.bounds=document.body.getBoundingClientRect(),!AFRAME.utils.getUrlParameter("debug"))return;if(AFRAME.utils.getUrlParameter("headfist"))return;e=document.getElementById("rightHand"),(t=document.getElementById("leftHand")).object3D.position.set(-.2,1.5,-.5),e.object3D.position.set(.2,1.5,-.5),t.setAttribute("rotation",{x:35,y:0,z:0});const n=AFRAME.utils.getUrlParameter("type");[e,t].forEach(e=>{e.querySelector(".laser").object3D.visible=!1,"classic"===n?(e.querySelector(".bladeContainer").removeAttribute("bind__visible"),e.querySelector(".bladeContainer").object3D.visible=!0,e.querySelector(".bladeContainer").object3D.scale.set(1,1,1)):"punch"===n?(e.querySelector(".punch").removeAttribute("bind__visible"),e.querySelector(".punch").object3D.visible=!0,e.querySelector(".punch").object3D.visible=!0,e.querySelector(".bladeHandle").object3D.visible=!1):"ride"===n&&(e.querySelector(".handStar").removeAttribute("bind__visible"),e.querySelector(".handStar").object3D.visible=!0,e.querySelector(".bladeHandle").object3D.visible=!1)})},onMouseMove:function(){const e=new THREE.Vector3,t=new THREE.Vector2,n=new THREE.Vector3;return function(r){const i=this.bounds,o=this.el.sceneEl.camera,a=r.clientX-i.left,s=r.clientY-i.top;t.x=a/i.width*2-1,t.y=-s/i.height*2-1,document.getElementById("camera").object3D.getWorldPosition(n),e.set(t.x,t.y,.5).unproject(o).sub(n).normalize();const u=document.getElementById("rightHand").object3D.position,l=-n.z/e.z;o.getWorldPosition(u).add(e.multiplyScalar(l)),u.y+=.8}}()}),window.AFRAME){const t=["debug-controller"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("debug-cursor",{init:function(){},log:function(e,t,n){t.id?console.log(`%c[${e}] ${t.id}`,"color: "+n):(console.log(`%c[${e}]`,"color: "+n),console.log(t))}}),window.AFRAME){const t=["debug-cursor"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){const r=AFRAME.utils.getUrlParameter("skipintro");if(AFRAME.registerComponent("debug-intro",{play:function(){r&&document.getElementById("startButton").emit("click")}}),window.AFRAME){const t=["debug-intro"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("debug-song-time",{dependencies:["song"],init:function(){AFRAME.utils.getUrlParameter("debug-song-time")&&setInterval(()=>{console.log(this.el.components.song.getCurrentTime())},250)}}),window.AFRAME){const t=["debug-song-time"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("debug-state",{play:function(){const e=AFRAME.utils.getUrlParameter("debugstate").trim();e&&setTimeout(()=>{e.split(",").forEach(e=>{this.el.sceneEl.emit("debug"+e.trim(),null,!1)})},500)}}),window.AFRAME){const t=["debug-state"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("delayed-proxy-event",{schema:{captureBubbles:{default:!1},enabled:{default:!0},event:{type:"string"},from:{type:"string"},to:{type:"string"},as:{type:"string"},bubbles:{default:!1},delay:{default:0,type:"int"}},multiple:!0,init:function(){var e,t,n,r=this.data,i=this.el,o=this;if(r.from?e="PARENT"===r.from?[i.parentNode]:document.querySelectorAll(r.from):n="CHILDREN"===r.to?i.querySelectorAll("*"):"SELF"===r.to?[i]:document.querySelectorAll(r.to),r.from)for(t=0;t<e.length;t++)this.addEventListenerFrom(e[t]);else i.addEventListener(r.event,(function(e){setTimeout(()=>{var r=o.data;if(r.enabled&&(r.captureBubbles||e.target===i))for(t=0;t<n.length;t++)n[t].emit(r.as||r.event,e.detail?e.detail:null,r.bubbles)},r.delay)}))},addEventListenerFrom:function(e){var t=this.data,n=this;e.addEventListener(t.event,(function(r){setTimeout(()=>{var t=n.data;t.enabled&&(t.captureBubbles||r.target===e)&&n.el.emit(t.as||t.event,r.detail?r.detail:null,!1)},t.delay)}))}}),window.AFRAME){const t=["delayed-proxy-event"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("difficulty-background",{schema:{enabled:{type:!1}},update:function(){this.data.enabled?this.el.setAttribute("raycastable",""):this.el.removeAttribute("raycastable")}}),window.AFRAME){const t=["difficulty-background"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("difficulty-filter",{events:{click:function(e){this.el.sceneEl.emit("difficultyfilter",e.target.parentNode.dataset.difficultyFilter)}}}),window.AFRAME){const t=["difficulty-filter"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("difficulty-text",{schema:{difficulty:{value:"Easy"}},update:function(){let e="";switch(this.data.difficulty){case"All":e="ALL";break;case"Easy":e="EASY";break;case"Normal":e="NORMAL";break;case"Hard":e="HARD";break;case"Expert":e="SUPER";break;case"Expertplus":e="SUPERNOVA";break;default:e="SUPERNOVA"}this.el.setAttribute("text","value",e)}}),window.AFRAME){const t=["difficulty-text"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("follow-position",{schema:{target:{type:"selector"}},tick:function(){this.el.object3D.position.copy(this.data.target.object3D.position)}}),window.AFRAME){const t=["follow-position"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("follow-z",{schema:{offset:{type:"vec3"},target:{type:"selector"}},tick:function(){this.data.target&&(this.el.object3D.position.copy(this.data.offset),this.el.object3D.position.z+=this.data.target.object3D.position.z)}}),window.AFRAME){const t=["follow-z"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("gameover",{schema:{isGameOver:{default:!1}},init:function(){this.beatContainer=document.getElementById("beatContainer"),this.gameOverEls=document.querySelectorAll("[animation__gameover]")},update:function(e){this.data,!e.isGameOver&&this.data.isGameOver&&(this.triggerAnimations(),this.countDown=1),e.isGameOver&&!this.data.isGameOver&&this.reset()},tick:function(e,t){this.data.isGameOver&&this.countDown>=0&&(this.beatContainer.object3D.position.z=1.5*-Math.pow(1-this.countDown,2),this.countDown-=t/1e3)},reset:function(){this.beatContainer.object3D.position.z=0,this.el.sceneEl.setAttribute("stage-colors","color","blue")},triggerAnimations:function(){for(let e=0;e<this.gameOverEls.length;e++)this.gameOverEls[e].emit("gameover",null,!1);this.el.emit("textglowoff",null,!1),this.el.emit("bgcolorgameover",null,!1)}}),window.AFRAME){const t=["gameover"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){let r=0;if(AFRAME.registerComponent("gpu-preloader",{dependencies:["materials"],play:function(){setTimeout(()=>{this.preloadFromSelector("#mainLogo"),this.preloadFromSelector("#prevArrow"),this.preloadFromSelector("#stepback"),this.preloadFromSelector(".difficultyBackground"),this.preloadFromSelector(".genreIcon"),this.preloadFromSelector(".merkababloom"),this.preloadFromSelector(".searchResultBackground"),this.preloadMaterialsComponentTextures(),this.preloadKeyboard(),this.preloadSlice(),this.preloadEnvMap(),this.preloadFXs()},1e3)},preloadFromSelector:function(e){const t=document.querySelector(e);this.preloadTexture(t.getObject3D("mesh").material.map)},preloadMaterialsComponentTextures:function(){const e=this.el.systems.materials.textureList;for(var t=0;t<e.length;t++)this.preloadTexture(e[t])},preloadKeyboard:function(){const e=document.getElementById("keyboard").components["super-keyboard"];this.preloadTexture(e.kbImg.getObject3D("mesh").material.map),this.preloadTexture(e.keyColorPlane.getObject3D("mesh").material.map)},preloadSlice:function(){const e=document.getElementById("searchPrevPage");this.preloadTexture(e.components.slice9.material.map)},preloadEnvMap:function(){const e=document.querySelector("#wallContainer [wall]");this.preloadTexture(e.components.material.material.uniforms.environment.value)},preloadFXs:function(){const e=document.querySelector("#rigContainer [mixin~=blueBeatFX]");this.preloadTexture(e.components.material.material.uniforms.src.value);const t=document.querySelector("#rigContainer [mixin~=mineFX]");this.preloadTexture(t.components.material.material.map)},preloadTexture:function(e){e&&e.image?e.image.complete?this.el.renderer.setTexture2D(e,r++%8):console.warn("[gpu-preloader] Error preloading, image not loaded",e):console.warn("[gpu-preloader] Error preloading texture",e)}}),window.AFRAME){const t=["gpu-preloader"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerShader("gradientShader",{schema:{color1:{type:"color",is:"uniform"},color2:{type:"color",is:"uniform"}},vertexShader:n(14),fragmentShader:n(87)}),window.AFRAME){const t=[],n=["gradientShader"],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t){e.exports="varying vec2 uvs;\nuniform vec3 color1;\nuniform vec3 color2;\n\nvoid main () {\n  float mixDistance = distance(uvs, vec2(0.5, 0));\n  float alphaDistance = min(1., (0.5 - distance(uvs, vec2(0.5))) * 2.5);\n  gl_FragColor = vec4(mix(color1, color2, pow(mixDistance, 2.4)), alphaDistance);\n}\n"},function(e,t,n){const r=["triggerdown","gripdown","abuttondown","bbuttondown","xbuttondown","ybuttondown","trackpaddown"];if(AFRAME.registerComponent("hand-swapper",{schema:{enabled:{default:!1}},init:function(){this.swapHand=this.swapHand.bind(this),r.forEach(e=>{this.el.addEventListener(e,this.swapHand)})},swapHand:function(){this.data.enabled&&this.el.sceneEl.emit("activehandswap",null,!1)}}),window.AFRAME){const t=["hand-swapper"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r);if(AFRAME.registerShader("handStar",{schema:{colorPrimary:{type:"color",is:"uniform",default:i.a.initial.primary},colorSecondary:{type:"color",is:"uniform",default:i.a.initial.secondary},colorTertiary:{type:"color",is:"uniform",default:i.a.initial.tertiary},pulse:{type:"number",is:"uniform",default:0},transparent:{default:!0},side:{default:"back"},depthTest:{default:!1}},vertexShader:n(90),fragmentShader:n(91)}),window.AFRAME){const t=[],n=["handStar"],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t){e.exports="varying vec3 vWorldPosition;\nvarying float fresnel;\nuniform float pulse;\n\nvoid main() {\n  vWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;\n  vec3 worldNormal = normalize(mat3(modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz) * normal);\n  vec3 viewVector =  normalize(vWorldPosition - cameraPosition);\n  fresnel = 0.08 * pow(0.4 + dot(viewVector, worldNormal), 6.0 + pulse);\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n"},function(e,t){e.exports="varying vec3 vWorldPosition;\nvarying float fresnel;\nuniform float pulse;\nuniform vec3 colorPrimary;\nuniform vec3 colorSecondary;\nuniform vec3 colorTertiary;\n\nvoid main() {\n  vec3 colorize = vWorldPosition-cameraPosition;\n  colorize = clamp(colorize + 0.5, vec3(0.0), vec3(1.0));\n  vec3 col = mix(mix(colorPrimary, colorSecondary, colorize.x), colorTertiary, colorize.z);\n  col += (fresnel * pulse) * 0.1;\n  gl_FragColor = vec4 (col, clamp(fresnel, 0.0, 1.0));\n}\n"},function(e,t,n){if(AFRAME.registerComponent("haptics-wall",{schema:{enabled:{default:!1}},init:function(){const e=this.el;this.isHittingWall=!1,e.setAttribute("haptics__wall",{dur:50,force:.15}),this.checkIfHittingWall=this.checkIfHittingWall.bind(this),e.addEventListener("mouseenter",this.checkIfHittingWall),e.addEventListener("mouseleave",this.checkIfHittingWall),this.tick=AFRAME.utils.throttleTick(this.tick.bind(this),50)},checkIfHittingWall:function(){const e=this.el.components.raycaster__game.intersectedEls;this.isHittingWall=!1;for(let t=0;t<e.length;t++)if(e[t].components.wall)return void(this.isHittingWall=!0)},tick:function(){this.data.enabled&&this.isHittingWall&&this.el.components.haptics__wall.pulse()}}),window.AFRAME){const t=["haptics-wall"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("haptics-weapons",{schema:{enabled:{default:!1}},init:function(){const e=this.el;this.isColliding=!1,this.tick=AFRAME.utils.throttleTick(this.tick.bind(this),100),e.setAttribute("haptics__weapon",{dur:100,force:.075}),e.addEventListener("mouseenter",t=>{if(!t.detail||!t.detail.intersectedEl||!this.data.enabled)return;const n=t.detail.intersectedEl;n.classList.contains("blade")&&n!==e?(this.isColliding=!0,this.el.components.haptics__weapon.pulse()):this.isColliding=!1}),e.addEventListener("mouseleave",e=>{this.isColliding=!1})},tick:function(){this.isColliding&&this.data.enabled&&this.el.components.haptics__weapon.pulse()}}),window.AFRAME){const t=["haptics-weapons"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){const r=!!AFRAME.utils.getUrlParameter("headfist");if(AFRAME.registerComponent("headfist",{schema:{hand:{type:"string"},isPlaying:{default:!1}},init:function(){console.log("[headfist] "+r),r&&(this.camera=document.getElementById("camera").object3D,this.originalParent=this.el.object3D.parent)},update:function(){const e=this.el;if(r&&this.camera)return this.data.isPlaying?(this.camera.add(e.object3D),e.object3D.rotation.set(-5,0,0),e.object3D.position.set("right"===this.data.hand?.175:-.175,.15,-.2),e.components["tracked-controls"].pause(),e.components["tracked-controls-webvr"]&&e.components["tracked-controls-webvr"].pause(),void(e.components["tracked-controls-webxr"]&&e.components["tracked-controls-webxr"].pause())):void(e.object3D.parent!==this.originalParent&&(console.log("[headfist] Detach."),this.originalParent.add(e.object3D),e.components["tracked-controls-webvr"]&&e.components["tracked-controls-webvr"].play(),e.components["tracked-controls-webxr"]&&e.components["tracked-controls-webxr"].play()))}}),window.AFRAME){const t=["headfist"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("history",{schema:{challengeId:{type:"string"},songName:{type:"string"},songSubName:{type:"string"}},update:function(){const e=this.data;history.pushState("",e.songName,updateQueryParam(window.location.href,"challenge",e.challengeId)),document.title="Super Saber - "+e.songName}}),window.AFRAME){const t=["history"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("intro-song",{schema:{isPlaying:{default:!0},isSearching:{default:!1}},init:function(){this.analyserEl=document.getElementById("audioAnalyser"),this.audio=document.getElementById("introSong"),this.timeout=null},update:function(e){const t=this.audio;this.el.sceneEl.isPlaying&&(!e.isSearching&&this.data.isSearching||(!e.isPlaying&&this.data.isPlaying&&(this.analyserEl.components.audioanalyser.resumeContext(),this.analyserEl.setAttribute("audioanalyser","src",t),this.fadeInAudio()),e.isPlaying&&!this.data.isPlaying&&t.pause()))},pause:function(){this.audio.pause()},play:function(){this.fadeInAudio()},fadeInAudio:function(){if(AFRAME.utils.getUrlParameter("mute"))return;const e=this.analyserEl.components.audioanalyser.context,t=this.analyserEl.components.audioanalyser.gainNode;t.gain.setValueAtTime(0,e.currentTime),this.audio.play(),t.gain.linearRampToValueAtTime(.5,e.currentTime+.5)}}),window.AFRAME){const t=["intro-song"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("keyboard-raycastable",{dependencies:["super-keyboard"],schema:{condition:{default:""}},play:function(){this.el.components["super-keyboard"].kbImg.setAttribute("bind-toggle__raycastable",this.data.condition)}}),window.AFRAME){const t=["keyboard-raycastable"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){const r=n(99),i=n(100);n(102);const o=/(fuc)|(ass)|(nig)|(shit)|(retard)/gi;if(AFRAME.registerComponent("leaderboard",{schema:{apiKey:{type:"string"},authDomain:{type:"string"},databaseURL:{type:"string"},projectId:{type:"string"},storageBucket:{type:"string"},messagingSenderId:{type:"string"},challengeId:{default:""},difficulty:{default:""},inVR:{default:!1},gameMode:{type:"string"},menuSelectedChallengeId:{default:""},isVictory:{default:!1}},init:function(){this.qualifyingIndex=void 0,this.scores=[],this.eventDetail={scores:this.scores},this.addEventDetail={scoreData:void 0,index:void 0},this.username=localStorage.getItem("moonriderusername")||"Super Zealot",this.el.addEventListener("leaderboardusername",e=>{this.username=e.detail.value,localStorage.setItem("moonriderusername",this.username)}),this.el.addEventListener("leaderboardsubmit",this.addScore.bind(this))},update:function(e){!r.apps.length&&this.data.apiKey&&(r.initializeApp({apiKey:this.data.apiKey,authDomain:this.data.authDomain,databaseURL:this.data.databaseURL,projectId:this.data.projectId,storageBucket:this.data.storageBucket,messagingSenderId:this.data.messagingSenderId}),this.firestore=r.firestore(),this.firestore.settings({}),this.db=this.firestore.collection("scores")),!e.isVictory&&this.data.isVictory&&this.checkLeaderboardQualify(),this.data.difficulty&&e.difficulty!==this.data.difficulty||this.data.menuSelectedChallengeId&&e.menuSelectedChallengeId!==this.data.menuSelectedChallengeId?this.fetchScores(this.data.menuSelectedChallengeId):this.data.challengeId&&e.challengeId!==this.data.challengeId&&this.fetchScores(this.data.challengeId)},addScore:function(){const e=this.el.sceneEl.systems.state.state;if(!e.isVictory||!e.inVR)return;const t={accuracy:e.score.accuracy,challengeId:e.challenge.id,gameMode:this.data.gameMode,score:e.score.score,username:this.username,difficulty:this.data.difficulty||e.challenge.difficulty,time:new Date};i.includes(this.username.toLowerCase())||this.username.match(o)||this.db.add(t),this.addEventDetail.scoreData=t,this.el.emit("leaderboardscoreadded",this.addEventDetail,!1)},fetchScores:function(e){if("ride"===this.data.gameMode)return;const t=this.el.sceneEl.systems.state.state;this.db.where("challengeId","==",e).where("difficulty","==",t.menuSelectedChallenge.id?t.menuSelectedChallenge.difficulty:t.challenge.difficulty).where("gameMode","==",this.data.gameMode).orderBy("score","desc").orderBy("time","asc").limit(10).get().then(t=>{this.eventDetail.challengeId=e,this.scores.length=0,t.empty||t.forEach(e=>this.scores.push(e.data())),this.el.sceneEl.emit("leaderboard",this.eventDetail,!1)}).catch(e=>{console.error("[firestore]",e)})},checkLeaderboardQualify:function(){const e=this.el.sceneEl.systems.state.state.score.score;if(!AFRAME.utils.getUrlParameter("dot")){if(this.scores.length<10)return this.qualifyingIndex=this.scores.length,void this.el.sceneEl.emit("leaderboardqualify",this.scores.length,!1);for(let t=0;t<this.scores.length;t++)if(e>this.scores[t].score)return this.qualifyingIndex=t,void this.el.sceneEl.emit("leaderboardqualify",t,!1)}}}),window.AFRAME){const t=["leaderboard"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){"use strict";var r,i=(r=n(21))&&"object"==typeof r&&"default"in r?r.default:r;
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */i.registerVersion("firebase","7.19.0","app"),e.exports=i},function(e,t,n){e.exports=n(101)},function(e){e.exports=JSON.parse('["2 girls 1 cup","2g1c","4r5e","5h1t","5hit","5ht","666","@$$","a s s","a s shole","a55","a55hole","a_s_s","abbo","abeed","abuse","acrotomophilia","addicts","aeolus","africoon","ahole","alabama hot pocket","alaskan pipeline","alligator bait","alligatorbait","amcik","anal","analannie","analprobe","analsex","andskota","anilingus","anus","apeshit","ar5e","arabush","arabushs","areola","areole","argie","arian","armo","armos","aroused","arrse","arschloch","arse","arsehole","aryan","ash0le","ash0les","asholes","ass monkey","ass","ass-fucker","ass-hat","ass-pirate","assbag","assbagger","assbandit","assbang","assbanged","assbanger","assbangs","assbite","assblaster","assclown","asscock","asscowboy","asscracker","asses","assface","assfuck","assfucker","assfukka","assgoblin","assh0le","assh0lez","asshat","asshead","assho1e","asshole","assholes","assholz","asshopper","asshore","assjacker","assjockey","asskiss","asskisser","assklown","asslick","asslicker","asslover","assman","assmaster","assmonkey","assmunch","assmuncher","assnigger","asspacker","asspirate","asspuppies","assrammer","assranger","assshit","assshole","asssucker","asswad","asswhole","asswhore","asswipe","asswipes","auto erotic","autoerotic","ayir","azazel","azz","azzhole","b a s t a r d","b i t c h","b o o b","b!+ch","b!tch","b!tchin","b*tch","b00b","b00bies","b00biez","b00bs","b00bz","b17ch","b1tch","b7ch","babeland","babes","baby batter","baby juice","backdoor","backdoorman","badfuck","bagging","ball gag","ball gravy","ball kicking","ball licking","ball sack","ball sucking","ballbag","balllicker","ballsack","bampot","bangbro","bangbros","banger","banging","bareback","barely legal","barelylegal","barenaked","barf","barface","barfface","bassterd","bassterds","bastard","bastardo","bastards","bastardz","basterds","basterdz","bastinado","bawdy","bazongas","bazooms","bbw","bdsm","beaner","beaners","beaney","beaneys","beardedclam","beastality","beastial","beastiality","beastility","beatch","beatoff","beatyourmeat","beaver cleaver","beaver lips","beaver","beeyotch","bellend","beotch","bestial","bestiality","bi curious","bi+ch","bi7ch","biatch","bicurious","big black","big breasts","big knockers","big tits","bigass","bigbastard","bigbreasts","bigbutt","bigtits","bimbo","bimbos","bint","birdlock","bitch","bitchass","bitched","bitcher","bitchers","bitches","bitchez","bitchin","bitching","bitchslap","bitchtit","bitchy","biteme","black cock","blackcock","blackman","blackout","blacks","blonde action","blonde on blonde action","blonde on blonde","bloody","blow j","blow job","blow your l","blow your load","blowjob","blowjobs","blue waffle","bluegum","bluegums","blumpkin","bo ob","bo obs","boang","boche","boches","bodily","boffing","bogan","bohunk","boink","boiolas","bollick","bollock","bollocks","bollok","bollox","bombers","bombing","bomd","bondage","boned","boner","boners","bong","boob","boobies","boobs","booby","boobz","boody","booger","bookie","boong","boonga","boongas","boongs","boonie","boonies","booobs","boooobs","booooobs","booooooobs","bootee","bootlip","bootlips","booty call","booty","bootycall","boozer","boozy","bosch","bosche","bosches","boschs","bosomy","bounty bar","bounty bars","bountybar","brea5t","breastjob","breastlover","breastman","brothel","brown showers","brunette action","btch","buceta","buddhahead","buddhaheads","buffies","bugger","buggered","buggery","bukkake","bule","bules","bullcrap","bulldike","bulldyke","bullet vibe","bullshit","bullshits","bullshitted","bullturds","bumblefuck","bumfuck","bung hole","bung","bunga","bungas","bunghole","bunny fucker","burr head","burr heads","burrhead","burrheads","butchbabes","butchdike","butchdyke","butt plug","butt-pirate","buttbang","buttcheeks","buttface","buttfuck","buttfucker","buttfuckers","butthead","butthole","buttman","buttmuch","buttmunch","buttmuncher","buttons","buttpirate","buttplug","buttstain","buttwipe","byatch","c u n t","c-0-c-k","c-o-c-k","c-u-n-t","c.0.c.k","c.o.c.k.","c.u.n.t","c0ck","c0cks","c0cksucker","c0k","cabron","caca","cacker","cahone","camel jockey","camel jockeys","camel toe","cameljockey","cameltoe","camgirl","camslut","camwhore","carpet muncher","carpetmuncher","carruth","cawk","cawks","cazzo","cervix","chav","cheese eating surrender monkey","cheese eating surrender monkies","cheeseeating surrender monkey","cheeseeating surrender monkies","cheesehead","cheeseheads","cherrypopper","chickslick","china swede","china swedes","chinaman","chinamen","chinaswede","chinaswedes","chinc","chincs","ching chong","ching chongs","chinga","chingchong","chingchongs","chink","chinks","chinky","choad","chocolate rosebuds","chode","chodes","chonkies","chonky","chonkys","chraa","christ killer","christ killers","chug","chugs","chuj","chunger","chungers","chunkies","chunkys","chute","cipa","circlejerk","cl1t","clamdigger","clamdiver","clamps","clansman","clansmen","clanswoman","clanswomen","cleveland steamer","climax","clit","clitface","clitfuck","clitoris","clitorus","clits","clitty","clogwog","clover clamps","clusterfuck","cnts","cntz","cnut","cocain","cocaine","cock","cock-head","cock-sucker","cockbite","cockblock","cockblocker","cockburger","cockcowboy","cockface","cockfight","cockfucker","cockhead","cockholster","cockknob","cockknocker","cocklicker","cocklover","cockmonkey","cockmunch","cockmuncher","cocknob","cocknose","cocknugget","cockqueen","cockrider","cocks","cockshit","cocksman","cocksmith","cocksmoker","cocksucer","cocksuck","cocksucked","cocksucker","cocksucking","cocksucks","cocksuka","cocksukka","cocktease","cocky","cohee","coital","coitus","cok","cokmuncher","coksucka","commie","condom","coochie","coochy","coolie","coolies","cooly","coon ass","coon asses","coon","coonass","coonasses","coondog","coons","cooter","coprolagnia","coprophilia","copulate","corksucker","cornhole","cowgirl","cox","cra5h","crabs","crackcocain","cracker","crackpipe","crackwhore","crap","crapola","crapper","crappy","crash","creampie","crotch","crotchjockey","crotchmonkey","crotchrot","cum","cumbubble","cumdumpster","cumfest","cumjockey","cumm","cummer","cummin","cumming","cumquat","cumqueen","cums","cumshot","cumshots","cumslut","cumstain","cumtart","cunilingus","cunillingus","cunn","cunnie","cunnilingus","cunntt","cunny","cunt","cunteyed","cuntface","cuntfuck","cuntfucker","cunthole","cunthunter","cuntlick","cuntlicker","cuntlicking","cuntrag","cunts","cuntslut","cuntsucker","cuntz","curry muncher","curry munchers","currymuncher","currymunchers","cushi","cushis","cyalis","cyberfuc","cyberfuck","cyberfucked","cyberfucker","cyberfuckers","cyberfucking","cybersex","cyberslimer","d0ng","d0uch3","d0uche","d1ck","d1ld0","d1ldo","d4mn","dago","dagos","dahmer","damm","dammit","damn","damnation","damned","damnit","darkey","darkeys","darkie","darkies","darky","date rape","daterape","datnigga","dawgie style","dawgie-style","daygo","deapthroat","deep throat","deep throating","deepaction","deepthroat","deepthroating","defecate","deggo","dego","degos","demon","dendrophilia","destroyyourpussy","deth","diaper head","diaper heads","diaperhead","diaperheads","dick pic","dick","dick-ish","dickbag","dickbeaters","dickbrain","dickdipper","dickface","dickflipper","dickforbrains","dickfuck","dickhead","dickheads","dickhole","dickish","dickjuice","dickless","dicklick","dicklicker","dickman","dickmilk","dickpic","dickripper","dicks","dicksipper","dickslap","dickwad","dickweasel","dickweed","dickwhipper","dickwod","dickzipper","diddle","dike","dild0","dild0s","dildo","dildos","dilf","diligaf","dilld0","dilld0s","dillweed","dimwit","dingle","dingleberries","dingleberry","dink","dinks","dipship","dipshit","dipstick","dirsa","dirty pillows","dirty sanchez","dix","dixiedike","dixiedyke","dlck","dog style","dog-fucker","doggie style","doggie","doggie-style","doggiestyle","doggin","dogging","doggy style","doggy-style","doggystyle","dolcett","domination","dominatricks","dominatrics","dominatrix","dommes","dong","donkey punch","donkeypunch","donkeyribber","doochbag","doodoo","doofus","dookie","doosh","dot head","dot heads","dothead","dotheads","double dong","double penetration","doubledong","doublepenetration","douch3","douche bag","douche","douche-fag","douchebag","douchebags","douchewaffle","douchey","dp action","dp","dpaction","dragqueen","dragqween","dripdick","drug","dry hump","dryhump","duche","dudette","dumass","dumb ass","dumbass","dumbasses","dumbbitch","dumbfuck","dumbshit","dummy","dumshit","dune coon","dune coons","dupa","dvda","dyefly","dyke","dykes","dziwka","earotics","easyslut","eat my ass","eat my","eatballs","eatme","eatmyass","eatpussy","ecchi","ejackulate","ejaculate","ejaculated","ejaculates","ejaculating","ejaculatings","ejaculation","ejaculations","ejakulate","ekrem","ekto","enculer","enema","enlargement","erect","erection","ero","erotic","erotism","escort","esqua","essohbee","ethical slut","evl","excrement","exkwew","explosion","extacy","extasy","f u c k e r","f u c k e","f u c k","f u k","f*ck","f-u-c-k","f.u.c.k","f4nny","f_u_c_k","facefucker","fack","faeces","faen","fag","fag1t","fagbag","faget","fagfucker","fagg","fagg1t","fagged","fagging","faggit","faggitt","faggot","faggotcock","faggs","fagit","fagot","fagots","fags","fagt","fagtard","fagz","faig","faigs","faigt","fanculo","fannybandit","fannyflaps","fannyfucker","fanyy","fartknocker","farty","fastfuck","fatah","fatass","fatfuck","fatfucker","fatso","fck","fckcum","fckd","fcuk","fcuker","fcuking","fecal","feces","feck","fecker","feg","felatio","felch","felcher","felching","fellate","fellatio","feltch","feltcher","feltching","female squirting","femalesquirtin","femalesquirting","femdom","fetish","ficken","figging","fingerbang","fingerfood","fingerfuck","fingerfucked","fingerfucker","fingerfuckers","fingerfucking","fingerfucks","fingering","fisted","fister","fistfuck","fistfucked","fistfucker","fistfuckers","fistfucking","fistfuckings","fistfucks","fisting","fisty","fitt","flamer","flange","flasher","flikker","flipping the bird","floo","floozy","flydie","flydye","foad","fok","fondle","foobar","fook","fooker","foot fetish","footaction","footfetish","footfuck","footfucker","footjob","footlicker","footstar","foreskin","forni","fornicate","fotze","foursome","fourtwenty","freakfuck","freakyfucker","freefuck","freex","frigg","frigga","frotting","fubar","fucck","fuck buttons","fuck","fuck-tard","fucka","fuckable","fuckass","fuckbag","fuckbook","fuckboy","fuckbrain","fuckbuddy","fuckbutt","fuckd","fucked","fuckedup","fucker","fuckers","fuckersucker","fuckface","fuckfest","fuckfreak","fuckfriend","fuckhead","fuckheads","fuckher","fuckhole","fuckin","fuckina","fucking","fuckingbitch","fuckings","fuckingshitmotherfucker","fuckinnuts","fuckinright","fuckit","fuckknob","fuckme","fuckmehard","fuckmonkey","fuckn","fucknugget","fucknut","fucknuts","fucknutt","fucknutz","fuckoff","fuckpig","fuckr","fucks","fuckstick","fucktard","fucktards","fuckup","fuckwad","fuckwhit","fuckwhore","fuckwit","fuckwitt","fuckyou","fudge packer","fudgepacker","fugly","fuk","fukah","fuken","fuker","fukin","fuking","fukk","fukkah","fukken","fukker","fukkin","fuks","fuktard","fuktards","fukwhit","fukwit","funeral","funfuck","fungus","futanari","futkretzn","fuuck","fux","fux0r","fvck","fvk","fxck","g-spot","g00k","gae","gai","gang bang","gangbang","gangbanged","gangbanger","gangbangs","gangsta","ganja","gator bait","gatorbait","gay sex","gayboy","gaygirl","gaylord","gaymuthafuckinwhore","gays","gaysex","gayz","geezer","geni","genital","genitals","getiton","gey","gfy","ghay","ghey","giant cock","gigolo","ginzo","ginzos","gipp","gippo","gippos","gipps","girl on top","girl on","girls gone wild","givehead","glans","glazeddonut","goatcx","goatse","gob","god dammit","god damn","god damnit","god-dam","god-damned","godam","godammit","godamn","godamnit","goddam","goddamit","goddamm","goddammit","goddamn","goddamned","goddamnes","goddamnit","goddamnmuthafucker","gokkun","golden shower","goldenshower","golliwog","golliwogs","gonad","gonads","gonorrehea","gonzagas","goo girl","gooch","goodpoop","gook eye","gook eyes","gook","gookeye","gookeyes","gookies","gooks","gooky","gora","goras","goregasm","gotohell","goy","goyim","greaseball","greaseballs","gringo","gringos","groe","groid","groids","grope","gross","grostulation","group sex","gspot","gstring","gtfo","gub","gubba","gubbas","gubs","guido","guiena","guineas","guizi","gummer","guro","gwailo","gwailos","gweilo","gweilos","gyopo","gyopos","gyp","gyped","gypo","gypos","gypp","gypped","gyppie","gyppies","gyppo","gyppos","gyppy","gyppys","gypsys","h e l l","h o m","h00r","h0ar","h0m0","h0mo","h0r","h0re","h4x0r","hadji","hadjis","hairyback","hairybacks","haji","hajis","hajji","hajjis","half breed","half caste","halfbreed","halfcaste","hamas","hand job","handjob","haole","haoles","hapa","hard core","hardcore","hardcoresex","hardon","harem","he11","headfuck","hebe","hebes","heeb","heebs","hell","hells","helvete","henhouse","hentai","heroin","herp","herpes","herpy","heshe","hijacker","hijacking","hillbillies","hillbilly","hindoo","hiscock","hitler","hitlerism","hitlerist","ho","hobag","hodgie","hoe","hoer","hoes","holestuffer","hom0","homey","homicide","homo","homobangers","homodumbshit","homoey","honger","honkers","honkey","honkeys","honkie","honkies","honky","hooch","hooker","hookers","hoor","hoore","hootch","hooter","hooters","hore","hori","horis","hork","horndawg","horndog","horney","horniest","horny","horseshit","hosejob","hoser","hot carl","hot chick","hotcarl","hotdamn","hotpussy","hotsex","hottotrot","how to kill","how to murder","huevon","huge fat","hugefat","hui","hummer","humped","humper","humpher","humphim","humpin","humping","husky","hussy","hustler","hymen","hymie","hymies","iblowu","ike","ikes","ikey","ikeymo","ikeymos","ikwe","illegal","illegals","inbred","incest","indon","indons","injun","injuns","insest","intercourse","interracial","intheass","inthebuff","israels","j3rk0ff","jack off","jack-off","jackass","jackhole","jackoff","jackshit","jacktheripper","jail bait","jailbait","jap","japcrap","japie","japies","japs","jebus","jelly donut","jerk off","jerk","jerk-off","jerk0ff","jerked","jerkoff","jerries","jerry","jesuschrist","jewed","jewess","jig","jiga","jigaboo","jigaboos","jigarooni","jigaroonis","jigg","jigga","jiggabo","jiggaboo","jiggabos","jiggas","jigger","jiggerboo","jiggers","jiggs","jiggy","jigs","jihad","jijjiboo","jijjiboos","jimfish","jisim","jism","jiss","jiz","jizim","jizin","jizjuice","jizm","jizn","jizz","jizzd","jizzed","jizzim","jizzin","jizzn","jizzum","jugg","juggs","jugs","jungle bunnies","jungle bunny","junglebunny","junkie","junky","kacap","kacapas","kacaps","kaffer","kaffir","kaffre","kafir","kanake","kanker","katsap","katsaps","kawk","khokhol","khokhols","kicking","kigger","kike","kikes","killer","kills","kimchis","kinbaku","kink","kinkster","kinky","kissass","kkk","klan","klansman","klansmen","klanswoman","klanswomen","klootzak","knobbing","knobead","knobed","knobend","knobhead","knobjocky","knobjokey","knobz","knockers","knulle","kock","kondum","kondums","kooch","kooches","koon","kootch","krap","krappy","kraut","krauts","kuffar","kuk","kuksuger","kum","kumbubble","kumbullbe","kumer","kummer","kumming","kumquat","kums","kunilingus","kunnilingus","kunt","kunts","kuntz","kurac","kurwa","kushi","kushis","kusi","kwa","kwai lo","kwai los","ky","kyke","kykes","kyopo","kyopos","kyrpa","l3i+ch","l3i\\\\+ch","l3itch","labia","lapdance","lds","leather restraint","leather straight jacket","leather straight","leatherrestraint","lebo","lebos","lech","lemon party","lemonparty","leper","lesbain","lesbayn","lesbian","lesbin","lesbo","lez","lezbe","lezbefriends","lezbian","lezbians","lezbo","lezbos","lezz","lezzian","lezzie","lezzies","lezzo","lezzy","libido","licker","licking","lickme","lilniglet","limey","limpdick","limy","lingerie","lipshits","lipshitz","livesex","lmfao","loadedgun","loin","loins","lolita","lovebone","lovegoo","lovegun","lovejuice","lovemaking","lovemuscle","lovepistol","loverocket","lowlife","lsd","lubejob","lubra","lucifer","luckycammeltoe","lugan","lugans","lust","lusting","lusty","lynch","m-fucking","m0f0","m0fo","m45terbate","ma5terb8","ma5terbate","mabuno","mabunos","macaca","macacas","magicwand","mahbuno","mahbunos","make me come","makemecome","makemecum","male squirting","mamhoon","mams","manhater","manpaste","maricon","maricn","marijuana","masochist","masokist","massa","massterbait","masstrbait","masstrbate","mastabate","mastabater","master-bate","masterb8","masterbaiter","masterbat","masterbat3","masterbate","masterbates","masterbating","masterbation","masterbations","masterblaster","mastrabator","masturbat","masturbate","masturbating","masturbation","mattressprincess","mau mau","mau maus","maumau","maumaus","mcfagget","meatbeatter","meatrack","menage a trois","menage","menses","menstruate","menstruation","merd","meth","mgger","mggor","mibun","mick","mickeyfinn","mideast","mierda","milf","minge","missionary position","missionary","mo-fo","mockey","mockie","mocky","mof0","mofo","moky","molest","molestation","molester","molestor","moneyshot","monkleigh","moolie","moon cricket","moon crickets","mooncricket","mooncrickets","mormon","moron","moskal","moskals","moslem","mosshead","motha fucker","motha fuker","motha fukkah","motha fukker","mothafuck","mothafucka","mothafuckas","mothafuckaz","mothafucked","mothafucker","mothafuckers","mothafuckin","mothafucking","mothafuckings","mothafucks","mother fucker","mother fukah","mother fuker","mother fukkah","mother fukker","mother-fucker","motherfuck","motherfucka","motherfucked","motherfucker","motherfuckers","motherfuckin","motherfucking","motherfuckings","motherfuckka","motherfucks","motherfvcker","motherlovebone","mothrfucker","mouliewop","mound of venus","moundofvenus","mr hands","mrhands","mtherfucker","mthrfuck","mthrfucker","mthrfucking","mtrfck","mtrfuck","mtrfucker","muff diver","muff","muffdive","muffdiver","muffdiving","muffindiver","mufflikcer","muie","mulatto","mulkku","muncher","munging","munt","murder","murderer","muschi","mutha fucker","mutha fukah","mutha fuker","mutha fukkah","mutha fukker","mutha","muthafecker","muthafuckaz","muthafucker","muthafuckker","muther","mutherfucker","mutherfucking","muthrfucking","mzungu","mzungus","n1gga","n1gger","n1gr","nad","nads","naked","nambla","nastt","nasty","nastybitch","nastyho","nastyslut","nastywhore","nawashi","nazi","nazis","nazism","necro","negres","negress","negro","negroes","negroid","negros","neonazi","nepesaurio","nig nog","nig","niga","nigar","nigars","nigas","niger","nigerian","nigerians","nigers","nigette","nigettes","nigg","nigg3r","nigg4h","nigga","niggah","niggahs","niggar","niggaracci","niggard","niggarded","niggarding","niggardliness","niggardlinesss","niggardly","niggards","niggars","niggas","niggaz","nigger","niggerhead","niggerhole","niggers","niggle","niggled","niggles","niggling","nigglings","niggor","niggress","niggresses","nigguh","nigguhs","niggur","niggurs","niglet","nignog","nigor","nigors","nigr","nigra","nigras","nigre","nigres","nigress","nigs","nigur","niiger","niigr","nimphomania","nimrod","ninny","nip","nipple","nipplering","nipples","nips","nittit","nlgger","nlggor","nob jokey","nob","nobhead","nobjocky","nobjokey","nofuckingway","nog","nookey","nookie","nooky","noonan","nooner","nsfw images","nsfw","nude","nudger","nudie","nudies","nudity","numbnuts","nut sack","nutfucker","nutsack","nymph","nympho","nymphomania","o c k","octopussy","omorashi","one cup two girls","one guy one jar","one guy","one jar","ontherag","orafis","oral","orally","orga","orgasim","orgasim;","orgasims","orgasm","orgasmic","orgasms","orgasum","orgies","orgy","oriface","orifice","orifiss","orospu","osama","ovum","ovums","p e n i s","p i s","p u s s y","p.u.s.s.y.","p0rn","packi","packie","packy","paddy","paedophile","paki","pakie","pakis","paky","palesimian","pancake face","pancake faces","panooch","pansies","pansy","panti","pantie","panties","panty","paska","pastie","pasty","payo","pcp","pearlnecklace","peck","pecker","peckerhead","peckerwood","pedo","pedobear","pedophile","pedophilia","pedophiliac","pee","peeenus","peeenusss","peehole","peenus","peepee","peepshow","peepshpw","pegging","peinus","pen1s","penas","pendejo","pendy","penetrate","penetration","peni5","penial","penile","penis","penis-breath","penises","penisfucker","penisland","penislick","penislicker","penispuffer","penthouse","penus","penuus","perse","perv","perversion","peyote","phalli","phallic","phone sex","phonesex","phuc","phuck","phuk","phuked","phuker","phuking","phukked","phukker","phukking","phuks","phungky","phuq","pi55","picaninny","piccaninny","picka","pickaninnies","pickaninny","piece of shit","pieceofshit","piefke","piefkes","pierdol","pigfucker","piker","pikey","piky","pillowbiter","pillu","pimmel","pimp","pimped","pimper","pimpis","pimpjuic","pimpjuice","pimpsimp","pindick","pinko","pis","pises","pisin","pising","pisof","piss pig","piss","piss-off","pissed","pisser","pissers","pisses","pissflaps","pisshead","pissin","pissing","pissoff","pisspig","pistol","pizda","playboy","playgirl","pleasure chest","pleasurechest","pms","pocha","pochas","pocho","pochos","pocketpool","pohm","pohms","polac","polack","polacks","polak","pole smoker","polesmoker","pollock","pollocks","pommie grant","pommie grants","pommie","pommies","pommy","ponyplay","poo","poof","poon","poonani","poonany","poontang","poontsee","poop chute","poop","poopchute","pooper","pooperscooper","pooping","poorwhitetrash","popimp","porch monkey","porch monkies","porchmonkey","porn","pornflick","pornking","porno","pornography","pornos","pornprincess","pound town","poundtown","pplicker","pr0n","pr1c","pr1ck","pr1k","prairie nigger","prairie niggers","premature","preteen","pric","prick","prickhead","pricks","prig","prince albert piercing","pron","propaganda","prostitute","pthc","pu55i","pu55y","pube","pubes","pubic","pubiclice","pubis","pud","pudboy","pudd","puddboy","puke","pula","pule","punanny","punany","punkass","punky","punta","puntang","purinapricness","pusies","puss","pusse","pussee","pussi","pussie","pussies","pussy","pussycat","pussydestroyer","pussyeater","pussyfucker","pussylicker","pussylicking","pussylips","pussylover","pussypounder","pussys","pusy","puta","puto","puuke","puuker","qahbeh","quashie","queaf","queef","queero","queers","queerz","quickie","quicky","quiff","quim","qweers","qweerz","qweir","r-tard","r-tards","r5e","ra8s","racial","radicals","raghead","ragheads","raging boner","raging","ragingboner","randy","rape","raped","raper","raping","rapist","raunch","rautenberg","rearend","rearentry","recktum","rectal","rectum","rectus","redleg","redlegs","redlight","redneck","rednecks","redskin","redskins","reefer","reestie","reetard","refugee","reich","renob","rentafuck","rere","retard","retarded","retards","retardz","reverse cowgirl","reversecowgirl","rigger","rimjaw","rimjob","rimming","ritard","rosebuds","rosy palm and her 5 sisters","rosy palm","rosypalm","rosypalmandher5sisters","rosypalmandherefivesisters","round eyes","roundeye","rtard","rtards","rump","rumprammer","ruski","russki","russkie","rusty trombone","rustytrombone","s h i t","s hit","s&m","s-h-1-t","s-h-i-t","s-o-b","s.h.i.t.","s.o.b.","s0b","s_h_i_t","sac","sack","sadis","sadism","sadist","sadom","sambo","sambos","samckdaddy","sanchez","sand nigger","sand niggers","sandm","sandnigger","santorum","scag","scallywag","scank","scantily","scat","schaffer","scheiss","schizo","schlampe","schlong","schmuck","schvartse","schvartsen","schwartze","schwartzen","scissoring","screwed","screwing","screwyou","scroat","scrog","scrot","scrote","scrotum","scrud","seduce","semen","seppo","seppos","septics","sex","sexed","sexfarm","sexhound","sexhouse","sexi","sexing","sexkitten","sexo","sexpot","sexslave","sextogo","sextoy","sextoys","sexual","sexually","sexwhore","sexx","sexxi","sexxx","sexxxi","sexxxy","sexxy","sexy","sexymoma","sexyslim","sh!+","sh!t","sh1t","sh1ter","sh1ts","sh1tter","sh1tz","shag","shagger","shaggin","shagging","shamedame","sharmuta","sharmute","shat","shav","shaved beaver","shaved pussy","shaved","shavedbeaver","shavedpussy","shawtypimp","sheeney","shemale","shhit","shi+","shibari","shinola","shipal","shit","shitass","shitbag","shitbagger","shitblimp","shitbrain","shitbreath","shitcan","shitcunt","shitdick","shite","shiteater","shited","shitey","shitface","shitfaced","shitfit","shitforbrains","shitfuck","shitfucker","shitfull","shithapens","shithappens","shithead","shithole","shithouse","shiting","shitings","shitlist","shitola","shitoutofluck","shits","shitspitter","shitstain","shitt","shitted","shitter","shitters","shittiest","shitting","shittings","shitty","shity","shitz","shiz","shiznit","shortfuck","shota","shrimping","shylock","shylocks","shyt","shyte","shytty","shyty","sissy","sixsixsix","sixtynine","sixtyniner","skag","skanck","skank","skankbitch","skankee","skankey","skankfuck","skanks","skankwhore","skanky","skankybitch","skankywhore","skeet","skinflute","skribz","skullfuck","skum","skumbag","skurwysyn","skwa","skwe","slag","slant","slanteye","slanty","slapper","slaughter","slave","slavedriver","sleaze","sleazy","sleezebag","sleezeball","slideitin","slimeball","slimebucket","slopehead","slopeheads","sloper","slopers","slopes","slopey","slopeys","slopies","slopy","slut","slutbag","slutdumper","slutkiss","sluts","slutt","slutting","slutty","slutwear","slutwhore","slutz","smack","smackthemonkey","smeg","smegma","smoker","smut","smutty","snatch","snatchpatch","snigger","sniggered","sniggering","sniggers","sniper","snowback","snowballing","snownigger","snuff","sob","socksucker","sodom","sodomise","sodomite","sodomize","sodomy","son of a bitch","son-of-a-bitch","sonofabitch","sonofbitch","sooties","sooty","souse","soused","spac","spade","spades","spaghettibender","spaghettinigger","spank","spankthemonkey","spearchucker","spearchuckers","sperm","spermacide","spermbag","spermhearder","spermherder","sphencter","spic","spick","spicks","spics","spierdalaj","spig","spigotty","spik","spiks","spitter","splittail","splooge moose","splooge","spludge","spooge","spread legs","spreadeagle","spunk","spunky","sqeh","squa","squarehead","squareheads","squaw","squinty","squirting","stagg","steamy","stfu","stiffy","stoned","stoner","strap on","strapon","strappado","stringer","strip club","stripclub","stroke","stroking","stuinties","stupid","stupidfuck","stupidfucker","style doggy","suck","suckdick","sucked","sucker","sucking","suckme","suckmyass","suckmydick","suckmytit","suckoff","sucks","suicide girl","suicide girls","suicide","suicidegirl","suicidegirls","suka","sultry women","sultry","sultrywoman","sultrywomen","sumofabiatch","swallow","swallower","swalow","swamp guinea","swamp guineas","swastika","swinger","syphilis","t i t","t i ts","t1t","t1tt1e5","t1tties","taboo","tacohead","tacoheads","taff","tainted love","tainted","take off your","tantra","tar babies","tar baby","tarbaby","tard","taste my","tastemy","tawdry","tea bagging","teabagging","teat","teets","teez","terd","terror","terrorist","teste","testee","testes","testical","testicle","testicles","testis","thicklip","thicklips","thirdeye","thirdleg","threesome","threeway","throat","throating","thrust","thug","thundercunt","ti","tied up","tight white","timber nigger","timber niggers","timbernigger","tinkle","tit","titbitnipply","titfuck","titfucker","titfuckin","titi","titjob","titlicker","titlover","tits","titt","tittie","tittie5","tittiefucker","titties","tittis","titty","tittyfuck","tittyfucker","tittys","tittywank","titwank","tity","to murder","toke","tongethruster","tongue in a","tongueina","tonguethrust","tonguetramp","toots","topless","tortur","torture","tosser","towel head","towel heads","towelhead","trailertrash","tramp","trannie","tranny","transsexual","transvestite","trashy","tribadism","triplex","trisexual","trois","trojan","trombone","trots","tub girl","tubgirl","tuckahoe","tunneloflove","turd","turnon","tush","tushy","tw4t","twat","twathead","twatlips","twats","twatty","twatwaffle","twink","twinkie","two girls one cup","twobitwhore","twunt","twunter","udge packer","ukrop","uncle tom","unclefucker","undies","undressing","unfuckable","unwed","upskirt","uptheass","upthebutt","urethra play","urethra","urethraplay","urinal","urinary","urinate","urine","urophilia","usama","ussys","uzi","v a g i n a","v14gra","v1gra","v4gra","va-j-j","va1jina","vag","vag1na","vagiina","vagina","vaginal","vaj1na","vajina","valium","venus mound","vgra","viagra","vibe","vibr","vibrater","vibrator","vietcong","violet wand","virgin","virginbreaker","vittu","vixen","vjayjay","vodka","vomit","vorarephilia","voyeur","vulgar","vullva","vulva","w00se","w0p","wab","wad","wang","wank","wanker","wanking","wanky","waysted","wazoo","wedgie","weed","weenie","weewee","weiner","weirdo","welcher","wench","wet dream","wetb","wetback","wetbacks","wetdream","wetspot","wh00r","wh0re","wh0reface","whacker","whash","whigger","whiggers","whiskeydick","whiskydick","whit","white power","white trash","whitenigger","whitepower","whites","whitetrash","whitey","whiteys","whities","whiz","whoar","whop","whoralicious","whore","whorealicious","whorebag","whored","whoreface","whorefucker","whorehopper","whorehouse","whores","whoring","wichser","wigga","wiggas","wigger","wiggers","willie","willies","williewanker","willy","wn","wog","wogs","woody","wop","wrapping men","wrinkled starfish","wtf","wuss","wuzzie","x-rated","xkwe","xrated","xtc","xx","xxx","xxxxxx","yank","yaoi","yarpie","yarpies","yeasty","yed","yellow showers","yellowman","yellowshowers","yid","yids","yiffy","yobbo","yourboobs","yourpenis","yourtits","zabourah","zigabo","zigabos","zipperhead","zipperheads","zoophile","zoophilia",""]')},function(e,t,n){"use strict";n.r(t),n(103)},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(7),o=(r=n(21))&&"object"==typeof r&&"default"in r?r.default:r,a=n(23),s=n(15),u=n(104),l=n(22),c=new a.Logger("@firebase/firestore");function h(){return c.logLevel}function d(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(c.logLevel<=a.LogLevel.DEBUG){var r=t.map(m);c.debug.apply(c,i.__spreadArrays(["Firestore (7.19.0): "+e],r))}}function f(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(c.logLevel<=a.LogLevel.ERROR){var r=t.map(m);c.error.apply(c,i.__spreadArrays(["Firestore (7.19.0): "+e],r))}}function p(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(c.logLevel<=a.LogLevel.WARN){var r=t.map(m);c.warn.apply(c,i.__spreadArrays(["Firestore (7.19.0): "+e],r))}}function m(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g(e){void 0===e&&(e="Unexpected state");var t="FIRESTORE (7.19.0) INTERNAL ASSERTION FAILED: "+e;throw f(t),new Error(t)}function y(e,t){e||g()}function v(e,t){return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var A=function(){function e(){}return e.t=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=b(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n},e}();function E(e,t){return e<t?-1:e>t?1:0}function w(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function S(e){return e+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _=function(e,t,n,r,i){this.s=e,this.persistenceKey=t,this.host=n,this.ssl=r,this.forceLongPolling=i},x=function(){function e(e,t){this.projectId=e,this.database=t||"(default)"}return Object.defineProperty(e.prototype,"i",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e.prototype.o=function(e){return E(this.projectId,e.projectId)||E(this.database,e.database)},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function R(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function N(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var T=function(){function e(e,t){this.h=e,this.u=t,this.l={}}return e.prototype.get=function(e){var t=this.h(e),n=this.l[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.u(a,e))return s}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(e,t){var n=this.h(e),r=this.l[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.u(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.l[n]=[[e,t]]},e.prototype.delete=function(e){var t=this.h(e),n=this.l[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.u(n[r][0],e))return 1===n.length?delete this.l[t]:n.splice(r,1),!0;return!1},e.prototype.forEach=function(e){R(this.l,(function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];e(a,s)}}))},e.prototype._=function(){return N(this.l)},e}(),M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},D=function(e){function t(t,n){var r=this;return(r=e.call(this,n)||this).code=t,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return i.__extends(t,e),t}(Error),O=function(){function e(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new D(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new D(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new D(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new D(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,1e6*(t-1e3*n))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype.T=function(e){return this.seconds===e.seconds?E(this.nanoseconds,e.nanoseconds):E(this.seconds,e.seconds)},e.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},e.prototype.valueOf=function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},e}(),F=function(){function e(e){this.timestamp=e}return e.m=function(t){return new e(t)},e.min=function(){return new e(new O(0,0))},e.prototype.o=function(e){return this.timestamp.T(e.timestamp)},e.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},e.prototype.I=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.A=function(){return this.timestamp},e}(),C=function(){function e(e,t,n){void 0===t?t=0:t>e.length&&g(),void 0===n?n=e.length-t:n>e.length-t&&g(),this.segments=e,this.offset=t,this.R=n}return Object.defineProperty(e.prototype,"length",{get:function(){return this.R},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return 0===e.P(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.g(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.V=function(e){return e=void 0===e?1:e,this.g(this.segments,this.offset+e,this.length-e)},e.prototype.p=function(){return this.g(this.segments,this.offset,this.length-1)},e.prototype.v=function(){return this.segments[this.offset]},e.prototype.S=function(){return this.get(this.length-1)},e.prototype.get=function(e){return this.segments[this.offset+e]},e.prototype._=function(){return 0===this.length},e.prototype.D=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.C=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},e.prototype.N=function(){return this.segments.slice(this.offset,this.limit())},e.P=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0},e}(),I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.g=function(e,n,r){return new t(e,n,r)},t.prototype.F=function(){return this.N().join("/")},t.prototype.toString=function(){return this.F()},t.k=function(e){if(e.indexOf("//")>=0)throw new D(M.INVALID_ARGUMENT,"Invalid path ("+e+"). Paths must not contain // in them.");return new t(e.split("/").filter((function(e){return e.length>0})))},t.$=function(){return new t([])},t}(C),P=/^[_a-zA-Z][_a-zA-Z0-9]*$/,L=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.g=function(e,n,r){return new t(e,n,r)},t.O=function(e){return P.test(e)},t.prototype.F=function(){return this.N().map((function(e){return e=e.replace("\\","\\\\").replace("`","\\`"),t.O(e)||(e="`"+e+"`"),e})).join(".")},t.prototype.toString=function(){return this.F()},t.prototype.M=function(){return 1===this.length&&"__name__"===this.get(0)},t.L=function(){return new t(["__name__"])},t.q=function(e){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new D(M.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new D(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new D(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new D(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)},t.$=function(){return new t([])},t}(C),j=function(){function e(e){this.path=e}return e.B=function(t){return new e(I.k(t))},e.U=function(t){return new e(I.k(t).V(5))},e.prototype.W=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},e.prototype.isEqual=function(e){return null!==e&&0===I.P(this.path,e.path)},e.prototype.toString=function(){return this.path.toString()},e.P=function(e,t){return I.P(e.path,t.path)},e.j=function(e){return e.length%2==0},e.K=function(t){return new e(new I(t.slice()))},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B(e){return null==e}function H(e){return-0===e&&1/e==-1/0}function V(e){return"number"==typeof e&&Number.isInteger(e)&&!H(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var q=function(e,t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.G=null};function W(e,t,n,r,i,o,a){return void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new q(e,t,n,r,i,o,a)}function U(e){var t=v(e);if(null===t.G){var n=t.path.F();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return function(e){return e.field.F()+e.op.toString()+Ie(e.value)}(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return(t=e).field.F()+t.dir;var t})).join(","),B(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=On(t.startAt)),t.endAt&&(n+="|ub:",n+=On(t.endAt)),t.G=n}return t.G}function z(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Ln(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],o=t.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!De(i.value,o.value))return!1;var i,o;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Cn(e.startAt,t.startAt)&&Cn(e.endAt,t.endAt)}function J(e){return j.j(e.path)&&null===e.collectionGroup&&0===e.filters.length}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var G=function(){function e(e){this.H=e}return e.fromBase64String=function(t){return new e(atob(t))},e.fromUint8Array=function(t){return new e(function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))},e.prototype.toBase64=function(){return e=this.H,btoa(e);var e},e.prototype.toUint8Array=function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.H)},e.prototype.Y=function(){return 2*this.H.length},e.prototype.o=function(e){return E(this.H,e.H)},e.prototype.isEqual=function(e){return this.H===e.H},e}();G.J=new G("");var K,Z,Y=function(){function e(e,t,n,r,i,o,a){void 0===i&&(i=F.min()),void 0===o&&(o=F.min()),void 0===a&&(a=G.J),this.target=e,this.targetId=t,this.X=n,this.sequenceNumber=r,this.Z=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return e.prototype.tt=function(t){return new e(this.target,this.targetId,this.X,t,this.Z,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.et=function(t,n){return new e(this.target,this.targetId,this.X,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.nt=function(t){return new e(this.target,this.targetId,this.X,this.sequenceNumber,this.Z,t,this.resumeToken)},e}(),X=function(e){this.count=e};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(e){switch(e){case M.OK:return g();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return g()}}function $(e){if(void 0===e)return f("GRPC error has no .code"),M.UNKNOWN;switch(e){case K.OK:return M.OK;case K.CANCELLED:return M.CANCELLED;case K.UNKNOWN:return M.UNKNOWN;case K.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case K.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case K.INTERNAL:return M.INTERNAL;case K.UNAVAILABLE:return M.UNAVAILABLE;case K.UNAUTHENTICATED:return M.UNAUTHENTICATED;case K.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case K.NOT_FOUND:return M.NOT_FOUND;case K.ALREADY_EXISTS:return M.ALREADY_EXISTS;case K.PERMISSION_DENIED:return M.PERMISSION_DENIED;case K.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case K.ABORTED:return M.ABORTED;case K.OUT_OF_RANGE:return M.OUT_OF_RANGE;case K.UNIMPLEMENTED:return M.UNIMPLEMENTED;case K.DATA_LOSS:return M.DATA_LOSS;default:return g()}}(Z=K||(K={}))[Z.OK=0]="OK",Z[Z.CANCELLED=1]="CANCELLED",Z[Z.UNKNOWN=2]="UNKNOWN",Z[Z.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Z[Z.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Z[Z.NOT_FOUND=5]="NOT_FOUND",Z[Z.ALREADY_EXISTS=6]="ALREADY_EXISTS",Z[Z.PERMISSION_DENIED=7]="PERMISSION_DENIED",Z[Z.UNAUTHENTICATED=16]="UNAUTHENTICATED",Z[Z.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Z[Z.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Z[Z.ABORTED=10]="ABORTED",Z[Z.OUT_OF_RANGE=11]="OUT_OF_RANGE",Z[Z.UNIMPLEMENTED=12]="UNIMPLEMENTED",Z[Z.INTERNAL=13]="INTERNAL",Z[Z.UNAVAILABLE=14]="UNAVAILABLE",Z[Z.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ee=function(){function e(e,t){this.P=e,this.root=t||ne.EMPTY}return e.prototype.st=function(t,n){return new e(this.P,this.root.st(t,n,this.P).copy(null,null,ne.it,null,null))},e.prototype.remove=function(t){return new e(this.P,this.root.remove(t,this.P).copy(null,null,ne.it,null,null))},e.prototype.get=function(e){for(var t=this.root;!t._();){var n=this.P(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null},e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n._();){var r=this.P(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1},e.prototype._=function(){return this.root._()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),e.prototype.rt=function(){return this.root.rt()},e.prototype.ot=function(){return this.root.ot()},e.prototype.ht=function(e){return this.root.ht(e)},e.prototype.forEach=function(e){this.ht((function(t,n){return e(t,n),!1}))},e.prototype.toString=function(){var e=[];return this.ht((function(t,n){return e.push(t+":"+n),!1})),"{"+e.join(", ")+"}"},e.prototype.at=function(e){return this.root.at(e)},e.prototype.ct=function(){return new te(this.root,null,this.P,!1)},e.prototype.ut=function(e){return new te(this.root,e,this.P,!1)},e.prototype.lt=function(){return new te(this.root,null,this.P,!0)},e.prototype._t=function(e){return new te(this.root,e,this.P,!0)},e}(),te=function(){function e(e,t,n,r){this.ft=r,this.dt=[];for(var i=1;!e._();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.ft?e.left:e.right;else{if(0===i){this.dt.push(e);break}this.dt.push(e),e=this.ft?e.right:e.left}}return e.prototype.wt=function(){var e=this.dt.pop(),t={key:e.key,value:e.value};if(this.ft)for(e=e.left;!e._();)this.dt.push(e),e=e.right;else for(e=e.right;!e._();)this.dt.push(e),e=e.left;return t},e.prototype.Tt=function(){return this.dt.length>0},e.prototype.Et=function(){if(0===this.dt.length)return null;var e=this.dt[this.dt.length-1];return{key:e.key,value:e.value}},e}(),ne=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype._=function(){return!1},e.prototype.ht=function(e){return this.left.ht(e)||e(this.key,this.value)||this.right.ht(e)},e.prototype.at=function(e){return this.right.at(e)||e(this.key,this.value)||this.left.at(e)},e.prototype.min=function(){return this.left._()?this:this.left.min()},e.prototype.rt=function(){return this.min().key},e.prototype.ot=function(){return this.right._()?this.key:this.right.ot()},e.prototype.st=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.st(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.st(e,t,n))).It()},e.prototype.At=function(){if(this.left._())return e.EMPTY;var t=this;return t.left.Rt()||t.left.left.Rt()||(t=t.Pt()),(t=t.copy(null,null,null,t.left.At(),null)).It()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left._()||i.left.Rt()||i.left.left.Rt()||(i=i.Pt()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.Rt()&&(i=i.gt()),i.right._()||i.right.Rt()||i.right.left.Rt()||(i=i.Vt()),0===n(t,i.key)){if(i.right._())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.At())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.It()},e.prototype.Rt=function(){return this.color},e.prototype.It=function(){var e=this;return e.right.Rt()&&!e.left.Rt()&&(e=e.yt()),e.left.Rt()&&e.left.left.Rt()&&(e=e.gt()),e.left.Rt()&&e.right.Rt()&&(e=e.pt()),e},e.prototype.Pt=function(){var e=this.pt();return e.right.left.Rt()&&(e=(e=(e=e.copy(null,null,null,null,e.right.gt())).yt()).pt()),e},e.prototype.Vt=function(){var e=this.pt();return e.left.left.Rt()&&(e=(e=e.gt()).pt()),e},e.prototype.yt=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.gt=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.pt=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.bt=function(){var e=this.vt();return Math.pow(2,e)<=this.size+1},e.prototype.vt=function(){if(this.Rt()&&this.left.Rt())throw g();if(this.right.Rt())throw g();var e=this.left.vt();if(e!==this.right.vt())throw g();return e+(this.Rt()?0:1)},e}();ne.EMPTY=null,ne.RED=!0,ne.it=!1,ne.EMPTY=new(function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw g()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw g()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw g()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw g()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw g()},enumerable:!1,configurable:!0}),e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.st=function(e,t,n){return new ne(e,t)},e.prototype.remove=function(e,t){return this},e.prototype._=function(){return!0},e.prototype.ht=function(e){return!1},e.prototype.at=function(e){return!1},e.prototype.rt=function(){return null},e.prototype.ot=function(){return null},e.prototype.Rt=function(){return!1},e.prototype.bt=function(){return!0},e.prototype.vt=function(){return 0},e}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var re=function(){function e(e){this.P=e,this.data=new ee(this.P)}return e.prototype.has=function(e){return null!==this.data.get(e)},e.prototype.first=function(){return this.data.rt()},e.prototype.last=function(){return this.data.ot()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.forEach=function(e){this.data.ht((function(t,n){return e(t),!1}))},e.prototype.St=function(e,t){for(var n=this.data.ut(e[0]);n.Tt();){var r=n.wt();if(this.P(r.key,e[1])>=0)return;t(r.key)}},e.prototype.Dt=function(e,t){var n;for(n=void 0!==t?this.data.ut(t):this.data.ct();n.Tt();)if(!e(n.wt().key))return},e.prototype.Ct=function(e){var t=this.data.ut(e);return t.Tt()?t.wt().key:null},e.prototype.ct=function(){return new ie(this.data.ct())},e.prototype.ut=function(e){return new ie(this.data.ut(e))},e.prototype.add=function(e){return this.copy(this.data.remove(e).st(e,!0))},e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},e.prototype._=function(){return this.data._()},e.prototype.Nt=function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.ct(),r=t.data.ct();n.Tt();){var i=n.wt().key,o=r.wt().key;if(0!==this.P(i,o))return!1}return!0},e.prototype.N=function(){var e=[];return this.forEach((function(t){e.push(t)})),e},e.prototype.toString=function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"},e.prototype.copy=function(t){var n=new e(this.P);return n.data=t,n},e}(),ie=function(){function e(e){this.Ft=e}return e.prototype.wt=function(){return this.Ft.wt().key},e.prototype.Tt=function(){return this.Ft.Tt()},e}(),oe=new ee(j.P);function ae(){return oe}function se(){return ae()}var ue=new ee(j.P);function le(){return ue}var ce=new ee(j.P),he=new re(j.P);function de(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=he,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var fe=new re(E);function pe(){return fe}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var me=function(){function e(e){this.P=e?function(t,n){return e(t,n)||j.P(t.key,n.key)}:function(e,t){return j.P(e.key,t.key)},this.kt=le(),this.$t=new ee(this.P)}return e.xt=function(t){return new e(t.P)},e.prototype.has=function(e){return null!=this.kt.get(e)},e.prototype.get=function(e){return this.kt.get(e)},e.prototype.first=function(){return this.$t.rt()},e.prototype.last=function(){return this.$t.ot()},e.prototype._=function(){return this.$t._()},e.prototype.indexOf=function(e){var t=this.kt.get(e);return t?this.$t.indexOf(t):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.$t.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(e){this.$t.ht((function(t,n){return e(t),!1}))},e.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.kt.st(e.key,e),t.$t.st(e,null))},e.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.kt.remove(e),this.$t.remove(t)):this},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.$t.ct(),r=t.$t.ct();n.Tt();){var i=n.wt().key,o=r.wt().key;if(!i.isEqual(o))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},e.prototype.copy=function(t,n){var r=new e;return r.P=this.P,r.kt=t,r.$t=n,r},e}(),ge=function(){function e(){this.Ot=new ee(j.P)}return e.prototype.track=function(e){var t=e.doc.key,n=this.Ot.get(t);n?0!==e.type&&3===n.type?this.Ot=this.Ot.st(t,e):3===e.type&&1!==n.type?this.Ot=this.Ot.st(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Ot=this.Ot.st(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Ot=this.Ot.st(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Ot=this.Ot.remove(t):1===e.type&&2===n.type?this.Ot=this.Ot.st(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Ot=this.Ot.st(t,{type:2,doc:e.doc}):g():this.Ot=this.Ot.st(t,e)},e.prototype.Mt=function(){var e=[];return this.Ot.ht((function(t,n){e.push(n)})),e},e}(),ye=function(){function e(e,t,n,r,i,o,a,s){this.query=e,this.docs=t,this.Lt=n,this.docChanges=r,this.qt=i,this.fromCache=o,this.Bt=a,this.Ut=s}return e.Qt=function(t,n,r,i){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,me.xt(n),o,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.qt._()},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.Bt===e.Bt&&this.qt.isEqual(e.qt)&&yn(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.Lt.isEqual(e.Lt)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},e}(),ve=function(){function e(e,t,n,r,i){this.Z=e,this.Wt=t,this.jt=n,this.Kt=r,this.Gt=i}return e.zt=function(t,n){var r=new Map;return r.set(t,be.Ht(t,n)),new e(F.min(),r,pe(),ae(),de())},e}(),be=function(){function e(e,t,n,r,i){this.resumeToken=e,this.Yt=t,this.Jt=n,this.Xt=r,this.Zt=i}return e.Ht=function(t,n){return new e(G.J,n,de(),de(),de())},e}(),Ae=function(e,t,n,r){this.te=e,this.removedTargetIds=t,this.key=n,this.ee=r},Ee=function(e,t){this.targetId=e,this.ne=t},we=function(e,t,n,r){void 0===n&&(n=G.J),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},Se=function(){function e(){this.se=0,this.ie=ke(),this.re=G.J,this.oe=!1,this.he=!0}return Object.defineProperty(e.prototype,"Yt",{get:function(){return this.oe},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this.re},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ae",{get:function(){return 0!==this.se},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ce",{get:function(){return this.he},enumerable:!1,configurable:!0}),e.prototype.ue=function(e){e.Y()>0&&(this.he=!0,this.re=e)},e.prototype.le=function(){var e=de(),t=de(),n=de();return this.ie.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:g()}})),new be(this.re,this.oe,e,t,n)},e.prototype._e=function(){this.he=!1,this.ie=ke()},e.prototype.fe=function(e,t){this.he=!0,this.ie=this.ie.st(e,t)},e.prototype.de=function(e){this.he=!0,this.ie=this.ie.remove(e)},e.prototype.we=function(){this.se+=1},e.prototype.Te=function(){this.se-=1},e.prototype.Ee=function(){this.he=!0,this.oe=!0},e}(),_e=function(){function e(e){this.me=e,this.Ie=new Map,this.Ae=ae(),this.Re=xe(),this.Pe=new re(E)}return e.prototype.ge=function(e){for(var t=0,n=e.te;t<n.length;t++){var r=n[t];e.ee instanceof rn?this.Ve(r,e.ee):e.ee instanceof on&&this.ye(r,e.key,e.ee)}for(var i=0,o=e.removedTargetIds;i<o.length;i++){var a=o[i];this.ye(a,e.key,e.ee)}},e.prototype.pe=function(e){var t=this;this.be(e,(function(n){var r=t.ve(n);switch(e.state){case 0:t.Se(n)&&r.ue(e.resumeToken);break;case 1:r.Te(),r.ae||r._e(),r.ue(e.resumeToken);break;case 2:r.Te(),r.ae||t.removeTarget(n);break;case 3:t.Se(n)&&(r.Ee(),r.ue(e.resumeToken));break;case 4:t.Se(n)&&(t.De(n),r.ue(e.resumeToken));break;default:g()}}))},e.prototype.be=function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Ie.forEach((function(e,r){n.Se(r)&&t(r)}))},e.prototype.Ce=function(e){var t=e.targetId,n=e.ne.count,r=this.Ne(t);if(r){var i=r.target;if(J(i))if(0===n){var o=new j(i.path);this.ye(t,o,new on(o,F.min()))}else y(1===n);else this.Fe(t)!==n&&(this.De(t),this.Pe=this.Pe.add(t))}},e.prototype.ke=function(e){var t=this,n=new Map;this.Ie.forEach((function(r,i){var o=t.Ne(i);if(o){if(r.Yt&&J(o.target)){var a=new j(o.target.path);null!==t.Ae.get(a)||t.$e(i,a)||t.ye(i,a,new on(a,e))}r.ce&&(n.set(i,r.le()),r._e())}}));var r=de();this.Re.forEach((function(e,n){var i=!0;n.Dt((function(e){var n=t.Ne(e);return!n||2===n.X||(i=!1,!1)})),i&&(r=r.add(e))}));var i=new ve(e,n,this.Pe,this.Ae,r);return this.Ae=ae(),this.Re=xe(),this.Pe=new re(E),i},e.prototype.Ve=function(e,t){if(this.Se(e)){var n=this.$e(e,t.key)?2:0;this.ve(e).fe(t.key,n),this.Ae=this.Ae.st(t.key,t),this.Re=this.Re.st(t.key,this.xe(t.key).add(e))}},e.prototype.ye=function(e,t,n){if(this.Se(e)){var r=this.ve(e);this.$e(e,t)?r.fe(t,1):r.de(t),this.Re=this.Re.st(t,this.xe(t).delete(e)),n&&(this.Ae=this.Ae.st(t,n))}},e.prototype.removeTarget=function(e){this.Ie.delete(e)},e.prototype.Fe=function(e){var t=this.ve(e).le();return this.me.Oe(e).size+t.Jt.size-t.Zt.size},e.prototype.we=function(e){this.ve(e).we()},e.prototype.ve=function(e){var t=this.Ie.get(e);return t||(t=new Se,this.Ie.set(e,t)),t},e.prototype.xe=function(e){var t=this.Re.get(e);return t||(t=new re(E),this.Re=this.Re.st(e,t)),t},e.prototype.Se=function(e){var t=null!==this.Ne(e);return t||d("WatchChangeAggregator","Detected inactive target",e),t},e.prototype.Ne=function(e){var t=this.Ie.get(e);return t&&t.ae?null:this.me.Me(e)},e.prototype.De=function(e){var t=this;this.Ie.set(e,new Se),this.me.Oe(e).forEach((function(n){t.ye(e,n,null)}))},e.prototype.$e=function(e,t){return this.me.Oe(e).has(t)},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(){return new ee(j.P)}function ke(){return new ee(j.P)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ne(e){var t=Pe(e.mapValue.fields.__local_write_time__.timestampValue);return new O(t.seconds,t.nanos)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Te=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Me(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Re(e)?4:10:g()}function De(e,t){var n=Me(e);if(n!==Me(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ne(e).isEqual(Ne(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Pe(e.timestampValue),r=Pe(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return je(e.bytesValue).isEqual(je(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Le(e.geoPointValue.latitude)===Le(t.geoPointValue.latitude)&&Le(e.geoPointValue.longitude)===Le(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Le(e.integerValue)===Le(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Le(e.doubleValue),r=Le(t.doubleValue);return n===r?H(n)===H(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return w(e.arrayValue.values||[],t.arrayValue.values||[],De);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(k(n)!==k(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!De(n[i],r[i])))return!1;return!0}(e,t);default:return g()}}function Oe(e,t){return void 0!==(e.values||[]).find((function(e){return De(e,t)}))}function Fe(e,t){var n=Me(e),r=Me(t);if(n!==r)return E(n,r);switch(n){case 0:return 0;case 1:return E(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Le(e.integerValue||e.doubleValue),r=Le(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ce(e.timestampValue,t.timestampValue);case 4:return Ce(Ne(e),Ne(t));case 5:return E(e.stringValue,t.stringValue);case 6:return function(e,t){var n=je(e),r=je(t);return n.o(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var o=E(n[i],r[i]);if(0!==o)return o}return E(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=E(Le(e.latitude),Le(t.latitude));return 0!==n?n:E(Le(e.longitude),Le(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var o=Fe(n[i],r[i]);if(o)return o}return E(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=E(r[a],o[a]);if(0!==s)return s;var u=Fe(n[r[a]],i[o[a]]);if(0!==u)return u}return E(r.length,o.length)}(e.mapValue,t.mapValue);default:throw g()}}function Ce(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return E(e,t);var n=Pe(e),r=Pe(t),i=E(n.seconds,r.seconds);return 0!==i?i:E(n.nanos,r.nanos)}function Ie(e){return function e(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(e){var t=Pe(e);return"time("+t.seconds+","+t.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?je(t.bytesValue).toBase64():"referenceValue"in t?(r=t.referenceValue,j.U(r).toString()):"geoPointValue"in t?"geo("+(n=t.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in t?function(t){for(var n="[",r=!0,i=0,o=t.values||[];i<o.length;i++){var a=o[i];r?r=!1:n+=",",n+=e(a)}return n+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var n="{",r=!0,i=0,o=Object.keys(t.fields||{}).sort();i<o.length;i++){var a=o[i];r?r=!1:n+=",",n+=a+":"+e(t.fields[a])}return n+"}"}(t.mapValue):g();var n,r}(e)}function Pe(e){if(y(!!e),"string"==typeof e){var t=0,n=Te.exec(e);if(y(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Le(e.seconds),nanos:Le(e.nanos)}}function Le(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function je(e){return"string"==typeof e?G.fromBase64String(e):G.fromUint8Array(e)}function Be(e,t){return{referenceValue:"projects/"+e.projectId+"/databases/"+e.database+"/documents/"+t.path.F()}}function He(e){return!!e&&"integerValue"in e}function Ve(e){return!!e&&"arrayValue"in e}function qe(e){return!!e&&"nullValue"in e}function We(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ue(e){return!!e&&"mapValue"in e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze={asc:"ASCENDING",desc:"DESCENDING"},Je={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ge=function(e,t){this.s=e,this.Le=t};function Ke(e){return{integerValue:""+e}}function Ze(e,t){if(e.Le){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:H(t)?"-0":t}}function Ye(e,t){return V(t)?Ke(t):Ze(e,t)}function Xe(e,t){return e.Le?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function Qe(e,t){return e.Le?t.toBase64():t.toUint8Array()}function $e(e,t){return Xe(e,t.A())}function et(e){return y(!!e),F.m(function(e){var t=Pe(e);return new O(t.seconds,t.nanos)}(e))}function tt(e,t){return function(e){return new I(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).F()}function nt(e){var t=I.k(e);return y(Et(t)),t}function rt(e,t){return tt(e.s,t.path)}function it(e,t){var n=nt(t);return y(n.get(1)===e.s.projectId),y(!n.get(3)&&!e.s.database||n.get(3)===e.s.database),new j(ut(n))}function ot(e,t){return tt(e.s,t)}function at(e){var t=nt(e);return 4===t.length?I.$():ut(t)}function st(e){return new I(["projects",e.s.projectId,"databases",e.s.database]).F()}function ut(e){return y(e.length>4&&"documents"===e.get(4)),e.V(5)}function lt(e,t,n){return{name:rt(e,t),fields:n.proto.mapValue.fields}}function ct(e,t){var n;if(t instanceof zt)n={update:lt(e,t.key,t.value)};else if(t instanceof Xt)n={delete:rt(e,t.key)};else if(t instanceof Jt)n={update:lt(e,t.key,t.data),updateMask:At(t.qe)};else if(t instanceof Kt)n={transform:{document:rt(e,t.key),fieldTransforms:t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof kt)return{fieldPath:t.field.F(),setToServerValue:"REQUEST_TIME"};if(n instanceof Rt)return{fieldPath:t.field.F(),appendMissingElements:{values:n.elements}};if(n instanceof Tt)return{fieldPath:t.field.F(),removeAllFromArray:{values:n.elements}};if(n instanceof Dt)return{fieldPath:t.field.F(),increment:n.Be};throw g()}(0,e)}))}};else{if(!(t instanceof Qt))return g();n={verify:rt(e,t.key)}}return t.Qe.Ue||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:$e(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:g()}(e,t.Qe)),n}function ht(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Lt.updateTime(et(e.updateTime)):void 0!==e.exists?Lt.exists(e.exists):Lt.We()}(t.currentDocument):Lt.We();if(t.update){t.update.name;var r=it(e,t.update.name),i=new $t({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Ct(t.map((function(e){return L.q(e)})))}(t.updateMask);return new Jt(r,i,o,n)}return new zt(r,i,n)}if(t.delete){var a=it(e,t.delete);return new Xt(a,n)}if(t.transform){var s=it(e,t.transform.document),u=t.transform.fieldTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)y("REQUEST_TIME"===t.setToServerValue),n=new kt;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Rt(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Tt(i)}else"increment"in t?n=new Dt(e,t.increment):g();var o=L.q(t.fieldPath);return new It(o,n)}(e,t)}));return y(!0===n.exists),new Kt(s,u)}if(t.verify){var l=it(e,t.verify);return new Qt(l,n)}return g()}function dt(e,t){return{documents:[ot(e,t.path)]}}function ft(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=ot(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=ot(e,r.p()),n.structuredQuery.from=[{collectionId:r.S()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(We(e.value))return{unaryFilter:{field:gt(e.field),op:"IS_NAN"}};if(qe(e.value))return{unaryFilter:{field:gt(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(We(e.value))return{unaryFilter:{field:gt(e.field),op:"IS_NOT_NAN"}};if(qe(e.value))return{unaryFilter:{field:gt(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gt(e.field),op:(t=e.op,Je[t]),value:e.value}};var t}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var o=function(e){if(0!==e.length)return e.map((function(e){return{field:gt((t=e).field),direction:(n=t.dir,ze[n])};var t,n}))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(e,t){return e.Le||B(t)?t:{value:t}}(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=pt(t.startAt)),t.endAt&&(n.structuredQuery.endAt=pt(t.endAt)),n}function pt(e){return{before:e.before,values:e.position}}function mt(e){var t=!!e.before,n=e.values||[];return new Dn(n,t)}function gt(e){return{fieldPath:e.F()}}function yt(e){return L.q(e.fieldPath)}function vt(e){return wn.create(yt(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return g()}}(e.fieldFilter.op),e.fieldFilter.value)}function bt(e){switch(e.unaryFilter.op){case"IS_NAN":var t=yt(e.unaryFilter.field);return wn.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=yt(e.unaryFilter.field);return wn.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=yt(e.unaryFilter.field);return wn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=yt(e.unaryFilter.field);return wn.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return g()}}function At(e){var t=[];return e.fields.forEach((function(e){return t.push(e.F())})),{fieldPaths:t}}function Et(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wt=function(){this.je=void 0};function St(e,t,n){return e instanceof kt?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Rt?Nt(e,t):e instanceof Tt?Mt(e,t):function(e,t){var n=xt(e,t),r=Ot(n)+Ot(e.Be);return He(n)&&He(e.Be)?Ke(r):Ze(e.serializer,r)}(e,t)}function _t(e,t,n){return e instanceof Rt?Nt(e,t):e instanceof Tt?Mt(e,t):n}function xt(e,t){return e instanceof Dt?He(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var kt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t}(wt),Rt=function(e){function t(t){var n=this;return(n=e.call(this)||this).elements=t,n}return i.__extends(t,e),t}(wt);function Nt(e,t){for(var n=Ft(t),r=function(e){n.some((function(t){return De(t,e)}))||n.push(e)},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Tt=function(e){function t(t){var n=this;return(n=e.call(this)||this).elements=t,n}return i.__extends(t,e),t}(wt);function Mt(e,t){for(var n=Ft(t),r=function(e){n=n.filter((function(t){return!De(t,e)}))},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Dt=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).serializer=t,r.Be=n,r}return i.__extends(t,e),t}(wt);function Ot(e){return Le(e.integerValue||e.doubleValue)}function Ft(e){return Ve(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct=function(){function e(e){this.fields=e,e.sort(L.P)}return e.prototype.Ke=function(e){for(var t=0,n=this.fields;t<n.length;t++)if(n[t].D(e))return!0;return!1},e.prototype.isEqual=function(e){return w(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))},e}(),It=function(e,t){this.field=e,this.transform=t},Pt=function(e,t){this.version=e,this.transformResults=t},Lt=function(){function e(e,t){this.updateTime=e,this.exists=t}return e.We=function(){return new e},e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"Ue",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)},e}();function jt(e,t){return void 0!==e.updateTime?t instanceof rn&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t instanceof rn}var Bt=function(){};function Ht(e,t,n){return e instanceof zt?function(e,t,n){return new rn(e.key,n.version,e.value,{hasCommittedMutations:!0})}(e,0,n):e instanceof Jt?function(e,t,n){if(!jt(e.Qe,t))return new an(e.key,n.version);var r=Gt(e,t);return new rn(e.key,n.version,r,{hasCommittedMutations:!0})}(e,t,n):e instanceof Kt?function(e,t,n){if(y(null!=n.transformResults),!jt(e.Qe,t))return new an(e.key,n.version);var r=Zt(0,t),i=function(e,t,n){var r=[];y(e.length===n.length);for(var i=0;i<n.length;i++){var o=e[i],a=o.transform,s=null;t instanceof rn&&(s=t.field(o.field)),r.push(_t(a,s,n[i]))}return r}(e.fieldTransforms,t,n.transformResults),o=n.version,a=Yt(e,r.data(),i);return new rn(e.key,o,a,{hasCommittedMutations:!0})}(e,t,n):function(e,t,n){return new on(e.key,n.version,{hasCommittedMutations:!0})}(e,0,n)}function Vt(e,t,n,r){return e instanceof zt?function(e,t){if(!jt(e.Qe,t))return t;var n=Ut(t);return new rn(e.key,n,e.value,{Ge:!0})}(e,t):e instanceof Jt?function(e,t){if(!jt(e.Qe,t))return t;var n=Ut(t),r=Gt(e,t);return new rn(e.key,n,r,{Ge:!0})}(e,t):e instanceof Kt?function(e,t,n,r){if(!jt(e.Qe,t))return t;var i=Zt(0,t),o=function(e,t,n,r){for(var i=[],o=0,a=e;o<a.length;o++){var s=a[o],u=s.transform,l=null;n instanceof rn&&(l=n.field(s.field)),null===l&&r instanceof rn&&(l=r.field(s.field)),i.push(St(u,l,t))}return i}(e.fieldTransforms,n,t,r),a=Yt(e,i.data(),o);return new rn(e.key,i.version,a,{Ge:!0})}(e,t,r,n):function(e,t){return jt(e.Qe,t)?new on(e.key,F.min()):t}(e,t)}function qt(e,t){return e instanceof Kt?function(e,t){for(var n=null,r=0,i=e.fieldTransforms;r<i.length;r++){var o=i[r],a=t instanceof rn?t.field(o.field):void 0,s=xt(o.transform,a||null);null!=s&&(n=null==n?(new en).set(o.field,s):n.set(o.field,s))}return n?n.ze():null}(e,t):null}function Wt(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.Qe.isEqual(t.Qe)&&(0===e.type?e.value.isEqual(t.value):1===e.type?e.data.isEqual(t.data)&&e.qe.isEqual(t.qe):2!==e.type||w(e.fieldTransforms,e.fieldTransforms,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Rt&&t instanceof Rt||e instanceof Tt&&t instanceof Tt?w(e.elements,t.elements,De):e instanceof Dt&&t instanceof Dt?De(e.Be,t.Be):e instanceof kt&&t instanceof kt}(e.transform,t.transform)}(e,t)})))}function Ut(e){return e instanceof rn?e.version:F.min()}var zt=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).key=t,i.value=n,i.Qe=r,i.type=0,i}return i.__extends(t,e),t}(Bt),Jt=function(e){function t(t,n,r,i){var o=this;return(o=e.call(this)||this).key=t,o.data=n,o.qe=r,o.Qe=i,o.type=1,o}return i.__extends(t,e),t}(Bt);function Gt(e,t){return function(e,t){var n=new en(t);return e.qe.fields.forEach((function(t){if(!t._()){var r=e.data.field(t);null!==r?n.set(t,r):n.delete(t)}})),n.ze()}(e,t instanceof rn?t.data():$t.empty())}var Kt=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.fieldTransforms=n,r.type=2,r.Qe=Lt.exists(!0),r}return i.__extends(t,e),t}(Bt);function Zt(e,t){return t}function Yt(e,t,n){for(var r=new en(t),i=0;i<e.fieldTransforms.length;i++){var o=e.fieldTransforms[i];r.set(o.field,n[i])}return r.ze()}var Xt=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.Qe=n,r.type=3,r}return i.__extends(t,e),t}(Bt),Qt=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.Qe=n,r.type=4,r}return i.__extends(t,e),t}(Bt),$t=function(){function e(e){this.proto=e}return e.empty=function(){return new e({mapValue:{}})},e.prototype.field=function(e){if(e._())return this.proto;for(var t=this.proto,n=0;n<e.length-1;++n){if(!t.mapValue.fields)return null;if(!Ue(t=t.mapValue.fields[e.get(n)]))return null}return(t=(t.mapValue.fields||{})[e.S()])||null},e.prototype.isEqual=function(e){return De(this.proto,e.proto)},e}(),en=function(){function e(e){void 0===e&&(e=$t.empty()),this.He=e,this.Ye=new Map}return e.prototype.set=function(e,t){return this.Je(e,t),this},e.prototype.delete=function(e){return this.Je(e,null),this},e.prototype.Je=function(e,t){for(var n=this.Ye,r=0;r<e.length-1;++r){var i=e.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Me(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(e.S(),t)},e.prototype.ze=function(){var e=this.Xe(L.$(),this.Ye);return null!=e?new $t(e):this.He},e.prototype.Xe=function(e,t){var n=this,r=!1,i=this.He.field(e),o=Ue(i)?Object.assign({},i.mapValue.fields):{};return t.forEach((function(t,i){if(t instanceof Map){var a=n.Xe(e.child(i),t);null!=a&&(o[i]=a,r=!0)}else null!==t?(o[i]=t,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},e}();function tn(e){var t=[];return R(e.fields||{},(function(e,n){var r=new L([e]);if(Ue(n)){var i=tn(n.mapValue).fields;if(0===i.length)t.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];t.push(r.child(s))}}else t.push(r)})),new Ct(t);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var nn=function(e,t){this.key=e,this.version=t},rn=function(e){function t(t,n,r,i){var o=this;return(o=e.call(this,t,n)||this).Ze=r,o.Ge=!!i.Ge,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return i.__extends(t,e),t.prototype.field=function(e){return this.Ze.field(e)},t.prototype.data=function(){return this.Ze},t.prototype.tn=function(){return this.Ze.proto},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.Ge===e.Ge&&this.hasCommittedMutations===e.hasCommittedMutations&&this.Ze.isEqual(e.Ze)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Ze.toString()+", {hasLocalMutations: "+this.Ge+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.Ge||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t}(nn),on=function(e){function t(t,n,r){var i=this;return(i=e.call(this,t,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return i.__extends(t,e),t.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.hasCommittedMutations===this.hasCommittedMutations&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(nn),an=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(nn);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(e,t){if(!(e instanceof t))throw t.name===e.constructor.name?new D(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass '"+t.name+"' from a different Firestore SDK?"):new D(M.INVALID_ARGUMENT,"Expected type '"+t.name+"', but was '"+e.constructor.name+"'");return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var un=function(){function e(e,t,n,r,i,o,a,s){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=e,this.collectionGroup=t,this.en=n,this.filters=r,this.limit=i,this.nn=o,this.startAt=a,this.endAt=s,this.sn=null,this.rn=null,this.startAt,this.endAt}return e.prototype.on=function(t){return new e(t,null,this.en.slice(),this.filters.slice(),this.limit,this.nn,this.startAt,this.endAt)},e.prototype.hn=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.en.length||1===this.en.length&&this.en[0].field.M())},e.prototype.an=function(){return!B(this.limit)&&"F"===this.nn},e.prototype.cn=function(){return!B(this.limit)&&"L"===this.nn},e.prototype.un=function(){return this.en.length>0?this.en[0].field:null},e.prototype.ln=function(){for(var e=0,t=this.filters;e<t.length;e++){var n=t[e];if(n._n())return n.field}return null},e.prototype.fn=function(e){for(var t=0,n=this.filters;t<n.length;t++){var r=n[t];if(e.indexOf(r.op)>=0)return r.op}return null},e}();function ln(e,t,n,r,i,o,a,s){return new un(e,t,n,r,i,o,a,s)}function cn(e){return new un(e)}function hn(e){return null!==e.collectionGroup}function dn(e){var t=sn(e,un);if(null===t.sn){t.sn=[];var n=t.ln(),r=t.un();if(null!==n&&null===r)n.M()||t.sn.push(new In(n)),t.sn.push(new In(L.L(),"asc"));else{for(var i=!1,o=0,a=t.en;o<a.length;o++){var s=a[o];t.sn.push(s),s.field.M()&&(i=!0)}if(!i){var u=t.en.length>0?t.en[t.en.length-1].dir:"asc";t.sn.push(new In(L.L(),u))}}}return t.sn}function fn(e){var t=sn(e,un);if(!t.rn)if("F"===t.nn)t.rn=W(t.path,t.collectionGroup,dn(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var n=[],r=0,i=dn(t);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new In(o.field,a))}var s=t.endAt?new Dn(t.endAt.position,!t.endAt.before):null,u=t.startAt?new Dn(t.startAt.position,!t.startAt.before):null;t.rn=W(t.path,t.collectionGroup,n,t.filters,t.limit,s,u)}return t.rn}function pn(e,t,n){return new un(e.path,e.collectionGroup,e.en.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function mn(e,t){return new un(e.path,e.collectionGroup,e.en.slice(),e.filters.slice(),e.limit,e.nn,t,e.endAt)}function gn(e,t){return new un(e.path,e.collectionGroup,e.en.slice(),e.filters.slice(),e.limit,e.nn,e.startAt,t)}function yn(e,t){return z(fn(e),fn(t))&&e.nn===t.nn}function vn(e){return U(fn(e))+"|lt:"+e.nn}function bn(e){return"Query(target="+function(e){var t=e.path.F();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: ["+e.filters.map((function(e){return(t=e).field.F()+" "+t.op+" "+Ie(t.value);var t})).join(", ")+"]"),B(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: ["+e.orderBy.map((function(e){return(t=e).field.F()+" ("+t.dir+")";var t})).join(", ")+"]"),e.startAt&&(t+=", startAt: "+On(e.startAt)),e.endAt&&(t+=", endAt: "+On(e.endAt)),"Target("+t+")"}(fn(e))+"; limitType="+e.nn+")"}function An(e,t){return function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.W(e.collectionGroup)&&e.path.D(n):j.j(e.path)?e.path.isEqual(n):e.path.C(n)}(e,t)&&function(e,t){for(var n=0,r=e.en;n<r.length;n++){var i=r[n];if(!i.field.M()&&null===t.field(i.field))return!1}return!0}(e,t)&&function(e,t){for(var n=0,r=e.filters;n<r.length;n++)if(!r[n].matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!Fn(e.startAt,dn(e),t)||e.endAt&&Fn(e.endAt,dn(e),t))}(e,t)}function En(e){return function(t,n){for(var r=!1,i=0,o=dn(e);i<o.length;i++){var a=o[i],s=Pn(a,t,n);if(0!==s)return s;r=r||a.field.M()}return 0}}var wn=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).field=t,i.op=n,i.value=r,i}return i.__extends(t,e),t.create=function(e,n,r){if(e.M())return"in"===n||"not-in"===n?this.dn(e,n,r):new Sn(e,n,r);if(qe(r)){if("=="!==n&&"!="!==n)throw new D(M.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new t(e,n,r)}if(We(r)){if("=="!==n&&"!="!==n)throw new D(M.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new t(e,n,r)}return"array-contains"===n?new Rn(e,r):"in"===n?new Nn(e,r):"not-in"===n?new Tn(e,r):"array-contains-any"===n?new Mn(e,r):new t(e,n,r)},t.dn=function(e,t,n){return"in"===t?new _n(e,n):new xn(e,n)},t.prototype.matches=function(e){var t=e.field(this.field);return"!="===this.op?null!==t&&this.wn(Fe(t,this.value)):null!==t&&Me(this.value)===Me(t)&&this.wn(Fe(t,this.value))},t.prototype.wn=function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return g()}},t.prototype._n=function(){return["<","<=",">",">=","!="].indexOf(this.op)>=0},t}((function(){})),Sn=function(e){function t(t,n,r){var i=this;return(i=e.call(this,t,n,r)||this).key=j.U(r.referenceValue),i}return i.__extends(t,e),t.prototype.matches=function(e){var t=j.P(e.key,this.key);return this.wn(t)},t}(wn),_n=function(e){function t(t,n){var r=this;return(r=e.call(this,t,"in",n)||this).keys=kn(0,n),r}return i.__extends(t,e),t.prototype.matches=function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))},t}(wn),xn=function(e){function t(t,n){var r=this;return(r=e.call(this,t,"not-in",n)||this).keys=kn(0,n),r}return i.__extends(t,e),t.prototype.matches=function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))},t}(wn);function kn(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return j.U(e.referenceValue)}))}var Rn=function(e){function t(t,n){return e.call(this,t,"array-contains",n)||this}return i.__extends(t,e),t.prototype.matches=function(e){var t=e.field(this.field);return Ve(t)&&Oe(t.arrayValue,this.value)},t}(wn),Nn=function(e){function t(t,n){return e.call(this,t,"in",n)||this}return i.__extends(t,e),t.prototype.matches=function(e){var t=e.field(this.field);return null!==t&&Oe(this.value.arrayValue,t)},t}(wn),Tn=function(e){function t(t,n){return e.call(this,t,"not-in",n)||this}return i.__extends(t,e),t.prototype.matches=function(e){var t=e.field(this.field);return null!==t&&!Oe(this.value.arrayValue,t)},t}(wn),Mn=function(e){function t(t,n){return e.call(this,t,"array-contains-any",n)||this}return i.__extends(t,e),t.prototype.matches=function(e){var t=this,n=e.field(this.field);return!(!Ve(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Oe(t.value.arrayValue,e)}))},t}(wn),Dn=function(e,t){this.position=e,this.before=t};function On(e){return(e.before?"b":"a")+":"+e.position.map((function(e){return Ie(e)})).join(",")}function Fn(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var o=t[i],a=e.position[i];if(r=o.field.M()?j.P(j.U(a.referenceValue),n.key):Fe(a,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function Cn(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!De(e.position[n],t.position[n]))return!1;return!0}var In=function(e,t){void 0===t&&(t="asc"),this.field=e,this.dir=t};function Pn(e,t,n){var r=e.field.M()?j.P(t.key,n.key):function(e,t,n){var r=t.field(e),i=n.field(e);return null!==r&&null!==i?Fe(r,i):g()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return g()}}function Ln(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jn=function(){function e(e,t,n,r){this.batchId=e,this.Tn=t,this.baseMutations=n,this.mutations=r}return e.prototype.En=function(e,t,n){for(var r=n.mn,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(e)&&(t=Ht(o,t,r[i]))}return t},e.prototype.In=function(e,t){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(e)&&(t=Vt(i,t,t,this.Tn))}for(var o=t,a=0,s=this.mutations;a<s.length;a++){var u=s[a];u.key.isEqual(e)&&(t=Vt(u,t,o,this.Tn))}return t},e.prototype.An=function(e){var t=this,n=e;return this.mutations.forEach((function(r){var i=t.In(r.key,e.get(r.key));i&&(n=n.st(r.key,i))})),n},e.prototype.keys=function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),de())},e.prototype.isEqual=function(e){return this.batchId===e.batchId&&w(this.mutations,e.mutations,(function(e,t){return Wt(e,t)}))&&w(this.baseMutations,e.baseMutations,(function(e,t){return Wt(e,t)}))},e}(),Bn=function(){function e(e,t,n,r){this.batch=e,this.Rn=t,this.mn=n,this.Pn=r}return e.from=function(t,n,r){y(t.mutations.length===r.length);for(var i=ce,o=t.mutations,a=0;a<o.length;a++)i=i.st(o[a].key,r[a].version);return new e(t,n,r,i)},e}(),Hn=function(){function e(e){var t=this;this.gn=null,this.Vn=null,this.result=void 0,this.error=void 0,this.yn=!1,this.pn=!1,e((function(e){t.yn=!0,t.result=e,t.gn&&t.gn(e)}),(function(e){t.yn=!0,t.error=e,t.Vn&&t.Vn(e)}))}return e.prototype.catch=function(e){return this.next(void 0,e)},e.prototype.next=function(t,n){var r=this;return this.pn&&g(),this.pn=!0,this.yn?this.error?this.bn(n,this.error):this.vn(t,this.result):new e((function(e,i){r.gn=function(n){r.vn(t,n).next(e,i)},r.Vn=function(t){r.bn(n,t).next(e,i)}}))},e.prototype.Sn=function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))},e.prototype.Dn=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}},e.prototype.vn=function(t,n){return t?this.Dn((function(){return t(n)})):e.resolve(n)},e.prototype.bn=function(t,n){return t?this.Dn((function(){return t(n)})):e.reject(n)},e.resolve=function(t){return new e((function(e,n){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.Cn=function(t){return new e((function(e,n){var r=0,i=0,o=!1;t.forEach((function(t){++r,t.next((function(){++i,o&&i===r&&e()}),(function(e){return n(e)}))})),o=!0,i===r&&e()}))},e.Nn=function(t){for(var n=e.resolve(!1),r=function(t){n=n.next((function(n){return n?e.resolve(n):t()}))},i=0,o=t;i<o.length;i++)r(o[i]);return n},e.forEach=function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.Cn(r)},e}(),Vn=function(){function e(){this.Fn=new T((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.kn=!1}return Object.defineProperty(e.prototype,"readTime",{get:function(){return this.$n},set:function(e){this.$n=e},enumerable:!1,configurable:!0}),e.prototype.xn=function(e,t){this.On(),this.readTime=t,this.Fn.set(e.key,e)},e.prototype.Mn=function(e,t){this.On(),t&&(this.readTime=t),this.Fn.set(e,null)},e.prototype.Ln=function(e,t){this.On();var n=this.Fn.get(t);return void 0!==n?Hn.resolve(n):this.qn(e,t)},e.prototype.getEntries=function(e,t){return this.Bn(e,t)},e.prototype.apply=function(e){return this.On(),this.kn=!0,this.Un(e)},e.prototype.On=function(){},e}(),qn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Wn=function(){function e(){this.Qn=[]}return e.prototype.Wn=function(e){this.Qn.push(e)},e.prototype.jn=function(){this.Qn.forEach((function(e){return e()}))},e}(),Un=function(){function e(e,t,n){this.Kn=e,this.Gn=t,this.zn=n}return e.prototype.Hn=function(e,t){var n=this;return this.Gn.Yn(e,t).next((function(r){return n.Jn(e,t,r)}))},e.prototype.Jn=function(e,t,n){return this.Kn.Ln(e,t).next((function(e){for(var r=0,i=n;r<i.length;r++)e=i[r].In(t,e);return e}))},e.prototype.Xn=function(e,t,n){var r=se();return t.forEach((function(e,t){for(var i=0,o=n;i<o.length;i++)t=o[i].In(e,t);r=r.st(e,t)})),r},e.prototype.Zn=function(e,t){var n=this;return this.Kn.getEntries(e,t).next((function(t){return n.ts(e,t)}))},e.prototype.ts=function(e,t){var n=this;return this.Gn.es(e,t).next((function(r){var i=n.Xn(e,t,r),o=ae();return i.forEach((function(e,t){t||(t=new on(e,F.min())),o=o.st(e,t)})),o}))},e.prototype.ns=function(e,t,n){return function(e){return j.j(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.ss(e,t.path):hn(t)?this.rs(e,t,n):this.os(e,t,n)},e.prototype.ss=function(e,t){return this.Hn(e,new j(t)).next((function(e){var t=le();return e instanceof rn&&(t=t.st(e.key,e)),t}))},e.prototype.rs=function(e,t,n){var r=this,i=t.collectionGroup,o=le();return this.zn.hs(e,i).next((function(a){return Hn.forEach(a,(function(a){var s=t.on(a.child(i));return r.os(e,s,n).next((function(e){e.forEach((function(e,t){o=o.st(e,t)}))}))})).next((function(){return o}))}))},e.prototype.os=function(e,t,n){var r,i,o=this;return this.Kn.ns(e,t,n).next((function(n){return r=n,o.Gn.as(e,t)})).next((function(t){return i=t,o.cs(e,i,r).next((function(e){r=e;for(var t=0,n=i;t<n.length;t++)for(var o=n[t],a=0,s=o.mutations;a<s.length;a++){var u=s[a],l=u.key,c=r.get(l),h=Vt(u,c,c,o.Tn);r=h instanceof rn?r.st(l,h):r.remove(l)}}))})).next((function(){return r.forEach((function(e,n){An(t,n)||(r=r.remove(e))})),r}))},e.prototype.cs=function(e,t,n){for(var r=de(),i=0,o=t;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof Jt&&null===n.get(u.key)&&(r=r.add(u.key))}var l=n;return this.Kn.getEntries(e,r).next((function(e){return e.forEach((function(e,t){null!==t&&t instanceof rn&&(l=l.st(e,t))})),l}))},e}(),zn=function(){function e(e,t,n,r){this.targetId=e,this.fromCache=t,this.us=n,this.ls=r}return e._s=function(t,n){for(var r=de(),i=de(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new e(t,n.fromCache,r,i)},e}(),Jn=function(){function e(e,t){var n=this;this.previousValue=e,t&&(t.fs=function(e){return n.ds(e)},this.ws=function(e){return t.Ts(e)})}return e.prototype.ds=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},e.prototype.next=function(){var e=++this.previousValue;return this.ws&&this.ws(e),e},e}();Jn.Es=-1;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Gn=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))},Kn=function(){function e(e,t,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.ms=e,this.Is=t,this.As=n,this.Rs=r,this.Ps=i,this.gs=0,this.Vs=null,this.ys=Date.now(),this.reset()}return e.prototype.reset=function(){this.gs=0},e.prototype.ps=function(){this.gs=this.Ps},e.prototype.bs=function(e){var t=this;this.cancel();var n=Math.floor(this.gs+this.vs()),r=Math.max(0,Date.now()-this.ys),i=Math.max(0,n-r);i>0&&d("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.gs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Vs=this.ms.Ss(this.Is,i,(function(){return t.ys=Date.now(),e()})),this.gs*=this.Rs,this.gs<this.As&&(this.gs=this.As),this.gs>this.Ps&&(this.gs=this.Ps)},e.prototype.Ds=function(){null!==this.Vs&&(this.Vs.Cs(),this.Vs=null)},e.prototype.cancel=function(){null!==this.Vs&&(this.Vs.cancel(),this.Vs=null)},e.prototype.vs=function(){return(Math.random()-.5)*this.gs},e}(),Zn=function(){function t(e,n,r){this.name=e,this.version=n,this.Ns=r,12.2===t.Fs(s.getUA())&&f("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(e){return d("SimpleDb","Removing database:",e),tr(window.indexedDB.deleteDatabase(e)).Sn()},t.ks=function(){if("undefined"==typeof indexedDB)return!1;if(t.$s())return!0;var e=s.getUA(),n=t.Fs(e),r=0<n&&n<10,i=t.xs(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.$s=function(){var t;return void 0!==e&&"YES"===(null===(t=e.env)||void 0===t?void 0:t.Os)},t.Ms=function(e,t){return e.store(t)},t.Fs=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.xs=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Ls=function(){return i.__awaiter(this,void 0,void 0,(function(){var e,t=this;return i.__generator(this,(function(n){switch(n.label){case 0:return this.db?[3,2]:(d("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,n){var r=indexedDB.open(t.name,t.version);r.onsuccess=function(t){var n=t.target.result;e(n)},r.onblocked=function(){n(new Xn("Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=function(e){var t=e.target.error;"VersionError"===t.name?n(new D(M.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):n(new Xn(t))},r.onupgradeneeded=function(e){d("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',e.oldVersion);var n=e.target.result;t.Ns.createOrUpgrade(n,r.transaction,e.oldVersion,t.version).next((function(){d("SimpleDb","Database upgrade to version "+t.version+" complete")}))}}))]);case 1:e.db=n.sent(),n.label=2;case 2:return[2,(this.qs&&(this.db.onversionchange=function(e){return t.qs(e)}),this.db)]}}))}))},t.prototype.Bs=function(e){this.qs=e,this.db&&(this.db.onversionchange=function(t){return e(t)})},t.prototype.runTransaction=function(e,t,n){return i.__awaiter(this,void 0,void 0,(function(){var r,o,a,s,u;return i.__generator(this,(function(l){switch(l.label){case 0:r="readonly"===e,o=0,a=function(){var e,a,u,l,c;return i.__generator(this,(function(i){switch(i.label){case 0:++o,i.label=1;case 1:return i.trys.push([1,4,,5]),[4,s.Ls()];case 2:return s.db=i.sent(),e=$n.open(s.db,r?"readonly":"readwrite",t),a=n(e).catch((function(t){return e.abort(t),Hn.reject(t)})).Sn(),u={},a.catch((function(){})),[4,e.Us];case 3:return[2,(u.value=(i.sent(),a),u)];case 4:return l=i.sent(),c="FirebaseError"!==l.name&&o<3,d("SimpleDb","Transaction failed with error: %s. Retrying: %s.",l.message,c),s.close(),c?[3,5]:[2,{value:Promise.reject(l)}];case 5:return[2]}}))},s=this,l.label=1;case 1:return[5,a()];case 2:if("object"==typeof(u=l.sent()))return[2,u.value];l.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Yn=function(){function e(e){this.Qs=e,this.Ws=!1,this.js=null}return Object.defineProperty(e.prototype,"yn",{get:function(){return this.Ws},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Ks",{get:function(){return this.js},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(e){this.Qs=e},enumerable:!1,configurable:!0}),e.prototype.done=function(){this.Ws=!0},e.prototype.Gs=function(e){this.js=e},e.prototype.delete=function(){return tr(this.Qs.delete())},e}(),Xn=function(e){function t(t){var n=this;return(n=e.call(this,M.UNAVAILABLE,"IndexedDB transaction failed: "+t)||this).name="IndexedDbTransactionError",n}return i.__extends(t,e),t}(D);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(e){return"IndexedDbTransactionError"===e.name}var $n=function(){function e(e){var t=this;this.transaction=e,this.aborted=!1,this.zs=new Gn,this.transaction.oncomplete=function(){t.zs.resolve()},this.transaction.onabort=function(){e.error?t.zs.reject(new Xn(e.error)):t.zs.resolve()},this.transaction.onerror=function(e){var n=rr(e.target.error);t.zs.reject(new Xn(n))}}return e.open=function(t,n,r){try{return new e(t.transaction(r,n))}catch(t){throw new Xn(t)}},Object.defineProperty(e.prototype,"Us",{get:function(){return this.zs.promise},enumerable:!1,configurable:!0}),e.prototype.abort=function(e){e&&this.zs.reject(e),this.aborted||(d("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){var t=this.transaction.objectStore(e);return new er(t)},e}(),er=function(){function e(e){this.store=e}return e.prototype.put=function(e,t){var n;return void 0!==t?(d("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(d("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),tr(n)},e.prototype.add=function(e){return d("SimpleDb","ADD",this.store.name,e,e),tr(this.store.add(e))},e.prototype.get=function(e){var t=this;return tr(this.store.get(e)).next((function(n){return void 0===n&&(n=null),d("SimpleDb","GET",t.store.name,e,n),n}))},e.prototype.delete=function(e){return d("SimpleDb","DELETE",this.store.name,e),tr(this.store.delete(e))},e.prototype.count=function(){return d("SimpleDb","COUNT",this.store.name),tr(this.store.count())},e.prototype.Hs=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.Ys(n,(function(e,t){r.push(t)})).next((function(){return r}))},e.prototype.Js=function(e,t){d("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Xs=!1;var r=this.cursor(n);return this.Ys(r,(function(e,t,n){return n.delete()}))},e.prototype.Zs=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Ys(r,t)},e.prototype.ti=function(e){var t=this.cursor({});return new Hn((function(n,r){t.onerror=function(e){var t=rr(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))},e.prototype.Ys=function(e,t){var n=[];return new Hn((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new Yn(i),a=t(i.primaryKey,i.value,o);if(a instanceof Hn){var s=a.catch((function(e){return o.done(),Hn.reject(e)}));n.push(s)}o.yn?r():null===o.Ks?i.continue():i.continue(o.Ks)}else r()}})).next((function(){return Hn.Cn(n)}))},e.prototype.options=function(e,t){var n=void 0;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}},e.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Xs?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},e}();function tr(e){return new Hn((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=rr(e.target.error);n(t)}}))}var nr=!1;function rr(e){var t=Zn.Fs(s.getUA());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new D("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return nr||(nr=!0,setTimeout((function(){throw r}),0)),r}}return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(){return"undefined"!=typeof window?window:null}function or(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ar=function(){function e(e,t,n,r,i){this.ei=e,this.Is=t,this.ni=n,this.op=r,this.si=i,this.ii=new Gn,this.then=this.ii.promise.then.bind(this.ii.promise),this.ii.promise.catch((function(e){}))}return e.ri=function(t,n,r,i,o){var a=new e(t,n,Date.now()+r,i,o);return a.start(r),a},e.prototype.start=function(e){var t=this;this.oi=setTimeout((function(){return t.hi()}),e)},e.prototype.Cs=function(){return this.hi()},e.prototype.cancel=function(e){null!==this.oi&&(this.clearTimeout(),this.ii.reject(new D(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},e.prototype.hi=function(){var e=this;this.ei.ai((function(){return null!==e.oi?(e.clearTimeout(),e.op().then((function(t){return e.ii.resolve(t)}))):Promise.resolve()}))},e.prototype.clearTimeout=function(){null!==this.oi&&(this.si(this),clearTimeout(this.oi),this.oi=null)},e}(),sr=function(){function e(){var e=this;this.ci=Promise.resolve(),this.ui=[],this.li=!1,this._i=[],this.fi=null,this.di=!1,this.wi=[],this.Ti=new Kn(this,"async_queue_retry"),this.Ei=function(){var t=or();t&&d("AsyncQueue","Visibility state changed to  ",t.visibilityState),e.Ti.Ds()};var t=or();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Ei)}return Object.defineProperty(e.prototype,"mi",{get:function(){return this.li},enumerable:!1,configurable:!0}),e.prototype.ai=function(e){this.enqueue(e)},e.prototype.Ii=function(e){this.Ai(),this.Ri(e)},e.prototype.Pi=function(){if(!this.li){this.li=!0;var e=or();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ei)}},e.prototype.enqueue=function(e){return this.Ai(),this.li?new Promise((function(e){})):this.Ri(e)},e.prototype.gi=function(e){var t=this;this.ui.push(e),this.ai((function(){return t.Vi()}))},e.prototype.Vi=function(){return i.__awaiter(this,void 0,void 0,(function(){var e,t=this;return i.__generator(this,(function(n){switch(n.label){case 0:if(0===this.ui.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.ui[0]()];case 2:return n.sent(),this.ui.shift(),this.Ti.reset(),[3,4];case 3:if(!Qn(e=n.sent()))throw e;return d("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:this.ui.length>0&&this.Ti.bs((function(){return t.Vi()})),n.label=5;case 5:return[2]}}))}))},e.prototype.Ri=function(e){var t=this,n=this.ci.then((function(){return t.di=!0,e().catch((function(e){throw t.fi=e,t.di=!1,f("INTERNAL UNHANDLED ERROR: ",function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e})).then((function(e){return t.di=!1,e}))}));return this.ci=n,n},e.prototype.Ss=function(e,t,n){var r=this;this.Ai(),this.wi.indexOf(e)>-1&&(t=0);var i=ar.ri(this,e,t,n,(function(e){return r.yi(e)}));return this._i.push(i),i},e.prototype.Ai=function(){this.fi&&g()},e.prototype.pi=function(){},e.prototype.bi=function(){return i.__awaiter(this,void 0,void 0,(function(){var e;return i.__generator(this,(function(t){switch(t.label){case 0:return[4,e=this.ci];case 1:t.sent(),t.label=2;case 2:if(e!==this.ci)return[3,0];t.label=3;case 3:return[2]}}))}))},e.prototype.vi=function(e){for(var t=0,n=this._i;t<n.length;t++)if(n[t].Is===e)return!0;return!1},e.prototype.Si=function(e){var t=this;return this.bi().then((function(){t._i.sort((function(e,t){return e.ni-t.ni}));for(var n=0,r=t._i;n<r.length;n++){var i=r[n];if(i.Cs(),"all"!==e&&i.Is===e)break}return t.bi()}))},e.prototype.Di=function(e){this.wi.push(e)},e.prototype.yi=function(e){var t=this._i.indexOf(e);this._i.splice(t,1)},e}();function ur(e,t){if(f("AsyncQueue",t+": "+e),Qn(e))return new D(M.UNAVAILABLE,t+": "+e);throw e}function lr(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=E(n,i);return 0===a?E(r,o):a}var cr=function(){function e(e){this.Ci=e,this.buffer=new re(lr),this.Ni=0}return e.prototype.Fi=function(){return++this.Ni},e.prototype.ki=function(e){var t=[e,this.Fi()];if(this.buffer.size<this.Ci)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();lr(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),e}(),hr={$i:!1,xi:0,Oi:0,Mi:0},dr=function(){function e(e,t,n){this.Li=e,this.qi=t,this.Bi=n}return e.Ui=function(t){return new e(t,e.Qi,e.Wi)},e}();dr.ji=-1,dr.Ki=1048576,dr.Gi=41943040,dr.Qi=10,dr.Wi=1e3,dr.zi=new dr(dr.Gi,dr.Qi,dr.Wi),dr.Hi=new dr(dr.ji,0,0);var fr=function(){function e(e,t){this.Yi=e,this.ei=t,this.Ji=!1,this.Xi=null}return e.prototype.start=function(e){this.Yi.params.Li!==dr.ji&&this.Zi(e)},e.prototype.stop=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},Object.defineProperty(e.prototype,"tr",{get:function(){return null!==this.Xi},enumerable:!1,configurable:!0}),e.prototype.Zi=function(e){var t=this,n=this.Ji?3e5:6e4;d("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.Xi=this.ei.Ss("lru_garbage_collection",n,(function(){return i.__awaiter(t,void 0,void 0,(function(){var t;return i.__generator(this,(function(n){switch(n.label){case 0:this.Xi=null,this.Ji=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,e.er(this.Yi)];case 2:return n.sent(),[3,7];case 3:return Qn(t=n.sent())?(d("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t),[3,6]):[3,4];case 4:return[4,Ti(t)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.Zi(e)];case 8:return n.sent(),[2]}}))}))}))},e}(),pr=function(){function e(e,t){this.nr=e,this.params=t}return e.prototype.sr=function(e,t){return this.nr.ir(e).next((function(e){return Math.floor(t/100*e)}))},e.prototype.rr=function(e,t){var n=this;if(0===t)return Hn.resolve(Jn.Es);var r=new cr(t);return this.nr.be(e,(function(e){return r.ki(e.sequenceNumber)})).next((function(){return n.nr.or(e,(function(e){return r.ki(e)}))})).next((function(){return r.maxValue}))},e.prototype.hr=function(e,t,n){return this.nr.hr(e,t,n)},e.prototype.ar=function(e,t){return this.nr.ar(e,t)},e.prototype.cr=function(e,t){var n=this;return this.params.Li===dr.ji?(d("LruGarbageCollector","Garbage collection skipped; disabled"),Hn.resolve(hr)):this.ur(e).next((function(r){return r<n.params.Li?(d("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.Li),hr):n.lr(e,t)}))},e.prototype.ur=function(e){return this.nr.ur(e)},e.prototype.lr=function(e,t){var n,r,i,o,s,u,l,c=this,f=Date.now();return this.sr(e,this.params.qi).next((function(t){return t>c.params.Bi?(d("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.Bi+" from "+t),r=c.params.Bi):r=t,o=Date.now(),c.rr(e,r)})).next((function(r){return n=r,s=Date.now(),c.hr(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.ar(e,n)})).next((function(e){return l=Date.now(),h()<=a.LogLevel.DEBUG&&d("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-f)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(u-s)+"ms\n\tRemoved "+e+" documents in "+(l-u)+"ms\nTotal Duration: "+(l-f)+"ms"),Hn.resolve({$i:!0,xi:r,Oi:i,Mi:e})}))},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=yr(t)),t=gr(e.get(n),t);return yr(t)}function gr(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function yr(e){return e+""}function vr(e){var t=e.length;if(y(t>=2),2===t)return y(""===e.charAt(0)&&""===e.charAt(1)),I.$();for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf("",o);switch((a<0||a>n)&&g(),e.charAt(a+1)){case"":var s=e.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"":i+=e.substring(o,a),i+="\0";break;case"":i+=e.substring(o,a+1);break;default:g()}o=a+2}return new I(r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var br=function(e){this._r=e};function Ar(e,t){if(t.document)return function(e,t,n){var r=it(e,t.name),i=et(t.updateTime),o=new $t({mapValue:{fields:t.fields}});return new rn(r,i,o,{hasCommittedMutations:!!n})}(e._r,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=j.K(t.noDocument.path),r=xr(t.noDocument.readTime);return new on(n,r,{hasCommittedMutations:!!t.hasCommittedMutations})}if(t.unknownDocument){var i=j.K(t.unknownDocument.path),o=xr(t.unknownDocument.version);return new an(i,o)}return g()}function Er(e,t,n){var r=wr(n),i=t.key.path.p().N();if(t instanceof rn){var o=function(e,t){return{name:rt(e,t.key),fields:t.tn().mapValue.fields,updateTime:Xe(e,t.version.A())}}(e._r,t),a=t.hasCommittedMutations;return new Yr(null,null,o,a,r,i)}if(t instanceof on){var s=t.key.path.N(),u=_r(t.version),l=t.hasCommittedMutations;return new Yr(null,new Kr(s,u),null,l,r,i)}if(t instanceof an){var c=t.key.path.N(),h=_r(t.version);return new Yr(new Zr(c,h),null,null,!0,r,i)}return g()}function wr(e){var t=e.A();return[t.seconds,t.nanoseconds]}function Sr(e){var t=new O(e[0],e[1]);return F.m(t)}function _r(e){var t=e.A();return new Wr(t.seconds,t.nanoseconds)}function xr(e){var t=new O(e.seconds,e.nanoseconds);return F.m(t)}function kr(e,t){var n=(t.baseMutations||[]).map((function(t){return ht(e._r,t)})),r=t.mutations.map((function(t){return ht(e._r,t)})),i=O.fromMillis(t.localWriteTimeMs);return new jn(t.batchId,i,n,r)}function Rr(e){var t,n,r=xr(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?xr(e.lastLimboFreeSnapshotVersion):F.min();return void 0!==e.query.documents?(y(1===(n=e.query).documents.length),t=fn(cn(at(n.documents[0])))):t=function(e){var t=at(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){y(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=function e(t){return t?void 0!==t.unaryFilter?[bt(t)]:void 0!==t.fieldFilter?[vt(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return e(t)})).reduce((function(e,t){return e.concat(t)})):g():[]}(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return new In(yt((t=e).field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction));var t})));var u=null;n.limit&&(u=function(e){var t;return B(t="object"==typeof e?e.value:e)?null:t}(n.limit));var l=null;n.startAt&&(l=mt(n.startAt));var c=null;return n.endAt&&(c=mt(n.endAt)),fn(ln(t,i,s,a,u,"F",l,c))}(e.query),new Y(t,e.targetId,0,e.lastListenSequenceNumber,r,i,G.fromBase64String(e.resumeToken))}function Nr(e,t){var n,r=_r(t.Z),i=_r(t.lastLimboFreeSnapshotVersion);n=J(t.target)?dt(e._r,t.target):ft(e._r,t.target);var o=t.resumeToken.toBase64();return new Qr(t.targetId,U(t.target),r,o,t.sequenceNumber,i,n)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tr=function(){function e(e,t,n,r){this.userId=e,this.serializer=t,this.zn=n,this.dr=r,this.wr={}}return e.Tr=function(t,n,r,i){return y(""!==t.uid),new e(t.Er()?t.uid:"",n,r,i)},e.prototype.mr=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Or(e).Zs({index:Jr.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))},e.prototype.Ir=function(e,t,n,r){var i=this,o=Fr(e),a=Or(e);return a.add({}).next((function(s){y("number"==typeof s);for(var u=new jn(s,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return ct(e._r,t)})),i=n.mutations.map((function(t){return ct(e._r,t)}));return new Jr(t,n.batchId,n.Tn.toMillis(),r,i)}(i.serializer,i.userId,u),c=[],h=new re((function(e,t){return E(e.F(),t.F())})),d=0,f=r;d<f.length;d++){var p=f[d],m=Gr.key(i.userId,p.key.path,s);h=h.add(p.key.path.p()),c.push(a.put(l)),c.push(o.put(m,Gr.PLACEHOLDER))}return h.forEach((function(t){c.push(i.zn.Ar(e,t))})),e.Wn((function(){i.wr[s]=u.keys()})),Hn.Cn(c).next((function(){return u}))}))},e.prototype.Rr=function(e,t){var n=this;return Or(e).get(t).next((function(e){return e?(y(e.userId===n.userId),kr(n.serializer,e)):null}))},e.prototype.Pr=function(e,t){var n=this;return this.wr[t]?Hn.resolve(this.wr[t]):this.Rr(e,t).next((function(e){if(e){var r=e.keys();return n.wr[t]=r,r}return null}))},e.prototype.gr=function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Or(e).Zs({index:Jr.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(y(t.batchId>=r),o=kr(n.serializer,t)),i.done()})).next((function(){return o}))},e.prototype.Vr=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Or(e).Zs({index:Jr.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))},e.prototype.yr=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Or(e).Hs(Jr.userMutationsIndex,n).next((function(e){return e.map((function(e){return kr(t.serializer,e)}))}))},e.prototype.Yn=function(e,t){var n=this,r=Gr.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Fr(e).Zs({range:i},(function(r,i,a){var s=r[0],u=r[1],l=r[2],c=vr(u);if(s===n.userId&&t.path.isEqual(c))return Or(e).get(l).next((function(e){if(!e)throw g();y(e.userId===n.userId),o.push(kr(n.serializer,e))}));a.done()})).next((function(){return o}))},e.prototype.es=function(e,t){var n=this,r=new re(E),i=[];return t.forEach((function(t){var o=Gr.prefixForPath(n.userId,t.path),a=IDBKeyRange.lowerBound(o),s=Fr(e).Zs({range:a},(function(e,i,o){var a=e[0],s=e[1],u=e[2],l=vr(s);a===n.userId&&t.path.isEqual(l)?r=r.add(u):o.done()}));i.push(s)})),Hn.Cn(i).next((function(){return n.pr(e,r)}))},e.prototype.as=function(e,t){var n=this,r=t.path,i=r.length+1,o=Gr.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new re(E);return Fr(e).Zs({range:a},(function(e,t,o){var a=e[0],u=e[1],l=e[2],c=vr(u);a===n.userId&&r.D(c)?c.length===i&&(s=s.add(l)):o.done()})).next((function(){return n.pr(e,s)}))},e.prototype.pr=function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Or(e).get(t).next((function(e){if(null===e)throw g();y(e.userId===n.userId),r.push(kr(n.serializer,e))})))})),Hn.Cn(i).next((function(){return r}))},e.prototype.br=function(e,t){var n=this;return Dr(e.vr,this.userId,t).next((function(r){return e.Wn((function(){n.Sr(t.batchId)})),Hn.forEach(r,(function(t){return n.dr.Dr(e,t)}))}))},e.prototype.Sr=function(e){delete this.wr[e]},e.prototype.Cr=function(e){var t=this;return this.mr(e).next((function(n){if(!n)return Hn.resolve();var r=IDBKeyRange.lowerBound(Gr.prefixForUser(t.userId)),i=[];return Fr(e).Zs({range:r},(function(e,n,r){if(e[0]===t.userId){var o=vr(e[1]);i.push(o)}else r.done()})).next((function(){y(0===i.length)}))}))},e.prototype.Nr=function(e,t){return Mr(e,this.userId,t)},e.prototype.Fr=function(e){var t=this;return Cr(e).get(this.userId).next((function(e){return e||new zr(t.userId,-1,"")}))},e}();function Mr(e,t,n){var r=Gr.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Fr(e).Zs({range:o,Xs:!0},(function(e,n,r){var o=e[0],s=e[1];e[2],o===t&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function Dr(e,t,n){var r=e.store(Jr.store),i=e.store(Gr.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.Zs({range:a},(function(e,t,n){return s++,n.delete()}));o.push(u.next((function(){y(1===s)})));for(var l=[],c=0,h=n.mutations;c<h.length;c++){var d=h[c],f=Gr.key(t,d.key.path,n.batchId);o.push(i.delete(f)),l.push(d.key)}return Hn.Cn(o).next((function(){return l}))}function Or(e){return pi.Ms(e,Jr.store)}function Fr(e){return pi.Ms(e,Gr.store)}function Cr(e){return pi.Ms(e,zr.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ir=function(){function e(e,t){this.serializer=e,this.zn=t}return e.prototype.xn=function(e,t,n){return Lr(e).put(jr(t),n)},e.prototype.Mn=function(e,t){var n=Lr(e),r=jr(t);return n.delete(r)},e.prototype.updateMetadata=function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.kr(e,r)}))},e.prototype.Ln=function(e,t){var n=this;return Lr(e).get(jr(t)).next((function(e){return n.$r(e)}))},e.prototype.xr=function(e,t){var n=this;return Lr(e).get(jr(t)).next((function(e){var t=n.$r(e);return t?{Or:t,size:Br(e)}:null}))},e.prototype.getEntries=function(e,t){var n=this,r=se();return this.Mr(e,t,(function(e,t){var i=n.$r(t);r=r.st(e,i)})).next((function(){return r}))},e.prototype.Lr=function(e,t){var n=this,r=se(),i=new ee(j.P);return this.Mr(e,t,(function(e,t){var o=n.$r(t);o?(r=r.st(e,o),i=i.st(e,Br(t))):(r=r.st(e,null),i=i.st(e,0))})).next((function(){return{qr:r,Br:i}}))},e.prototype.Mr=function(e,t,n){if(t._())return Hn.resolve();var r=IDBKeyRange.bound(t.first().path.N(),t.last().path.N()),i=t.ct(),o=i.wt();return Lr(e).Zs({range:r},(function(e,t,r){for(var a=j.K(e);o&&j.P(o,a)<0;)n(o,null),o=i.wt();o&&o.isEqual(a)&&(n(o,t),o=i.Tt()?i.wt():null),o?r.Gs(o.path.N()):r.done()})).next((function(){for(;o;)n(o,null),o=i.Tt()?i.wt():null}))},e.prototype.ns=function(e,t,n){var r=this,i=le(),o=t.path.length+1,a={};if(n.isEqual(F.min())){var s=t.path.N();a.range=IDBKeyRange.lowerBound(s)}else{var u=t.path.N(),l=wr(n);a.range=IDBKeyRange.lowerBound([u,l],!0),a.index=Yr.collectionReadTimeIndex}return Lr(e).Zs(a,(function(e,n,a){if(e.length===o){var s=Ar(r.serializer,n);t.path.D(s.key.path)?s instanceof rn&&An(t,s)&&(i=i.st(s.key,s)):a.done()}})).next((function(){return i}))},e.prototype.Ur=function(e,t){var n=this,r=ae(),i=wr(t),o=Lr(e),a=IDBKeyRange.lowerBound(i,!0);return o.Zs({index:Yr.readTimeIndex,range:a},(function(e,t){var o=Ar(n.serializer,t);r=r.st(o.key,o),i=t.readTime})).next((function(){return{Qr:r,readTime:Sr(i)}}))},e.prototype.Wr=function(e){var t=Lr(e),n=F.min();return t.Zs({index:Yr.readTimeIndex,reverse:!0},(function(e,t,r){t.readTime&&(n=Sr(t.readTime)),r.done()})).next((function(){return n}))},e.prototype.jr=function(t){return new e.Kr(this,!!t&&t.Gr)},e.prototype.zr=function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))},e.prototype.getMetadata=function(e){return Pr(e).get(Xr.key).next((function(e){return y(!!e),e}))},e.prototype.kr=function(e,t){return Pr(e).put(Xr.key,t)},e.prototype.$r=function(e){if(e){var t=Ar(this.serializer,e);return t instanceof on&&t.version.isEqual(F.min())?null:t}return null},e}();function Pr(e){return pi.Ms(e,Xr.store)}function Lr(e){return pi.Ms(e,Yr.store)}function jr(e){return e.path.N()}function Br(e){var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw g();t=e.noDocument}return JSON.stringify(t).length}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ir.Kr=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).Hr=t,r.Gr=n,r.Yr=new T((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),r}return i.__extends(t,e),t.prototype.Un=function(e){var t=this,n=[],r=0,i=new re((function(e,t){return E(e.F(),t.F())}));return this.Fn.forEach((function(o,a){var s=t.Yr.get(o);if(a){var u=Er(t.Hr.serializer,a,t.readTime);i=i.add(o.path.p());var l=Br(u);r+=l-s,n.push(t.Hr.xn(e,o,u))}else if(r-=s,t.Gr){var c=Er(t.Hr.serializer,new on(o,F.min()),t.readTime);n.push(t.Hr.xn(e,o,c))}else n.push(t.Hr.Mn(e,o))})),i.forEach((function(r){n.push(t.Hr.zn.Ar(e,r))})),n.push(this.Hr.updateMetadata(e,r)),Hn.Cn(n)},t.prototype.qn=function(e,t){var n=this;return this.Hr.xr(e,t).next((function(e){return null===e?(n.Yr.set(t,0),null):(n.Yr.set(t,e.size),e.Or)}))},t.prototype.Bn=function(e,t){var n=this;return this.Hr.Lr(e,t).next((function(e){var t=e.qr;return e.Br.forEach((function(e,t){n.Yr.set(e,t)})),t}))},t}(Vn);var Hr=function(){function e(){this.Jr=new Vr}return e.prototype.Ar=function(e,t){return this.Jr.add(t),Hn.resolve()},e.prototype.hs=function(e,t){return Hn.resolve(this.Jr.getEntries(t))},e}(),Vr=function(){function e(){this.index={}}return e.prototype.add=function(e){var t=e.S(),n=e.p(),r=this.index[t]||new re(I.P),i=!r.has(n);return this.index[t]=r.add(n),i},e.prototype.has=function(e){var t=e.S(),n=e.p(),r=this.index[t];return r&&r.has(n)},e.prototype.getEntries=function(e){return(this.index[e]||new re(I.P)).N()},e}(),qr=function(){function e(e){this.serializer=e}return e.prototype.createOrUpgrade=function(e,t,n,r){var i=this;y(n<r&&n>=0&&r<=10);var o=new $n(t);n<1&&r>=1&&(function(e){e.createObjectStore(Ur.store)}(e),function(e){e.createObjectStore(zr.store,{keyPath:zr.keyPath}),e.createObjectStore(Jr.store,{keyPath:Jr.keyPath,autoIncrement:!0}).createIndex(Jr.userMutationsIndex,Jr.userMutationsKeyPath,{unique:!0}),e.createObjectStore(Gr.store)}(e),ni(e),function(e){e.createObjectStore(Yr.store)}(e));var a=Hn.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore($r.store),e.deleteObjectStore(Qr.store),e.deleteObjectStore(ei.store)}(e),ni(e)),a=a.next((function(){return function(e){var t=e.store(ei.store),n=new ei(0,0,F.min().A(),0);return t.put(ei.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(e,t){return t.store(Jr.store).Hs().next((function(n){e.deleteObjectStore(Jr.store),e.createObjectStore(Jr.store,{keyPath:Jr.keyPath,autoIncrement:!0}).createIndex(Jr.userMutationsIndex,Jr.userMutationsKeyPath,{unique:!0});var r=t.store(Jr.store),i=n.map((function(e){return r.put(e)}));return Hn.Cn(i)}))}(e,o)}))),a=a.next((function(){!function(e){e.createObjectStore(ri.store,{keyPath:ri.keyPath})}(e)}))),n<5&&r>=5&&(a=a.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(e){e.createObjectStore(Xr.store)}(e),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.createCollectionParentIndex(e,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(Yr.store);t.createIndex(Yr.readTimeIndex,Yr.readTimeIndexPath,{unique:!1}),t.createIndex(Yr.collectionReadTimeIndex,Yr.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&r>=10&&(a=a.next((function(){return i.rewriteCanonicalIds(o)}))),a},e.prototype.addDocumentGlobal=function(e){var t=0;return e.store(Yr.store).Zs((function(e,n){t+=Br(n)})).next((function(){var n=new Xr(t);return e.store(Xr.store).put(Xr.key,n)}))},e.prototype.removeAcknowledgedMutations=function(e){var t=this,n=e.store(zr.store),r=e.store(Jr.store);return n.Hs().next((function(n){return Hn.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Hs(Jr.userMutationsIndex,i).next((function(r){return Hn.forEach(r,(function(r){y(r.userId===n.userId);var i=kr(t.serializer,r);return Dr(e,n.userId,i).next((function(){}))}))}))}))}))},e.prototype.ensureSequenceNumbers=function(e){var t=e.store($r.store),n=e.store(Yr.store);return e.store(ei.store).get(ei.key).next((function(e){var r=[];return n.Zs((function(n,i){var o=new I(n),a=function(e){return[0,mr(e)]}(o);r.push(t.get(a).next((function(n){return n?Hn.resolve():function(n){return t.put(new $r(0,mr(n),e.highestListenSequenceNumber))}(o)})))})).next((function(){return Hn.Cn(r)}))}))},e.prototype.createCollectionParentIndex=function(e,t){e.createObjectStore(ti.store,{keyPath:ti.keyPath});var n=t.store(ti.store),r=new Vr,i=function(e){if(r.add(e)){var t=e.S(),i=e.p();return n.put({collectionId:t,parent:mr(i)})}};return t.store(Yr.store).Zs({Xs:!0},(function(e,t){var n=new I(e);return i(n.p())})).next((function(){return t.store(Gr.store).Zs({Xs:!0},(function(e,t){e[0];var n=e[1],r=(e[2],vr(n));return i(r.p())}))}))},e.prototype.rewriteCanonicalIds=function(e){var t=this,n=e.store(Qr.store);return n.Zs((function(e,r){var i=Rr(r),o=Nr(t.serializer,i);return n.put(o)}))},e}(),Wr=function(e,t){this.seconds=e,this.nanoseconds=t},Ur=function(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n};Ur.store="owner",Ur.key="owner";var zr=function(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n};zr.store="mutationQueues",zr.keyPath="userId";var Jr=function(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Jr.store="mutations",Jr.keyPath="batchId",Jr.userMutationsIndex="userMutationsIndex",Jr.userMutationsKeyPath=["userId","batchId"];var Gr=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,t){return[e,mr(t)]},e.key=function(e,t,n){return[e,mr(t),n]},e}();Gr.store="documentMutations",Gr.PLACEHOLDER=new Gr;var Kr=function(e,t){this.path=e,this.readTime=t},Zr=function(e,t){this.path=e,this.version=t},Yr=function(e,t,n,r,i,o){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Yr.store="remoteDocuments",Yr.readTimeIndex="readTimeIndex",Yr.readTimeIndexPath="readTime",Yr.collectionReadTimeIndex="collectionReadTimeIndex",Yr.collectionReadTimeIndexPath=["parentPath","readTime"];var Xr=function(e){this.byteSize=e};Xr.store="remoteDocumentGlobal",Xr.key="remoteDocumentGlobalKey";var Qr=function(e,t,n,r,i,o,a){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};Qr.store="targets",Qr.keyPath="targetId",Qr.queryTargetsIndexName="queryTargetsIndex",Qr.queryTargetsKeyPath=["canonicalId","targetId"];var $r=function(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n};$r.store="targetDocuments",$r.keyPath=["targetId","path"],$r.documentTargetsIndex="documentTargetsIndex",$r.documentTargetsKeyPath=["path","targetId"];var ei=function(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r};ei.key="targetGlobalKey",ei.store="targetGlobal";var ti=function(e,t){this.collectionId=e,this.parent=t};function ni(e){e.createObjectStore($r.store,{keyPath:$r.keyPath}).createIndex($r.documentTargetsIndex,$r.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(Qr.store,{keyPath:Qr.keyPath}).createIndex(Qr.queryTargetsIndexName,Qr.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(ei.store)}ti.store="collectionParents",ti.keyPath=["collectionId","parent"];var ri=function(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r};ri.store="clientMetadata",ri.keyPath="clientId";var ii=i.__spreadArrays(i.__spreadArrays(i.__spreadArrays([zr.store,Jr.store,Gr.store,Yr.store,Qr.store,Ur.store,ei.store,$r.store],[ri.store]),[Xr.store]),[ti.store]),oi=function(){function e(){this.Xr=new Vr}return e.prototype.Ar=function(e,t){var n=this;if(!this.Xr.has(t)){var r=t.S(),i=t.p();e.Wn((function(){n.Xr.add(t)}));var o={collectionId:r,parent:mr(i)};return ai(e).put(o)}return Hn.resolve()},e.prototype.hs=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[S(t),""],!1,!0);return ai(e).Hs(r).next((function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.collectionId!==t)break;n.push(vr(o.parent))}return n}))},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(e){return pi.Ms(e,ti.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var si=function(){function e(e){this.Zr=e}return e.prototype.next=function(){return this.Zr+=2,this.Zr},e.to=function(){return new e(0)},e.eo=function(){return new e(-1)},e}(),ui=function(){function e(e,t){this.dr=e,this.serializer=t}return e.prototype.no=function(e){var t=this;return this.so(e).next((function(n){var r=new si(n.highestTargetId);return n.highestTargetId=r.next(),t.io(e,n).next((function(){return n.highestTargetId}))}))},e.prototype.ro=function(e){return this.so(e).next((function(e){return F.m(new O(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))},e.prototype.oo=function(e){return this.so(e).next((function(e){return e.highestListenSequenceNumber}))},e.prototype.ho=function(e,t,n){var r=this;return this.so(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.A()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.io(e,i)}))},e.prototype.ao=function(e,t){var n=this;return this.co(e,t).next((function(){return n.so(e).next((function(r){return r.targetCount+=1,n.uo(t,r),n.io(e,r)}))}))},e.prototype.lo=function(e,t){return this.co(e,t)},e.prototype._o=function(e,t){var n=this;return this.fo(e,t.targetId).next((function(){return li(e).delete(t.targetId)})).next((function(){return n.so(e)})).next((function(t){return y(t.targetCount>0),t.targetCount-=1,n.io(e,t)}))},e.prototype.hr=function(e,t,n){var r=this,i=0,o=[];return li(e).Zs((function(a,s){var u=Rr(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,o.push(r._o(e,u)))})).next((function(){return Hn.Cn(o)})).next((function(){return i}))},e.prototype.be=function(e,t){return li(e).Zs((function(e,n){var r=Rr(n);t(r)}))},e.prototype.so=function(e){return ci(e).get(ei.key).next((function(e){return y(null!==e),e}))},e.prototype.io=function(e,t){return ci(e).put(ei.key,t)},e.prototype.co=function(e,t){return li(e).put(Nr(this.serializer,t))},e.prototype.uo=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},e.prototype.do=function(e){return this.so(e).next((function(e){return e.targetCount}))},e.prototype.wo=function(e,t){var n=U(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return li(e).Zs({range:r,index:Qr.queryTargetsIndexName},(function(e,n,r){var o=Rr(n);z(t,o.target)&&(i=o,r.done())})).next((function(){return i}))},e.prototype.To=function(e,t,n){var r=this,i=[],o=hi(e);return t.forEach((function(t){var a=mr(t.path);i.push(o.put(new $r(n,a))),i.push(r.dr.Eo(e,n,t))})),Hn.Cn(i)},e.prototype.mo=function(e,t,n){var r=this,i=hi(e);return Hn.forEach(t,(function(t){var o=mr(t.path);return Hn.Cn([i.delete([n,o]),r.dr.Io(e,n,t)])}))},e.prototype.fo=function(e,t){var n=hi(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},e.prototype.Ao=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=hi(e),i=de();return r.Zs({range:n,Xs:!0},(function(e,t,n){var r=vr(e[1]),o=new j(r);i=i.add(o)})).next((function(){return i}))},e.prototype.Nr=function(e,t){var n=mr(t.path),r=IDBKeyRange.bound([n],[S(n)],!1,!0),i=0;return hi(e).Zs({index:$r.documentTargetsIndex,Xs:!0,range:r},(function(e,t,n){var r=e[0];e[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},e.prototype.Me=function(e,t){return li(e).get(t).next((function(e){return e?Rr(e):null}))},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(e){return pi.Ms(e,Qr.store)}function ci(e){return pi.Ms(e,ei.store)}function hi(e){return pi.Ms(e,$r.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var di="Failed to obtain exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",fi=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).vr=t,r.Ro=n,r}return i.__extends(t,e),t}(Wn),pi=function(){function e(t,n,r,i,o,a,s,u,l,c){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.ms=o,this.window=a,this.document=s,this.Po=l,this.Vo=c,this.yo=null,this.po=!1,this.isPrimary=!1,this.networkEnabled=!0,this.bo=null,this.inForeground=!1,this.vo=null,this.So=null,this.Do=Number.NEGATIVE_INFINITY,this.Co=function(e){return Promise.resolve()},!e.ks())throw new D(M.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.dr=new yi(this,i),this.No=n+"main",this.serializer=new br(u),this.Fo=new Zn(this.No,10,new qr(this.serializer)),this.ko=new ui(this.dr,this.serializer),this.zn=new oi,this.Kn=new Ir(this.serializer,this.zn),this.window&&this.window.localStorage?this.$o=this.window.localStorage:(this.$o=null,!1===c&&f("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return e.Ms=function(e,t){if(e instanceof fi)return Zn.Ms(e.vr,t);throw g()},e.prototype.start=function(){var e=this;return this.xo().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new D(M.FAILED_PRECONDITION,di);return e.Oo(),e.Mo(),e.Lo(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.ko.oo(t)}))})).then((function(t){e.yo=new Jn(t,e.Po)})).then((function(){e.po=!0})).catch((function(t){return e.Fo&&e.Fo.close(),Promise.reject(t)}))},e.prototype.qo=function(e){var t=this;return this.Co=function(n){return i.__awaiter(t,void 0,void 0,(function(){return i.__generator(this,(function(t){return this.tr?[2,e(n)]:[2]}))}))},e(this.isPrimary)},e.prototype.Bo=function(e){var t=this;this.Fo.Bs((function(n){return i.__awaiter(t,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return null===n.newVersion?[4,e()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))},e.prototype.Uo=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ms.ai((function(){return i.__awaiter(t,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return this.tr?[4,this.xo()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))})))},e.prototype.xo=function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return gi(t).put(new ri(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.Qo(t).next((function(t){t||(e.isPrimary=!1,e.ms.gi((function(){return e.Co(!1)})))}))})).next((function(){return e.Wo(t)})).next((function(n){return e.isPrimary&&!n?e.jo(t).next((function(){return!1})):!!n&&e.Ko(t).next((function(){return!0}))}))})).catch((function(t){if(Qn(t))return d("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return d("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.ms.gi((function(){return e.Co(t)})),e.isPrimary=t}))},e.prototype.Qo=function(e){var t=this;return mi(e).get(Ur.key).next((function(e){return Hn.resolve(t.Go(e))}))},e.prototype.zo=function(e){return gi(e).delete(this.clientId)},e.prototype.Ho=function(){return i.__awaiter(this,void 0,void 0,(function(){var t,n,r,o,a=this;return i.__generator(this,(function(i){switch(i.label){case 0:return!this.isPrimary||this.Yo(this.Do,18e5)?[3,2]:(this.Do=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var n=e.Ms(t,ri.store);return n.Hs().next((function(e){var t=a.Jo(e,18e5),r=e.filter((function(e){return-1===t.indexOf(e)}));return Hn.forEach(r,(function(e){return n.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=i.sent(),this.$o)for(n=0,r=t;n<r.length;n++)o=r[n],this.$o.removeItem(this.Xo(o.clientId));i.label=2;case 2:return[2]}}))}))},e.prototype.Lo=function(){var e=this;this.So=this.ms.Ss("client_metadata_refresh",4e3,(function(){return e.xo().then((function(){return e.Ho()})).then((function(){return e.Lo()}))}))},e.prototype.Go=function(e){return!!e&&e.ownerId===this.clientId},e.prototype.Wo=function(e){var t=this;return this.Vo?Hn.resolve(!0):mi(e).get(Ur.key).next((function(n){if(null!==n&&t.Yo(n.leaseTimestampMs,5e3)&&!t.Zo(n.ownerId)){if(t.Go(n)&&t.networkEnabled)return!0;if(!t.Go(n)){if(!n.allowTabSynchronization)throw new D(M.FAILED_PRECONDITION,di);return!1}}return!(!t.networkEnabled||!t.inForeground)||gi(e).Hs().next((function(e){return void 0===t.Jo(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&d("IndexedDbPersistence","Client "+(e?"is":"is not")+" eligible for a primary lease."),e}))},e.prototype.th=function(){return i.__awaiter(this,void 0,void 0,(function(){var e=this;return i.__generator(this,(function(t){switch(t.label){case 0:return this.po=!1,this.eh(),this.So&&(this.So.cancel(),this.So=null),this.nh(),this.sh(),[4,this.Fo.runTransaction("readwrite",[Ur.store,ri.store],(function(t){var n=new fi(t,Jn.Es);return e.jo(n).next((function(){return e.zo(n)}))}))];case 1:return t.sent(),this.Fo.close(),this.ih(),[2]}}))}))},e.prototype.Jo=function(e,t){var n=this;return e.filter((function(e){return n.Yo(e.updateTimeMs,t)&&!n.Zo(e.clientId)}))},e.prototype.rh=function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return gi(t).Hs().next((function(t){return e.Jo(t,18e5).map((function(e){return e.clientId}))}))}))},Object.defineProperty(e.prototype,"tr",{get:function(){return this.po},enumerable:!1,configurable:!0}),e.prototype.oh=function(e){return Tr.Tr(e,this.serializer,this.zn,this.dr)},e.prototype.hh=function(){return this.ko},e.prototype.ah=function(){return this.Kn},e.prototype.uh=function(){return this.zn},e.prototype.runTransaction=function(e,t,n){var r=this;d("IndexedDbPersistence","Starting transaction:",e);var i,o="readonly"===t?"readonly":"readwrite";return this.Fo.runTransaction(o,ii,(function(o){return i=new fi(o,r.yo?r.yo.next():Jn.Es),"readwrite-primary"===t?r.Qo(i).next((function(e){return!!e||r.Wo(i)})).next((function(t){if(!t)throw f("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.ms.gi((function(){return r.Co(!1)})),new D(M.FAILED_PRECONDITION,qn);return n(i)})).next((function(e){return r.Ko(i).next((function(){return e}))})):r.lh(i).next((function(){return n(i)}))})).then((function(e){return i.jn(),e}))},e.prototype.lh=function(e){var t=this;return mi(e).get(Ur.key).next((function(e){if(null!==e&&t.Yo(e.leaseTimestampMs,5e3)&&!t.Zo(e.ownerId)&&!t.Go(e)&&!(t.Vo||t.allowTabSynchronization&&e.allowTabSynchronization))throw new D(M.FAILED_PRECONDITION,di)}))},e.prototype.Ko=function(e){var t=new Ur(this.clientId,this.allowTabSynchronization,Date.now());return mi(e).put(Ur.key,t)},e.ks=function(){return Zn.ks()},e.prototype.jo=function(e){var t=this,n=mi(e);return n.get(Ur.key).next((function(e){return t.Go(e)?(d("IndexedDbPersistence","Releasing primary lease."),n.delete(Ur.key)):Hn.resolve()}))},e.prototype.Yo=function(e,t){var n=Date.now();return!(e<n-t||e>n&&(f("Detected an update time that is in the future: "+e+" > "+n),1))},e.prototype.Oo=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.vo=function(){e.ms.ai((function(){return e.inForeground="visible"===e.document.visibilityState,e.xo()}))},this.document.addEventListener("visibilitychange",this.vo),this.inForeground="visible"===this.document.visibilityState)},e.prototype.nh=function(){this.vo&&(this.document.removeEventListener("visibilitychange",this.vo),this.vo=null)},e.prototype.Mo=function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.bo=function(){t.eh(),t.ms.ai((function(){return t.th()}))},this.window.addEventListener("unload",this.bo))},e.prototype.sh=function(){this.bo&&(this.window.removeEventListener("unload",this.bo),this.bo=null)},e.prototype.Zo=function(e){var t;try{var n=null!==(null===(t=this.$o)||void 0===t?void 0:t.getItem(this.Xo(e)));return d("IndexedDbPersistence","Client '"+e+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(e){return f("IndexedDbPersistence","Failed to get zombied client id.",e),!1}},e.prototype.eh=function(){if(this.$o)try{this.$o.setItem(this.Xo(this.clientId),String(Date.now()))}catch(e){f("Failed to set zombie client id.",e)}},e.prototype.ih=function(){if(this.$o)try{this.$o.removeItem(this.Xo(this.clientId))}catch(e){}},e.prototype.Xo=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},e}();function mi(e){return pi.Ms(e,Ur.store)}function gi(e){return pi.Ms(e,ri.store)}var yi=function(){function e(e,t){this.db=e,this.Yi=new pr(this,t)}return e.prototype.ir=function(e){var t=this._h(e);return this.db.hh().do(e).next((function(e){return t.next((function(t){return e+t}))}))},e.prototype._h=function(e){var t=0;return this.or(e,(function(e){t++})).next((function(){return t}))},e.prototype.be=function(e,t){return this.db.hh().be(e,t)},e.prototype.or=function(e,t){return this.fh(e,(function(e,n){return t(n)}))},e.prototype.Eo=function(e,t,n){return vi(e,n)},e.prototype.Io=function(e,t,n){return vi(e,n)},e.prototype.hr=function(e,t,n){return this.db.hh().hr(e,t,n)},e.prototype.Dr=function(e,t){return vi(e,t)},e.prototype.dh=function(e,t){return function(e,t){var n=!1;return Cr(e).ti((function(r){return Mr(e,r,t).next((function(e){return e&&(n=!0),Hn.resolve(!e)}))})).next((function(){return n}))}(e,t)},e.prototype.ar=function(e,t){var n=this,r=this.db.ah().jr(),i=[],o=0;return this.fh(e,(function(a,s){if(s<=t){var u=n.dh(e,a).next((function(t){if(!t)return o++,r.Ln(e,a).next((function(){return r.Mn(a),hi(e).delete([0,mr(a.path)])}))}));i.push(u)}})).next((function(){return Hn.Cn(i)})).next((function(){return r.apply(e)})).next((function(){return o}))},e.prototype.removeTarget=function(e,t){var n=t.tt(e.Ro);return this.db.hh().lo(e,n)},e.prototype.wh=function(e,t){return vi(e,t)},e.prototype.fh=function(e,t){var n,r=hi(e),i=Jn.Es;return r.Zs({index:$r.documentTargetsIndex},(function(e,r){var o=e[0],a=(e[1],r.path),s=r.sequenceNumber;0===o?(i!==Jn.Es&&t(new j(vr(n)),i),i=s,n=a):i=Jn.Es})).next((function(){i!==Jn.Es&&t(new j(vr(n)),i)}))},e.prototype.ur=function(e){return this.db.ah().zr(e)},e}();function vi(e,t){return hi(e).put(function(e,t){return new $r(0,mr(e.path),t)}(t,e.Ro))}function bi(e,t){var n=e.projectId;return e.i||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Ai=function(){function e(e,t,n){this.persistence=e,this.Th=t,this.Eh=new ee(E),this.mh=new T((function(e){return U(e)}),z),this.Ih=F.min(),this.Gn=e.oh(n),this.Ah=e.ah(),this.ko=e.hh(),this.Rh=new Un(this.Ah,this.Gn,this.persistence.uh()),this.Th.Ph(this.Rh)}return e.prototype.er=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.cr(n,t.Eh)}))},e}();function Ei(e,t){var n=v(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Ah.jr({Gr:!0});return function(e,t,n,r){var i=n.batch,o=i.keys(),a=Hn.resolve();return o.forEach((function(e){a=a.next((function(){return r.Ln(t,e)})).next((function(t){var o=t,a=n.Pn.get(e);y(null!==a),(!o||o.version.o(a)<0)&&(o=i.En(e,o,n))&&r.xn(o,n.Rn)}))})),a.next((function(){return e.Gn.br(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.Gn.Cr(e)})).next((function(){return n.Rh.Zn(e,r)}))}))}function wi(e){var t=v(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.ko.ro(e)}))}function Si(e,t){var n=v(e),r=t.Z,i=n.Eh;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var o=n.Ah.jr({Gr:!0});i=n.Eh;var a=[];t.Wt.forEach((function(t,o){var s=i.get(o);if(s){a.push(n.ko.mo(e,t.Zt,o).next((function(){return n.ko.To(e,t.Jt,o)})));var u=t.resumeToken;if(u.Y()>0){var l=s.et(u,r).tt(e.Ro);i=i.st(o,l),function(e,t,n){return y(t.resumeToken.Y()>0),0===e.resumeToken.Y()||t.Z.I()-e.Z.I()>=3e8||n.Jt.size+n.Xt.size+n.Zt.size>0}(s,l,t)&&a.push(n.ko.lo(e,l))}}}));var s=ae(),u=de();if(t.Kt.forEach((function(e,t){u=u.add(e)})),a.push(o.getEntries(e,u).next((function(i){t.Kt.forEach((function(u,l){var c=i.get(u);l instanceof on&&l.version.isEqual(F.min())?(o.Mn(u,r),s=s.st(u,l)):null==c||l.version.o(c.version)>0||0===l.version.o(c.version)&&c.hasPendingWrites?(o.xn(l,r),s=s.st(u,l)):d("LocalStore","Ignoring outdated watch update for ",u,". Current version:",c.version," Watch version:",l.version),t.Gt.has(u)&&a.push(n.persistence.dr.wh(e,u))}))}))),!r.isEqual(F.min())){var l=n.ko.ro(e).next((function(t){return n.ko.ho(e,e.Ro,r)}));a.push(l)}return Hn.Cn(a).next((function(){return o.apply(e)})).next((function(){return n.Rh.ts(e,s)}))})).then((function(e){return n.Eh=i,e}))}function _i(e,t){var n=v(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.Gn.gr(e,t)}))}function xi(e,t){var n=v(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.ko.wo(e,t).next((function(i){return i?(r=i,Hn.resolve(r)):n.ko.no(e).next((function(i){return r=new Y(t,i,0,e.Ro),n.ko.ao(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Eh.get(e.targetId);return(null===r||e.Z.o(r.Z)>0)&&(n.Eh=n.Eh.st(e.targetId,e),n.mh.set(t,e.targetId)),e}))}function ki(e,t,n){return i.__awaiter(this,void 0,void 0,(function(){var r,o,a,s;return i.__generator(this,(function(i){switch(i.label){case 0:r=v(e),o=r.Eh.get(t),a=n?"readwrite":"readwrite-primary",i.label=1;case 1:return i.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",a,(function(e){return r.persistence.dr.removeTarget(e,o)}))];case 2:i.sent(),i.label=3;case 3:return[3,5];case 4:if(!Qn(s=i.sent()))throw s;return d("LocalStore","Failed to update sequence numbers for target "+t+": "+s),[3,5];case 5:return r.Eh=r.Eh.remove(t),r.mh.delete(o.target),[2]}}))}))}function Ri(e,t,n){var r=v(e),i=F.min(),o=de();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=v(e),i=r.mh.get(n);return void 0!==i?Hn.resolve(r.Eh.get(i)):r.ko.wo(t,n)}(r,e,fn(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.ko.Ao(e,t.targetId).next((function(e){o=e}))})).next((function(){return r.Th.ns(e,t,n?i:F.min(),n?o:de())})).next((function(e){return{documents:e,gh:o}}))}))}function Ni(e,t){var n=v(e),r=v(n.ko),i=n.Eh.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Me(e,t).next((function(e){return e?e.target:null}))}))}function Ti(e){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){if(e.code!==M.FAILED_PRECONDITION||e.message!==qn)throw e;return d("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mi=function(){function e(){this.Vh=new re(Di.yh),this.ph=new re(Di.bh)}return e.prototype._=function(){return this.Vh._()},e.prototype.Eo=function(e,t){var n=new Di(e,t);this.Vh=this.Vh.add(n),this.ph=this.ph.add(n)},e.prototype.vh=function(e,t){var n=this;e.forEach((function(e){return n.Eo(e,t)}))},e.prototype.Io=function(e,t){this.Sh(new Di(e,t))},e.prototype.Dh=function(e,t){var n=this;e.forEach((function(e){return n.Io(e,t)}))},e.prototype.Ch=function(e){var t=this,n=new j(new I([])),r=new Di(n,e),i=new Di(n,e+1),o=[];return this.ph.St([r,i],(function(e){t.Sh(e),o.push(e.key)})),o},e.prototype.Nh=function(){var e=this;this.Vh.forEach((function(t){return e.Sh(t)}))},e.prototype.Sh=function(e){this.Vh=this.Vh.delete(e),this.ph=this.ph.delete(e)},e.prototype.Fh=function(e){var t=new j(new I([])),n=new Di(t,e),r=new Di(t,e+1),i=de();return this.ph.St([n,r],(function(e){i=i.add(e.key)})),i},e.prototype.Nr=function(e){var t=new Di(e,0),n=this.Vh.Ct(t);return null!==n&&e.isEqual(n.key)},e}(),Di=function(){function e(e,t){this.key=e,this.kh=t}return e.yh=function(e,t){return j.P(e.key,t.key)||E(e.kh,t.kh)},e.bh=function(e,t){return E(e.kh,t.kh)||j.P(e.key,t.key)},e}(),Oi=function(){function e(e){this.uid=e}return e.prototype.Er=function(){return null!=this.uid},e.prototype.$h=function(){return this.Er()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(e){return e.uid===this.uid},e}();Oi.UNAUTHENTICATED=new Oi(null),Oi.xh=new Oi("google-credentials-uid"),Oi.Oh=new Oi("first-party-uid");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Fi=function(e,t){this.user=t,this.type="OAuth",this.Mh={},this.Mh.Authorization="Bearer "+e},Ci=function(){function e(){this.Lh=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.qh=function(){},e.prototype.Bh=function(e){this.Lh=e,e(Oi.UNAUTHENTICATED)},e.prototype.Uh=function(){this.Lh=null},e}(),Ii=function(){function e(e){var t=this;this.Qh=null,this.currentUser=Oi.UNAUTHENTICATED,this.Wh=!1,this.jh=0,this.Lh=null,this.forceRefresh=!1,this.Qh=function(){t.jh++,t.currentUser=t.Kh(),t.Wh=!0,t.Lh&&t.Lh(t.currentUser)},this.jh=0,this.auth=e.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.Qh):(this.Qh(null),e.get().then((function(e){t.auth=e,t.Qh&&t.auth.addAuthTokenListener(t.Qh)}),(function(){})))}return e.prototype.getToken=function(){var e=this,t=this.jh,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.jh!==t?(d("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(y("string"==typeof n.accessToken),new Fi(n.accessToken,e.currentUser)):null})):Promise.resolve(null)},e.prototype.qh=function(){this.forceRefresh=!0},e.prototype.Bh=function(e){this.Lh=e,this.Wh&&e(this.currentUser)},e.prototype.Uh=function(){this.auth&&this.auth.removeAuthTokenListener(this.Qh),this.Qh=null,this.Lh=null},e.prototype.Kh=function(){var e=this.auth&&this.auth.getUid();return y(null===e||"string"==typeof e),new Oi(e)},e}(),Pi=function(){function e(e,t){this.Gh=e,this.zh=t,this.type="FirstParty",this.user=Oi.Oh}return Object.defineProperty(e.prototype,"Mh",{get:function(){var e={"X-Goog-AuthUser":this.zh},t=this.Gh.auth.Hh([]);return t&&(e.Authorization=t),e},enumerable:!1,configurable:!0}),e}(),Li=function(){function e(e,t){this.Gh=e,this.zh=t}return e.prototype.getToken=function(){return Promise.resolve(new Pi(this.Gh,this.zh))},e.prototype.Bh=function(e){e(Oi.Oh)},e.prototype.Uh=function(){},e.prototype.qh=function(){},e}(),ji=function(){function e(e,t,n,r,i,o){this.ms=e,this.Yh=n,this.Jh=r,this.Xh=i,this.listener=o,this.state=0,this.Zh=0,this.ta=null,this.stream=null,this.Ti=new Kn(e,t)}return e.prototype.ea=function(){return 1===this.state||2===this.state||4===this.state},e.prototype.na=function(){return 2===this.state},e.prototype.start=function(){3!==this.state?this.auth():this.sa()},e.prototype.stop=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return this.ea()?[4,this.close(0)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.ia=function(){this.state=0,this.Ti.reset()},e.prototype.ra=function(){var e=this;this.na()&&null===this.ta&&(this.ta=this.ms.Ss(this.Yh,6e4,(function(){return e.oa()})))},e.prototype.ha=function(e){this.aa(),this.stream.send(e)},e.prototype.oa=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){return this.na()?[2,this.close(0)]:[2]}))}))},e.prototype.aa=function(){this.ta&&(this.ta.cancel(),this.ta=null)},e.prototype.close=function(e,t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(n){switch(n.label){case 0:return this.aa(),this.Ti.cancel(),this.Zh++,3!==e?this.Ti.reset():t&&t.code===M.RESOURCE_EXHAUSTED?(f(t.toString()),f("Using maximum backoff delay to prevent overloading the backend."),this.Ti.ps()):t&&t.code===M.UNAUTHENTICATED&&this.Xh.qh(),null!==this.stream&&(this.ca(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.ua(t)];case 1:return n.sent(),[2]}}))}))},e.prototype.ca=function(){},e.prototype.auth=function(){var e=this;this.state=1;var t=this.la(this.Zh),n=this.Zh;this.Xh.getToken().then((function(t){e.Zh===n&&e._a(t)}),(function(n){t((function(){var t=new D(M.UNKNOWN,"Fetching auth token failed: "+n.message);return e.fa(t)}))}))},e.prototype._a=function(e){var t=this,n=this.la(this.Zh);this.stream=this.da(e),this.stream.wa((function(){n((function(){return t.state=2,t.listener.wa()}))})),this.stream.ua((function(e){n((function(){return t.fa(e)}))})),this.stream.onMessage((function(e){n((function(){return t.onMessage(e)}))}))},e.prototype.sa=function(){var e=this;this.state=4,this.Ti.bs((function(){return i.__awaiter(e,void 0,void 0,(function(){return i.__generator(this,(function(e){return this.state=0,this.start(),[2]}))}))}))},e.prototype.fa=function(e){return d("PersistentStream","close with error: "+e),this.stream=null,this.close(3,e)},e.prototype.la=function(e){var t=this;return function(n){t.ms.ai((function(){return t.Zh===e?n():(d("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},e}(),Bi=function(e){function t(t,n,r,i,o){var a=this;return(a=e.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,a}return i.__extends(t,e),t.prototype.da=function(e){return this.Jh.Ta("Listen",e)},t.prototype.onMessage=function(e){this.Ti.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:g()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.Le?(y(void 0===t||"string"==typeof t),G.fromBase64String(t||"")):(y(void 0===t||t instanceof Uint8Array),G.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,s=a&&function(e){var t=void 0===e.code?M.UNKNOWN:$(e.code);return new D(t,e.message||"")}(a);n=new we(r,i,o,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var l=it(e,u.document.name),c=et(u.document.updateTime),h=new $t({mapValue:{fields:u.document.fields}}),d=new rn(l,c,h,{}),f=u.targetIds||[],p=u.removedTargetIds||[];n=new Ae(f,p,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var v=it(e,m.document),b=m.readTime?et(m.readTime):F.min(),A=new on(v,b),E=m.removedTargetIds||[];n=new Ae([],E,A.key,A)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var S=it(e,w.document),_=w.removedTargetIds||[];n=new Ae([],_,S,null)}else{if(!("filter"in t))return g();t.filter;var x=t.filter;x.targetId;var k=x.count||0,R=new X(k),N=x.targetId;n=new Ee(N,R)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return F.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?F.min():t.readTime?et(t.readTime):F.min()}(e);return this.listener.Ea(t,n)},t.prototype.ma=function(e){var t={};t.database=st(this.serializer),t.addTarget=function(e,t){var n,r=t.target;return(n=J(r)?{documents:dt(e,r)}:{query:ft(e,r)}).targetId=t.targetId,t.resumeToken.Y()>0&&(n.resumeToken=Qe(e,t.resumeToken)),n}(this.serializer,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return g()}}(0,t.X);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.ha(t)},t.prototype.Ia=function(e){var t={};t.database=st(this.serializer),t.removeTarget=e,this.ha(t)},t}(ji),Hi=function(e){function t(t,n,r,i,o){var a=this;return(a=e.call(this,t,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,a.Aa=!1,a}return i.__extends(t,e),Object.defineProperty(t.prototype,"Ra",{get:function(){return this.Aa},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.Aa=!1,this.lastStreamToken=void 0,e.prototype.start.call(this)},t.prototype.ca=function(){this.Aa&&this.Pa([])},t.prototype.da=function(e){return this.Jh.Ta("Write",e)},t.prototype.onMessage=function(e){if(y(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Aa){this.Ti.reset();var t=function(e,t){return e&&e.length>0?(y(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?et(e.updateTime):et(t);n.isEqual(F.min())&&(n=et(t));var r=null;return e.transformResults&&e.transformResults.length>0&&(r=e.transformResults),new Pt(n,r)}(e,t)}))):[]}(e.writeResults,e.commitTime),n=et(e.commitTime);return this.listener.ga(n,t)}return y(!e.writeResults||0===e.writeResults.length),this.Aa=!0,this.listener.Va()},t.prototype.ya=function(){var e={};e.database=st(this.serializer),this.ha(e)},t.prototype.Pa=function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return ct(t.serializer,e)}))};this.ha(n)},t}(ji),Vi=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).credentials=t,i.Jh=n,i.serializer=r,i.pa=!1,i}return i.__extends(t,e),t.prototype.ba=function(){if(this.pa)throw new D(M.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.va=function(e,t,n){var r=this;return this.ba(),this.credentials.getToken().then((function(i){return r.Jh.va(e,t,n,i)})).catch((function(e){throw e.code===M.UNAUTHENTICATED&&r.credentials.qh(),e}))},t.prototype.Sa=function(e,t,n){var r=this;return this.ba(),this.credentials.getToken().then((function(i){return r.Jh.Sa(e,t,n,i)})).catch((function(e){throw e.code===M.UNAUTHENTICATED&&r.credentials.qh(),e}))},t.prototype.terminate=function(){this.pa=!1},t}((function(){})),qi=function(){function e(e,t){this.ei=e,this.Da=t,this.state="Unknown",this.Ca=0,this.Na=null,this.Fa=!0}return e.prototype.ka=function(){var e=this;0===this.Ca&&(this.$a("Unknown"),this.Na=this.ei.Ss("online_state_timeout",1e4,(function(){return e.Na=null,e.xa("Backend didn't respond within 10 seconds."),e.$a("Offline"),Promise.resolve()})))},e.prototype.Oa=function(e){"Online"===this.state?this.$a("Unknown"):(this.Ca++,this.Ca>=1&&(this.Ma(),this.xa("Connection failed 1 times. Most recent error: "+e.toString()),this.$a("Offline")))},e.prototype.set=function(e){this.Ma(),this.Ca=0,"Online"===e&&(this.Fa=!1),this.$a(e)},e.prototype.$a=function(e){e!==this.state&&(this.state=e,this.Da(e))},e.prototype.xa=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Fa?(f(t),this.Fa=!1):d("OnlineStateTracker",t)},e.prototype.Ma=function(){null!==this.Na&&(this.Na.cancel(),this.Na=null)},e}(),Wi=function(){function e(e,t,n,r,o){var a=this;this.La=e,this.qa=t,this.ei=n,this.Ba=[],this.Ua=new Map,this.Qa=null,this.Wa=new Set,this.ja=o,this.ja.Ka((function(e){n.ai((function(){return i.__awaiter(a,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return this.Ga()?(d("RemoteStore","Restarting streams for network reachability change."),[4,this.za()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))})),this.Ha=new qi(n,r),this.Ya=function(e,t,n){var r=v(e);return r.ba(),new Bi(t,r.Jh,r.credentials,r.serializer,n)}(this.qa,n,{wa:this.Ja.bind(this),ua:this.Xa.bind(this),Ea:this.Za.bind(this)}),this.tc=function(e,t,n){var r=v(e);return r.ba(),new Hi(t,r.Jh,r.credentials,r.serializer,n)}(this.qa,n,{wa:this.ec.bind(this),ua:this.nc.bind(this),Va:this.sc.bind(this),ga:this.ga.bind(this)})}return e.prototype.start=function(){return this.enableNetwork()},e.prototype.enableNetwork=function(){return this.Wa.delete(0),this.ic()},e.prototype.ic=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return this.Ga()?(this.rc()?this.oc():this.Ha.set("Unknown"),[4,this.hc()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.disableNetwork=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return this.Wa.add(0),[4,this.ac()];case 1:return e.sent(),this.Ha.set("Offline"),[2]}}))}))},e.prototype.ac=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return[4,this.tc.stop()];case 1:return e.sent(),[4,this.Ya.stop()];case 2:return e.sent(),this.Ba.length>0&&(d("RemoteStore","Stopping write stream with "+this.Ba.length+" pending writes"),this.Ba=[]),this.cc(),[2]}}))}))},e.prototype.th=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return d("RemoteStore","RemoteStore shutting down."),this.Wa.add(5),[4,this.ac()];case 1:return e.sent(),this.ja.th(),this.Ha.set("Unknown"),[2]}}))}))},e.prototype.listen=function(e){this.Ua.has(e.targetId)||(this.Ua.set(e.targetId,e),this.rc()?this.oc():this.Ya.na()&&this.uc(e))},e.prototype.lc=function(e){this.Ua.delete(e),this.Ya.na()&&this._c(e),0===this.Ua.size&&(this.Ya.na()?this.Ya.ra():this.Ga()&&this.Ha.set("Unknown"))},e.prototype.Me=function(e){return this.Ua.get(e)||null},e.prototype.Oe=function(e){return this.fc.Oe(e)},e.prototype.uc=function(e){this.Qa.we(e.targetId),this.Ya.ma(e)},e.prototype._c=function(e){this.Qa.we(e),this.Ya.Ia(e)},e.prototype.oc=function(){this.Qa=new _e(this),this.Ya.start(),this.Ha.ka()},e.prototype.rc=function(){return this.Ga()&&!this.Ya.ea()&&this.Ua.size>0},e.prototype.Ga=function(){return 0===this.Wa.size},e.prototype.cc=function(){this.Qa=null},e.prototype.Ja=function(){return i.__awaiter(this,void 0,void 0,(function(){var e=this;return i.__generator(this,(function(t){return this.Ua.forEach((function(t,n){e.uc(t)})),[2]}))}))},e.prototype.Xa=function(e){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){return this.cc(),this.rc()?(this.Ha.Oa(e),this.oc()):this.Ha.set("Unknown"),[2]}))}))},e.prototype.Za=function(e,t){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o;return i.__generator(this,(function(i){switch(i.label){case 0:if(this.Ha.set("Online"),!(e instanceof we&&2===e.state&&e.cause))return[3,6];i.label=1;case 1:return i.trys.push([1,3,,5]),[4,this.dc(e)];case 2:return i.sent(),[3,5];case 3:return n=i.sent(),d("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),[4,this.wc(n)];case 4:return i.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Ae?this.Qa.ge(e):e instanceof Ee?this.Qa.Ce(e):this.Qa.pe(e),t.isEqual(F.min()))return[3,13];i.label=7;case 7:return i.trys.push([7,11,,13]),[4,wi(this.La)];case 8:return r=i.sent(),t.o(r)>=0?[4,this.Tc(t)]:[3,10];case 9:i.sent(),i.label=10;case 10:return[3,13];case 11:return d("RemoteStore","Failed to raise snapshot:",o=i.sent()),[4,this.wc(o)];case 12:return i.sent(),[3,13];case 13:return[2]}}))}))},e.prototype.wc=function(e,t){return i.__awaiter(this,void 0,void 0,(function(){var n=this;return i.__generator(this,(function(r){switch(r.label){case 0:if(!Qn(e))throw e;return this.Wa.add(1),[4,this.ac()];case 1:return r.sent(),this.Ha.set("Offline"),t||(t=function(){return wi(n.La)}),this.ei.gi((function(){return i.__awaiter(n,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return d("RemoteStore","Retrying IndexedDB access"),[4,t()];case 1:return e.sent(),this.Wa.delete(1),[4,this.ic()];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))},e.prototype.Ec=function(e){var t=this;return e().catch((function(n){return t.wc(n,e)}))},e.prototype.Tc=function(e){var t=this,n=this.Qa.ke(e);return n.Wt.forEach((function(n,r){if(n.resumeToken.Y()>0){var i=t.Ua.get(r);i&&t.Ua.set(r,i.et(n.resumeToken,e))}})),n.jt.forEach((function(e){var n=t.Ua.get(e);if(n){t.Ua.set(e,n.et(G.J,n.Z)),t._c(e);var r=new Y(n.target,e,1,n.sequenceNumber);t.uc(r)}})),this.fc.mc(n)},e.prototype.dc=function(e){return i.__awaiter(this,void 0,void 0,(function(){var t,n,r,o;return i.__generator(this,(function(i){switch(i.label){case 0:t=e.cause,n=0,r=e.targetIds,i.label=1;case 1:return n<r.length?(o=r[n],this.Ua.has(o)?[4,this.fc.Ic(o,t)]:[3,3]):[3,5];case 2:i.sent(),this.Ua.delete(o),this.Qa.removeTarget(o),i.label=3;case 3:i.label=4;case 4:return n++,[3,1];case 5:return[2]}}))}))},e.prototype.hc=function(){return i.__awaiter(this,void 0,void 0,(function(){var e,t,n;return i.__generator(this,(function(r){switch(r.label){case 0:e=this.Ba.length>0?this.Ba[this.Ba.length-1].batchId:-1,r.label=1;case 1:if(!this.Ac())return[3,7];r.label=2;case 2:return r.trys.push([2,4,,6]),[4,_i(this.La,e)];case 3:return null===(t=r.sent())?(0===this.Ba.length&&this.tc.ra(),[3,7]):(e=t.batchId,this.Rc(t),[3,6]);case 4:return n=r.sent(),[4,this.wc(n)];case 5:return r.sent(),[3,6];case 6:return[3,1];case 7:return this.Pc()&&this.gc(),[2]}}))}))},e.prototype.Ac=function(){return this.Ga()&&this.Ba.length<10},e.prototype.Vc=function(){return this.Ba.length},e.prototype.Rc=function(e){this.Ba.push(e),this.tc.na()&&this.tc.Ra&&this.tc.Pa(e.mutations)},e.prototype.Pc=function(){return this.Ga()&&!this.tc.ea()&&this.Ba.length>0},e.prototype.gc=function(){this.tc.start()},e.prototype.ec=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){return this.tc.ya(),[2]}))}))},e.prototype.sc=function(){return i.__awaiter(this,void 0,void 0,(function(){var e,t,n;return i.__generator(this,(function(r){for(e=0,t=this.Ba;e<t.length;e++)n=t[e],this.tc.Pa(n.mutations);return[2]}))}))},e.prototype.ga=function(e,t){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o=this;return i.__generator(this,(function(i){switch(i.label){case 0:return n=this.Ba.shift(),r=Bn.from(n,e,t),[4,this.Ec((function(){return o.fc.yc(r)}))];case 1:return i.sent(),[4,this.hc()];case 2:return i.sent(),[2]}}))}))},e.prototype.nc=function(e){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return e&&this.tc.Ra?[4,this.pc(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.Pc()&&this.gc(),[2]}}))}))},e.prototype.pc=function(e){return i.__awaiter(this,void 0,void 0,(function(){var t,n,r=this;return i.__generator(this,(function(i){switch(i.label){case 0:return Q(n=e.code)&&n!==M.ABORTED?(t=this.Ba.shift(),this.tc.ia(),[4,this.Ec((function(){return r.fc.bc(t.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,this.hc()];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))},e.prototype.za=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return this.Wa.add(4),[4,this.ac()];case 1:return e.sent(),this.Ha.set("Unknown"),this.tc.ia(),this.Ya.ia(),this.Wa.delete(4),[4,this.ic()];case 2:return e.sent(),[2]}}))}))},e.prototype.vc=function(e){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.ei.pi(),d("RemoteStore","RemoteStore received new credentials"),this.Wa.add(3),[4,this.ac()];case 1:return t.sent(),this.Ha.set("Unknown"),[4,this.fc.vc(e)];case 2:return t.sent(),this.Wa.delete(3),[4,this.ic()];case 3:return t.sent(),[2]}}))}))},e.prototype.Sc=function(e){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return e?(this.Wa.delete(2),[4,this.ic()]):[3,2];case 1:return t.sent(),[3,5];case 2:return e?[3,4]:(this.Wa.add(2),[4,this.ac()]);case 3:t.sent(),this.Ha.set("Unknown"),t.label=4;case 4:t.label=5;case 5:return[2]}}))}))},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(e,t){return"firestore_clients_"+e+"_"+t}function zi(e,t,n){var r="firestore_mutations_"+e+"_"+n;return t.Er()&&(r+="_"+t.uid),r}function Ji(e,t){return"firestore_targets_"+e+"_"+t}var Gi=function(){function e(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}return e.Dc=function(t,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),a=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(a=new D(i.error.code,i.error.message)),o?new e(t,n,i.state,a):(f("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.Cc=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Ki=function(){function e(e,t,n){this.targetId=e,this.state=t,this.error=n}return e.Dc=function(t,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new D(r.error.code,r.error.message)),i?new e(t,r.state,o):(f("SharedClientState","Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.Cc=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Zi=function(){function e(e,t){this.clientId=e,this.activeTargetIds=t}return e.Dc=function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=pe(),a=0;i&&a<r.activeTargetIds.length;++a)i=V(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new e(t,o):(f("SharedClientState","Failed to parse client data for instance '"+t+"': "+n),null)},e}(),Yi=function(){function e(e,t){this.clientId=e,this.onlineState=t}return e.Dc=function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(f("SharedClientState","Failed to parse online state: "+t),null)},e}(),Xi=function(){function e(){this.activeTargetIds=pe()}return e.prototype.Nc=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},e.prototype.Fc=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},e.prototype.Cc=function(){var e={activeTargetIds:this.activeTargetIds.N(),updateTimeMs:Date.now()};return JSON.stringify(e)},e}(),Qi=function(){function e(e,t,n,r,i){this.window=e,this.ms=t,this.persistenceKey=n,this.kc=r,this.fc=null,this.Da=null,this.fs=null,this.$c=this.xc.bind(this),this.Oc=new ee(E),this.tr=!1,this.Mc=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Lc=Ui(this.persistenceKey,this.kc),this.qc=function(e){return"firestore_sequence_number_"+e}(this.persistenceKey),this.Oc=this.Oc.st(this.kc,new Xi),this.Bc=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Uc=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Qc=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Wc=function(e){return"firestore_online_state_"+e}(this.persistenceKey),this.window.addEventListener("storage",this.$c)}return e.ks=function(e){return!(!e||!e.localStorage)},e.prototype.start=function(){return i.__awaiter(this,void 0,void 0,(function(){var e,t,n,r,o,a,s,u,l,c,h,d=this;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,this.fc.rh()];case 1:for(e=i.sent(),t=0,n=e;t<n.length;t++)(r=n[t])!==this.kc&&(o=this.getItem(Ui(this.persistenceKey,r)))&&(a=Zi.Dc(r,o))&&(this.Oc=this.Oc.st(a.clientId,a));for(this.jc(),(s=this.storage.getItem(this.Wc))&&(u=this.Kc(s))&&this.Gc(u),l=0,c=this.Mc;l<c.length;l++)h=c[l],this.xc(h);return this.Mc=[],this.window.addEventListener("unload",(function(){return d.th()})),this.tr=!0,[2]}}))}))},e.prototype.Ts=function(e){this.setItem(this.qc,JSON.stringify(e))},e.prototype.zc=function(){return this.Hc(this.Oc)},e.prototype.Yc=function(e){var t=!1;return this.Oc.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t},e.prototype.Jc=function(e){this.Xc(e,"pending")},e.prototype.Zc=function(e,t,n){this.Xc(e,t,n),this.tu(e)},e.prototype.eu=function(e){var t="not-current";if(this.Yc(e)){var n=this.storage.getItem(Ji(this.persistenceKey,e));if(n){var r=Ki.Dc(e,n);r&&(t=r.state)}}return this.nu.Nc(e),this.jc(),t},e.prototype.su=function(e){this.nu.Fc(e),this.jc()},e.prototype.iu=function(e){return this.nu.activeTargetIds.has(e)},e.prototype.ru=function(e){this.removeItem(Ji(this.persistenceKey,e))},e.prototype.ou=function(e,t,n){this.hu(e,t,n)},e.prototype.au=function(e,t,n){var r=this;t.forEach((function(e){r.tu(e)})),this.currentUser=e,n.forEach((function(e){r.Jc(e)}))},e.prototype.cu=function(e){this.uu(e)},e.prototype.th=function(){this.tr&&(this.window.removeEventListener("storage",this.$c),this.removeItem(this.Lc),this.tr=!1)},e.prototype.getItem=function(e){var t=this.storage.getItem(e);return d("SharedClientState","READ",e,t),t},e.prototype.setItem=function(e,t){d("SharedClientState","SET",e,t),this.storage.setItem(e,t)},e.prototype.removeItem=function(e){d("SharedClientState","REMOVE",e),this.storage.removeItem(e)},e.prototype.xc=function(e){var t=this,n=e;if(n.storageArea===this.storage){if(d("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Lc)return void f("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ms.gi((function(){return i.__awaiter(t,void 0,void 0,(function(){var e,t,r,o,a,s;return i.__generator(this,(function(i){if(this.tr){if(null!==n.key)if(this.Bc.test(n.key)){if(null==n.newValue)return e=this.lu(n.key),[2,this._u(e,null)];if(t=this.fu(n.key,n.newValue))return[2,this._u(t.clientId,t)]}else if(this.Uc.test(n.key)){if(null!==n.newValue&&(r=this.du(n.key,n.newValue)))return[2,this.wu(r)]}else if(this.Qc.test(n.key)){if(null!==n.newValue&&(o=this.Tu(n.key,n.newValue)))return[2,this.Eu(o)]}else if(n.key===this.Wc){if(null!==n.newValue&&(a=this.Kc(n.newValue)))return[2,this.Gc(a)]}else n.key===this.qc&&(s=function(e){var t=Jn.Es;if(null!=e)try{var n=JSON.parse(e);y("number"==typeof n),t=n}catch(e){f("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue))!==Jn.Es&&this.fs(s)}else this.Mc.push(n);return[2]}))}))}))}},Object.defineProperty(e.prototype,"nu",{get:function(){return this.Oc.get(this.kc)},enumerable:!1,configurable:!0}),e.prototype.jc=function(){this.setItem(this.Lc,this.nu.Cc())},e.prototype.Xc=function(e,t,n){var r=new Gi(this.currentUser,e,t,n),i=zi(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Cc())},e.prototype.tu=function(e){var t=zi(this.persistenceKey,this.currentUser,e);this.removeItem(t)},e.prototype.uu=function(e){var t={clientId:this.kc,onlineState:e};this.storage.setItem(this.Wc,JSON.stringify(t))},e.prototype.hu=function(e,t,n){var r=Ji(this.persistenceKey,e),i=new Ki(e,t,n);this.setItem(r,i.Cc())},e.prototype.lu=function(e){var t=this.Bc.exec(e);return t?t[1]:null},e.prototype.fu=function(e,t){var n=this.lu(e);return Zi.Dc(n,t)},e.prototype.du=function(e,t){var n=this.Uc.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Gi.Dc(new Oi(i),r,t)},e.prototype.Tu=function(e,t){var n=this.Qc.exec(e),r=Number(n[1]);return Ki.Dc(r,t)},e.prototype.Kc=function(e){return Yi.Dc(e)},e.prototype.wu=function(e){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){return e.user.uid===this.currentUser.uid?[2,this.fc.mu(e.batchId,e.state,e.error)]:(d("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])}))}))},e.prototype.Eu=function(e){return this.fc.Iu(e.targetId,e.state,e.error)},e.prototype._u=function(e,t){var n=this,r=t?this.Oc.st(e,t):this.Oc.remove(e),i=this.Hc(this.Oc),o=this.Hc(r),a=[],s=[];return o.forEach((function(e){i.has(e)||a.push(e)})),i.forEach((function(e){o.has(e)||s.push(e)})),this.fc.Au(a,s).then((function(){n.Oc=r}))},e.prototype.Gc=function(e){this.Oc.get(e.clientId)&&this.Da(e.onlineState)},e.prototype.Hc=function(e){var t=pe();return e.forEach((function(e,n){t=t.Nt(n.activeTargetIds)})),t},e}(),$i=function(){function e(){this.Ru=new Xi,this.Pu={},this.Da=null,this.fs=null}return e.prototype.Jc=function(e){},e.prototype.Zc=function(e,t,n){},e.prototype.eu=function(e){return this.Ru.Nc(e),this.Pu[e]||"not-current"},e.prototype.ou=function(e,t,n){this.Pu[e]=t},e.prototype.su=function(e){this.Ru.Fc(e)},e.prototype.iu=function(e){return this.Ru.activeTargetIds.has(e)},e.prototype.ru=function(e){delete this.Pu[e]},e.prototype.zc=function(){return this.Ru.activeTargetIds},e.prototype.Yc=function(e){return this.Ru.activeTargetIds.has(e)},e.prototype.start=function(){return this.Ru=new Xi,Promise.resolve()},e.prototype.au=function(e,t,n){},e.prototype.cu=function(e){},e.prototype.th=function(){},e.prototype.Ts=function(e){},e}(),eo=function(e){this.key=e},to=function(e){this.key=e},no=function(){function e(e,t){this.query=e,this.gu=t,this.Vu=null,this.Yt=!1,this.yu=de(),this.qt=de(),this.pu=En(e),this.bu=new me(this.pu)}return Object.defineProperty(e.prototype,"vu",{get:function(){return this.gu},enumerable:!1,configurable:!0}),e.prototype.Su=function(e,t){var n=this,r=t?t.Du:new ge,i=t?t.bu:this.bu,o=t?t.qt:this.qt,a=i,s=!1,u=this.query.an()&&i.size===this.query.limit?i.last():null,l=this.query.cn()&&i.size===this.query.limit?i.first():null;if(e.ht((function(e,t){var c=i.get(e),h=t instanceof rn?t:null;h&&(h=An(n.query,h)?h:null);var d=!!c&&n.qt.has(c.key),f=!!h&&(h.Ge||n.qt.has(h.key)&&h.hasCommittedMutations),p=!1;c&&h?c.data().isEqual(h.data())?d!==f&&(r.track({type:3,doc:h}),p=!0):n.Cu(c,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.pu(h,u)>0||l&&n.pu(h,l)<0)&&(s=!0)):!c&&h?(r.track({type:0,doc:h}),p=!0):c&&!h&&(r.track({type:1,doc:c}),p=!0,(u||l)&&(s=!0)),p&&(h?(a=a.add(h),o=f?o.add(e):o.delete(e)):(a=a.delete(e),o=o.delete(e)))})),this.query.an()||this.query.cn())for(;a.size>this.query.limit;){var c=this.query.an()?a.last():a.first();a=a.delete(c.key),o=o.delete(c.key),r.track({type:1,doc:c})}return{bu:a,Du:r,Nu:s,qt:o}},e.prototype.Cu=function(e,t){return e.Ge&&t.hasCommittedMutations&&!t.Ge},e.prototype.Un=function(e,t,n){var r=this,i=this.bu;this.bu=e.bu,this.qt=e.qt;var o=e.Du.Mt();o.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return g()}};return n(e)-n(t)}(e.type,t.type)||r.pu(e.doc,t.doc)})),this.Fu(n);var a=t?this.ku():[],s=0===this.yu.size&&this.Yt?1:0,u=s!==this.Vu;return this.Vu=s,0!==o.length||u?{snapshot:new ye(this.query,e.bu,i,o,e.qt,0===s,u,!1),$u:a}:{$u:a}},e.prototype.xu=function(e){return this.Yt&&"Offline"===e?(this.Yt=!1,this.Un({bu:this.bu,Du:new ge,qt:this.qt,Nu:!1},!1)):{$u:[]}},e.prototype.Ou=function(e){return!this.gu.has(e)&&!!this.bu.has(e)&&!this.bu.get(e).Ge},e.prototype.Fu=function(e){var t=this;e&&(e.Jt.forEach((function(e){return t.gu=t.gu.add(e)})),e.Xt.forEach((function(e){})),e.Zt.forEach((function(e){return t.gu=t.gu.delete(e)})),this.Yt=e.Yt)},e.prototype.ku=function(){var e=this;if(!this.Yt)return[];var t=this.yu;this.yu=de(),this.bu.forEach((function(t){e.Ou(t.key)&&(e.yu=e.yu.add(t.key))}));var n=[];return t.forEach((function(t){e.yu.has(t)||n.push(new to(t))})),this.yu.forEach((function(e){t.has(e)||n.push(new eo(e))})),n},e.prototype.Mu=function(e){this.gu=e.gh,this.yu=de();var t=this.Su(e.documents);return this.Un(t,!0)},e.prototype.Lu=function(){return ye.Qt(this.query,this.bu,this.qt,0===this.Vu)},e}(),ro=function(e,t,n){this.query=e,this.targetId=t,this.view=n},io=function(e){this.key=e,this.qu=!1},oo=function(){function e(e,t,n,r,i,o){this.La=e,this.Bu=t,this.qa=n,this.Uu=r,this.currentUser=i,this.Qu=o,this.Wu=null,this.ju=new T((function(e){return vn(e)}),yn),this.Ku=new Map,this.Gu=[],this.zu=new ee(j.P),this.Hu=new Map,this.Yu=new Mi,this.Ju={},this.Xu=new Map,this.Zu=si.eo(),this.onlineState="Unknown",this.tl=void 0}return Object.defineProperty(e.prototype,"el",{get:function(){return!0===this.tl},enumerable:!1,configurable:!0}),e.prototype.subscribe=function(e){this.Wu=e},e.prototype.listen=function(e){return i.__awaiter(this,void 0,void 0,(function(){var t,n,r,o,a;return i.__generator(this,(function(i){switch(i.label){case 0:return this.nl("listen()"),(r=this.ju.get(e))?(t=r.targetId,this.Uu.eu(t),n=r.view.Lu(),[3,4]):[3,1];case 1:return[4,xi(this.La,fn(e))];case 2:return o=i.sent(),a=this.Uu.eu(o.targetId),t=o.targetId,[4,this.sl(e,t,"current"===a)];case 3:n=i.sent(),this.el&&this.Bu.listen(o),i.label=4;case 4:return[2,n]}}))}))},e.prototype.sl=function(e,t,n){return i.__awaiter(this,void 0,void 0,(function(){var r,o,a,s,u,l;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,Ri(this.La,e,!0)];case 1:return r=i.sent(),o=new no(e,r.gh),a=o.Su(r.documents),s=be.Ht(t,n&&"Offline"!==this.onlineState),u=o.Un(a,this.el,s),this.il(t,u.$u),l=new ro(e,t,o),[2,(this.ju.set(e,l),this.Ku.has(t)?this.Ku.get(t).push(e):this.Ku.set(t,[e]),u.snapshot)]}}))}))},e.prototype.lc=function(e){return i.__awaiter(this,void 0,void 0,(function(){var t,n,r=this;return i.__generator(this,(function(i){switch(i.label){case 0:return this.nl("unlisten()"),t=this.ju.get(e),(n=this.Ku.get(t.targetId)).length>1?[2,(this.Ku.set(t.targetId,n.filter((function(t){return!yn(t,e)}))),void this.ju.delete(e))]:this.el?(this.Uu.su(t.targetId),this.Uu.Yc(t.targetId)?[3,2]:[4,ki(this.La,t.targetId,!1).then((function(){r.Uu.ru(t.targetId),r.Bu.lc(t.targetId),r.rl(t.targetId)})).catch(Ti)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.rl(t.targetId),[4,ki(this.La,t.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},e.prototype.write=function(e,t){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o;return i.__generator(this,(function(i){switch(i.label){case 0:this.nl("write()"),i.label=1;case 1:return i.trys.push([1,5,,6]),[4,function(e,t){var n,r=v(e),i=O.now(),o=t.reduce((function(e,t){return e.add(t.key)}),de());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.Rh.Zn(e,o).next((function(o){n=o;for(var a=[],s=0,u=t;s<u.length;s++){var l=u[s],c=qt(l,n.get(l.key));null!=c&&a.push(new Jt(l.key,c,tn(c.proto.mapValue),Lt.exists(!0)))}return r.Gn.Ir(e,i,a,t)}))})).then((function(e){var t=e.An(n);return{batchId:e.batchId,Fn:t}}))}(this.La,e)];case 2:return n=i.sent(),this.Uu.Jc(n.batchId),this.ol(n.batchId,t),[4,this.hl(n.Fn)];case 3:return i.sent(),[4,this.Bu.hc()];case 4:return i.sent(),[3,6];case 5:return r=i.sent(),o=ur(r,"Failed to persist write"),t.reject(o),[3,6];case 6:return[2]}}))}))},e.prototype.mc=function(e){return i.__awaiter(this,void 0,void 0,(function(){var t,n=this;return i.__generator(this,(function(r){switch(r.label){case 0:this.nl("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,Si(this.La,e)];case 2:return t=r.sent(),e.Wt.forEach((function(e,t){var r=n.Hu.get(t);r&&(y(e.Jt.size+e.Xt.size+e.Zt.size<=1),e.Jt.size>0?r.qu=!0:e.Xt.size>0?y(r.qu):e.Zt.size>0&&(y(r.qu),r.qu=!1))})),[4,this.hl(t,e)];case 3:return r.sent(),[3,6];case 4:return[4,Ti(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},e.prototype.xu=function(e,t){if(this.el&&0===t||!this.el&&1===t){this.nl("applyOnlineStateChange()");var n=[];this.ju.forEach((function(t,r){var i=r.view.xu(e);i.snapshot&&n.push(i.snapshot)})),this.Wu.al(e),this.Wu.Ea(n),this.onlineState=e,this.el&&this.Uu.cu(e)}},e.prototype.Ic=function(e,t){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o,a,s,u=this;return i.__generator(this,(function(i){switch(i.label){case 0:return this.nl("rejectListens()"),this.Uu.ou(e,"rejected",t),n=this.Hu.get(e),(r=n&&n.key)?(o=(o=new ee(j.P)).st(r,new on(r,F.min())),a=de().add(r),s=new ve(F.min(),new Map,new re(E),o,a),[4,this.mc(s)]):[3,2];case 1:return i.sent(),this.zu=this.zu.remove(r),this.Hu.delete(e),this.cl(),[3,4];case 2:return[4,ki(this.La,e,!1).then((function(){return u.rl(e,t)})).catch(Ti)];case 3:i.sent(),i.label=4;case 4:return[2]}}))}))},e.prototype.yc=function(e){return i.__awaiter(this,void 0,void 0,(function(){var t,n;return i.__generator(this,(function(r){switch(r.label){case 0:this.nl("applySuccessfulWrite()"),t=e.batch.batchId,r.label=1;case 1:return r.trys.push([1,4,,6]),[4,Ei(this.La,e)];case 2:return n=r.sent(),this.ul(t,null),this.ll(t),this.Uu.Zc(t,"acknowledged"),[4,this.hl(n)];case 3:return r.sent(),[3,6];case 4:return[4,Ti(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},e.prototype.bc=function(e,t){return i.__awaiter(this,void 0,void 0,(function(){var n;return i.__generator(this,(function(r){switch(r.label){case 0:this.nl("rejectFailedWrite()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,function(e,t){var n=v(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.Gn.Rr(e,t).next((function(t){return y(null!==t),r=t.keys(),n.Gn.br(e,t)})).next((function(){return n.Gn.Cr(e)})).next((function(){return n.Rh.Zn(e,r)}))}))}(this.La,e)];case 2:return n=r.sent(),this.ul(e,t),this.ll(e),this.Uu.Zc(e,"rejected",t),[4,this.hl(n)];case 3:return r.sent(),[3,6];case 4:return[4,Ti(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},e.prototype._l=function(e){return i.__awaiter(this,void 0,void 0,(function(){var t,n,r,o;return i.__generator(this,(function(i){switch(i.label){case 0:this.Bu.Ga()||d("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,function(e){var t=v(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.Gn.Vr(e)}))}(this.La)];case 2:return-1===(t=i.sent())?[2,void e.resolve()]:((n=this.Xu.get(t)||[]).push(e),this.Xu.set(t,n),[3,4]);case 3:return r=i.sent(),o=ur(r,"Initialization of waitForPendingWrites() operation failed"),e.reject(o),[3,4];case 4:return[2]}}))}))},e.prototype.ll=function(e){(this.Xu.get(e)||[]).forEach((function(e){e.resolve()})),this.Xu.delete(e)},e.prototype.fl=function(e){this.Xu.forEach((function(t){t.forEach((function(t){t.reject(new D(M.CANCELLED,e))}))})),this.Xu.clear()},e.prototype.ol=function(e,t){var n=this.Ju[this.currentUser.$h()];n||(n=new ee(E)),n=n.st(e,t),this.Ju[this.currentUser.$h()]=n},e.prototype.ul=function(e,t){var n=this.Ju[this.currentUser.$h()];if(n){var r=n.get(e);r&&(t?r.reject(t):r.resolve(),n=n.remove(e)),this.Ju[this.currentUser.$h()]=n}},e.prototype.rl=function(e,t){var n=this;void 0===t&&(t=null),this.Uu.su(e);for(var r=0,i=this.Ku.get(e);r<i.length;r++){var o=i[r];this.ju.delete(o),t&&this.Wu.dl(o,t)}this.Ku.delete(e),this.el&&this.Yu.Ch(e).forEach((function(e){n.Yu.Nr(e)||n.wl(e)}))},e.prototype.wl=function(e){var t=this.zu.get(e);null!==t&&(this.Bu.lc(t),this.zu=this.zu.remove(e),this.Hu.delete(t),this.cl())},e.prototype.il=function(e,t){for(var n=0,r=t;n<r.length;n++){var i=r[n];i instanceof eo?(this.Yu.Eo(i.key,e),this.Tl(i)):i instanceof to?(d("SyncEngine","Document no longer in limbo: "+i.key),this.Yu.Io(i.key,e),this.Yu.Nr(i.key)||this.wl(i.key)):g()}},e.prototype.Tl=function(e){var t=e.key;this.zu.get(t)||(d("SyncEngine","New document in limbo: "+t),this.Gu.push(t),this.cl())},e.prototype.cl=function(){for(;this.Gu.length>0&&this.zu.size<this.Qu;){var e=this.Gu.shift(),t=this.Zu.next();this.Hu.set(t,new io(e)),this.zu=this.zu.st(e,t),this.Bu.listen(new Y(fn(cn(e.path)),t,2,Jn.Es))}},e.prototype.El=function(){return this.zu},e.prototype.ml=function(){return this.Gu},e.prototype.hl=function(e,t){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o,a=this;return i.__generator(this,(function(s){switch(s.label){case 0:return n=[],r=[],o=[],this.ju.forEach((function(i,s){o.push(Promise.resolve().then((function(){var t=s.view.Su(e);return t.Nu?Ri(a.La,s.query,!1).then((function(e){var n=e.documents;return s.view.Su(n,t)})):t})).then((function(e){var i=t&&t.Wt.get(s.targetId),o=s.view.Un(e,a.el,i);if(a.il(s.targetId,o.$u),o.snapshot){a.el&&a.Uu.ou(s.targetId,o.snapshot.fromCache?"not-current":"current"),n.push(o.snapshot);var u=zn._s(s.targetId,o.snapshot);r.push(u)}})))})),[4,Promise.all(o)];case 1:return s.sent(),this.Wu.Ea(n),[4,function(e,t){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o,a,s,u,l,c,h;return i.__generator(this,(function(i){switch(i.label){case 0:n=v(e),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Hn.forEach(t,(function(t){return Hn.forEach(t.us,(function(r){return n.persistence.dr.Eo(e,t.targetId,r)})).next((function(){return Hn.forEach(t.ls,(function(r){return n.persistence.dr.Io(e,t.targetId,r)}))}))}))}))];case 2:return i.sent(),[3,4];case 3:if(!Qn(r=i.sent()))throw r;return d("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(o=0,a=t;o<a.length;o++)s=a[o],u=s.targetId,s.fromCache||(l=n.Eh.get(u),c=l.Z,h=l.nt(c),n.Eh=n.Eh.st(u,h));return[2]}}))}))}(this.La,r)];case 2:return s.sent(),[2]}}))}))},e.prototype.nl=function(e){},e.prototype.vc=function(e){return i.__awaiter(this,void 0,void 0,(function(){var t;return i.__generator(this,(function(n){switch(n.label){case 0:return this.currentUser.isEqual(e)?[3,3]:(d("SyncEngine","User change. New user:",e.$h()),[4,function(e,t){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o,a;return i.__generator(this,(function(i){switch(i.label){case 0:return n=v(e),r=n.Gn,o=n.Rh,[4,n.persistence.runTransaction("Handle user change","readonly",(function(e){var i;return n.Gn.yr(e).next((function(a){return i=a,r=n.persistence.oh(t),o=new Un(n.Ah,r,n.persistence.uh()),r.yr(e)})).next((function(t){for(var n=[],r=[],a=de(),s=0,u=i;s<u.length;s++){var l=u[s];n.push(l.batchId);for(var c=0,h=l.mutations;c<h.length;c++){var d=h[c];a=a.add(d.key)}}for(var f=0,p=t;f<p.length;f++){var m=p[f];r.push(m.batchId);for(var g=0,y=m.mutations;g<y.length;g++){var v=y[g];a=a.add(v.key)}}return o.Zn(e,a).next((function(e){return{Il:e,Al:n,Rl:r}}))}))}))];case 1:return a=i.sent(),[2,(n.Gn=r,n.Rh=o,n.Th.Ph(n.Rh),a)]}}))}))}(this.La,e)]);case 1:return t=n.sent(),this.currentUser=e,this.fl("'waitForPendingWrites' promise is rejected due to a user change."),this.Uu.au(e,t.Al,t.Rl),[4,this.hl(t.Il)];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},e.prototype.Oe=function(e){var t=this.Hu.get(e);if(t&&t.qu)return de().add(t.key);var n=de(),r=this.Ku.get(e);if(!r)return n;for(var i=0,o=r;i<o.length;i++){var a=o[i],s=this.ju.get(a);n=n.Nt(s.view.vu)}return n},e}();function ao(e,t){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,Ri((n=v(e)).La,t.query,!0)];case 1:return r=i.sent(),o=t.view.Mu(r),[2,(n.el&&n.il(t.targetId,o.$u),o)]}}))}))}function so(e,t,n,r){return i.__awaiter(this,void 0,void 0,(function(){var o,a;return i.__generator(this,(function(i){switch(i.label){case 0:return(o=v(e)).nl("applyBatchState()"),[4,function(e,t){var n=v(e),r=v(n.Gn);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Pr(e,t).next((function(t){return t?n.Rh.Zn(e,t):Hn.resolve(null)}))}))}(o.La,t)];case 1:return null===(a=i.sent())?[3,6]:"pending"!==n?[3,3]:[4,o.Bu.hc()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(o.ul(t,r||null),function(e,t){v(v(e).Gn).Sr(t)}(o.La,t)):g(),i.label=4;case 4:return[4,o.hl(a)];case 5:return i.sent(),[3,7];case 6:d("SyncEngine","Cannot apply mutation batch with id: "+t),i.label=7;case 7:return[2]}}))}))}function uo(e,t){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o,a,s,u,l,c;return i.__generator(this,(function(i){switch(i.label){case 0:return n=v(e),!0!==t||!0===n.tl?[3,3]:(r=n.Uu.zc(),[4,lo(n,r.N())]);case 1:return o=i.sent(),n.tl=!0,[4,n.Bu.Sc(!0)];case 2:for(i.sent(),a=0,s=o;a<s.length;a++)u=s[a],n.Bu.listen(u);return[3,7];case 3:return!1!==t||!1===n.tl?[3,7]:(l=[],c=Promise.resolve(),n.Ku.forEach((function(e,t){n.Uu.iu(t)?l.push(t):c=c.then((function(){return n.rl(t),ki(n.La,t,!0)})),n.Bu.lc(t)})),[4,c]);case 4:return i.sent(),[4,lo(n,l)];case 5:return i.sent(),function(e){var t=v(e);t.Hu.forEach((function(e,n){t.Bu.lc(n)})),t.Yu.Nh(),t.Hu=new Map,t.zu=new ee(j.P)}(n),n.tl=!1,[4,n.Bu.Sc(!1)];case 6:i.sent(),i.label=7;case 7:return[2]}}))}))}function lo(e,t,n){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o,a,s,u,l,c,h,d,f,p,m,g;return i.__generator(this,(function(i){switch(i.label){case 0:n=v(e),r=[],o=[],a=0,s=t,i.label=1;case 1:return a<s.length?(u=s[a],l=void 0,(c=n.Ku.get(u))&&0!==c.length?[4,xi(n.La,fn(c[0]))]:[3,7]):[3,13];case 2:l=i.sent(),h=0,d=c,i.label=3;case 3:return h<d.length?(f=d[h],p=n.ju.get(f),[4,ao(n,p)]):[3,6];case 4:(m=i.sent()).snapshot&&o.push(m.snapshot),i.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,Ni(n.La,u)];case 8:return g=i.sent(),[4,xi(n.La,g)];case 9:return l=i.sent(),[4,n.sl(co(g),u,!1)];case 10:i.sent(),i.label=11;case 11:r.push(l),i.label=12;case 12:return a++,[3,1];case 13:return[2,(n.Wu.Ea(o),r)]}}))}))}function co(e){return ln(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function ho(e){var t=v(e);return v(v(t.La).persistence).rh()}function fo(e,t,n,r){return i.__awaiter(this,void 0,void 0,(function(){var o,a,s;return i.__generator(this,(function(i){switch(i.label){case 0:return(o=v(e)).tl?(d("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!o.Ku.has(t))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,function(e){var t=v(e),n=v(t.Ah);return t.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Ur(e,t.Ih)})).then((function(e){var n=e.Qr,r=e.readTime;return t.Ih=r,n}))}(o.La)];case 3:return a=i.sent(),s=ve.zt(t,"current"===n),[4,o.hl(a,s)];case 4:return i.sent(),[3,8];case 5:return[4,ki(o.La,t,!0)];case 6:return i.sent(),o.rl(t,r),[3,8];case 7:g(),i.label=8;case 8:return[2]}}))}))}function po(e,t,n){return i.__awaiter(this,void 0,void 0,(function(){var r,o,a,s,u,l,c,h,f,p;return i.__generator(this,(function(m){switch(m.label){case 0:if(!(r=v(e)).tl)return[3,10];o=0,a=t,m.label=1;case 1:return o<a.length?(s=a[o],r.Ku.has(s)?(d("SyncEngine","Adding an already active target "+s),[3,5]):[4,Ni(r.La,s)]):[3,6];case 2:return u=m.sent(),[4,xi(r.La,u)];case 3:return l=m.sent(),[4,r.sl(co(u),l.targetId,!1)];case 4:m.sent(),r.Bu.listen(l),m.label=5;case 5:return o++,[3,1];case 6:c=function(e){return i.__generator(this,(function(t){switch(t.label){case 0:return r.Ku.has(e)?[4,ki(r.La,e,!1).then((function(){r.Bu.lc(e),r.rl(e)})).catch(Ti)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))},h=0,f=n,m.label=7;case 7:return h<f.length?(p=f[h],[5,c(p)]):[3,10];case 8:m.sent(),m.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mo=function(){this.Pl=void 0,this.listeners=[]},go=function(){function e(e){this.fc=e,this.gl=new T((function(e){return vn(e)}),yn),this.onlineState="Unknown",this.Vl=new Set,this.fc.subscribe(this)}return e.prototype.listen=function(e){return i.__awaiter(this,void 0,void 0,(function(){var t,n,r,o,a,s;return i.__generator(this,(function(i){switch(i.label){case 0:if(t=e.query,n=!1,(r=this.gl.get(t))||(n=!0,r=new mo),!n)return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),o=r,[4,this.fc.listen(t)];case 2:return o.Pl=i.sent(),[3,4];case 3:return a=i.sent(),s=ur(a,"Initialization of query '"+bn(e.query)+"' failed"),[2,void e.onError(s)];case 4:return this.gl.set(t,r),r.listeners.push(e),e.xu(this.onlineState),r.Pl&&e.yl(r.Pl)&&this.pl(),[2]}}))}))},e.prototype.lc=function(e){return i.__awaiter(this,void 0,void 0,(function(){var t,n,r,o;return i.__generator(this,(function(i){return t=e.query,n=!1,(r=this.gl.get(t))&&(o=r.listeners.indexOf(e))>=0&&(r.listeners.splice(o,1),n=0===r.listeners.length),n?[2,(this.gl.delete(t),this.fc.lc(t))]:[2]}))}))},e.prototype.Ea=function(e){for(var t=!1,n=0,r=e;n<r.length;n++){var i=r[n],o=i.query,a=this.gl.get(o);if(a){for(var s=0,u=a.listeners;s<u.length;s++)u[s].yl(i)&&(t=!0);a.Pl=i}}t&&this.pl()},e.prototype.dl=function(e,t){var n=this.gl.get(e);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(t);this.gl.delete(e)},e.prototype.al=function(e){this.onlineState=e;var t=!1;this.gl.forEach((function(n,r){for(var i=0,o=r.listeners;i<o.length;i++)o[i].xu(e)&&(t=!0)})),t&&this.pl()},e.prototype.bl=function(e){this.Vl.add(e),e.next()},e.prototype.vl=function(e){this.Vl.delete(e)},e.prototype.pl=function(){this.Vl.forEach((function(e){e.next()}))},e}(),yo=function(){function e(e,t,n){this.query=e,this.Sl=t,this.Dl=!1,this.Cl=null,this.onlineState="Unknown",this.options=n||{}}return e.prototype.yl=function(e){if(!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&t.push(i)}e=new ye(e.query,e.docs,e.Lt,t,e.qt,e.fromCache,e.Bt,!0)}var o=!1;return this.Dl?this.Nl(e)&&(this.Sl.next(e),o=!0):this.Fl(e,this.onlineState)&&(this.kl(e),o=!0),this.Cl=e,o},e.prototype.onError=function(e){this.Sl.error(e)},e.prototype.xu=function(e){this.onlineState=e;var t=!1;return this.Cl&&!this.Dl&&this.Fl(this.Cl,e)&&(this.kl(this.Cl),t=!0),t},e.prototype.Fl=function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return!(this.options.$l&&n||e.docs._()&&"Offline"!==t)},e.prototype.Nl=function(e){if(e.docChanges.length>0)return!0;var t=this.Cl&&this.Cl.hasPendingWrites!==e.hasPendingWrites;return!(!e.Bt&&!t)&&!0===this.options.includeMetadataChanges},e.prototype.kl=function(e){e=ye.Qt(e.query,e.docs,e.qt,e.fromCache),this.Dl=!0,this.Sl.next(e)},e}(),vo=function(){function e(){}return e.prototype.Ph=function(e){this.xl=e},e.prototype.ns=function(e,t,n,r){var i=this;return t.hn()||n.isEqual(F.min())?this.Ol(e,t):this.xl.Zn(e,r).next((function(o){var s=i.Ml(t,o);return(t.an()||t.cn())&&i.Nu(t.nn,s,r,n)?i.Ol(e,t):(h()<=a.LogLevel.DEBUG&&d("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),bn(t)),i.xl.ns(e,t,n).next((function(e){return s.forEach((function(t){e=e.st(t.key,t)})),e})))}))},e.prototype.Ml=function(e,t){var n=new re(En(e));return t.forEach((function(t,r){r instanceof rn&&An(e,r)&&(n=n.add(r))})),n},e.prototype.Nu=function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.o(r)>0)},e.prototype.Ol=function(e,t){return h()<=a.LogLevel.DEBUG&&d("IndexFreeQueryEngine","Using full collection scan to execute query:",bn(t)),this.xl.ns(e,t,F.min())},e}(),bo=function(){function e(e,t){this.zn=e,this.dr=t,this.Gn=[],this.Ll=1,this.ql=new re(Di.yh)}return e.prototype.mr=function(e){return Hn.resolve(0===this.Gn.length)},e.prototype.Ir=function(e,t,n,r){var i=this.Ll;this.Ll++,this.Gn.length>0&&this.Gn[this.Gn.length-1];var o=new jn(i,t,n,r);this.Gn.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.ql=this.ql.add(new Di(u.key,i)),this.zn.Ar(e,u.key.path.p())}return Hn.resolve(o)},e.prototype.Rr=function(e,t){return Hn.resolve(this.Bl(t))},e.prototype.gr=function(e,t){var n=t+1,r=this.Ul(n),i=r<0?0:r;return Hn.resolve(this.Gn.length>i?this.Gn[i]:null)},e.prototype.Vr=function(){return Hn.resolve(0===this.Gn.length?-1:this.Ll-1)},e.prototype.yr=function(e){return Hn.resolve(this.Gn.slice())},e.prototype.Yn=function(e,t){var n=this,r=new Di(t,0),i=new Di(t,Number.POSITIVE_INFINITY),o=[];return this.ql.St([r,i],(function(e){var t=n.Bl(e.kh);o.push(t)})),Hn.resolve(o)},e.prototype.es=function(e,t){var n=this,r=new re(E);return t.forEach((function(e){var t=new Di(e,0),i=new Di(e,Number.POSITIVE_INFINITY);n.ql.St([t,i],(function(e){r=r.add(e.kh)}))})),Hn.resolve(this.Ql(r))},e.prototype.as=function(e,t){var n=t.path,r=n.length+1,i=n;j.j(i)||(i=i.child(""));var o=new Di(new j(i),0),a=new re(E);return this.ql.Dt((function(e){var t=e.key.path;return!!n.D(t)&&(t.length===r&&(a=a.add(e.kh)),!0)}),o),Hn.resolve(this.Ql(a))},e.prototype.Ql=function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Bl(e);null!==r&&n.push(r)})),n},e.prototype.br=function(e,t){var n=this;y(0===this.Wl(t.batchId,"removed")),this.Gn.shift();var r=this.ql;return Hn.forEach(t.mutations,(function(i){var o=new Di(i.key,t.batchId);return r=r.delete(o),n.dr.Dr(e,i.key)})).next((function(){n.ql=r}))},e.prototype.Sr=function(e){},e.prototype.Nr=function(e,t){var n=new Di(t,0),r=this.ql.Ct(n);return Hn.resolve(t.isEqual(r&&r.key))},e.prototype.Cr=function(e){return this.Gn.length,Hn.resolve()},e.prototype.Wl=function(e,t){return this.Ul(e)},e.prototype.Ul=function(e){return 0===this.Gn.length?0:e-this.Gn[0].batchId},e.prototype.Bl=function(e){var t=this.Ul(e);return t<0||t>=this.Gn.length?null:this.Gn[t]},e}(),Ao=function(){function e(e,t){this.zn=e,this.jl=t,this.docs=new ee(j.P),this.size=0}return e.prototype.xn=function(e,t,n){var r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.jl(t);return this.docs=this.docs.st(r,{Or:t,size:a,readTime:n}),this.size+=a-o,this.zn.Ar(e,r.path.p())},e.prototype.Mn=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},e.prototype.Ln=function(e,t){var n=this.docs.get(t);return Hn.resolve(n?n.Or:null)},e.prototype.getEntries=function(e,t){var n=this,r=se();return t.forEach((function(e){var t=n.docs.get(e);r=r.st(e,t?t.Or:null)})),Hn.resolve(r)},e.prototype.ns=function(e,t,n){for(var r=le(),i=new j(t.path.child("")),o=this.docs.ut(i);o.Tt();){var a=o.wt(),s=a.key,u=a.value,l=u.Or,c=u.readTime;if(!t.path.D(s.path))break;c.o(n)<=0||l instanceof rn&&An(t,l)&&(r=r.st(l.key,l))}return Hn.resolve(r)},e.prototype.Kl=function(e,t){return Hn.forEach(this.docs,(function(e){return t(e)}))},e.prototype.jr=function(t){return new e.Kr(this)},e.prototype.zr=function(e){return Hn.resolve(this.size)},e}();Ao.Kr=function(e){function t(t){var n=this;return(n=e.call(this)||this).Hr=t,n}return i.__extends(t,e),t.prototype.Un=function(e){var t=this,n=[];return this.Fn.forEach((function(r,i){i?n.push(t.Hr.xn(e,i,t.readTime)):t.Hr.Mn(r)})),Hn.Cn(n)},t.prototype.qn=function(e,t){return this.Hr.Ln(e,t)},t.prototype.Bn=function(e,t){return this.Hr.getEntries(e,t)},t}(Vn);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Eo=function(){function e(e){this.persistence=e,this.Gl=new T((function(e){return U(e)}),z),this.lastRemoteSnapshotVersion=F.min(),this.highestTargetId=0,this.zl=0,this.Hl=new Mi,this.targetCount=0,this.Yl=si.to()}return e.prototype.be=function(e,t){return this.Gl.forEach((function(e,n){return t(n)})),Hn.resolve()},e.prototype.ro=function(e){return Hn.resolve(this.lastRemoteSnapshotVersion)},e.prototype.oo=function(e){return Hn.resolve(this.zl)},e.prototype.no=function(e){return this.highestTargetId=this.Yl.next(),Hn.resolve(this.highestTargetId)},e.prototype.ho=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.zl&&(this.zl=t),Hn.resolve()},e.prototype.co=function(e){this.Gl.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Yl=new si(t),this.highestTargetId=t),e.sequenceNumber>this.zl&&(this.zl=e.sequenceNumber)},e.prototype.ao=function(e,t){return this.co(t),this.targetCount+=1,Hn.resolve()},e.prototype.lo=function(e,t){return this.co(t),Hn.resolve()},e.prototype._o=function(e,t){return this.Gl.delete(t.target),this.Hl.Ch(t.targetId),this.targetCount-=1,Hn.resolve()},e.prototype.hr=function(e,t,n){var r=this,i=0,o=[];return this.Gl.forEach((function(a,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Gl.delete(a),o.push(r.fo(e,s.targetId)),i++)})),Hn.Cn(o).next((function(){return i}))},e.prototype.do=function(e){return Hn.resolve(this.targetCount)},e.prototype.wo=function(e,t){var n=this.Gl.get(t)||null;return Hn.resolve(n)},e.prototype.To=function(e,t,n){return this.Hl.vh(t,n),Hn.resolve()},e.prototype.mo=function(e,t,n){this.Hl.Dh(t,n);var r=this.persistence.dr,i=[];return r&&t.forEach((function(t){i.push(r.Dr(e,t))})),Hn.Cn(i)},e.prototype.fo=function(e,t){return this.Hl.Ch(t),Hn.resolve()},e.prototype.Ao=function(e,t){var n=this.Hl.Fh(t);return Hn.resolve(n)},e.prototype.Nr=function(e,t){return Hn.resolve(this.Hl.Nr(t))},e}(),wo=function(){function e(e){var t=this;this.Jl={},this.yo=new Jn(0),this.po=!1,this.po=!0,this.dr=e(this),this.ko=new Eo(this),this.zn=new Hr,this.Kn=new Ao(this.zn,(function(e){return t.dr.Xl(e)}))}return e.prototype.start=function(){return Promise.resolve()},e.prototype.th=function(){return this.po=!1,Promise.resolve()},Object.defineProperty(e.prototype,"tr",{get:function(){return this.po},enumerable:!1,configurable:!0}),e.prototype.Bo=function(){},e.prototype.Uo=function(){},e.prototype.uh=function(){return this.zn},e.prototype.oh=function(e){var t=this.Jl[e.$h()];return t||(t=new bo(this.zn,this.dr),this.Jl[e.$h()]=t),t},e.prototype.hh=function(){return this.ko},e.prototype.ah=function(){return this.Kn},e.prototype.runTransaction=function(e,t,n){var r=this;d("MemoryPersistence","Starting transaction:",e);var i=new So(this.yo.next());return this.dr.Zl(),n(i).next((function(e){return r.dr.t_(i).next((function(){return e}))})).Sn().then((function(e){return i.jn(),e}))},e.prototype.e_=function(e,t){return Hn.Nn(Object.values(this.Jl).map((function(n){return function(){return n.Nr(e,t)}})))},e}(),So=function(e){function t(t){var n=this;return(n=e.call(this)||this).Ro=t,n}return i.__extends(t,e),t}(Wn),_o=function(){function e(e){this.persistence=e,this.n_=new Mi,this.s_=null}return e.i_=function(t){return new e(t)},Object.defineProperty(e.prototype,"r_",{get:function(){if(this.s_)return this.s_;throw g()},enumerable:!1,configurable:!0}),e.prototype.Eo=function(e,t,n){return this.n_.Eo(n,t),this.r_.delete(n.toString()),Hn.resolve()},e.prototype.Io=function(e,t,n){return this.n_.Io(n,t),this.r_.add(n.toString()),Hn.resolve()},e.prototype.Dr=function(e,t){return this.r_.add(t.toString()),Hn.resolve()},e.prototype.removeTarget=function(e,t){var n=this;this.n_.Ch(t.targetId).forEach((function(e){return n.r_.add(e.toString())}));var r=this.persistence.hh();return r.Ao(e,t.targetId).next((function(e){e.forEach((function(e){return n.r_.add(e.toString())}))})).next((function(){return r._o(e,t)}))},e.prototype.Zl=function(){this.s_=new Set},e.prototype.t_=function(e){var t=this,n=this.persistence.ah().jr();return Hn.forEach(this.r_,(function(r){var i=j.B(r);return t.o_(e,i).next((function(e){e||n.Mn(i)}))})).next((function(){return t.s_=null,n.apply(e)}))},e.prototype.wh=function(e,t){var n=this;return this.o_(e,t).next((function(e){e?n.r_.delete(t.toString()):n.r_.add(t.toString())}))},e.prototype.Xl=function(e){return 0},e.prototype.o_=function(e,t){var n=this;return Hn.Nn([function(){return Hn.resolve(n.n_.Nr(t))},function(){return n.persistence.hh().Nr(e,t)},function(){return n.persistence.e_(e,t)}])},e}(),xo=function(){function e(e){this.h_=e.h_,this.a_=e.a_}return e.prototype.wa=function(e){this.c_=e},e.prototype.ua=function(e){this.u_=e},e.prototype.onMessage=function(e){this.l_=e},e.prototype.close=function(){this.a_()},e.prototype.send=function(e){this.h_(e)},e.prototype.__=function(){this.c_()},e.prototype.f_=function(e){this.u_(e)},e.prototype.d_=function(e){this.l_(e)},e}(),ko={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Ro=function(e){function t(t){var n=this;return(n=e.call(this,t)||this).forceLongPolling=t.forceLongPolling,n}return i.__extends(t,e),t.prototype.A_=function(e,t,n,r){return new Promise((function(i,o){var a=new u.XhrIo;a.listenOnce(u.EventType.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case u.ErrorCode.NO_ERROR:var t=a.getResponseJson();d("Connection","XHR received:",JSON.stringify(t)),i(t);break;case u.ErrorCode.TIMEOUT:d("Connection",'RPC "'+e+'" timed out'),o(new D(M.DEADLINE_EXCEEDED,"Request time out"));break;case u.ErrorCode.HTTP_ERROR:var n=a.getStatus();if(d("Connection",'RPC "'+e+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=function(e){var t=e.toLowerCase().replace("_","-");return Object.values(M).indexOf(t)>=0?t:M.UNKNOWN}(r.status);o(new D(s,r.message))}else o(new D(M.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new D(M.UNAVAILABLE,"Connection failed."));break;default:g()}}finally{d("Connection",'RPC "'+e+'" completed.')}}));var s=JSON.stringify(r);a.send(t,"POST",s,n,15)}))},t.prototype.Ta=function(e,t){var n=[this.T_,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=u.createWebChannelTransport(),i={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.s.projectId+"/databases/"+this.s.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.I_(i.initMessageHeaders,t),s.isMobileCordova()||s.isReactNative()||s.isElectron()||s.isIE()||s.isUWP()||s.isBrowserExtension()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");d("Connection","Creating WebChannel: "+o,i);var a=r.createWebChannel(o,i),l=!1,c=!1,h=new xo({h_:function(e){c?d("Connection","Not sending because WebChannel is closed:",e):(l||(d("Connection","Opening WebChannel transport."),a.open(),l=!0),d("Connection","WebChannel sending:",e),a.send(e))},a_:function(){return a.close()}}),f=function(e,t){a.listen(e,(function(e){try{t(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return f(u.WebChannel.EventType.OPEN,(function(){c||d("Connection","WebChannel transport opened.")})),f(u.WebChannel.EventType.CLOSE,(function(){c||(c=!0,d("Connection","WebChannel transport closed"),h.f_())})),f(u.WebChannel.EventType.ERROR,(function(e){c||(c=!0,p("Connection","WebChannel transport errored:",e),h.f_(new D(M.UNAVAILABLE,"The operation could not be completed")))})),f(u.WebChannel.EventType.MESSAGE,(function(e){var t;if(!c){var n=e.data[0];y(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){d("Connection","WebChannel received error:",i);var o=i.status,s=function(e){var t=K[e];if(void 0!==t)return $(t)}(o),u=i.message;void 0===s&&(s=M.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),c=!0,h.f_(new D(s,u)),a.close()}else d("Connection","WebChannel received:",n),h.d_(n)}})),setTimeout((function(){h.__()}),0),h},t}(function(){function e(e){this.w_=e,this.s=e.s;var t=e.ssl?"https":"http";this.T_=t+"://"+e.host,this.E_="projects/"+this.s.projectId+"/databases/"+this.s.database+"/documents"}return e.prototype.va=function(e,t,n,r){var i=this.m_(e,t);d("RestConnection","Sending: ",i,n);var o={};return this.I_(o,r),this.A_(e,i,o,n).then((function(e){return d("RestConnection","Received: ",e),e}),(function(t){throw p("RestConnection",e+" failed with error: ",t,"url: ",i,"request:",n),t}))},e.prototype.Sa=function(e,t,n,r){return this.va(e,t,n,r)},e.prototype.I_=function(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/7.19.0",e["Content-Type"]="text/plain",t)for(var n in t.Mh)t.Mh.hasOwnProperty(n)&&(e[n]=t.Mh[n])},e.prototype.m_=function(e,t){var n=ko[e];return this.T_+"/v1/"+t+":"+n},e}()),No=function(){function e(){var e=this;this.R_=function(){return e.P_()},this.g_=function(){return e.V_()},this.y_=[],this.p_()}return e.prototype.Ka=function(e){this.y_.push(e)},e.prototype.th=function(){window.removeEventListener("online",this.R_),window.removeEventListener("offline",this.g_)},e.prototype.p_=function(){window.addEventListener("online",this.R_),window.addEventListener("offline",this.g_)},e.prototype.P_=function(){d("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,t=this.y_;e<t.length;e++)(0,t[e])(0)},e.prototype.V_=function(){d("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.y_;e<t.length;e++)(0,t[e])(1)},e.ks=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},e}(),To=function(){function e(){}return e.prototype.Ka=function(e){},e.prototype.th=function(){},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mo(e){return new Ge(e,!0)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Do="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",Oo=function(){function e(){}return e.prototype.initialize=function(e){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.Uu=this.b_(e),this.persistence=this.v_(e),[4,this.persistence.start()];case 1:return t.sent(),this.S_=this.D_(e),this.La=this.C_(e),[2]}}))}))},e.prototype.D_=function(e){return null},e.prototype.C_=function(e){return t=this.persistence,n=new vo,r=e.N_,new Ai(t,n,r);var t,n,r},e.prototype.v_=function(e){if(e.k_.F_)throw new D(M.FAILED_PRECONDITION,Do);return new wo(_o.i_)},e.prototype.b_=function(e){return new $i},e.prototype.terminate=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return this.S_&&this.S_.stop(),[4,this.Uu.th()];case 1:return e.sent(),[4,this.persistence.th()];case 2:return e.sent(),[2]}}))}))},e.prototype.clearPersistence=function(e,t){throw new D(M.FAILED_PRECONDITION,Do)},e}(),Fo=function(e){function t(t){var n=this;return(n=e.call(this)||this).x_=t,n}return i.__extends(t,e),t.prototype.initialize=function(t){return i.__awaiter(this,void 0,void 0,(function(){var n,r=this;return i.__generator(this,(function(o){switch(o.label){case 0:return[4,e.prototype.initialize.call(this,t)];case 1:return o.sent(),[4,this.x_.initialize(this,t)];case 2:return o.sent(),n=this.x_.fc,this.Uu instanceof Qi?(this.Uu.fc={mu:so.bind(null,n),Iu:fo.bind(null,n),Au:po.bind(null,n),rh:ho.bind(null,n)},[4,this.Uu.start()]):[3,4];case 3:o.sent(),o.label=4;case 4:return[4,this.persistence.qo((function(e){return i.__awaiter(r,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return[4,uo(this.x_.fc,e)];case 1:return t.sent(),this.S_&&(e&&!this.S_.tr?this.S_.start(this.La):e||this.S_.stop()),[2]}}))}))}))];case 5:return o.sent(),[2]}}))}))},t.prototype.b_=function(e){if(e.k_.F_&&e.k_.synchronizeTabs){var t=ir();if(!Qi.ks(t))throw new D(M.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=bi(e.w_.s,e.w_.persistenceKey);return new Qi(t,e.ei,n,e.clientId,e.N_)}return new $i},t}(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.initialize=function(t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(n){switch(n.label){case 0:return[4,e.prototype.initialize.call(this,t)];case 1:return n.sent(),[4,function(e){return i.__awaiter(this,void 0,void 0,(function(){var t,n;return i.__generator(this,(function(r){return t=v(e),n=v(t.Ah),[2,t.persistence.runTransaction("Synchronize last document change read time","readonly",(function(e){return n.Wr(e)})).then((function(e){t.Ih=e}))]}))}))}(this.La)];case 2:return n.sent(),[2]}}))}))},t.prototype.D_=function(e){var t=this.persistence.dr.Yi;return new fr(t,e.ei)},t.prototype.v_=function(e){var t=bi(e.w_.s,e.w_.persistenceKey),n=Mo(e.w_.s);return new pi(e.k_.synchronizeTabs,t,e.clientId,dr.Ui(e.k_.cacheSizeBytes),e.ei,ir(),or(),n,this.Uu,e.k_.Vo)},t.prototype.b_=function(e){return new $i},t.prototype.clearPersistence=function(e,t){return function(e){return i.__awaiter(this,void 0,void 0,(function(){var t;return i.__generator(this,(function(n){switch(n.label){case 0:return Zn.ks()?(t=e+"main",[4,Zn.delete(t)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(bi(e,t))},t}(Oo)),Co=function(){function e(){}return e.prototype.initialize=function(e,t){return i.__awaiter(this,void 0,void 0,(function(){var n=this;return i.__generator(this,(function(r){switch(r.label){case 0:return this.La?[3,3]:(this.La=e.La,this.Uu=e.Uu,this.qa=this.O_(t),this.Bu=this.M_(t),this.fc=this.L_(t),this.q_=this.B_(t),this.Uu.Da=function(e){return n.fc.xu(e,1)},this.Bu.fc=this.fc,[4,this.Bu.start()]);case 1:return r.sent(),[4,this.Bu.Sc(this.fc.el)];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},e.prototype.B_=function(e){return new go(this.fc)},e.prototype.O_=function(e){var t,n=Mo(e.w_.s),r=(t=e.w_,new Ro(t));return function(e,t,n){return new Vi(e,t,n)}(e.credentials,r,n)},e.prototype.M_=function(e){var t=this;return new Wi(this.La,this.qa,e.ei,(function(e){return t.fc.xu(e,0)}),No.ks()?new No:new To)},e.prototype.L_=function(e){return function(e,t,n,r,i,o,a){var s=new oo(e,t,n,r,i,o);return a&&(s.tl=!0),s}(this.La,this.Bu,this.qa,this.Uu,e.N_,e.Qu,!e.k_.F_||!e.k_.synchronizeTabs)},e.prototype.terminate=function(){return this.Bu.th()},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Io(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(e)}var Po=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.observer.next&&this.U_(this.observer.next,e)},e.prototype.error=function(e){this.observer.error?this.U_(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)},e.prototype.Q_=function(){this.muted=!0},e.prototype.U_=function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lo(e,t){if(0!==t.length)throw new D(M.INVALID_ARGUMENT,"Function "+e+"() does not support arguments, but was called with "+ta(t.length,"argument")+".")}function jo(e,t,n){if(t.length!==n)throw new D(M.INVALID_ARGUMENT,"Function "+e+"() requires "+ta(n,"argument")+", but was called with "+ta(t.length,"argument")+".")}function Bo(e,t,n){if(t.length<n)throw new D(M.INVALID_ARGUMENT,"Function "+e+"() requires at least "+ta(n,"argument")+", but was called with "+ta(t.length,"argument")+".")}function Ho(e,t,n,r){if(t.length<n||t.length>r)throw new D(M.INVALID_ARGUMENT,"Function "+e+"() requires between "+n+" and "+r+" arguments, but was called with "+ta(t.length,"argument")+".")}function Vo(e,t,n,r){Go(e,t,ea(n)+" argument",r)}function qo(e,t,n,r){void 0!==r&&Vo(e,t,n,r)}function Wo(e,t,n,r){Go(e,t,n+" option",r)}function Uo(e,t,n,r){void 0!==r&&Wo(e,t,n,r)}function zo(e,t,n,r,i){void 0!==r&&function(e,t,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var u=s[a];if(u===r)return;o.push(Zo(u))}var l=Zo(r);throw new D(M.INVALID_ARGUMENT,"Invalid value "+l+" provided to function "+e+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(e,0,n,r,i)}function Jo(e,t,n,r){if(!t.some((function(e){return e===r})))throw new D(M.INVALID_ARGUMENT,"Invalid value "+Zo(r)+" provided to function "+e+"() for its "+ea(n)+" argument. Acceptable values: "+t.join(", "));return r}function Go(e,t,n,r){if(!("object"===t?Ko(r):"non-empty string"===t?"string"==typeof r&&""!==r:typeof r===t)){var i=Zo(r);throw new D(M.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" to be of type "+t+", but it was: "+i)}}function Ko(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Zo(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return"function"==typeof e?"a function":g()}function Yo(e,t,n){if(void 0===n)throw new D(M.INVALID_ARGUMENT,"Function "+e+"() requires a valid "+ea(t)+" argument, but it was undefined.")}function Xo(e,t,n){R(t,(function(t,r){if(n.indexOf(t)<0)throw new D(M.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+e+"(). Available options: "+n.join(", "))}))}function Qo(e,t,n,r){var i=Zo(r);return new D(M.INVALID_ARGUMENT,"Function "+e+"() requires its "+ea(n)+" argument to be a "+t+", but it was: "+i)}function $o(e,t,n){if(n<=0)throw new D(M.INVALID_ARGUMENT,"Function "+e+"() requires its "+ea(t)+" argument to be a positive number, but it was: "+n+".")}function ea(e){switch(e){case 1:return"first";case 2:return"second";case 3:return"third";default:return e+"th"}}function ta(e,t){return e+" "+t+(1===e?"":"s")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(){if("undefined"==typeof Uint8Array)throw new D(M.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function ra(){if("undefined"==typeof atob)throw new D(M.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var ia=function(){function e(e){ra(),this.W_=e}return e.fromBase64String=function(t){jo("Blob.fromBase64String",arguments,1),Vo("Blob.fromBase64String","string",1,t),ra();try{return new e(G.fromBase64String(t))}catch(t){throw new D(M.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},e.fromUint8Array=function(t){if(jo("Blob.fromUint8Array",arguments,1),na(),!(t instanceof Uint8Array))throw Qo("Blob.fromUint8Array","Uint8Array",1,t);return new e(G.fromUint8Array(t))},e.prototype.toBase64=function(){return jo("Blob.toBase64",arguments,0),ra(),this.W_.toBase64()},e.prototype.toUint8Array=function(){return jo("Blob.toUint8Array",arguments,0),na(),this.W_.toUint8Array()},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(e){return this.W_.isEqual(e.W_)},e}(),oa=function(e){!function(e,t,n,r){if(!(t instanceof Array)||t.length<1)throw new D(M.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+ta(1,"element")+".")}(0,e);for(var t=0;t<e.length;++t)if(Vo("FieldPath","string",t,e[t]),0===e[t].length)throw new D(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.j_=new L(e)},aa=function(e){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.call(this,t)||this}return i.__extends(t,e),t.documentId=function(){return new t(L.L().F())},t.prototype.isEqual=function(e){if(!(e instanceof t))throw Qo("isEqual","FieldPath",1,e);return this.j_.isEqual(e.j_)},t}(oa),sa=new RegExp("[~\\*/\\[\\]]"),ua=function(){this.K_=this},la=function(e){function t(t){var n=this;return(n=e.call(this)||this).G_=t,n}return i.__extends(t,e),t.prototype.z_=function(e){if(2!==e.H_)throw 1===e.H_?e.Y_(this.G_+"() can only appear at the top level of your update data"):e.Y_(this.G_+"() cannot be used with set() unless you pass {merge:true}");return e.qe.push(e.path),null},t.prototype.isEqual=function(e){return e instanceof t},t}(ua);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ca(e,t,n){return new Sa({H_:3,J_:t.settings.J_,methodName:e.G_,X_:n},t.s,t.serializer,t.ignoreUndefinedProperties)}var ha=function(e){function t(t){var n=this;return(n=e.call(this)||this).G_=t,n}return i.__extends(t,e),t.prototype.z_=function(e){return new It(e.path,new kt)},t.prototype.isEqual=function(e){return e instanceof t},t}(ua),da=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).G_=t,r.Z_=n,r}return i.__extends(t,e),t.prototype.z_=function(e){var t=ca(this,e,!0),n=this.Z_.map((function(e){return Ta(e,t)})),r=new Rt(n);return new It(e.path,r)},t.prototype.isEqual=function(e){return this===e},t}(ua),fa=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).G_=t,r.Z_=n,r}return i.__extends(t,e),t.prototype.z_=function(e){var t=ca(this,e,!0),n=this.Z_.map((function(e){return Ta(e,t)})),r=new Tt(n);return new It(e.path,r)},t.prototype.isEqual=function(e){return this===e},t}(ua),pa=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).G_=t,r.tf=n,r}return i.__extends(t,e),t.prototype.z_=function(e){var t=new Dt(e.serializer,Ye(e.serializer,this.tf));return new It(e.path,t)},t.prototype.isEqual=function(e){return this===e},t}(ua),ma=function(e){function t(){return e.call(this)||this}return i.__extends(t,e),t.delete=function(){return Lo("FieldValue.delete",arguments),new ga(new la("FieldValue.delete"))},t.serverTimestamp=function(){return Lo("FieldValue.serverTimestamp",arguments),new ga(new ha("FieldValue.serverTimestamp"))},t.arrayUnion=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Bo("FieldValue.arrayUnion",arguments,1),new ga(new da("FieldValue.arrayUnion",e))},t.arrayRemove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Bo("FieldValue.arrayRemove",arguments,1),new ga(new fa("FieldValue.arrayRemove",e))},t.increment=function(e){return Vo("FieldValue.increment","number",1,e),jo("FieldValue.increment",arguments,1),new ga(new pa("FieldValue.increment",e))},t}(ua),ga=function(e){function t(t){var n=this;return(n=e.call(this)||this).K_=t,n.G_=t.G_,n}return i.__extends(t,e),t.prototype.z_=function(e){return this.K_.z_(e)},t.prototype.isEqual=function(e){return e instanceof t&&this.K_.isEqual(e.K_)},t}(ma),ya=function(){function e(e,t){if(jo("GeoPoint",arguments,2),Vo("GeoPoint","number",1,e),Vo("GeoPoint","number",2,t),!isFinite(e)||e<-90||e>90)throw new D(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new D(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this.ef=e,this.nf=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this.ef},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this.nf},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this.ef===e.ef&&this.nf===e.nf},e.prototype.toJSON=function(){return{latitude:this.ef,longitude:this.nf}},e.prototype.T=function(e){return E(this.ef,e.ef)||E(this.nf,e.nf)},e}(),va=/^__.*__$/,ba=function(e,t,n){this.sf=e,this.if=t,this.rf=n},Aa=function(){function e(e,t,n){this.data=e,this.qe=t,this.fieldTransforms=n}return e.prototype.hf=function(e,t){var n=[];return null!==this.qe?n.push(new Jt(e,this.data,this.qe,t)):n.push(new zt(e,this.data,t)),this.fieldTransforms.length>0&&n.push(new Kt(e,this.fieldTransforms)),n},e}(),Ea=function(){function e(e,t,n){this.data=e,this.qe=t,this.fieldTransforms=n}return e.prototype.hf=function(e,t){var n=[new Jt(e,this.data,this.qe,t)];return this.fieldTransforms.length>0&&n.push(new Kt(e,this.fieldTransforms)),n},e}();function wa(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw g()}}var Sa=function(){function e(e,t,n,r,i,o){this.settings=e,this.s=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.af(),this.fieldTransforms=i||[],this.qe=o||[]}return Object.defineProperty(e.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"H_",{get:function(){return this.settings.H_},enumerable:!1,configurable:!0}),e.prototype.cf=function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.s,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.qe)},e.prototype.uf=function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.cf({path:n,X_:!1});return r.lf(e),r},e.prototype._f=function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.cf({path:n,X_:!1});return r.af(),r},e.prototype.ff=function(e){return this.cf({path:void 0,X_:!0})},e.prototype.Y_=function(e){return Ia(e,this.settings.methodName,this.settings.df||!1,this.path,this.settings.J_)},e.prototype.contains=function(e){return void 0!==this.qe.find((function(t){return e.D(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.D(t.field)}))},e.prototype.af=function(){if(this.path)for(var e=0;e<this.path.length;e++)this.lf(this.path.get(e))},e.prototype.lf=function(e){if(0===e.length)throw this.Y_("Document fields must not be empty");if(wa(this.H_)&&va.test(e))throw this.Y_('Document fields cannot begin and end with "__"')},e}(),_a=function(){function e(e,t,n){this.s=e,this.ignoreUndefinedProperties=t,this.serializer=n||Mo(e)}return e.prototype.wf=function(e,t,n,r){return void 0===r&&(r=!1),new Sa({H_:e,methodName:t,J_:n,path:L.$(),X_:!1,df:r},this.s,this.serializer,this.ignoreUndefinedProperties)},e}();function xa(e,t,n,r,i,o){void 0===o&&(o={});var a=e.wf(o.merge||o.mergeFields?2:0,t,n,i);Oa("Data must be an object, but it was:",a,r);var s,u,l=Ma(r,a);if(o.merge)s=new Ct(a.qe),u=a.fieldTransforms;else if(o.mergeFields){for(var c=[],h=0,d=o.mergeFields;h<d.length;h++){var f=d[h],p=void 0;if(f instanceof oa)p=f.j_;else{if("string"!=typeof f)throw g();p=Ca(t,f,n)}if(!a.contains(p))throw new D(M.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");Pa(c,p)||c.push(p)}s=new Ct(c),u=a.fieldTransforms.filter((function(e){return s.Ke(e.field)}))}else s=null,u=a.fieldTransforms;return new Aa(new $t(l),s,u)}function ka(e,t,n,r){var i=e.wf(1,t,n);Oa("Data must be an object, but it was:",i,r);var o=[],a=new en;R(r,(function(e,r){var s=Ca(t,e,n),u=i._f(s);if(r instanceof ua&&r.K_ instanceof la)o.push(s);else{var l=Ta(r,u);null!=l&&(o.push(s),a.set(s,l))}}));var s=new Ct(o);return new Ea(a.ze(),s,i.fieldTransforms)}function Ra(e,t,n,r,i,o){var a=e.wf(1,t,n),s=[Fa(t,r,n)],u=[i];if(o.length%2!=0)throw new D(M.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var l=0;l<o.length;l+=2)s.push(Fa(t,o[l])),u.push(o[l+1]);for(var c=[],h=new en,d=s.length-1;d>=0;--d)if(!Pa(c,s[d])){var f=s[d],p=u[d],m=a._f(f);if(p instanceof ua&&p.K_ instanceof la)c.push(f);else{var g=Ta(p,m);null!=g&&(c.push(f),h.set(f,g))}}var y=new Ct(c);return new Ea(h.ze(),y,a.fieldTransforms)}function Na(e,t,n,r){return void 0===r&&(r=!1),Ta(n,e.wf(r?4:3,t))}function Ta(e,t){if(Da(e))return Oa("Unsupported field value:",t,e),Ma(e,t);if(e instanceof ua)return function(e,t){if(!wa(t.H_))throw t.Y_(e.G_+"() can only be used with update() and set()");if(!t.path)throw t.Y_(e.G_+"() is not currently supported inside arrays");var n=e.z_(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(t.path&&t.qe.push(t.path),e instanceof Array){if(t.settings.X_&&4!==t.H_)throw t.Y_("Nested arrays are not supported");return function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var a=Ta(o[i],t.ff(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===e)return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ye(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=O.fromDate(e);return{timestampValue:Xe(t.serializer,n)}}if(e instanceof O){var r=new O(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Xe(t.serializer,r)}}if(e instanceof ya)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof ia)return{bytesValue:Qe(t.serializer,e)};if(e instanceof ba){var i=t.s,o=e.sf;if(!o.isEqual(i))throw t.Y_("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:tt(e.sf||t.s,e.if.path)}}if(void 0===e&&t.ignoreUndefinedProperties)return null;throw t.Y_("Unsupported field value: "+Zo(e))}(e,t)}function Ma(e,t){var n={};return N(e)?t.path&&t.path.length>0&&t.qe.push(t.path):R(e,(function(e,r){var i=Ta(r,t.uf(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Da(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof O||e instanceof ya||e instanceof ia||e instanceof ba||e instanceof ua)}function Oa(e,t,n){if(!Da(n)||!Ko(n)){var r=Zo(n);throw"an object"===r?t.Y_(e+" a custom object"):t.Y_(e+" "+r)}}function Fa(e,t,n){if(t instanceof oa)return t.j_;if("string"==typeof t)return Ca(e,t);throw Ia("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}function Ca(e,t,n){try{return function(e){if(e.search(sa)>=0)throw new D(M.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(aa.bind.apply(aa,i.__spreadArrays([void 0],e.split("."))))}catch(t){throw new D(M.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(t).j_}catch(t){throw Ia((r=t)instanceof Error?r.message:r.toString(),e,!1,void 0,n)}var r}function Ia(e,t,n,r,i){var o=r&&!r._(),a=void 0!==i,s="Function "+t+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new D(M.INVALID_ARGUMENT,(s+=". ")+e+u)}function Pa(e,t){return e.some((function(e){return e.isEqual(t)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var La=function(){function e(e){this.qa=e,this.Tf=new Map,this.mutations=[],this.Ef=!1,this.mf=null,this.If=new Set}return e.prototype.Af=function(e){return i.__awaiter(this,void 0,void 0,(function(){var t,n=this;return i.__generator(this,(function(r){switch(r.label){case 0:if(this.Rf(),this.mutations.length>0)throw new D(M.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(e,t){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o,a,s,u;return i.__generator(this,(function(i){switch(i.label){case 0:return n=v(e),r=st(n.serializer)+"/documents",o={documents:t.map((function(e){return rt(n.serializer,e)}))},[4,n.Sa("BatchGetDocuments",r,o)];case 1:return a=i.sent(),s=new Map,a.forEach((function(e){var t=function(e,t){return"found"in t?function(e,t){y(!!t.found),t.found.name,t.found.updateTime;var n=it(e,t.found.name),r=et(t.found.updateTime),i=new $t({mapValue:{fields:t.found.fields}});return new rn(n,r,i,{})}(e,t):"missing"in t?function(e,t){y(!!t.missing),y(!!t.readTime);var n=it(e,t.missing),r=et(t.readTime);return new on(n,r)}(e,t):g()}(n.serializer,e);s.set(t.key.toString(),t)})),u=[],[2,(t.forEach((function(e){var t=s.get(e.toString());y(!!t),u.push(t)})),u)]}}))}))}(this.qa,e)];case 1:return[2,((t=r.sent()).forEach((function(e){e instanceof on||e instanceof rn?n.Pf(e):g()})),t)]}}))}))},e.prototype.set=function(e,t){this.write(t.hf(e,this.Qe(e))),this.If.add(e.toString())},e.prototype.update=function(e,t){try{this.write(t.hf(e,this.gf(e)))}catch(e){this.mf=e}this.If.add(e.toString())},e.prototype.delete=function(e){this.write([new Xt(e,this.Qe(e))]),this.If.add(e.toString())},e.prototype.commit=function(){return i.__awaiter(this,void 0,void 0,(function(){var e,t=this;return i.__generator(this,(function(n){switch(n.label){case 0:if(this.Rf(),this.mf)throw this.mf;return e=this.Tf,this.mutations.forEach((function(t){e.delete(t.key.toString())})),e.forEach((function(e,n){var r=j.B(n);t.mutations.push(new Qt(r,t.Qe(r)))})),[4,function(e,t){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o;return i.__generator(this,(function(i){switch(i.label){case 0:return n=v(e),r=st(n.serializer)+"/documents",o={writes:t.map((function(e){return ct(n.serializer,e)}))},[4,n.va("Commit",r,o)];case 1:return i.sent(),[2]}}))}))}(this.qa,this.mutations)];case 1:return n.sent(),this.Ef=!0,[2]}}))}))},e.prototype.Pf=function(e){var t;if(e instanceof rn)t=e.version;else{if(!(e instanceof on))throw g();t=F.min()}var n=this.Tf.get(e.key.toString());if(n){if(!t.isEqual(n))throw new D(M.ABORTED,"Document version changed between two reads.")}else this.Tf.set(e.key.toString(),t)},e.prototype.Qe=function(e){var t=this.Tf.get(e.toString());return!this.If.has(e.toString())&&t?Lt.updateTime(t):Lt.We()},e.prototype.gf=function(e){var t=this.Tf.get(e.toString());if(!this.If.has(e.toString())&&t){if(t.isEqual(F.min()))throw new D(M.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Lt.updateTime(t)}return Lt.exists(!0)},e.prototype.write=function(e){this.Rf(),this.mutations=this.mutations.concat(e)},e.prototype.Rf=function(){},e}(),ja=function(){function e(e,t,n,r){this.ei=e,this.qa=t,this.updateFunction=n,this.ii=r,this.Vf=5,this.Ti=new Kn(this.ei,"transaction_retry")}return e.prototype.run=function(){this.yf()},e.prototype.yf=function(){var e=this;this.Ti.bs((function(){return i.__awaiter(e,void 0,void 0,(function(){var e,t,n=this;return i.__generator(this,(function(r){return e=new La(this.qa),(t=this.pf(e))&&t.then((function(t){n.ei.ai((function(){return e.commit().then((function(){n.ii.resolve(t)})).catch((function(e){n.bf(e)}))}))})).catch((function(e){n.bf(e)})),[2]}))}))}))},e.prototype.pf=function(e){try{var t=this.updateFunction(e);return!B(t)&&t.catch&&t.then?t:(this.ii.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.ii.reject(e),null}},e.prototype.bf=function(e){var t=this;this.Vf>0&&this.vf(e)?(this.Vf-=1,this.ei.ai((function(){return t.yf(),Promise.resolve()}))):this.ii.reject(e)},e.prototype.vf=function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Q(t)}return!1},e}(),Ba=function(){function e(e,t){this.credentials=e,this.ei=t,this.clientId=A.t(),this.Sf=new Gn}return e.prototype.start=function(e,t,n,r){var i=this;this.Df(),this.w_=e;var o=new Gn,a=!1;return this.credentials.Bh((function(e){if(!a)return a=!0,d("FirestoreClient","Initializing. user=",e.uid),i.Cf(t,n,r,e,o).then(i.Sf.resolve,i.Sf.reject);i.ei.gi((function(){return i.Bu.vc(e)}))})),this.ei.ai((function(){return i.Sf.promise})),o.promise},e.prototype.enableNetwork=function(){var e=this;return this.Df(),this.ei.enqueue((function(){return e.persistence.Uo(!0),e.Bu.enableNetwork()}))},e.prototype.Cf=function(e,t,n,r,o){return i.__awaiter(this,void 0,void 0,(function(){var a,s,u=this;return i.__generator(this,(function(l){switch(l.label){case 0:return l.trys.push([0,3,,4]),a={ei:this.ei,w_:this.w_,clientId:this.clientId,credentials:this.credentials,N_:r,Qu:100,k_:n},[4,e.initialize(a)];case 1:return l.sent(),[4,t.initialize(e,a)];case 2:return l.sent(),this.persistence=e.persistence,this.Uu=e.Uu,this.La=e.La,this.S_=e.S_,this.qa=t.qa,this.Bu=t.Bu,this.fc=t.fc,this.Nf=t.q_,this.persistence.Bo((function(){return i.__awaiter(u,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return[4,this.terminate()];case 1:return e.sent(),[2]}}))}))})),o.resolve(),[3,4];case 3:if(s=l.sent(),o.reject(s),!this.Ff(s))throw s;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+s),this.Cf(new Oo,new Co,{F_:!1},r,o))];case 4:return[2]}}))}))},e.prototype.Ff=function(e){return"FirebaseError"===e.name?e.code===M.FAILED_PRECONDITION||e.code===M.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code},e.prototype.Df=function(){if(this.ei.mi)throw new D(M.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.disableNetwork=function(){var e=this;return this.Df(),this.ei.enqueue((function(){return e.persistence.Uo(!1),e.Bu.disableNetwork()}))},e.prototype.terminate=function(){var e=this;this.ei.Pi();var t=new Gn;return this.ei.Ii((function(){return i.__awaiter(e,void 0,void 0,(function(){var e,n;return i.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),this.S_&&this.S_.stop(),[4,this.Bu.th()];case 1:return r.sent(),[4,this.Uu.th()];case 2:return r.sent(),[4,this.persistence.th()];case 3:return r.sent(),this.credentials.Uh(),t.resolve(),[3,5];case 4:return e=r.sent(),n=ur(e,"Failed to shutdown persistence"),t.reject(n),[3,5];case 5:return[2]}}))}))})),t.promise},e.prototype.waitForPendingWrites=function(){var e=this;this.Df();var t=new Gn;return this.ei.ai((function(){return e.fc._l(t)})),t.promise},e.prototype.listen=function(e,t,n){var r=this;this.Df();var i=new Po(n),o=new yo(e,i,t);return this.ei.ai((function(){return r.Nf.listen(o)})),function(){i.Q_(),r.ei.ai((function(){return r.Nf.lc(o)}))}},e.prototype.kf=function(e){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.Df(),[4,this.Sf.promise];case 1:return[2,(t.sent(),function(e,t,n){return i.__awaiter(this,void 0,void 0,(function(){var r,o=this;return i.__generator(this,(function(a){switch(a.label){case 0:return r=new Gn,[4,e.enqueue((function(){return i.__awaiter(o,void 0,void 0,(function(){var e,o,a;return i.__generator(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,function(e,t){var n=v(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.Rh.Hn(e,t)}))}(t,n)];case 1:return(e=i.sent())instanceof rn?r.resolve(e):e instanceof on?r.resolve(null):r.reject(new D(M.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return o=i.sent(),a=ur(o,"Failed to get document '"+n+" from cache"),r.reject(a),[3,3];case 3:return[2]}}))}))}))];case 1:return[2,(a.sent(),r.promise)]}}))}))}(this.ei,this.La,e))]}}))}))},e.prototype.$f=function(e,t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(n){switch(n.label){case 0:return this.Df(),[4,this.Sf.promise];case 1:return[2,(n.sent(),function(e,t,n,r){var i=new Gn,o=Ha(e,t,cn(n.path),{includeMetadataChanges:!0,$l:!0},{next:function(e){o();var t=e.docs.has(n);!t&&e.fromCache?i.reject(new D(M.UNAVAILABLE,"Failed to get document because the client is offline.")):t&&e.fromCache&&r&&"server"===r.source?i.reject(new D(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(e)},error:function(e){return i.reject(e)}});return i.promise}(this.ei,this.Nf,e,t))]}}))}))},e.prototype.xf=function(e){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.Df(),[4,this.Sf.promise];case 1:return[2,(t.sent(),function(e,t,n){return i.__awaiter(this,void 0,void 0,(function(){var r,o=this;return i.__generator(this,(function(a){switch(a.label){case 0:return r=new Gn,[4,e.enqueue((function(){return i.__awaiter(o,void 0,void 0,(function(){var e,o,a,s,u,l;return i.__generator(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,Ri(t,n,!0)];case 1:return e=i.sent(),o=new no(n,e.gh),a=o.Su(e.documents),s=o.Un(a,!1),r.resolve(s.snapshot),[3,3];case 2:return u=i.sent(),l=ur(u,"Failed to execute query '"+n+" against cache"),r.reject(l),[3,3];case 3:return[2]}}))}))}))];case 1:return[2,(a.sent(),r.promise)]}}))}))}(this.ei,this.La,e))]}}))}))},e.prototype.Of=function(e,t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(n){switch(n.label){case 0:return this.Df(),[4,this.Sf.promise];case 1:return[2,(n.sent(),function(e,t,n,r){var i=new Gn,o=Ha(e,t,n,{includeMetadataChanges:!0,$l:!0},{next:function(e){o(),e.fromCache&&r&&"server"===r.source?i.reject(new D(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(e)},error:function(e){return i.reject(e)}});return i.promise}(this.ei,this.Nf,e,t))]}}))}))},e.prototype.write=function(e){var t=this;this.Df();var n=new Gn;return this.ei.ai((function(){return t.fc.write(e,n)})),n.promise},e.prototype.s=function(){return this.w_.s},e.prototype.bl=function(e){var t=this;this.Df();var n=new Po(e);return this.ei.ai((function(){return i.__awaiter(t,void 0,void 0,(function(){return i.__generator(this,(function(e){return[2,this.Nf.bl(n)]}))}))})),function(){n.Q_(),t.ei.ai((function(){return i.__awaiter(t,void 0,void 0,(function(){return i.__generator(this,(function(e){return[2,this.Nf.vl(n)]}))}))}))}},Object.defineProperty(e.prototype,"Mf",{get:function(){return this.ei.mi},enumerable:!1,configurable:!0}),e.prototype.transaction=function(e){var t=this;this.Df();var n=new Gn;return this.ei.ai((function(){return new ja(t.ei,t.qa,e,n).run(),Promise.resolve()})),n.promise},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ha(e,t,n,r,i){var o=new Po(i),a=new yo(n,o,r);return e.ai((function(){return t.listen(a)})),function(){o.Q_(),e.ai((function(){return t.lc(a)}))}}var Va=function(){function e(e,t,n,r){this.s=e,this.timestampsInSnapshots=t,this.Lf=n,this.qf=r}return e.prototype.Bf=function(e){switch(Me(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Le(e.integerValue||e.doubleValue);case 3:return this.Uf(e.timestampValue);case 4:return this.Qf(e);case 5:return e.stringValue;case 6:return new ia(je(e.bytesValue));case 7:return this.Wf(e.referenceValue);case 8:return this.jf(e.geoPointValue);case 9:return this.Kf(e.arrayValue);case 10:return this.Gf(e.mapValue);default:throw g()}},e.prototype.Gf=function(e){var t=this,n={};return R(e.fields||{},(function(e,r){n[e]=t.Bf(r)})),n},e.prototype.jf=function(e){return new ya(Le(e.latitude),Le(e.longitude))},e.prototype.Kf=function(e){var t=this;return(e.values||[]).map((function(e){return t.Bf(e)}))},e.prototype.Qf=function(e){switch(this.Lf){case"previous":var t=function e(t){var n=t.mapValue.fields.__previous_value__;return Re(n)?e(n):n}(e);return null==t?null:this.Bf(t);case"estimate":return this.Uf(Ne(e));default:return null}},e.prototype.Uf=function(e){var t=Pe(e),n=new O(t.seconds,t.nanos);return this.timestampsInSnapshots?n:n.toDate()},e.prototype.Wf=function(e){var t=I.k(e);y(Et(t));var n=new x(t.get(1),t.get(3)),r=new j(t.V(5));return n.isEqual(this.s)||f("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this.s.projectId+"/"+this.s.database+") instead."),this.qf(r)},e}(),qa=dr.ji,Wa=function(){function e(e){var t,n,r,i;if(void 0===e.host){if(void 0!==e.ssl)throw new D(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else Wo("settings","non-empty string","host",e.host),this.host=e.host,Uo("settings","boolean","ssl",e.ssl),this.ssl=null===(t=e.ssl)||void 0===t||t;if(Xo("settings",e,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling","ignoreUndefinedProperties"]),Uo("settings","object","credentials",e.credentials),this.credentials=e.credentials,Uo("settings","boolean","timestampsInSnapshots",e.timestampsInSnapshots),Uo("settings","boolean","ignoreUndefinedProperties",e.ignoreUndefinedProperties),!0===e.timestampsInSnapshots?f("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===e.timestampsInSnapshots&&f("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(n=e.timestampsInSnapshots)||void 0===n||n,this.ignoreUndefinedProperties=null!==(r=e.ignoreUndefinedProperties)&&void 0!==r&&r,Uo("settings","number","cacheSizeBytes",e.cacheSizeBytes),void 0===e.cacheSizeBytes)this.cacheSizeBytes=dr.Gi;else{if(e.cacheSizeBytes!==qa&&e.cacheSizeBytes<dr.Ki)throw new D(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+dr.Ki);this.cacheSizeBytes=e.cacheSizeBytes}Uo("settings","boolean","experimentalForceLongPolling",e.experimentalForceLongPolling),this.forceLongPolling=null!==(i=e.experimentalForceLongPolling)&&void 0!==i&&i}return e.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.timestampsInSnapshots===e.timestampsInSnapshots&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.forceLongPolling===e.forceLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties},e}(),Ua=function(){function e(t,n,r,o){var a=this;if(void 0===r&&(r=new Oo),void 0===o&&(o=new Co),this.zf=r,this.Hf=o,this.Yf=null,this.Jf=new sr,this.INTERNAL={delete:function(){return i.__awaiter(a,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return this.Xf(),[4,this.Zf.terminate()];case 1:return e.sent(),[2]}}))}))}},"object"==typeof t.options){var s=t;this.Yf=s,this.sf=e.td(s),this.ed=s.name,this.nd=new Ii(n)}else{var u=t;if(!u.projectId)throw new D(M.INVALID_ARGUMENT,"Must provide projectId");this.sf=new x(u.projectId,u.database),this.ed="[DEFAULT]",this.nd=new Ci}this.sd=new Wa({})}return Object.defineProperty(e.prototype,"rd",{get:function(){return this.od||(this.od=new _a(this.sf,this.sd.ignoreUndefinedProperties)),this.od},enumerable:!1,configurable:!0}),e.prototype.settings=function(e){jo("Firestore.settings",arguments,1),Vo("Firestore.settings","object",1,e);var t=new Wa(e);if(this.Zf&&!this.sd.isEqual(t))throw new D(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this.sd=t,void 0!==t.credentials&&(this.nd=function(e){if(!e)return new Ci;switch(e.type){case"gapi":var t=e.hd;return y(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Li(t,e.zh||"0");case"provider":return e.hd;default:throw new D(M.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},e.prototype.enableNetwork=function(){return this.Xf(),this.Zf.enableNetwork()},e.prototype.disableNetwork=function(){return this.Xf(),this.Zf.disableNetwork()},e.prototype.enablePersistence=function(e){var t,n;if(this.Zf)throw new D(M.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var r=!1,i=!1;if(e&&(void 0!==e.experimentalTabSynchronization&&f("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),r=null!==(n=null!==(t=e.synchronizeTabs)&&void 0!==t?t:e.experimentalTabSynchronization)&&void 0!==n&&n,i=!!e.experimentalForceOwningTab&&e.experimentalForceOwningTab,r&&i))throw new D(M.INVALID_ARGUMENT,"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.");return this.ad(this.zf,this.Hf,{F_:!0,cacheSizeBytes:this.sd.cacheSizeBytes,synchronizeTabs:r,Vo:i})},e.prototype.clearPersistence=function(){return i.__awaiter(this,void 0,void 0,(function(){var e,t=this;return i.__generator(this,(function(n){if(void 0!==this.Zf&&!this.Zf.Mf)throw new D(M.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");return e=new Gn,[2,(this.Jf.Ii((function(){return i.__awaiter(t,void 0,void 0,(function(){var t;return i.__generator(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.zf.clearPersistence(this.sf,this.ed)];case 1:return n.sent(),e.resolve(),[3,3];case 2:return t=n.sent(),e.reject(t),[3,3];case 3:return[2]}}))}))})),e.promise)]}))}))},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(e.prototype,"ud",{get:function(){return this.Xf(),this.Zf.Mf},enumerable:!1,configurable:!0}),e.prototype.waitForPendingWrites=function(){return this.Xf(),this.Zf.waitForPendingWrites()},e.prototype.onSnapshotsInSync=function(e){if(this.Xf(),Io(e))return this.Zf.bl(e);Vo("Firestore.onSnapshotsInSync","function",1,e);var t={next:e};return this.Zf.bl(t)},e.prototype.Xf=function(){return this.Zf||this.ad(new Oo,new Co,{F_:!1}),this.Zf},e.prototype.ld=function(){return new _(this.sf,this.ed,this.sd.host,this.sd.ssl,this.sd.forceLongPolling)},e.prototype.ad=function(e,t,n){var r=this.ld();return this.Zf=new Ba(this.nd,this.Jf),this.Zf.start(r,e,t,n)},e.td=function(e){if(t=e.options,!Object.prototype.hasOwnProperty.call(t,"projectId"))throw new D(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var t,n=e.options.projectId;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(!n||"string"!=typeof n)throw new D(M.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new x(n)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.Yf)throw new D(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Yf},enumerable:!1,configurable:!0}),e.prototype.collection=function(e){return jo("Firestore.collection",arguments,1),Vo("Firestore.collection","non-empty string",1,e),this.Xf(),new os(I.k(e),this,null)},e.prototype.doc=function(e){return jo("Firestore.doc",arguments,1),Vo("Firestore.doc","non-empty string",1,e),this.Xf(),Ga._d(I.k(e),this,null)},e.prototype.collectionGroup=function(e){if(jo("Firestore.collectionGroup",arguments,1),Vo("Firestore.collectionGroup","non-empty string",1,e),e.indexOf("/")>=0)throw new D(M.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.Xf(),new rs(function(e){return new un(I.$(),e)}(e),this,null)},e.prototype.runTransaction=function(e){var t=this;return jo("Firestore.runTransaction",arguments,1),Vo("Firestore.runTransaction","function",1,e),this.Xf().transaction((function(n){return e(new za(t,n))}))},e.prototype.batch=function(){return this.Xf(),new Ja(this)},Object.defineProperty(e,"logLevel",{get:function(){switch(h()){case a.LogLevel.DEBUG:return"debug";case a.LogLevel.ERROR:return"error";case a.LogLevel.SILENT:return"silent";case a.LogLevel.WARN:return"warn";case a.LogLevel.INFO:return"info";case a.LogLevel.VERBOSE:return"verbose";default:return"error"}},enumerable:!1,configurable:!0}),e.setLogLevel=function(e){var t;jo("Firestore.setLogLevel",arguments,1),Jo("setLogLevel",["debug","error","silent","warn","info","verbose"],1,e),t=e,c.setLogLevel(t)},e.prototype.fd=function(){return this.sd.timestampsInSnapshots},e}(),za=function(){function e(e,t){this.dd=e,this.wd=t}return e.prototype.get=function(e){var t=this;jo("Transaction.get",arguments,1);var n=ls("Transaction.get",e,this.dd);return this.wd.Af([n.if]).then((function(e){if(!e||1!==e.length)return g();var r=e[0];if(r instanceof on)return new Za(t.dd,n.if,null,!1,!1,n.rf);if(r instanceof rn)return new Za(t.dd,n.if,r,!1,!1,n.rf);throw g()}))},e.prototype.set=function(e,t,n){Ho("Transaction.set",arguments,2,3);var r=ls("Transaction.set",e,this.dd);n=as("Transaction.set",n);var i=hs(r.rf,t,n),o=xa(this.dd.rd,"Transaction.set",r.if,i,null!==r.rf,n);return this.wd.set(r.if,o),this},e.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return"string"==typeof t||t instanceof aa?(Bo("Transaction.update",arguments,3),r=ls("Transaction.update",e,this.dd),i=Ra(this.dd.rd,"Transaction.update",r.if,t,n,o)):(jo("Transaction.update",arguments,2),r=ls("Transaction.update",e,this.dd),i=ka(this.dd.rd,"Transaction.update",r.if,t)),this.wd.update(r.if,i),this},e.prototype.delete=function(e){jo("Transaction.delete",arguments,1);var t=ls("Transaction.delete",e,this.dd);return this.wd.delete(t.if),this},e}(),Ja=function(){function e(e){this.dd=e,this.Td=[],this.Ed=!1}return e.prototype.set=function(e,t,n){Ho("WriteBatch.set",arguments,2,3),this.md();var r=ls("WriteBatch.set",e,this.dd);n=as("WriteBatch.set",n);var i=hs(r.rf,t,n),o=xa(this.dd.rd,"WriteBatch.set",r.if,i,null!==r.rf,n);return this.Td=this.Td.concat(o.hf(r.if,Lt.We())),this},e.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.md(),"string"==typeof t||t instanceof aa?(Bo("WriteBatch.update",arguments,3),r=ls("WriteBatch.update",e,this.dd),i=Ra(this.dd.rd,"WriteBatch.update",r.if,t,n,o)):(jo("WriteBatch.update",arguments,2),r=ls("WriteBatch.update",e,this.dd),i=ka(this.dd.rd,"WriteBatch.update",r.if,t)),this.Td=this.Td.concat(i.hf(r.if,Lt.exists(!0))),this},e.prototype.delete=function(e){jo("WriteBatch.delete",arguments,1),this.md();var t=ls("WriteBatch.delete",e,this.dd);return this.Td=this.Td.concat(new Xt(t.if,Lt.We())),this},e.prototype.commit=function(){return this.md(),this.Ed=!0,this.Td.length>0?this.dd.Xf().write(this.Td):Promise.resolve()},e.prototype.md=function(){if(this.Ed)throw new D(M.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}(),Ga=function(e){function t(t,n,r){var i=this;return(i=e.call(this,n.sf,t,r)||this).if=t,i.firestore=n,i.rf=r,i.Zf=i.firestore.Xf(),i}return i.__extends(t,e),t._d=function(e,n,r){if(e.length%2!=0)throw new D(M.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.F()+" has "+e.length);return new t(new j(e),n,r)},Object.defineProperty(t.prototype,"id",{get:function(){return this.if.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new os(this.if.path.p(),this.firestore,this.rf)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.if.path.F()},enumerable:!1,configurable:!0}),t.prototype.collection=function(e){if(jo("DocumentReference.collection",arguments,1),Vo("DocumentReference.collection","non-empty string",1,e),!e)throw new D(M.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var t=I.k(e);return new os(this.if.path.child(t),this.firestore,null)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw Qo("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this.if.isEqual(e.if)&&this.rf===e.rf},t.prototype.set=function(e,t){Ho("DocumentReference.set",arguments,1,2),t=as("DocumentReference.set",t);var n=hs(this.rf,e,t),r=xa(this.firestore.rd,"DocumentReference.set",this.if,n,null!==this.rf,t);return this.Zf.write(r.hf(this.if,Lt.We()))},t.prototype.update=function(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof e||e instanceof aa?(Bo("DocumentReference.update",arguments,2),n=Ra(this.firestore.rd,"DocumentReference.update",this.if,e,t,r)):(jo("DocumentReference.update",arguments,1),n=ka(this.firestore.rd,"DocumentReference.update",this.if,e)),this.Zf.write(n.hf(this.if,Lt.exists(!0)))},t.prototype.delete=function(){return jo("DocumentReference.delete",arguments,0),this.Zf.write([new Xt(this.if,Lt.We())])},t.prototype.onSnapshot=function(){for(var e,t,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];Ho("DocumentReference.onSnapshot",arguments,1,4);var a={includeMetadataChanges:!1},s=0;"object"!=typeof i[s]||Io(i[s])||(Xo("DocumentReference.onSnapshot",a=i[s],["includeMetadataChanges"]),Uo("DocumentReference.onSnapshot","boolean","includeMetadataChanges",a.includeMetadataChanges),s++);var u={includeMetadataChanges:a.includeMetadataChanges};if(Io(i[s])){var l=i[s];i[s]=null===(e=l.next)||void 0===e?void 0:e.bind(l),i[s+1]=null===(t=l.error)||void 0===t?void 0:t.bind(l),i[s+2]=null===(n=l.complete)||void 0===n?void 0:n.bind(l)}else Vo("DocumentReference.onSnapshot","function",s,i[s]),qo("DocumentReference.onSnapshot","function",s+1,i[s+1]),qo("DocumentReference.onSnapshot","function",s+2,i[s+2]);var c={next:function(e){i[s]&&i[s](r.Id(e))},error:i[s+1],complete:i[s+2]};return this.Zf.listen(cn(this.if.path),u,c)},t.prototype.get=function(e){var t=this;Ho("DocumentReference.get",arguments,0,1),us("DocumentReference.get",e);var n=this.firestore.Xf();return e&&"cache"===e.source?n.kf(this.if).then((function(e){return new Za(t.firestore,t.if,e,!0,e instanceof rn&&e.Ge,t.rf)})):n.$f(this.if,e).then((function(e){return t.Id(e)}))},t.prototype.withConverter=function(e){return new t(this.if,this.firestore,e)},t.prototype.Id=function(e){var t=e.docs.get(this.if);return new Za(this.firestore,this.if,t,e.fromCache,e.hasPendingWrites,this.rf)},t}(ba),Ka=function(){function e(e,t){this.hasPendingWrites=e,this.fromCache=t}return e.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},e}(),Za=function(){function e(e,t,n,r,i,o){this.dd=e,this.if=t,this.Ad=n,this.Rd=r,this.Pd=i,this.rf=o}return e.prototype.data=function(e){var t=this;if(Ho("DocumentSnapshot.data",arguments,0,1),e=ss("DocumentSnapshot.data",e),this.Ad){if(this.rf){var n=new Ya(this.dd,this.if,this.Ad,this.Rd,this.Pd,null);return this.rf.fromFirestore(n,e)}return new Va(this.dd.sf,this.dd.fd(),e.serverTimestamps||"none",(function(e){return new Ga(e,t.dd,null)})).Bf(this.Ad.tn())}},e.prototype.get=function(e,t){var n=this;if(Ho("DocumentSnapshot.get",arguments,1,2),t=ss("DocumentSnapshot.get",t),this.Ad){var r=this.Ad.data().field(Fa("DocumentSnapshot.get",e,this.if));if(null!==r)return new Va(this.dd.sf,this.dd.fd(),t.serverTimestamps||"none",(function(e){return new Ga(e,n.dd,n.rf)})).Bf(r)}},Object.defineProperty(e.prototype,"id",{get:function(){return this.if.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new Ga(this.if,this.dd,this.rf)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return null!==this.Ad},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return new Ka(this.Pd,this.Rd)},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){if(!(t instanceof e))throw Qo("isEqual","DocumentSnapshot",1,t);return this.dd===t.dd&&this.Rd===t.Rd&&this.if.isEqual(t.if)&&(null===this.Ad?null===t.Ad:this.Ad.isEqual(t.Ad))&&this.rf===t.rf},e}(),Ya=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.data=function(t){return e.prototype.data.call(this,t)},t}(Za);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(e,t,n,r,i,o,a){var s;if(i.M()){if("array-contains"===o||"array-contains-any"===o)throw new D(M.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){es(a,o);for(var u=[],l=0,c=a;l<c.length;l++){var h=c[l];u.push($a(r,e,h))}s={arrayValue:{values:u}}}else s=$a(r,e,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||es(a,o),s=Na(n,t,a,"in"===o||"not-in"===o);var d=wn.create(i,o,s);return function(e,t){if(t._n()){var n=e.ln();if(null!==n&&!n.isEqual(t.field))throw new D(M.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+t.field.toString()+"'");var r=e.un();null!==r&&ts(0,t.field,r)}var i=e.fn(function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new D(M.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new D(M.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+i.toString()+"' filters.")}(e,d),d}function Qa(e,t,n){if(null!==e.startAt)throw new D(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new D(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new In(t,n);return function(e,t){if(null===e.un()){var n=e.ln();null!==n&&ts(0,n,t.field)}}(e,r),r}function $a(e,t,n){if("string"==typeof n){if(""===n)throw new D(M.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!hn(t)&&-1!==n.indexOf("/"))throw new D(M.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=t.path.child(I.k(n));if(!j.j(r))throw new D(M.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Be(e,new j(r))}if(n instanceof ba)return Be(e,n.if);throw new D(M.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Zo(n)+".")}function es(e,t){if(!Array.isArray(e)||0===e.length)throw new D(M.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new D(M.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.");if("in"===t||"array-contains-any"===t){if(e.indexOf(null)>=0)throw new D(M.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'null' in the value array.");if(e.filter((function(e){return Number.isNaN(e)})).length>0)throw new D(M.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'NaN' in the value array.")}}function ts(e,t,n){if(!n.isEqual(t))throw new D(M.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function ns(e){if(e.cn()&&0===e.en.length)throw new D(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var rs=function(){function e(e,t,n){this.gd=e,this.firestore=t,this.rf=n}return e.prototype.where=function(t,n,r){var i;jo("Query.where",arguments,3),Yo("Query.where",3,r),i="not-in"===n||"!="===n?n:Jo("Query.where",["<","<=","==",">=",">","array-contains","in","array-contains-any"],2,n);var o=Fa("Query.where",t),a=Xa(this.gd,"Query.where",this.firestore.rd,this.firestore.sf,o,i,r);return new e(function(e,t){var n=e.filters.concat([t]);return new un(e.path,e.collectionGroup,e.en.slice(),n,e.limit,e.nn,e.startAt,e.endAt)}(this.gd,a),this.firestore,this.rf)},e.prototype.orderBy=function(t,n){var r;if(Ho("Query.orderBy",arguments,1,2),qo("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r="asc";else{if("desc"!==n)throw new D(M.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r="desc"}var i=Fa("Query.orderBy",t),o=Qa(this.gd,i,r);return new e(function(e,t){var n=e.en.concat([t]);return new un(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.nn,e.startAt,e.endAt)}(this.gd,o),this.firestore,this.rf)},e.prototype.limit=function(t){return jo("Query.limit",arguments,1),Vo("Query.limit","number",1,t),$o("Query.limit",1,t),new e(pn(this.gd,t,"F"),this.firestore,this.rf)},e.prototype.limitToLast=function(t){return jo("Query.limitToLast",arguments,1),Vo("Query.limitToLast","number",1,t),$o("Query.limitToLast",1,t),new e(pn(this.gd,t,"L"),this.firestore,this.rf)},e.prototype.startAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Bo("Query.startAt",arguments,1);var i=this.Vd("Query.startAt",t,n,!0);return new e(mn(this.gd,i),this.firestore,this.rf)},e.prototype.startAfter=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Bo("Query.startAfter",arguments,1);var i=this.Vd("Query.startAfter",t,n,!1);return new e(mn(this.gd,i),this.firestore,this.rf)},e.prototype.endBefore=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Bo("Query.endBefore",arguments,1);var i=this.Vd("Query.endBefore",t,n,!0);return new e(gn(this.gd,i),this.firestore,this.rf)},e.prototype.endAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Bo("Query.endAt",arguments,1);var i=this.Vd("Query.endAt",t,n,!1);return new e(gn(this.gd,i),this.firestore,this.rf)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw Qo("isEqual","Query",1,t);return this.firestore===t.firestore&&yn(this.gd,t.gd)&&this.rf===t.rf},e.prototype.withConverter=function(t){return new e(this.gd,this.firestore,t)},e.prototype.Vd=function(e,t,n,r){if(Yo(e,1,t),t instanceof Za)return jo(e,i.__spreadArrays([t],n),1),function(e,t,n,r,i){if(!r)throw new D(M.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=dn(e);a<s.length;a++){var u=s[a];if(u.field.M())o.push(Be(t,r.key));else{var l=r.field(u.field);if(Re(l))throw new D(M.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===l){var c=u.field.F();throw new D(M.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+c+"' (used as the orderBy) does not exist.")}o.push(l)}}return new Dn(o,i)}(this.gd,this.firestore.sf,e,t.Ad,r);var o=[t].concat(n);return function(e,t,n,r,i,o){var a=e.en;if(i.length>a.length)throw new D(M.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var l=i[u];if(a[u].field.M()){if("string"!=typeof l)throw new D(M.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof l);if(!hn(e)&&-1!==l.indexOf("/"))throw new D(M.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+l+"' contains a slash.");var c=e.path.child(I.k(l));if(!j.j(c))throw new D(M.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+c+"' is not because it contains an odd number of segments.");var h=new j(c);s.push(Be(t,h))}else{var d=Na(n,r,l);s.push(d)}}return new Dn(s,o)}(this.gd,this.firestore.sf,this.firestore.rd,e,o,r)},e.prototype.onSnapshot=function(){for(var e,t,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];Ho("Query.onSnapshot",arguments,1,4);var a={},s=0;if("object"!=typeof i[s]||Io(i[s])||(Xo("Query.onSnapshot",a=i[s],["includeMetadataChanges"]),Uo("Query.onSnapshot","boolean","includeMetadataChanges",a.includeMetadataChanges),s++),Io(i[s])){var u=i[s];i[s]=null===(e=u.next)||void 0===e?void 0:e.bind(u),i[s+1]=null===(t=u.error)||void 0===t?void 0:t.bind(u),i[s+2]=null===(n=u.complete)||void 0===n?void 0:n.bind(u)}else Vo("Query.onSnapshot","function",s,i[s]),qo("Query.onSnapshot","function",s+1,i[s+1]),qo("Query.onSnapshot","function",s+2,i[s+2]);var l={next:function(e){i[s]&&i[s](new is(r.firestore,r.gd,e,r.rf))},error:i[s+1],complete:i[s+2]};return ns(this.gd),this.firestore.Xf().listen(this.gd,a,l)},e.prototype.get=function(e){var t=this;Ho("Query.get",arguments,0,1),us("Query.get",e),ns(this.gd);var n=this.firestore.Xf();return(e&&"cache"===e.source?n.xf(this.gd):n.Of(this.gd,e)).then((function(e){return new is(t.firestore,t.gd,e,t.rf)}))},e}(),is=function(){function e(e,t,n,r){this.dd=e,this.yd=t,this.pd=n,this.rf=r,this.bd=null,this.vd=null,this.metadata=new Ka(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.pd.docs._()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.pd.docs.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;Ho("QuerySnapshot.forEach",arguments,1,2),Vo("QuerySnapshot.forEach","function",1,e),this.pd.docs.forEach((function(r){e.call(t,n.Sd(r,n.metadata.fromCache,n.pd.qt.has(r.key)))}))},Object.defineProperty(e.prototype,"query",{get:function(){return new rs(this.yd,this.dd,this.rf)},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(e){e&&(Xo("QuerySnapshot.docChanges",e,["includeMetadataChanges"]),Uo("QuerySnapshot.docChanges","boolean","includeMetadataChanges",e.includeMetadataChanges));var t=!(!e||!e.includeMetadataChanges);if(t&&this.pd.Ut)throw new D(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.bd&&this.vd===t||(this.bd=function(e,t,n){if(e.Lt._()){var r=0;return e.docChanges.map((function(t){var i=n(t.doc,e.fromCache,e.qt.has(t.doc.key));return t.doc,{type:"added",doc:i,oldIndex:-1,newIndex:r++}}))}var i=e.Lt;return e.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var r=n(t.doc,e.fromCache,e.qt.has(t.doc.key)),o=-1,a=-1;return 0!==t.type&&(o=i.indexOf(t.doc.key),i=i.delete(t.doc.key)),1!==t.type&&(a=(i=i.add(t.doc)).indexOf(t.doc.key)),{type:cs(t.type),doc:r,oldIndex:o,newIndex:a}}))}(this.pd,t,this.Sd.bind(this)),this.vd=t),this.bd},e.prototype.isEqual=function(t){if(!(t instanceof e))throw Qo("isEqual","QuerySnapshot",1,t);return this.dd===t.dd&&yn(this.yd,t.yd)&&this.pd.isEqual(t.pd)&&this.rf===t.rf},e.prototype.Sd=function(e,t,n){return new Ya(this.dd,e.key,e,t,n,this.rf)},e}(),os=function(e){function t(t,n,r){var i=this;if((i=e.call(this,cn(t),n,r)||this).Dd=t,t.length%2!=1)throw new D(M.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.F()+" has "+t.length);return i}return i.__extends(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this.gd.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this.gd.path.p();return e._()?null:new Ga(new j(e),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.gd.path.F()},enumerable:!1,configurable:!0}),t.prototype.doc=function(e){Ho("CollectionReference.doc",arguments,0,1),0===arguments.length&&(e=A.t()),Vo("CollectionReference.doc","non-empty string",1,e);var t=I.k(e);return Ga._d(this.gd.path.child(t),this.firestore,this.rf)},t.prototype.add=function(e){jo("CollectionReference.add",arguments,1),Vo("CollectionReference.add","object",1,this.rf?this.rf.toFirestore(e):e);var t=this.doc();return t.set(e).then((function(){return t}))},t.prototype.withConverter=function(e){return new t(this.Dd,this.firestore,e)},t}(rs);function as(e,t){if(void 0===t)return{merge:!1};if(Xo(e,t,["merge","mergeFields"]),Uo(e,"boolean","merge",t.merge),function(e,t,n,r,i){void 0!==r&&function(e,t,n,r,i){if(!(r instanceof Array))throw new D(M.INVALID_ARGUMENT,"Function "+e+"() requires its "+t+" option to be an array, but it was: "+Zo(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new D(M.INVALID_ARGUMENT,"Function "+e+"() requires all "+t+" elements to be a string or a FieldPath, but the value at index "+o+" was: "+Zo(r[o]))}(e,"mergeFields",0,r,(function(e){return"string"==typeof e||e instanceof aa}))}(e,0,0,t.mergeFields),void 0!==t.mergeFields&&void 0!==t.merge)throw new D(M.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function ss(e,t){return void 0===t?{}:(Xo(e,t,["serverTimestamps"]),zo(e,0,"serverTimestamps",t.serverTimestamps,["estimate","previous","none"]),t)}function us(e,t){qo(e,"object",1,t),t&&(Xo(e,t,["source"]),zo(e,0,"source",t.source,["default","server","cache"]))}function ls(e,t,n){if(t instanceof ba){if(t.firestore!==n)throw new D(M.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}throw Qo(e,"DocumentReference",1,t)}function cs(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return g()}}function hs(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var ds={Firestore:Ua,GeoPoint:ya,Timestamp:O,Blob:ia,Transaction:za,WriteBatch:Ja,DocumentReference:Ga,DocumentSnapshot:Za,Query:rs,QueryDocumentSnapshot:Ya,QuerySnapshot:is,CollectionReference:os,FieldPath:aa,FieldValue:ma,setLogLevel:Ua.setLogLevel,CACHE_SIZE_UNLIMITED:qa};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fs(e){!function(e,t){e.INTERNAL.registerComponent(new l.Component("firestore",(function(e){return function(e,t){var n=new Co,r=new Fo(n);return new Ua(e,t,r,n)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},ds)))}(e),e.registerVersion("@firebase/firestore","1.16.5")}fs(o),t.__PRIVATE_registerFirestore=fs}).call(this,n(8))},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"ErrorCode",(function(){return er})),n.d(t,"EventType",(function(){return tr})),n.d(t,"WebChannel",(function(){return nr})),n.d(t,"XhrIo",(function(){return rr})),n.d(t,"createWebChannelTransport",(function(){return $n}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var o,a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},s=s||{},u=a||self;function l(){}function c(e){var t=typeof e;return"object"!=t?t:e?Array.isArray(e)?"array":t:"null"}function h(e){var t=c(e);return"array"==t||"object"==t&&"number"==typeof e.length}function d(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var f="closure_uid_"+(1e9*Math.random()>>>0),p=0;function m(e,t,n){return e.call.apply(e.bind,arguments)}function g(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function y(e,t,n){return(y=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?m:g).apply(null,arguments)}function v(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var b=Date.now;function A(e,t){function n(){}n.prototype=t.prototype,e.S=t.prototype,e.prototype=new n,e.prototype.constructor=e}function E(){this.j=this.j,this.i=this.i}E.prototype.j=!1,E.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(e){Object.prototype.hasOwnProperty.call(e,f)&&e[f]||(e[f]=++p)}(this)},E.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var w=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},S=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"==typeof e?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function _(e){return Array.prototype.concat.apply([],arguments)}function x(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function k(e){return/^[\s\xa0]*$/.test(e)}var R,N=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function T(e,t){return-1!=e.indexOf(t)}function M(e,t){return e<t?-1:e>t?1:0}e:{var D=u.navigator;if(D){var O=D.userAgent;if(O){R=O;break e}}R=""}function F(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function C(e){var t={};for(var n in e)t[n]=e[n];return t}var I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<I.length;o++)n=I[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function L(e){return L[" "](e),e}L[" "]=l;var j,B,H=T(R,"Opera"),V=T(R,"Trident")||T(R,"MSIE"),q=T(R,"Edge"),W=q||V,U=T(R,"Gecko")&&!(T(R.toLowerCase(),"webkit")&&!T(R,"Edge"))&&!(T(R,"Trident")||T(R,"MSIE"))&&!T(R,"Edge"),z=T(R.toLowerCase(),"webkit")&&!T(R,"Edge");function J(){var e=u.document;return e?e.documentMode:void 0}e:{var G="",K=(B=R,U?/rv:([^\);]+)(\)|;)/.exec(B):q?/Edge\/([\d\.]+)/.exec(B):V?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(B):z?/WebKit\/(\S+)/.exec(B):H?/(?:Version)[ \/]?(\S+)/.exec(B):void 0);if(K&&(G=K?K[1]:""),V){var Z=J();if(null!=Z&&Z>parseFloat(G)){j=String(Z);break e}}j=G}var Y={};function X(e){return function(e,t){var n=Y;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t()}(e,(function(){for(var t=0,n=N(String(j)).split("."),r=N(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=M(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||M(0==a[2].length,0==s[2].length)||M(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}))}var Q=u.document&&V&&(J()||parseInt(j,10))||void 0,$=!V||9<=Number(Q),ee=V&&!X("9"),te=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{u.addEventListener("test",l,t),u.removeEventListener("test",l,t)}catch(e){}return e}();function ne(e,t){this.type=e,this.a=this.target=t,this.defaultPrevented=!1}function re(e,t){if(ne.call(this,e?e.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.a=t,t=e.relatedTarget){if(U){e:{try{L(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:ie[e.pointerType]||"",this.c=e,e.defaultPrevented&&this.b()}}ne.prototype.b=function(){this.defaultPrevented=!0},A(re,ne);var ie={2:"touch",3:"pen",4:"mouse"};re.prototype.b=function(){re.S.b.call(this);var e=this.c;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,ee)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(e){}};var oe="closure_listenable_"+(1e6*Math.random()|0),ae=0;function se(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ca=i,this.key=++ae,this.Y=this.Z=!1}function ue(e){e.Y=!0,e.listener=null,e.proxy=null,e.src=null,e.ca=null}function le(e){this.src=e,this.a={},this.b=0}function ce(e,t){var n=t.type;if(n in e.a){var r,i=e.a[n],o=w(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ue(t),0==e.a[n].length&&(delete e.a[n],e.b--))}}function he(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.Y&&o.listener==t&&o.capture==!!n&&o.ca==r)return i}return-1}le.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=he(e,t,r,i);return-1<a?(t=e[a],n||(t.Z=!1)):((t=new se(t,this.src,o,!!r,i)).Z=n,e.push(t)),t};var de="closure_lm_"+(1e6*Math.random()|0),fe={};function pe(e,t,n,r,i){if(r&&r.once)return function e(t,n,r,i,o){if(Array.isArray(n)){for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);return null}return r=we(r),t&&t[oe]?t.wa(n,r,d(i)?!!i.capture:!!i,o):me(t,n,r,!0,i,o)}(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)pe(e,t[o],n,r,i);return null}return n=we(n),e&&e[oe]?e.va(t,n,d(r)?!!r.capture:!!r,i):me(e,t,n,!1,r,i)}function me(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=d(i)?!!i.capture:!!i;if(a&&!$)return null;var s=Ae(e);if(s||(e[de]=s=new le(e)),(n=s.add(t,n,r,a,o)).proxy)return n;if(r=function(){var e=be,t=$?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)te||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ye(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ge(e){if("number"!=typeof e&&e&&!e.Y){var t=e.src;if(t&&t[oe])ce(t.c,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ye(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ae(t))?(ce(n,e),0==n.b&&(n.src=null,t[de]=null)):ue(e)}}}function ye(e){return e in fe?fe[e]:fe[e]="on"+e}function ve(e,t){var n=e.listener,r=e.ca||e.src;return e.Z&&ge(e),n.call(r,t)}function be(e,t){if(e.Y)return!0;if(!$){if(!t)e:{t=["window","event"];for(var n=u,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}return ve(e,t=new re(t,this))}return ve(e,new re(t,this))}function Ae(e){return(e=e[de])instanceof le?e:null}var Ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function we(e){return"function"==c(e)?e:(e[Ee]||(e[Ee]=function(t){return e.handleEvent(t)}),e[Ee])}function Se(){E.call(this),this.c=new le(this),this.J=this,this.C=null}function _e(e,t,n,r){if(!(t=e.c.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.Y&&a.capture==n){var s=a.listener,u=a.ca||a.src;a.Z&&ce(e.c,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}A(Se,E),Se.prototype[oe]=!0,(o=Se.prototype).addEventListener=function(e,t,n,r){pe(this,e,t,n,r)},o.removeEventListener=function(e,t,n,r){!function e(t,n,r,i,o){if(Array.isArray(n))for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);else i=d(i)?!!i.capture:!!i,r=we(r),t&&t[oe]?(t=t.c,(n=String(n).toString())in t.a&&-1<(r=he(a=t.a[n],r,i,o))&&(ue(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete t.a[n],t.b--))):t&&(t=Ae(t))&&(n=t.a[n.toString()],t=-1,n&&(t=he(n,r,i,o)),(r=-1<t?n[t]:null)&&ge(r))}(this,e,t,n,r)},o.dispatchEvent=function(e){var t,n=this.C;if(n)for(t=[];n;n=n.C)t.push(n);n=this.J;var r=e.type||e;if("string"==typeof e)e=new ne(e,n);else if(e instanceof ne)e.target=e.target||n;else{var i=e;P(e=new ne(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.a=t[o];i=_e(a,r,!0,e)&&i}if(i=_e(a=e.a=n,r,!0,e)&&i,i=_e(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=_e(a=e.a=t[o],r,!1,e)&&i;return i},o.G=function(){if(Se.S.G.call(this),this.c){var e,t=this.c;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)ue(n[r]);delete t.a[e],t.b--}}this.C=null},o.va=function(e,t,n,r){return this.c.add(String(e),t,!1,n,r)},o.wa=function(e,t,n,r){return this.c.add(String(e),t,!0,n,r)};var xe=u.JSON.stringify;function ke(){this.b=this.a=null}var Re,Ne=new(function(){function e(e,t,n){this.f=n,this.c=e,this.g=t,this.b=0,this.a=null}return e.prototype.get=function(){var e;return 0<this.b?(this.b--,e=this.a,this.a=e.next,e.next=null):e=this.c(),e},e}())((function(){return new Me}),(function(e){e.reset()}),100);function Te(){var e=Ce,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function Me(){this.next=this.b=this.a=null}function De(e){u.setTimeout((function(){throw e}),0)}function Oe(e,t){Re||function(){var e=u.Promise.resolve(void 0);Re=function(){e.then(Ie)}}(),Fe||(Re(),Fe=!0),Ce.add(e,t)}ke.prototype.add=function(e,t){var n=Ne.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},Me.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},Me.prototype.reset=function(){this.next=this.b=this.a=null};var Fe=!1,Ce=new ke;function Ie(){for(var e;e=Te();){try{e.a.call(e.b)}catch(e){De(e)}var t=Ne;t.g(e),t.b<t.f&&(t.b++,e.next=t.a,t.a=e)}Fe=!1}function Pe(e,t){Se.call(this),this.b=e||1,this.a=t||u,this.f=y(this.Ya,this),this.g=b()}function Le(e){e.aa=!1,e.M&&(e.a.clearTimeout(e.M),e.M=null)}function je(e,t,n){if("function"==c(e))n&&(e=y(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=y(e.handleEvent,e)}return 2147483647<Number(t)?-1:u.setTimeout(e,t||0)}function Be(e){e.a=je((function(){e.a=null,e.c&&(e.c=!1,Be(e))}),e.h);var t=e.b;e.b=null,e.g.apply(null,t)}A(Pe,Se),(o=Pe.prototype).aa=!1,o.M=null,o.Ya=function(){if(this.aa){var e=b()-this.g;0<e&&e<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-e):(this.M&&(this.a.clearTimeout(this.M),this.M=null),this.dispatchEvent("tick"),this.aa&&(Le(this),this.start()))}},o.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=b())},o.G=function(){Pe.S.G.call(this),Le(this),delete this.a};var He=function(e){function t(t,n,r){var i=e.call(this)||this;return i.g=null!=r?t.bind(r):t,i.h=n,i.b=null,i.c=!1,i.a=null,i}return function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.f=function(e){this.b=arguments,this.a?this.c=!0:Be(this)},t.prototype.G=function(){e.prototype.G.call(this),this.a&&(u.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},t}(E);function Ve(e){E.call(this),this.b=e,this.a={}}A(Ve,E);var qe=[];function We(e,t,n,r){Array.isArray(n)||(n&&(qe[0]=n.toString()),n=qe);for(var i=0;i<n.length;i++){var o=pe(t,n[i],r||e.handleEvent,!1,e.b||e);if(!o)break;e.a[o.key]=o}}function Ue(e){F(e.a,(function(e,t){this.a.hasOwnProperty(t)&&ge(e)}),e),e.a={}}function ze(){this.a=!0}function Je(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.a)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return xe(n)}catch(e){return t}}(e,n)+(r?" "+r:"")}))}Ve.prototype.G=function(){Ve.S.G.call(this),Ue(this)},Ve.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ze.prototype.info=function(){};var Ge=null;function Ke(){return Ge=Ge||new Se}function Ze(e){ne.call(this,"serverreachability",e)}function Ye(e){var t=Ke();t.dispatchEvent(new Ze(t,e))}function Xe(e){ne.call(this,"statevent",e)}function Qe(e){var t=Ke();t.dispatchEvent(new Xe(t,e))}function $e(e){ne.call(this,"timingevent",e)}function et(e,t){if("function"!=c(e))throw Error("Fn must not be null and must be a function");return u.setTimeout((function(){e()}),t)}A(Ze,ne),A(Xe,ne),A($e,ne);var tt={NO_ERROR:0,Za:1,gb:2,fb:3,bb:4,eb:5,hb:6,Da:7,TIMEOUT:8,kb:9},nt={ab:"complete",ob:"success",Ea:"error",Da:"abort",mb:"ready",nb:"readystatechange",TIMEOUT:"timeout",ib:"incrementaldata",lb:"progress",cb:"downloadprogress",pb:"uploadprogress"};function rt(){}function it(e){var t;return(t=e.a)||(t=e.a={}),t}function ot(){}rt.prototype.a=null;var at,st={OPEN:"a",$a:"b",Ea:"c",jb:"d"};function ut(){ne.call(this,"d")}function lt(){ne.call(this,"c")}function ct(){}function ht(e,t,n,r){this.g=e,this.c=t,this.f=n,this.T=r||1,this.J=new Ve(this),this.P=dt,e=W?125:void 0,this.R=new Pe(e),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.U=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.W=this.C=this.V=this.I=!1}A(ut,ne),A(lt,ne),A(ct,rt),at=new ct;var dt=45e3,ft={},pt={};function mt(e,t,n){e.H=1,e.i=Lt(Dt(t)),e.j=n,e.I=!0,gt(e,null)}function gt(e,t){e.u=b(),bt(e),e.l=Dt(e.i);var n=e.l,r=e.T;Array.isArray(r)||(r=[String(r)]),Yt(n.b,"t",r),e.D=0,e.a=zn(e.g,e.g.C?t:null),0<e.O&&(e.F=new He(y(e.Ca,e,e.a),e.O)),We(e.J,e.a,"readystatechange",e.Wa),t=e.B?C(e.B):{},e.j?(e.m||(e.m="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.a.ba(e.l,e.m,e.j,t)):(e.m="GET",e.a.ba(e.l,e.m,null,t)),Ye(1),function(e,t,n,r,i,o){e.info((function(){if(e.a)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var l=s[u].split("=");if(1<l.length){var c=l[0];l=l[1];var h=c.split("_");a=2<=h.length&&"type"==h[1]?a+(c+"=")+l+"&":a+(c+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a}))}(e.c,e.m,e.l,e.f,e.T,e.j)}function yt(e,t,n){for(var r=!0;!e.A&&e.D<n.length;){var i=vt(e,n);if(i==pt){4==t&&(e.h=4,Qe(14),r=!1),Je(e.c,e.f,null,"[Incomplete Response]");break}if(i==ft){e.h=4,Qe(15),Je(e.c,e.f,n,"[Invalid Chunk]"),r=!1;break}Je(e.c,e.f,i,null),_t(e,i)}4==t&&0==n.length&&(e.h=1,Qe(16),r=!1),e.b=e.b&&r,r?0<n.length&&!e.W&&(e.W=!0,(t=e.g).a==e&&t.V&&!t.F&&(t.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ln(t),t.F=!0)):(Je(e.c,e.f,n,"[Invalid Chunked Response]"),St(e),wt(e))}function vt(e,t){var n=e.D,r=t.indexOf("\n",n);return-1==r?pt:(n=Number(t.substring(n,r)),isNaN(n)?ft:(r+=1)+n>t.length?pt:(t=t.substr(r,n),e.D=r+n,t))}function bt(e){e.U=b()+e.P,At(e,e.P)}function At(e,t){if(null!=e.o)throw Error("WatchDog timer not null");e.o=et(y(e.Ua,e),t)}function Et(e){e.o&&(u.clearTimeout(e.o),e.o=null)}function wt(e){0==e.g.v||e.A||Hn(e.g,e)}function St(e){Et(e);var t=e.F;t&&"function"==typeof t.ja&&t.ja(),e.F=null,Le(e.R),Ue(e.J),e.a&&(t=e.a,e.a=null,t.abort(),t.ja())}function _t(e,t){try{var n=e.g;if(0!=n.v&&(n.a==e||rn(n.b,e)))if(n.I=e.N,!e.C&&rn(n.b,e)&&3==n.v){try{var r=n.ka.a.parse(t)}catch(e){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.j){if(n.a){if(!(n.a.u+3e3<e.u))break e;Bn(n),Nn(n)}Pn(n),Qe(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=et(y(n.Ra,n),6e3));if(1>=nn(n.b)&&n.ea){try{n.ea()}catch(e){}n.ea=void 0}}else qn(n,11)}else if((e.C||n.a==e)&&Bn(n),!k(t))for(t=r=n.ka.a.parse(t),r=0;r<t.length;r++)if(i=t[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var a=i[4];null!=a&&(n.pa=a,n.c.info("SVER="+n.pa));var s=i[5];if(null!=s&&"number"==typeof s&&0<s){var u=1.5*s;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var l=e.a;if(l){var c=l.a?l.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(c){var h=u.b;!h.a&&(T(c,"spdy")||T(c,"quic")||T(c,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(on(h,h.b),h.b=null))}if(u.A){var d=l.a?l.a.getResponseHeader("X-HTTP-Session-Id"):null;d&&(u.na=d,Pt(u.B,u.A,d))}}n.v=3,n.f&&n.f.ta(),n.V&&(n.N=b()-e.u,n.c.info("Handshake RTT: "+n.N+"ms"));var f=e;if((u=n).la=Un(u,u.C?u.ga:null,u.fa),f.C){an(u.b,f);var p=f,m=u.D;m&&p.setTimeout(m),p.o&&(Et(p),bt(p)),u.a=f}else In(u);0<n.g.length&&Dn(n)}else"stop"!=i[0]&&"close"!=i[0]||qn(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?qn(n,7):Rn(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Ye(4)}catch(e){}}function xt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(h(e)||"string"==typeof e)S(e,t,void 0);else{if(e.L&&"function"==typeof e.L)var n=e.L();else if(e.K&&"function"==typeof e.K)n=void 0;else if(h(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.K&&"function"==typeof e.K)return e.K();if("string"==typeof e)return e.split("");if(h(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function kt(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof kt)for(n=e.L(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Rt(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];Nt(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)Nt(i,r=e.a[t])||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function Nt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(o=ht.prototype).setTimeout=function(e){this.P=e},o.Wa=function(e){e=e.target;var t=this.F;t&&3==Sn(e)?t.f():this.Ca(e)},o.Ca=function(e){try{if(e==this.a)e:{var t=Sn(this.a),n=this.a.ua(),r=this.a.X();if(!(3>t||3==t&&!W&&!this.a.$())){this.A||4!=t||7==n||Ye(8==n||0>=r?3:2),Et(this);var i=this.a.X();this.N=i;var o=this.a.$();if(this.b=200==i,function(e,t,n,r,i,o,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a}))}(this.c,this.m,this.l,this.f,this.T,t,i),this.b){if(this.V&&!this.C){t:{if(this.a){var a,s=this.a;if((a=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(a)){var u=a;break t}}u=null}if(!u){this.b=!1,this.h=3,Qe(12),St(this),wt(this);break e}Je(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,_t(this,u)}this.I?(yt(this,t,o),W&&this.b&&3==t&&(We(this.J,this.R,"tick",this.Va),this.R.start())):(Je(this.c,this.f,o,null),_t(this,o)),4==t&&St(this),this.b&&!this.A&&(4==t?Hn(this.g,this):(this.b=!1,bt(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Qe(12)):(this.h=0,Qe(13)),St(this),wt(this)}}}catch(e){}},o.Va=function(){if(this.a){var e=Sn(this.a),t=this.a.$();this.D<t.length&&(Et(this),yt(this,e,t),this.b&&4!=e&&bt(this))}},o.cancel=function(){this.A=!0,St(this)},o.Ua=function(){this.o=null;var e=b();0<=e-this.U?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.c,this.l),2!=this.H&&(Ye(3),Qe(17)),St(this),this.h=2,wt(this)):At(this,this.U-e)},(o=kt.prototype).K=function(){Rt(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},o.L=function(){return Rt(this),this.a.concat()},o.get=function(e,t){return Nt(this.b,e)?this.b[e]:t},o.set=function(e,t){Nt(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},o.forEach=function(e,t){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var Tt=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Mt(e,t){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,e instanceof Mt){this.a=void 0!==t?t:e.a,Ot(this,e.f),this.j=e.j,Ft(this,e.c),Ct(this,e.h),this.g=e.g,t=e.b;var n=new Jt;n.c=t.c,t.a&&(n.a=new kt(t.a),n.b=t.b),It(this,n),this.i=e.i}else e&&(n=String(e).match(Tt))?(this.a=!!t,Ot(this,n[1]||"",!0),this.j=jt(n[2]||""),Ft(this,n[3]||"",!0),Ct(this,n[4]),this.g=jt(n[5]||"",!0),It(this,n[6]||"",!0),this.i=jt(n[7]||"")):(this.a=!!t,this.b=new Jt(null,this.a))}function Dt(e){return new Mt(e)}function Ot(e,t,n){e.f=n?jt(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function Ft(e,t,n){e.c=n?jt(t,!0):t}function Ct(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.h=t}else e.h=null}function It(e,t,n){t instanceof Jt?(e.b=t,function(e,t){t&&!e.f&&(Gt(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Kt(this,t),Yt(this,n,e))}),e)),e.f=t}(e.b,e.a)):(n||(t=Bt(t,Ut)),e.b=new Jt(t,e.a))}function Pt(e,t,n){e.b.set(t,n)}function Lt(e){return Pt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^b()).toString(36)),e}function jt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Bt(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Ht),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ht(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Mt.prototype.toString=function(){var e=[],t=this.f;t&&e.push(Bt(t,Vt,!0),":");var n=this.c;return(n||"file"==t)&&(e.push("//"),(t=this.j)&&e.push(Bt(t,Vt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&e.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&e.push("/"),e.push(Bt(n,"/"==n.charAt(0)?Wt:qt,!0))),(n=this.b.toString())&&e.push("?",n),(n=this.i)&&e.push("#",Bt(n,zt)),e.join("")};var Vt=/[#\/\?@]/g,qt=/[#\?:]/g,Wt=/[#\?]/g,Ut=/[#\?@]/g,zt=/#/g;function Jt(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function Gt(e){e.a||(e.a=new kt,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Kt(e,t){Gt(e),t=Xt(e,t),Nt(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,Nt((e=e.a).b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&Rt(e)))}function Zt(e,t){return Gt(e),t=Xt(e,t),Nt(e.a.b,t)}function Yt(e,t,n){Kt(e,t),0<n.length&&(e.c=null,e.a.set(Xt(e,t),x(n)),e.b+=n.length)}function Xt(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function Qt(e,t){this.b=e,this.a=t}function $t(e){this.g=e||en,e=u.PerformanceNavigationTiming?0<(e=u.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(u.ia&&u.ia.ya&&u.ia.ya()&&u.ia.ya().qb),this.f=e?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(o=Jt.prototype).add=function(e,t){Gt(this),this.c=null,e=Xt(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},o.forEach=function(e,t){Gt(this),this.a.forEach((function(n,r){S(n,(function(n){e.call(t,n,r,this)}),this)}),this)},o.L=function(){Gt(this);for(var e=this.a.K(),t=this.a.L(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},o.K=function(e){Gt(this);var t=[];if("string"==typeof e)Zt(this,e)&&(t=_(t,this.a.get(Xt(this,e))));else{e=this.a.K();for(var n=0;n<e.length;n++)t=_(t,e[n])}return t},o.set=function(e,t){return Gt(this),this.c=null,Zt(this,e=Xt(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},o.get=function(e,t){return e&&0<(e=this.K(e)).length?String(e[0]):t},o.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.L(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")};var en=10;function tn(e){return!!e.b||!!e.a&&e.a.size>=e.f}function nn(e){return e.b?1:e.a?e.a.size:0}function rn(e,t){return e.b?e.b==t:!!e.a&&e.a.has(t)}function on(e,t){e.a?e.a.add(t):e.b=t}function an(e,t){e.b&&e.b==t?e.b=null:e.a&&e.a.has(t)&&e.a.delete(t)}function sn(e){var t,n;if(null!=e.b)return e.c.concat(e.b.s);if(null!=e.a&&0!==e.a.size){var r=e.c;try{for(var o=i(e.a.values()),a=o.next();!a.done;a=o.next()){var s=a.value;r=r.concat(s.s)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}return x(e.c)}function un(){}function ln(){this.a=new un}function cn(e,t,n){var r=n||"";try{xt(e,(function(e,n){var i=e;d(e)&&(i=xe(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function hn(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}$t.prototype.cancel=function(){var e,t;if(this.c=sn(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=i(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.a.clear()}},un.prototype.stringify=function(e){return u.JSON.stringify(e,void 0)},un.prototype.parse=function(e){return u.JSON.parse(e,void 0)};var dn=u.JSON.parse;function fn(e){Se.call(this),this.headers=new kt,this.H=e||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=pn,this.D=this.F=!1}A(fn,Se);var pn="",mn=/^https?$/i,gn=["POST","PUT"];function yn(e){return"content-type"==e.toLowerCase()}function vn(e,t){e.b=!1,e.a&&(e.g=!0,e.a.abort(),e.g=!1),e.f=t,e.h=5,bn(e),En(e)}function bn(e){e.u||(e.u=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function An(e){if(e.b&&void 0!==s&&(!e.s[1]||4!=Sn(e)||2!=e.X()))if(e.l&&4==Sn(e))je(e.za,0,e);else if(e.dispatchEvent("readystatechange"),4==Sn(e)){e.b=!1;try{var t,n=e.X();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.B).match(Tt)[1]||null;if(!o&&u.self&&u.self.location){var a=u.self.location.protocol;o=a.substr(0,a.length-1)}i=!mn.test(o?o.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{e.h=6;try{var l=2<Sn(e)?e.a.statusText:""}catch(e){l=""}e.f=l+" ["+e.X()+"]",bn(e)}}finally{En(e)}}}function En(e,t){if(e.a){wn(e);var n=e.a,r=e.s[0]?l:null;e.a=null,e.s=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){}}}function wn(e){e.a&&e.D&&(e.a.ontimeout=null),e.m&&(u.clearTimeout(e.m),e.m=null)}function Sn(e){return e.a?e.a.readyState:0}function _n(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return F(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):Pt(e,t,n))}function xn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function kn(e){this.pa=0,this.g=[],this.c=new ze,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.W=this.i=this.O=this.l=null,this.La=this.R=0,this.Ia=xn("failFast",!1,e),this.H=this.m=this.j=this.h=this.f=null,this.T=!0,this.I=this.oa=this.P=-1,this.U=this.o=this.u=0,this.Fa=xn("baseRetryDelayMs",5e3,e),this.Ma=xn("retryDelaySeedMs",1e4,e),this.Ja=xn("forwardChannelMaxRetries",2,e),this.ma=xn("forwardChannelRequestTimeoutMs",2e4,e),this.Ka=e&&e.g||void 0,this.D=void 0,this.C=e&&e.supportsCrossDomainXhr||!1,this.J="",this.b=new $t(e&&e.concurrentRequestLimit),this.ka=new ln,this.da=e&&e.fastHandshake||!1,this.Ga=e&&e.b||!1,e&&e.f&&(this.c.a=!1),e&&e.forceLongPolling&&(this.T=!1),this.V=!this.da&&this.T&&e&&e.c||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null}function Rn(e){if(Tn(e),3==e.v){var t=e.R++,n=Dt(e.B);Pt(n,"SID",e.J),Pt(n,"RID",t),Pt(n,"TYPE","terminate"),Fn(e,n),(t=new ht(e,e.c,t,void 0)).H=2,t.i=Lt(Dt(n)),n=!1,u.navigator&&u.navigator.sendBeacon&&(n=u.navigator.sendBeacon(t.i.toString(),"")),!n&&u.Image&&((new Image).src=t.i,n=!0),n||(t.a=zn(t.g,null),t.a.ba(t.i)),t.u=b(),bt(t)}Wn(e)}function Nn(e){e.a&&(Ln(e),e.a.cancel(),e.a=null)}function Tn(e){Nn(e),e.j&&(u.clearTimeout(e.j),e.j=null),Bn(e),e.b.cancel(),e.h&&("number"==typeof e.h&&u.clearTimeout(e.h),e.h=null)}function Mn(e,t){e.g.push(new Qt(e.La++,t)),3==e.v&&Dn(e)}function Dn(e){tn(e.b)||e.h||(e.h=!0,Oe(e.Ba,e),e.u=0)}function On(e,t){var n;n=t?t.f:e.R++;var r=Dt(e.B);Pt(r,"SID",e.J),Pt(r,"RID",n),Pt(r,"AID",e.P),Fn(e,r),e.i&&e.l&&_n(r,e.i,e.l),n=new ht(e,e.c,n,e.u+1),null===e.i&&(n.B=e.l),t&&(e.g=t.s.concat(e.g)),t=Cn(e,n,1e3),n.setTimeout(Math.round(.5*e.ma)+Math.round(.5*e.ma*Math.random())),on(e.b,n),mt(n,r,t)}function Fn(e,t){e.f&&xt({},(function(e,n){Pt(t,n,e)}))}function Cn(e,t,n){n=Math.min(e.g.length,n);var r=e.f?y(e.f.Ha,e.f,e):null;e:for(var i=e.g,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var l=i[u].b,c=i[u].a;if(0>(l-=o))o=Math.max(0,i[u].b-100),s=!1;else try{cn(c,a,"req"+l+"_")}catch(e){r&&r(c)}}if(s){r=a.join("&");break e}}return e=e.g.splice(0,n),t.s=e,r}function In(e){e.a||e.j||(e.U=1,Oe(e.Aa,e),e.o=0)}function Pn(e){return!(e.a||e.j||3<=e.o||(e.U++,e.j=et(y(e.Aa,e),Vn(e,e.o)),e.o++,0))}function Ln(e){null!=e.s&&(u.clearTimeout(e.s),e.s=null)}function jn(e){e.a=new ht(e,e.c,"rpc",e.U),null===e.i&&(e.a.B=e.l),e.a.O=0;var t=Dt(e.la);Pt(t,"RID","rpc"),Pt(t,"SID",e.J),Pt(t,"CI",e.H?"0":"1"),Pt(t,"AID",e.P),Fn(e,t),Pt(t,"TYPE","xmlhttp"),e.i&&e.l&&_n(t,e.i,e.l),e.D&&e.a.setTimeout(e.D);var n=e.a;e=e.ga,n.H=1,n.i=Lt(Dt(t)),n.j=null,n.I=!0,gt(n,e)}function Bn(e){null!=e.m&&(u.clearTimeout(e.m),e.m=null)}function Hn(e,t){var n=null;if(e.a==t){Bn(e),Ln(e),e.a=null;var r=2}else{if(!rn(e.b,t))return;n=t.s,an(e.b,t),r=1}if(e.I=t.N,0!=e.v)if(t.b)if(1==r){n=t.j?t.j.length:0,t=b()-t.u;var i=e.u;(r=Ke()).dispatchEvent(new $e(r,n,t,i)),Dn(e)}else In(e);else if(3==(i=t.h)||0==i&&0<e.I||!(1==r&&function(e,t){return!(nn(e.b)>=e.b.f-(e.h?1:0)||(e.h?(e.g=t.s.concat(e.g),0):1==e.v||2==e.v||e.u>=(e.Ia?0:e.Ja)||(e.h=et(y(e.Ba,e,t),Vn(e,e.u)),e.u++,0)))}(e,t)||2==r&&Pn(e)))switch(n&&0<n.length&&(t=e.b,t.c=t.c.concat(n)),i){case 1:qn(e,5);break;case 4:qn(e,10);break;case 3:qn(e,6);break;default:qn(e,2)}}function Vn(e,t){var n=e.Fa+Math.floor(Math.random()*e.Ma);return e.f||(n*=2),n*t}function qn(e,t){if(e.c.info("Error code "+t),2==t){var n=null;e.f&&(n=null);var r=y(e.Xa,e);n||(n=new Mt("//www.google.com/images/cleardot.gif"),u.location&&"http"==u.location.protocol||Ot(n,"https"),Lt(n)),function(e,t){var n=new ze;if(u.Image){var r=new Image;r.onload=v(hn,n,r,"TestLoadImage: loaded",!0,t),r.onerror=v(hn,n,r,"TestLoadImage: error",!1,t),r.onabort=v(hn,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=v(hn,n,r,"TestLoadImage: timeout",!1,t),u.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Qe(2);e.v=0,e.f&&e.f.ra(t),Wn(e),Tn(e)}function Wn(e){e.v=0,e.I=-1,e.f&&(0==sn(e.b).length&&0==e.g.length||(e.b.c.length=0,x(e.g),e.g.length=0),e.f.qa())}function Un(e,t,n){var r=function(e){return e instanceof Mt?Dt(e):new Mt(e,void 0)}(n);if(""!=r.c)t&&Ft(r,t+"."+r.c),Ct(r,r.h);else{var i=u.location;r=function(e,t,n,r){var i=new Mt(null,void 0);return e&&Ot(i,e),t&&Ft(i,t),n&&Ct(i,n),r&&(i.g=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.W&&F(e.W,(function(e,t){Pt(r,t,e)})),t=e.A,n=e.na,t&&n&&Pt(r,t,n),Pt(r,"VER",e.ha),Fn(e,r),r}function zn(e,t){if(t&&!e.C)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new fn(e.Ka)).F=e.C,t}function Jn(){}function Gn(){if(V&&!(10<=Number(Q)))throw Error("Environmental error: no available transport.")}function Kn(e,t){Se.call(this),this.a=new kn(t),this.l=e,this.b=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.a.l=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.a&&(e?e["X-WebChannel-Client-Profile"]=t.a:e={"X-WebChannel-Client-Profile":t.a}),this.a.O=e,(e=t&&t.httpHeadersOverwriteParam)&&!k(e)&&(this.a.i=e),this.h=t&&t.supportsCrossDomainXhr||!1,this.g=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!k(t)&&(this.a.A=t,null!==(e=this.b)&&t in e&&t in(e=this.b)&&delete e[t]),this.f=new Xn(this)}function Zn(e){ut.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.c=e)?(e=this.c,this.data=null!==t&&e in t?t[e]:void 0):this.data=t}else this.data=e}function Yn(){lt.call(this),this.status=1}function Xn(e){this.a=e}(o=fn.prototype).ba=function(e,t,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+e);t=t?t.toUpperCase():"GET",this.B=e,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?it(this.H):it(at),this.a.onreadystatechange=y(this.za,this);try{this.A=!0,this.a.open(t,String(e),!0),this.A=!1}catch(e){return void vn(this,e)}e=n||"";var i=new kt(this.headers);r&&xt(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=yn,n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(i.L()),n=u.FormData&&e instanceof u.FormData,!(0<=w(gn,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.a.setRequestHeader(t,e)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{wn(this),0<this.o&&((this.D=function(e){return V&&X(9)&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=y(this.xa,this)):this.m=je(this.xa,this.o,this)),this.l=!0,this.a.send(e),this.l=!1}catch(e){vn(this,e)}},o.xa=function(){void 0!==s&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},o.abort=function(e){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=e||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),En(this))},o.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),En(this,!0)),fn.S.G.call(this)},o.za=function(){this.j||(this.A||this.l||this.g?An(this):this.Ta())},o.Ta=function(){An(this)},o.X=function(){try{return 2<Sn(this)?this.a.status:-1}catch(e){return-1}},o.$=function(){try{return this.a?this.a.responseText:""}catch(e){return""}},o.Na=function(e){if(this.a){var t=this.a.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),dn(t)}},o.ua=function(){return this.h},o.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(o=kn.prototype).ha=8,o.v=1,o.Ba=function(e){if(this.h)if(this.h=null,1==this.v){if(!e){this.R=Math.floor(1e5*Math.random()),e=this.R++;var t,n=new ht(this,this.c,e,void 0),r=this.l;if(this.O&&(r?P(r=C(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)e:{for(var i=t=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(t+=o)){t=i;break e}if(4096===t||i===this.g.length-1){t=i+1;break e}}t=1e3}else t=1e3;t=Cn(this,n,t),Pt(i=Dt(this.B),"RID",e),Pt(i,"CVER",22),this.A&&Pt(i,"X-HTTP-Session-Id",this.A),Fn(this,i),this.i&&r&&_n(i,this.i,r),on(this.b,n),this.Ga&&Pt(i,"TYPE","init"),this.da?(Pt(i,"$req",t),Pt(i,"SID","null"),n.V=!0,mt(n,i,null)):mt(n,i,t),this.v=2}}else 3==this.v&&(e?On(this,e):0==this.g.length||tn(this.b)||On(this))},o.Aa=function(){if(this.j=null,jn(this),this.V&&!(this.F||null==this.a||0>=this.N)){var e=2*this.N;this.c.info("BP detection timer enabled: "+e),this.s=et(y(this.Sa,this),e)}},o.Sa=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Nn(this),jn(this))},o.Ra=function(){null!=this.m&&(this.m=null,Nn(this),Pn(this),Qe(19))},o.Xa=function(e){e?(this.c.info("Successfully pinged google.com"),Qe(2)):(this.c.info("Failed to ping google.com"),Qe(1))},(o=Jn.prototype).ta=function(){},o.sa=function(){},o.ra=function(){},o.qa=function(){},o.Ha=function(){},Gn.prototype.a=function(e,t){return new Kn(e,t)},A(Kn,Se),(o=Kn.prototype).addEventListener=function(e,t,n,r){Kn.S.addEventListener.call(this,e,t,n,r)},o.removeEventListener=function(e,t,n,r){Kn.S.removeEventListener.call(this,e,t,n,r)},o.Oa=function(){this.a.f=this.f,this.h&&(this.a.C=!0);var e=this.a,t=this.l,n=this.b||void 0;Qe(0),e.fa=t,e.W=n||{},e.H=e.T,e.B=Un(e,null,e.fa),Dn(e)},o.close=function(){Rn(this.a)},o.Pa=function(e){if("string"==typeof e){var t={};t.__data__=e,Mn(this.a,t)}else this.g?((t={}).__data__=xe(e),Mn(this.a,t)):Mn(this.a,e)},o.G=function(){this.a.f=null,delete this.f,Rn(this.a),delete this.a,Kn.S.G.call(this)},A(Zn,ut),A(Yn,lt),A(Xn,Jn),Xn.prototype.ta=function(){this.a.dispatchEvent("a")},Xn.prototype.sa=function(e){this.a.dispatchEvent(new Zn(e))},Xn.prototype.ra=function(e){this.a.dispatchEvent(new Yn(e))},Xn.prototype.qa=function(){this.a.dispatchEvent("b")},Gn.prototype.createWebChannel=Gn.prototype.a,Kn.prototype.send=Kn.prototype.Pa,Kn.prototype.open=Kn.prototype.Oa,Kn.prototype.close=Kn.prototype.close,tt.NO_ERROR=0,tt.TIMEOUT=8,tt.HTTP_ERROR=6,nt.COMPLETE="complete",ot.EventType=st,st.OPEN="a",st.CLOSE="b",st.ERROR="c",st.MESSAGE="d",Se.prototype.listen=Se.prototype.va,fn.prototype.listenOnce=fn.prototype.wa,fn.prototype.getLastError=fn.prototype.Qa,fn.prototype.getLastErrorCode=fn.prototype.ua,fn.prototype.getStatus=fn.prototype.X,fn.prototype.getResponseJson=fn.prototype.Na,fn.prototype.getResponseText=fn.prototype.$,fn.prototype.send=fn.prototype.ba;var Qn={createWebChannelTransport:function(){return new Gn},ErrorCode:tt,EventType:nt,WebChannel:ot,XhrIo:fn},$n=Qn.createWebChannelTransport,er=Qn.ErrorCode,tr=Qn.EventType,nr=Qn.WebChannel,rr=Qn.XhrIo;t.default=Qn}.call(this,n(2))},function(e,t,n){const r=n(0),i=new THREE.Color;function o(e,t,n){i.set(n),e.uniforms?(e.uniforms[t].value.x=i.r,e.uniforms[t].value.y=i.g,e.uniforms[t].value.z=i.b):e[t].set(n)}function a(e,t,n,r,i,o){e.fillStyle=t,e.fillRect(n,r,i,o)}function s(e,t,n,r,i,o,a){let s;(s=o>a?e.createLinearGradient(0,0,o,0):e.createLinearGradient(0,0,0,a)).addColorStop(0,t),s.addColorStop(1,n),e.fillStyle=s,e.fillRect(r,i,o,a)}if(AFRAME.registerSystem("materials",{schema:{},init:function(){this.curve=null,this.panelMaterials=[];const e=localStorage.getItem("colorScheme")||"default";this.scheme=r.schemes[e],this.textureList=[],this.beatsCanvas=document.createElement("canvas"),this.beatsTexture=new THREE.CanvasTexture(this.beatsCanvas),this.generateBeatsTexture(),this.textureList.push(this.beatsTexture),this.envmapCanvas=document.createElement("canvas"),this.envmapTexture=new THREE.CanvasTexture(this.envmapCanvas),this.generateEnvmapTexture(),this.textureList.push(this.envmapTexture),this.fistsCanvas=document.createElement("canvas"),this.fistsTexture=new THREE.CanvasTexture(this.fistsCanvas),this.generateFistsTexture(),this.textureList.push(this.fistsTexture),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{this.createMaterials()}):this.createMaterials()},play:function(){this.setColorScheme()},tick:function(e,t){this.aurora.uniforms.time.value=e,this.home.animate&&(this.home.uniforms.time.value=e),this.leftFistWeapon.uniforms.time.value=e,this.leftWeapon.uniforms.time.value=e,this.rightFistWeapon.uniforms.time.value=e,this.rightWeapon.uniforms.time.value=e,this.rings.uniforms.time.value=e,this.tube.uniforms.time.value=e},createMaterials:function(){const e=this.scheme;this.tunnel=new THREE.ShaderMaterial({vertexShader:n(106),fragmentShader:n(107),uniforms:{fogColor:{value:new THREE.Color(e.primary)},color1:{value:new THREE.Color(e.primary)},color2:{value:new THREE.Color(e.secondary)},color3:{value:new THREE.Color(e.tertiary)},scale:{value:1}},transparent:!0}),this.merkaba=new THREE.MeshBasicMaterial({color:new THREE.Color(e.primary)}),this.backglow=new THREE.MeshBasicMaterial({transparent:!0,map:(new THREE.TextureLoader).load(document.getElementById("backGlowImg").src),color:new THREE.Color(e.primary)}),this.textureList.push(this.backglow.map),this.aurora=new THREE.ShaderMaterial({vertexShader:n(108),fragmentShader:n(109),uniforms:{colorPrimary:{value:new THREE.Color(e.primary)},colorSecondary:{value:new THREE.Color(e.secondary)},time:{value:0}},transparent:!0}),this.rings=new THREE.ShaderMaterial({vertexShader:n(110),fragmentShader:n(111),uniforms:{colorPrimary:{value:new THREE.Color(e.primary)},colorSecondary:{value:new THREE.Color(e.secondary)},colorTertiary:{value:new THREE.Color(e.tertiary)},time:{value:0}},transparent:!0,depthWrite:!1}),this.moon=new THREE.ShaderMaterial({vertexShader:n(112),fragmentShader:n(113),uniforms:{map:{value:(new THREE.TextureLoader).load(document.getElementById("moonImg").src)},tint:{value:new THREE.Color(e.secondarybright)}},transparent:!0}),this.textureList.push(this.moon.uniforms.map.value),this.home=new THREE.ShaderMaterial({vertexShader:n(114),fragmentShader:n(115),uniforms:{color1:{value:new THREE.Color(e.primary)},color2:{value:new THREE.Color(e.secondary)},color3:{value:new THREE.Color(e.tertiary)},src:{value:(new THREE.TextureLoader).load(document.getElementById("homeShadowImg").src)},time:{value:0}},transparent:!0}),this.textureList.push(this.home.uniforms.src.value);const t=(new THREE.TextureLoader).load(document.getElementById("weaponImg").src);t.wrapS=THREE.RepeatWrapping,t.wrapT=THREE.RepeatWrapping,t.repeat.set(2,2),t.magFilter=THREE.NearestFilter,this.textureList.push(t),this.rightWeapon=new THREE.ShaderMaterial({vertexShader:n(24),fragmentShader:n(25),uniforms:{src:{value:t},color:{value:new THREE.Color(e.secondary)},thickness:{value:1.6},time:{value:0}},transparent:!0,blending:THREE.AdditiveBlending}),this.leftWeapon=new THREE.ShaderMaterial({vertexShader:n(24),fragmentShader:n(25),uniforms:{src:{value:t},color:{value:new THREE.Color(e.primary)},thickness:{value:1.6},time:{value:0}},transparent:!0,blending:THREE.AdditiveBlending}),this.leftFistWeapon=new THREE.ShaderMaterial({vertexShader:n(14),fragmentShader:n(26),uniforms:{src:{value:t},color:{value:new THREE.Color(e.primary)},time:{value:0}},side:THREE.DoubleSide,transparent:!0,blending:THREE.AdditiveBlending}),this.rightFistWeapon=new THREE.ShaderMaterial({vertexShader:n(14),fragmentShader:n(26),uniforms:{src:{value:t},color:{value:new THREE.Color(e.secondary)},time:{value:0}},side:THREE.DoubleSide,transparent:!0,blending:THREE.AdditiveBlending});const i=(new THREE.TextureLoader).load(document.getElementById("weaponImg").src),o=(new THREE.TextureLoader).load(document.getElementById("weaponHandleImg").src);i.mapping=THREE.SphericalReflectionMapping,this.textureList.push(i),this.textureList.push(o),this.leftWeaponHandle=new THREE.MeshStandardMaterial({roughness:.4,metalness:.5,color:new THREE.Color(e.primary),map:o,envMap:i}),this.rightWeaponHandle=new THREE.MeshStandardMaterial({roughness:.4,metalness:.5,color:new THREE.Color(e.secondary),map:o,envMap:i});const a=(new THREE.TextureLoader).load(document.getElementById("weapon2Img").src);a.mapping=THREE.SphericalReflectionMapping,this.leftFist=new THREE.MeshStandardMaterial({roughness:.3,metalness:.8,map:this.fistsTexture,envMap:a,transparent:!0}),this.rightFist=new THREE.MeshStandardMaterial({roughness:.3,metalness:.8,map:this.fistsTexture,envMap:a,transparent:!0}),this.beat=new THREE.MeshLambertMaterial({map:this.beatsTexture,transparent:!0}),this.blueBeatPieces=new THREE.MeshLambertMaterial({map:this.beatsTexture,color:e.secondary,emissive:e.secondary,emissiveIntensity:.2}),this.redBeatPieces=new THREE.MeshLambertMaterial({map:this.beatsTexture,color:e.primary,emissive:e.primary,emissiveIntensity:.2}),this.minePieces=new THREE.MeshLambertMaterial({color:e.tertiary,emissive:e.tertiary,emissiveIntensity:.2});const s=(new THREE.TextureLoader).load(document.getElementById("backGlowImg").src);this.redBeatGlow=new THREE.MeshBasicMaterial({color:e.primary,map:s,blending:THREE.AdditiveBlending,transparent:!0}),this.blueBeatGlow=new THREE.MeshBasicMaterial({color:e.secondary,map:s,blending:THREE.AdditiveBlending,transparent:!0}),this.textureList.push(s),this.stars=new THREE.PointsMaterial({size:1,map:(new THREE.TextureLoader).load(document.getElementById("starImg").src),blending:THREE.AdditiveBlending,transparent:!0,color:new THREE.Color(e.secondary)}),this.textureList.push(this.stars.map);const u=(new THREE.TextureLoader).load(document.getElementById("sideglowImg").src);this.textureList.push(u),this.leftsideglow=new THREE.MeshBasicMaterial({map:u,transparent:!0,blending:THREE.AdditiveBlending,depthTest:!1,side:THREE.BackSide,color:new THREE.Color(r.OFF)}),this.rightsideglow=new THREE.MeshBasicMaterial({map:u,transparent:!0,blending:THREE.AdditiveBlending,depthTest:!1,color:new THREE.Color(r.OFF)});const l=(new THREE.TextureLoader).load(document.getElementById("plumeImg").src);l.minFilter=THREE.LinearFilter,this.arrowBluePlume=new THREE.ShaderMaterial({vertexShader:n(5),fragmentShader:n(6),uniforms:{color:{value:new THREE.Color(e.secondary)},src:{value:l}},transparent:!0,depthTest:!1}),this.arrowRedPlume=new THREE.ShaderMaterial({vertexShader:n(5),fragmentShader:n(6),uniforms:{color:{value:new THREE.Color(e.primary)},src:{value:l}},transparent:!0,depthTest:!1}),this.dotBluePlume=new THREE.ShaderMaterial({vertexShader:n(5),fragmentShader:n(6),uniforms:{color:{value:new THREE.Color(e.secondary)},src:{value:l}},transparent:!0,depthTest:!1}),this.dotRedPlume=new THREE.ShaderMaterial({vertexShader:n(5),fragmentShader:n(6),uniforms:{color:{value:new THREE.Color(e.primary)},src:{value:l}},transparent:!0,depthTest:!1}),this.minePlume=new THREE.ShaderMaterial({vertexShader:n(5),fragmentShader:n(6),uniforms:{color:{value:new THREE.Color(e.tertiary)},src:{value:l}},transparent:!0,depthTest:!1});const c=(new THREE.TextureLoader).load(document.getElementById("tubeImg").src),h=(new THREE.TextureLoader).load(document.getElementById("tubeColorImg").src);c.generateMipmaps=!1,c.minFilter=THREE.LinearFilter,h.generateMipmaps=!1,h.minFilter=THREE.LinearFilter,this.tube=new THREE.ShaderMaterial({vertexShader:n(116),fragmentShader:n(117),uniforms:{time:{value:0},opacity:{value:0},src:{value:c},color:{value:h}},transparent:!0,depthTest:!1,side:THREE.BackSide});const d=(new THREE.TextureLoader).load(document.getElementById("handStarTrailImg").src);d.generateMipmaps=!1,d.minFilter=THREE.LinearFilter,this.handStarTrail=new THREE.ShaderMaterial({vertexShader:n(118),fragmentShader:n(119),uniforms:{colorPrimary:{value:new THREE.Color(e.primary)},colorSecondary:{value:new THREE.Color(e.secondary)},colorTertiary:{value:new THREE.Color(e.tertiary)},pulse:{value:0},src:{value:d}},transparent:!0,depthTest:!1,blending:THREE.AdditiveBlending,side:THREE.DoubleSide})},setColorScheme:function(e){this.el.sceneEl;const t=this.scheme=r.schemes[e]||r.schemes.default;o(this.arrowBluePlume,"color",t.secondary),o(this.arrowRedPlume,"color",t.primary),o(this.aurora,"colorPrimary",t.primary),o(this.aurora,"colorSecondary",t.secondary),o(this.backglow,"color",t.primary),o(this.blueBeatGlow,"color",t.secondary),o(this.blueBeatGlow,"color",t.secondary),o(this.blueBeatPieces,"color",t.secondary),o(this.blueBeatPieces,"emissive",t.secondary),o(this.dotBluePlume,"color",t.secondary),o(this.dotRedPlume,"color",t.primary),o(this.handStarTrail,"colorPrimary",t.primary),o(this.handStarTrail,"colorSecondary",t.secondary),o(this.handStarTrail,"colorTertiary",t.tertiary),o(this.home,"color1",t.primary),o(this.home,"color2",t.secondary),o(this.home,"color3",t.tertiary),o(this.leftFist,"color",t.primarybright),o(this.leftFistWeapon,"color",t.primary),o(this.leftWeapon,"color",t.primary),o(this.leftWeaponHandle,"color",t.primary),o(this.merkaba,"color",t.primary),o(this.minePieces,"color",t.tertiary),o(this.minePieces,"emissive",t.tertiary),o(this.minePlume,"color",t.tertiary),o(this.moon,"tint",t.secondarybright),o(this.redBeatGlow,"color",t.primary),o(this.redBeatGlow,"color",t.primary),o(this.redBeatPieces,"color",t.primary),o(this.redBeatPieces,"emissive",t.primary),o(this.rightFist,"color",t.secondarybright),o(this.rightWeapon,"color",t.secondary),o(this.rightFistWeapon,"color",t.secondary),o(this.rightWeaponHandle,"color",t.secondary),o(this.rings,"colorPrimary",t.primary),o(this.rings,"colorSecondary",t.secondary),o(this.rings,"colorTertiary",t.tertiary),o(this.stars,"color",t.secondary),o(this.tunnel,"fogColor",t.primary),o(this.tunnel,"color1",t.primary),o(this.tunnel,"color2",t.secondary),o(this.tunnel,"color3",t.tertiary),this.generateBeatsTexture(),this.generateEnvmapTexture(),this.generateFistsTexture(),document.querySelectorAll("a-entity[wall]").forEach(e=>{o(e.getObject3D("mesh").material,"colorTertiary",t.tertiary)}),this.panelMaterials.forEach(e=>{o(e,"colorPrimary",t.primary),o(e,"colorSecondary",t.secondary)}),o(this.curve,"fogColor",t.primary),o(this.curve,"color1",t.primary),o(this.curve,"color2",t.secondary)},generateBeatsTexture:function(){const e=this.scheme,t=new THREE.Color(e.primary),n=new THREE.Color(e.secondary),r=new THREE.Color(e.tertiary),i=this.beatsCanvas,o=i.getContext("2d");i.width=512,i.height=32,a(o,r.getStyle(),0,0,128,6),a(o,"#000",128,0,128,6),a(o,n.getStyle(),256,0,128,6),a(o,t.getStyle(),384,0,105,6),a(o,"#FFF",489,0,23,6),s(o,"#000000",n.getStyle(),0,6,512,4),s(o,"#000",t.getStyle(),0,10,512,5),s(o,"#000",r.getStyle(),0,15,512,4),s(o,`rgba(${n.r}, ${n.g}, ${n.b}, 0)`,n.getStyle(),0,19,512,5),s(o,`rgba(${t.r}, ${t.g}, ${t.b}, 0)`,t.getStyle(),0,24,512,4),s(o,`rgba(${r.r}, ${r.g}, ${r.b}, 0)`,r.getStyle(),0,28,512,4);const u=this.beatsTexture;return u.generateMipmaps=!1,u.magFilter=THREE.LinearFilter,u.minFilter=THREE.LinearFilter,u.needsUpdate=!0,u},generateFistsTexture:function(){const e=this.scheme,t=new THREE.Color(e.primarybright),n=new THREE.Color(e.secondarybright),r=this.fistsCanvas,i=r.getContext("2d");return r.width=8,r.height=128,s(i,t.getStyle(),`rgba(${t.r}, ${t.g}, ${t.b}, 0)`,0,0,4,128),s(i,n.getStyle(),`rgba(${n.r}, ${n.g}, ${n.b}, 0)`,4,0,4,128),this.fistsTexture.needsUpdate=!0,this.fistsTexture},generateEnvmapTexture:function(){const e=this.scheme,t=new THREE.Color(e.primary),n=new THREE.Color(e.secondary),r=document.getElementById("envmapTemplateImg");r.addEventListener("load",()=>{const e=r.width,i=r.height,o=this.envmapCanvas;o.width=e,o.height=i;const a=o.getContext("2d");a.drawImage(r,0,0);const s=a.getImageData(0,0,e,i),u=s.data;let l,c;for(let e=0;e<u.length;e+=4)l=u[e],l*=1-(c=u[e+1])/255,u[e+0]=Math.floor(t.r*l+n.r*c),u[e+1]=Math.floor(t.g*l+n.g*c),u[e+2]=Math.floor(t.b*l+n.b*c),u[e+3]=255;a.putImageData(s,0,0),document.getElementById("envmapImg").src=o.toDataURL("image/png")})},registerCurve:function(e){this.curve=e},registerPanel:function(e){this.panelMaterials.push(e)}}),AFRAME.registerComponent("materials",{schema:{animate:{default:!0},name:{default:""},recursive:{default:!0}},update:function(){if(""===this.data.name)return;if(this.material=this.system[this.data.name],!this.material)return void console.warn("[materials] Unknown material: "+this.data.name);let e=this.el.getObject3D("mesh");e?this.applyMaterial(e):this.el.addEventListener("object3dset",t=>{"mesh"===t.detail.type&&(e=this.el.getObject3D("mesh"))&&this.applyMaterial(e)}),this.material.animate=this.data.animate},applyMaterial:function(e){e.detail&&(e=e.detail.model),this.data.recursive?e.traverse(e=>{"Mesh"===e.type&&(e.material=this.material)}):e.material=this.material}}),AFRAME.registerComponent("materials-color-menu",{play:function(){this.text=document.getElementById("colorName")},events:{mouseenter:function(e){this.text.setAttribute("text","value",e.target.dataset.colorName)},mouseleave:function(e){this.text.setAttribute("text","value","")},click:function(e){this.el.sceneEl.systems.materials.setColorScheme(e.target.dataset.colorScheme),this.el.sceneEl.emit("colorschemechange",e.target.dataset.colorScheme,!1)}}}),window.AFRAME){const t=["materials","materials-color-menu"],n=[],r=["materials"];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t){e.exports="varying vec3 vWorldPos;\nvarying vec3 vPos;\nvarying vec3 vNormal;\n\nvoid main() {\n  vNormal = normal;\n  vPos = position;\n  vWorldPos = (modelMatrix * vec4( position, 1.0 )).xyz;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n"},function(e,t){e.exports="uniform sampler2D src;\nuniform float scale;\nvarying vec3 vPos;\nvarying vec3 vWorldPos;\nvarying vec3 vNormal;\nuniform vec3 color1;\nuniform vec3 color2;\nuniform vec3 color3;\nuniform vec3 fogColor;\n\nvoid main() {\n  vec3 pw = vWorldPos - cameraPosition;\n  vec3 p = pw / scale;\n  float pz = p.z * 0.3;\n\n  // build color weights\n  float f = clamp( (sin(p.x * 0.6 + pz ) + sin(p.y * 0.3 - pz)) * 0.3 + 0.17, 0.0, 1.0);\n  float g = clamp( (sin(p.x * 0.7 + pz) + cos(p.y * 0.6 - 15.0) + sin(pz * 0.1)) * 0.25 + 0.15, 0.0, 1.0);\n  float h = clamp( (sin(p.x * 0.4 + pz + 3.0) + cos(p.y * 0.8 - 5.0) + sin(pz * 0.3)) * 0.16 + 0.08, 0.0, 1.0);\n\n\n  // mix colors using weights\n  vec3 col = vec3(0.3);\n  col = mix(col, color1, f);\n  col = mix(col, color2, g);\n  col = mix(col, color3, h);\n\n  float fog = 1.0 - clamp(length(pw) / 180.0 - 0.1, 0.0, 1.0);\n\n  // mix color with fog\n  col = mix(fogColor, col, smoothstep(0.2, 0.9, fog));\n\n  // calc shadow (using normal and fixed light pos + fade to black in y)\n  float shadow = 0.5 + dot(vec3(0.0, 1.0, 1.0), vNormal) * 0.5;\n  float shadowGrad = clamp((vPos.y + 2.0) / 6.0, 0.1, 1.0);\n  // fade in fog\n  shadow = mix(1.0, shadow, fog);\n  shadowGrad = mix(1.0, shadowGrad, smoothstep(0.3, 1.0, fog));\n\n  gl_FragColor = vec4(col * shadow * shadowGrad, smoothstep(0.3, 0.6, fog));\n  //gl_FragColor = vec4(vec3(fog), 1.0);\n}"},function(e,t){e.exports="uniform float time;\nvarying vec2 uvs;\nvoid main() {\n  uvs.xy = uv.xy;\n  float t = time * 0.0005;\n  vec3 pos = position;\n  pos.y += sin(t + uv.x * 3.0 + pos.x * 0.01) * 20.0;\n  pos.y += sin(-t * 1.3 + uv.x * 7.0 + pos.x * 0.008) * 10.0;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( pos, 1.0 );\n}"},function(e,t){e.exports="uniform float time;\nuniform vec3 colorPrimary;\nuniform vec3 colorSecondary;\nvarying vec2 uvs;\n\nvoid main() {\n  vec3 col = vec3(1.0);\n  float t = time * 0.001;\n  col *= 0.80 + sin(-t * 3.4 + 5.5 + uvs.x * 6.0) * 0.1;\n  col *= 0.80 + sin(t * 1.4 + 0.5 + uvs.x * 12.0) * 0.2;\n  col *= 0.80 + sin(t * 1.0 + 0.2 + uvs.x * 30.0) * 0.2;\n  col *= 0.90 + sin(-t * 1.6 + 5.2 + uvs.x * 43.0) * 0.1;\n  col *= 0.95 + sin(-t * 0.3 + 1.2 + uvs.x * 50.0) * 0.05;\n  col *= 0.95 + sin(t * 0.8 + 1.2 + uvs.x * 80.0) * 0.05;\n  col *= 0.94 + sin(-t + 0.1 + uvs.x * 180.0) * 0.01;\n  col *= 0.90 + sin(t * 2.49 + 0.1 + uvs.x * 120.0) * 0.01;\n  col *= 0.86 + sin(-t * 1.7 + 4.7 + uvs.x * 80.0) * 0.03;\n  col *= 0.86 + sin(-t * 1.2 + 0.7 + uvs.x * 180.0) * 0.02;\n\n  // border fades\n  float alpha = 1.0;\n  alpha *= 1.0 - smoothstep(0.0, 1.0, uvs.y);\n  alpha *= smoothstep(0.0, 0.3, uvs.y);\n  alpha *= sin(uvs.x * 3.141592);\n\n  // colorize\n  col = col * mix(colorPrimary, colorSecondary, uvs.y);\n  gl_FragColor = vec4(col, alpha);\n}\n"},function(e,t){e.exports="varying vec2 uvs;\nvoid main() {\n  uvs.xy = uv.xy;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}"},function(e,t){e.exports="uniform float time;\nuniform vec3 colorPrimary;\nuniform vec3 colorSecondary;\nuniform vec3 colorTertiary;\nvarying vec2 uvs;\n#define PI 3.14159265358979\n\nfloat pulse(float x, float t, float r){\n  return 1.0 - smoothstep(0.0, r, abs((x - t)));\n}\n\nvoid main() {\n  float t = time * 0.002;\n  vec2 uv = uvs - 0.5;\n  uv = vec2(-uv.y, uv.x);\n  float d = length(uv);\n  float f = pulse(d, 0.44, 0.012);\n  float f2 = pulse(d, 0.44, 0.002);\n\n  float g = pulse(d, 0.20, 0.01);\n  float g1 = pulse(d, 0.20, 0.0018);\n\n  float g2 = pulse(d, 0.21, 0.01);\n  float g3 = pulse(d, 0.21, 0.0018);\n\n  float ang = abs(atan(uv.y, uv.x)) / PI;\n  float angalpha = sin(ang * 20.0 - t * 0.1) * 0.4 + 0.6;\n\n  float sparks = pulse(angalpha, 0.4, 0.17) * (pulse(d, 0.435, 0.035) + pulse(d, 0.205, 0.026)) * 0.14;\n  sparks += pulse(angalpha, 0.4, 0.2) * (pulse(d, 0.44, 0.002) + pulse(d, 0.2, 0.0018)) * 0.4;\n  sparks *= sin(ang * 14.0 + t) * 0.5 + 0.5;\n  vec3 col = mix(colorPrimary, colorSecondary, ang);\n  col = mix (col, colorPrimary, g3);\n  col = mix (col, colorSecondary, g1);\n  col = mix (col, colorTertiary, sparks * 2.4);\n   gl_FragColor = vec4(col, ((f + g + g2) * 0.1 + (f2 + g1 + g3) * 0.4) * angalpha + sparks);\n}\n"},function(e,t){e.exports="varying vec2 uvs;\nvoid main() {\n  uvs.xy = uv.xy;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n"},function(e,t){e.exports="varying vec2 uvs;\nuniform sampler2D map;\nuniform vec3 tint;\n\nvoid main() {\n  vec4 tex = texture2D(map, uvs);\n  vec3 col = mix(tex.rgb * tint, tex.rgb, uvs.y);\n  gl_FragColor = vec4(col, tex.a );\n}\n"},function(e,t){e.exports="uniform float time;\nvarying vec3 vWorldPos;\nvarying vec2 uvs;\nvoid main() {\n  uvs.xy = uv.xy;\n  vWorldPos = (modelMatrix * vec4( position, 1.0 )).xyz;\n  vec3 pos = vec3(position.x, position.y + sin(time * 0.002 - position.z) * 0.05 + 0.04, position.z);\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n}\n"},function(e,t){e.exports="varying vec2 uvs;\nvarying vec3 vWorldPos;\nuniform sampler2D src;\nuniform vec3 color1;\nuniform vec3 color2;\nuniform vec3 color3;\n\nvoid main() {\n  vec4 tex = texture2D(src, uvs);\n  vec3 p = vWorldPos + cameraPosition;\n  float pz = p.z * 0.36;\n  float f = clamp( (sin(p.x + pz ) + sin(p.y - pz)) * 0.35 + 0.14, 0.0, 1.0);\n  float g = clamp( (sin(p.x + pz + 2.0) + cos(p.y * 0.6 - 15.0) + sin(pz * 0.5)) * 0.3 + 0.1, 0.0, 1.0);\n  float h = clamp( (sin(p.x * 0.7 + pz + 2.0) + cos(p.y * 0.8 - 5.0) + sin(pz * 0.8)) * 0.3 + 0.05, 0.0, 1.0);\n\n  vec3 col = vec3(0.1);\n  col = mix(col, color1, f);\n  col = mix(col, color2, g);\n  col = mix(col, color3, h);\n\n  gl_FragColor = vec4((col * 1.5) * tex.r, 1.0);\n}"},function(e,t){e.exports="varying vec2 uvs;\nuniform float time;\nvoid main() {\n  uvs.xy = uv.xy;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n"},function(e,t){e.exports="varying vec2 uvs;\nuniform sampler2D src;\nuniform sampler2D color;\nuniform float time;\nuniform float opacity;\n\nvoid main() {\n  vec2 uvanim = vec2(\n    mod(uvs.x + sin(time / 20000.0), 1.0),\n    mod(uvs.y + time / 2000.0, 1.0));\n  vec4 texAlpha = texture2D(src, uvanim);\n  float alpha = texAlpha.a * smoothstep(0.0, 0.5, uvs.y) * (1.0 - smoothstep(0.5, 1.0, uvs.y));\n  gl_FragColor = vec4(texture2D(color, uvs).rgb, alpha * 0.7 * opacity);\n}\n"},function(e,t){e.exports="varying vec3 vWorldPosition;\nvarying vec2 uvs;\n\nvoid main() {\n  uvs = uv;\n  vWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n"},function(e,t){e.exports="varying vec3 vWorldPosition;\nvarying vec2 uvs;\nuniform vec3 colorPrimary;\nuniform vec3 colorSecondary;\nuniform vec3 colorTertiary;\nuniform float pulse;\nuniform sampler2D src;\n\nvoid main() {\n  vec3 colorize = vWorldPosition-cameraPosition;\n  colorize = clamp(colorize + 0.5, vec3(0.0), vec3(1.0));\n  vec3 col = mix(mix(colorPrimary, colorSecondary, colorize.x), colorTertiary, colorize.z);\n  col += vec3(pulse) * 0.1;\n  gl_FragColor = vec4 (col, texture2D(src, uvs).a);\n}\n"},function(e,t,n){if(AFRAME.registerComponent("menu-controls",{schema:{enabled:{default:!0}},events:{thumbdownstart:function(){this.data.enabled&&this.el.sceneEl.emit("searchnextpage",null,!1)},thumbleftstart:function(){this.data.enabled&&this.el.sceneEl.emit("menuchallengeunselect",null,!1)},thumbupstart:function(){this.data.enabled&&this.el.sceneEl.emit("searchprevpage",null,!1)}}}),window.AFRAME){const t=["menu-controls"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("menu-difficulty-select",{init:function(){this.el.sceneEl.addEventListener("menuchallengeselect",()=>{this.el.object3D.visible=!1,setTimeout(()=>{this.el.components.layout.update(),this.el.object3D.visible=!0},150)})},events:{click:function(e){this.el.sceneEl.emit("menudifficultyselect",e.target.closest(".difficultyOption").dataset.difficulty,!1)}}}),window.AFRAME){const t=["menu-difficulty-select"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("menu-genre",{init:function(){this.el.addEventListener("click",e=>{this.el.sceneEl.emit("genreselect",e.target.closest(".genre").dataset.bindForKey)})}}),window.AFRAME){const t=["menu-genre"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("menu-midsection",{schema:{active:{default:!1},selectedChallenge:{default:""}},update:function(e){e.active&&!this.data.active&&this.el.emit("hidedifficultysection",null,!1),(!e.active&&this.data.active||this.data.selectedChallenge&&e.selectedChallenge!==this.data.selectedChallenge)&&this.el.emit("showdifficultysection",null,!1)}}),window.AFRAME){const t=["menu-midsection"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){const r=n(0),i={classicvr:-.6,punchvr:.87,ride2d:.87,ridevr:.15,viewer2d:.15},o={classicvr:"classic",punchvr:"punch",ride2d:"ride",ridevr:"ride",viewer2d:"viewer"};if(AFRAME.registerComponent("menu-mode",{schema:{colorScheme:{default:"default"},hasVR:{default:!1}},init:function(){this.el.addEventListener("click",e=>{const t=e.target.closest("[data-mode]"),n=t.dataset.mode,r=t.dataset.name;this.el.sceneEl.emit("gamemode",n,!1),this.data.hasVR&&localStorage.setItem("gameMode",r),this.setModeOption(r)})},update:function(){this.data.hasVR?(this.setModeOption(localStorage.getItem("gameMode")||"punchvr"),this.el.sceneEl.emit("gamemode",o[localStorage.getItem("gameMode")||"punchvr"])):this.setModeOption("ride2d")},setModeOption:function(e){const t=this.el.querySelectorAll(".modeItem");document.getElementById("modeIcon").object3D.position.y=i[e];for(let n=0;n<t.length;n++){const i=t[n],o=i.dataset.name===e;i.emit(o?"select":"deselect",null,!1);const a=i.querySelector(".modeBackground");a.emit(o?"select":"deselect",null,!1),a.setAttribute("mixin","modeBackgroundSelect"+(o?"":" modeBackgroundHover")),i.querySelector(".modeThumb").emit(o?"select":"deselect",null,!1),i.querySelector(".modeTitle").setAttribute("text","color",o?r.WHITE:r.schemes[this.data.colorScheme].secondary),i.querySelector(".modeInstructions").setAttribute("text","color",o?r.WHITE:r.schemes[this.data.colorScheme].primary)}}}),window.AFRAME){const t=["menu-mode"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("menu-playlist-button",{schema:{isFavorited:{default:!1},selectedChallenge:{default:""}},init:function(){const e=this.el;e.setAttribute("animation__scaleup",{property:"scale",from:"1 1 1",to:"1.2 1.2 1.2",dur:800,autoplay:!1,easing:"easeInOutElastic"}),e.setAttribute("animation__scaledown",{property:"scale",from:"1.2 1.2 1.2",to:"1 1 1",dur:100,autoplay:!1,easing:"easeInOutCubic"})},update:function(e){!e.isFavorited&&this.data.isFavorited&&e.selectedChallenge===this.data.selectedChallenge&&(this.el.object3D.position.z=.01,this.el.components.animation__scaleup.beginAnimation(),setTimeout(()=>{this.el.components.animation__scaledown.beginAnimation(),this.el.object3D.position.z=0},800))}}),window.AFRAME){const t=["menu-playlist-button"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("menu-playlist",{init:function(){this.eventDetail={id:"",title:""},this.el.addEventListener("click",e=>{const t=e.target.closest(".playlist");this.eventDetail.id=t.dataset.playlist,this.eventDetail.title=t.dataset.title,this.el.sceneEl.emit("playlistselect",this.eventDetail)})}}),window.AFRAME){const t=["menu-playlist"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){"use strict";n.r(t);var r=n(1),i=n.n(r);if(AFRAME.registerComponent("menu-selected-challenge-image",{schema:{selectedChallengeId:{type:"string"}},update:function(){const e=this.el;this.data.selectedChallengeId&&e.setAttribute("material","src",i.a.getS3FileUrl(this.data.selectedChallengeId,"image.jpg"))}}),window.AFRAME){const t=["menu-selected-challenge-image"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("menu-slide-animation",{schema:{isSearching:{default:!1},menuSelectedChallengeId:{type:"string"}},init:function(){this.isLeft=!1},update:function(e){const t=this.data;if(this.isLeft)return!e.menuSelectedChallengeId||t.menuSelectedChallengeId||t.isSearching||this.rightMenu(),void(!e.isSearching||t.isSearching||t.menuSelectedChallengeId||this.rightMenu());this.isLeft||(!e.menuSelectedChallengeId&&t.menuSelectedChallengeId&&this.leftMenu(),!e.isSearching&&t.isSearching&&this.leftMenu())},rightMenu:function(){this.isLeft&&(this.el.components.animation__menuright.beginAnimation(),this.isLeft=!1)},leftMenu:function(){this.isLeft||(this.el.components.animation__menuleft.beginAnimation(),this.isLeft=!0)}}),window.AFRAME){const t=["menu-slide-animation"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){const r={0:0,1:.5,2:0,3:.25,4:.5,5:.75,6:0,7:.125,8:.25,9:.375,10:.5,11:.625,12:.75,13:.875};if(AFRAME.registerComponent("multiplier-ring",{dependencies:["geometry","material"],schema:{combo:{default:0},multiplier:{default:1}},init:function(){this.animationSet={from:void 0,to:void 0},this.progress=this.el.getObject3D("mesh").material.uniforms.progress,this.el.setAttribute("animation",{property:"components.material.material.uniforms.progress.value",dur:100,autoplay:!1})},update:function(){this.updateRing()},updateRing:function(){const e=this.data,t=this.el,n=this.progress;if(8===e.multiplier)return void(n.value=1);const i=this.animationSet;i.from=n.value,i.to=r[e.combo],t.setAttribute("animation",i),t.components.animation.beginAnimation()}}),window.AFRAME){const t=["multiplier-ring"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("no-frustum-cull",{init:function(){this.el.object3D.frustumCulled=!1}}),window.AFRAME){const t=["no-frustum-cull"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r);if(AFRAME.registerShader("panelShader",{schema:{activePanel:{type:"number",is:"uniform",default:0},brightness:{type:"number",is:"uniform",default:.3},borderWidth:{type:"number",is:"uniform",default:.004},borderRadius:{type:"number",is:"uniform",default:.15},colorPrimary:{type:"color",is:"uniform",default:i.a.initial.primary},colorSecondary:{type:"color",is:"uniform",default:i.a.initial.secondary},midSection:{type:"number",is:"uniform",default:0},opacity:{type:"number",is:"uniform",default:1},ratio:{type:"number",is:"uniform",default:.5},transparent:{default:!0}},vertexShader:n(132),fragmentShader:n(133),update:function(e){this.updateVariables(e,"attribute"),this.updateVariables(e,"uniform"),this.el.sceneEl.systems.materials.registerPanel(this.material)}}),window.AFRAME){const t=[],n=["panelShader"],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t){e.exports="varying vec2 uvs;\nvoid main() {\n  uvs.xy = uv.xy;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}"},function(e,t){e.exports="#if __VERSION__ == 100\n  #extension GL_OES_standard_derivatives : enable\n#endif\n\nuniform vec3 colorPrimary;\nuniform vec3 colorSecondary;\n\n#define PI 3.141592\n#define DIFF_SECTION_WIDTH 0.06\n\nuniform float borderWidth;\nuniform float borderRadius;\nuniform float brightness;\nuniform float ratio;\nuniform float midSection;\nuniform float opacity;\nuniform float activePanel;\n\nvarying vec2 uvs;\n\nfloat sdBox( in vec2 p, in vec2 b )\n{\n    vec2 d = abs(p)-b;\n    return length(max(d,vec2(0.0))) + min(max(d.x,d.y), 0.0);\n}\n\nvoid main()\n{\n  vec2 uv = uvs;\n  vec2 uv2 = uv * 2.0 - 1.0; // from -1 to 1\n  uv2.x *= ratio;\n\n  vec3 col = mix(colorSecondary * uv.y, colorPrimary * uv.y, uv.x) * (brightness + activePanel * 0.4);\n  vec3 borderCol = mix(colorSecondary, colorPrimary, uv.y);\n\n  vec2 size = vec2(0.83 * ratio, 0.86) - borderRadius;\n  float grad = sdBox(uv2, size) - borderRadius;\n  grad = min(grad, sdBox(uv2 - size, vec2(borderRadius)));\n  grad = min(grad, sdBox(uv2 + size, vec2(borderRadius)));\n  grad = -grad;\n  float aa = fwidth(grad);\n\n  float isShape = smoothstep(-aa, 0.0, grad);\n  float alpha = clamp(isShape + smoothstep(-0.15, 0.15, grad), 0.0, 1.0);\n  float isBorder = smoothstep(-aa - borderWidth, aa - borderWidth, grad) - smoothstep(-aa + borderWidth, aa + borderWidth, grad);\n  float mid = clamp(midSection, 0.0, 1.0);\n  col *= 1.0 - mid * (step(0.5 - DIFF_SECTION_WIDTH * mid, uv.x) - step(0.5 + DIFF_SECTION_WIDTH * midSection, uv.x)) * 0.3;\n\n  gl_FragColor = vec4(mix(col * isShape, borderCol, isBorder), alpha * opacity);\n}\n"},function(e,t,n){if(AFRAME.registerComponent("pause",{schema:{isPaused:{default:!1}},update:function(){this.data.isPaused&&this.el.isPlaying?this.el.pause():this.data.isPaused||this.el.isPlaying||!this.el.sceneEl.isPlaying||this.el.play()}}),window.AFRAME){const t=["pause"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("pauser",{schema:{enabled:{default:!0}},init:function(){this.pauseGame=this.pauseGame.bind(this),document.addEventListener("keydown",e=>{27===e.keyCode&&this.pauseGame()}),this.el.sceneEl.addEventListener("controllerconnected",e=>{"vive-controls"===e.detail.name?this.el.addEventListener("menudown",this.pauseGame):(this.el.addEventListener("thumbstickdown",this.pauseGame),this.el.addEventListener("trackpaddown",this.pauseGame))}),document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&this.pauseGame()})},pauseGame:function(){this.data.enabled&&this.el.sceneEl.emit("pausegame",null,!1)}}),window.AFRAME){const t=["pauser"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){var r=n(137);if(AFRAME.registerSystem("play-sound",{init:function(){this.lastSoundPlayed="",this.lastSoundPlayedTime=0,this.pools={}},createPool:function(e,t){this.pools[e]||(this.pools[e]=new r(e,t))},playSound:function(e,t){this.pools[e]||this.createPool(e,t),this.pools[e].play(),this.lastSoundPlayed=e,this.lastSoundTime=this.el.time}}),AFRAME.registerComponent("play-sound",{schema:{enabled:{default:!0},event:{type:"string"},sound:{type:"string"},volume:{type:"number",default:1}},multiple:!0,init:function(){this.el.addEventListener(this.data.event,e=>{this.data.enabled&&this.system.playSound(this.src,this.data.volume)})},update:function(){this.src=this.data.sound,this.data.sound.startsWith("#")&&(this.src=document.querySelector(this.data.sound).getAttribute("src"))}}),window.AFRAME){const t=["play-sound"],n=[],r=["play-sound"];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t){e.exports=function(e,t){var n,r=0,i=[];return(n=new Audio(e)).volume=t,i.push(n),{play:function(){0===i[r].currentTime&&i[r].ended||((n=new Audio(e)).volume=t,i.push(n),r++),(0===i[r].currentTime||i[r].ended)&&i[r].play(),r=(r+1)%i.length}}}},function(e,t,n){function r(e,t){return e-t}if(AFRAME.registerComponent("player-height",{init:function(){this.beatOffset=0,this.heights=[],this.height=0,this.el.sceneEl.addEventListener("menuchallengeselect",this.updateHeight.bind(this)),this.el.sceneEl.addEventListener("playbuttonclick",this.updateHeight.bind(this))},pause:function(){this.heights.length=0},updateHeight:function(){const e=this.heights;e.length>3&&e.shift(),e.push(this.el.object3D.position.y),this.height=function(e){e.sort(r);const t=e.length/2;return t%1?e[t-.5]:(e[t-1]+e[t])/2}(e);const t=(n=this.height,Math.min(Math.max(n,1.6),2.2));var n;this.beatOffset=0+.2*(t-1.6)/(2.2-1.6)}}),window.AFRAME){const t=["player-height"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("plume",{schema:{color:{default:""},cutDirection:{default:""},horizontalPosition:{default:"middleleft",oneOf:["left","middleleft","middleright","right"]},songPosition:{default:0},type:{default:"arrow",oneOf:["arrow","dot","mine"]},verticalPosition:{default:"middle",oneOf:["bottom","middle","top"]}},horizontalPositions:{left:-.95,middleleft:-.6,middleright:.6,right:.95},init:function(){this.curveEl=document.getElementById("curve"),this.curveFollowRig=document.getElementById("curveFollowRig"),this.handsEls=this.el.sceneEl.querySelectorAll(".handStar"),this.handPos=new THREE.Vector3,this.verticalPositions=this.el.sceneEl.components["beat-system"].verticalPositions,this.el.sceneEl.addEventListener("cleargame",this.returnToPool.bind(this))},update:function(){"mine"===this.data.type?this.poolName="pool__plume-mine":this.poolName=`pool__plume-${this.data.type}-${this.data.color}`},onGenerate:function(e,t,n,r){this.data;const i=this.el,o=this.curveEl.components.supercurve;o.getPointAt(e,i.object3D.position),o.alignToCurve(e,i.object3D),i.object3D.position.x+=this.horizontalPositions[t],i.object3D.position.y+=this.verticalPositions[n]+r,i.object3D.rotation.z=Math.random()*Math.PI*2,this.songPosition=e},tock:function(){if(this.el.object3D.position.z>this.curveFollowRig.object3D.position.z+10)this.returnToPool();else for(let e=0;e<this.handsEls.length;e++){const t=this.handsEls[e];t.object3D.getWorldPosition(this.handPos),this.handPos.distanceToSquared(this.el.object3D.position)<.2&&t.emit("plumepulse")}},returnToPool:function(){this.el.object3D.position.set(0,0,-9999),this.el.object3D.visible=!1,this.el.isPlaying&&this.el.sceneEl.components[this.poolName].returnEntity(this.el)}}),window.AFRAME){const t=["plume"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("punch",{schema:{enabled:{default:!1}},init:function(){this.currentPos=new THREE.Vector3,this.direction=0,this.lastSample=new THREE.Vector3,this.lastSampleTime=0,this.speed=0,this.bbox=new THREE.Box3,this.bboxEl=this.el.querySelector(".punchBbox")},play:function(){this.rig=this.el.closest("#curveFollowRig")},tick:function(e,t){this.data.enabled&&(this.direction=this.currentPos.copy(this.el.object3D.position).sub(this.lastSample),this.speed=this.direction.length()/((e-this.lastSampleTime)/1e3),this.lastSample.copy(this.el.object3D.position),this.lastSampleTime=e)},tickBeatSystem:function(){this.bbox.setFromObject(this.bboxEl.getObject3D("mesh"))},checkCollision:function(){const e=new THREE.Box3,t=new THREE.Vector3(0,0,.2);return function(n){return e.copy(n.bbox).translate(n.el.object3D.position).expandByScalar(.1).expandByVector(t),this.bbox.intersectsBox(e)}}()}),window.AFRAME){const t=["punch"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){var r,i;if(AFRAME.registerComponent("raycaster-target",{schema:{bindToggle:{default:""},depth:{type:"number"},height:{type:"number"},position:{type:"vec3",default:{x:0,y:0,z:0}},rotation:{type:"vec3",default:{x:0,y:0,z:0}},useBoxTarget:{default:!1},width:{type:"number"}},init:(r={primitive:"box"},i={primitive:"plane"},function(){var e,t,n=this.data,o=this.el;(t=document.createElement("a-entity")).classList.add("raycasterTarget"),n.bindToggle?t.setAttribute("bind-toggle__raycastable",n.bindToggle):t.setAttribute("data-raycastable",""),n.useBoxTarget?((e=r).depth=n.depth,e.height=n.height,e.width=n.width):((e=i).height=n.height,e.width=n.width),t.setAttribute("geometry",e),t.object3D.visible=!1,t.object3D.position.copy(n.position),t.object3D.rotation.x=THREE.Math.degToRad(n.rotation.x),t.object3D.rotation.y=THREE.Math.degToRad(n.rotation.y),t.object3D.rotation.z=THREE.Math.degToRad(n.rotation.z),o.appendChild(t)})}),window.AFRAME){const t=["raycaster-target"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){var r,i,o,a;if(AFRAME.registerComponent("recenter",{schema:{enabled:{default:!0}},init:function(){this.el.sceneEl,this.recenter=this.recenter.bind(this),document.querySelectorAll("[tracked-controls]").forEach(e=>{e.addEventListener("menudown",this.recenter),e.addEventListener("thumbstickdown",this.recenter)}),this.el.addEventListener("recenter",this.recenter)},recenter:(r=new THREE.Euler,i=new THREE.Matrix4,o=new THREE.Matrix4,a=new THREE.Matrix4,function(){const e=this.el;if(!this.data.enabled)return;const t=e.sceneEl.camera.el.object3D;i.identity(),r.set(0,-1*t.rotation.y,0),o.makeRotationFromEuler(r),a.makeTranslation(-1*t.position.x,0,-1*t.position.z),i.multiply(o).multiply(a),i.decompose(e.object3D.position,e.object3D.quaternion,e.object3D.scale),e.object3D.updateMatrixWorld(!0),e.emit("recentered",null,!1)})}),window.AFRAME){const t=["recenter"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerShader("ring",{schema:{blur:{default:.01,is:"uniform"},color:{type:"color",is:"uniform"},progress:{default:0,is:"uniform"},radiusInner:{default:.6,is:"uniform"},radiusOuter:{default:1,is:"uniform"}},vertexShader:n(144),fragmentShader:n(145)}),window.AFRAME){const t=[],n=["ring"],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t){e.exports="varying vec2 vUv;\n\nvoid main () {\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n"},function(e,t){e.exports="#if __VERSION__ == 100\n  #extension GL_OES_standard_derivatives : enable\n#endif\n#define PI 3.14159265358979\nuniform float blur;\nuniform float progress;\nuniform float radiusInner;\nuniform float radiusOuter;\nuniform vec3 color;\n\nvarying vec2 vUv;\n\nvoid main () {\n  // make uvs go from -1 to 1\n  vec2 uv = vec2(vUv.x * 2.0 - 1.0, vUv.y * 2.0 - 1.0);\n  // calculate distance of fragment to center\n  float r = uv.x * uv.x + uv.y * uv.y;\n  // calculate antialias\n  float aa = fwidth(r);\n  // make full circle (radiusOuter - radiusInner)\n  float col = (1.0 - smoothstep(radiusOuter - aa, radiusOuter + blur + aa, r)) * smoothstep(radiusInner - aa, radiusInner + blur + aa, r);\n  // radial gradient\n  float a = smoothstep(-PI-aa, PI+aa, atan(uv.y, uv.x));\n  // progress angle\n  float p = 1.0 - progress - blur;\n  // apply progress to full circle (1 for done part, 0 for part to go)\n  col *= smoothstep(p, p + blur, a);\n  // multiply by user color\n  gl_FragColor = vec4(color * col, col);\n}\n"},function(e,t,n){if(AFRAME.registerComponent("score-texts",{schema:{isLoading:{default:!1}},init:function(){this.textEls=this.el.querySelectorAll("[text]");for(let e=0;e<this.textEls.length;e++)this.textEls[e].setAttribute("animation__fadein",{autoplay:!1,property:"components.text.material.uniforms.opacity.value",delay:250,dur:750,easing:"easeInOutCubic",from:0,to:1})},update:function(e){if(e.isLoading&&!this.data.isLoading){for(let e=0;e<this.textEls.length;e++)this.textEls[e].components.animation__fadein.beginAnimation();this.el.sceneEl.emit("textglownormal",null,!1)}if(!e.isLoading&&this.data.isLoading){for(let e=0;e<this.textEls.length;e++)this.textEls[e].components.text.material.uniforms.opacity.value=0;this.el.sceneEl.emit("textglowoff",null,!1)}}}),window.AFRAME){const t=["score-texts"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){"use strict";n.r(t);var r=n(1),i=n.n(r);if(AFRAME.registerComponent("search-thumbnail-atlas",{dependencies:["geometry","material"],schema:{dummyUpdater:{type:"string"}},init:function(){const e=this.canvas=document.createElement("canvas");e.setAttribute("id","thumbnailAtlasMap"),e.height=512,e.width=64,e.style.visibility="hidden",this.ctx=e.getContext("2d"),this.clearCanvas(),document.body.appendChild(e);const t=this.alphaCanvas=document.createElement("canvas");t.setAttribute("id","thumbnailAlphaMap"),t.height=512,t.width=64,t.style.visibility="hidden",this.alphaCtx=t.getContext("2d"),document.body.appendChild(t),this.el.components.material.material.alphaMap=new THREE.CanvasTexture(t),this.el.setAttribute("material","src",e),this.images=[],this.lastNumResults=6},update:function(){const e=this.el.sceneEl.systems.state.state.searchResultsPage;for(let t=0;t<e.length;t++){let n=this.images[t]=this.images[t]||document.createElement("img");n.crossOrigin="anonymous",n.src=i.a.getS3FileUrl(e[t].id,"image.jpg"),n.complete?this.draw(n,t):n.onload=()=>{this.draw(n,t)}}e.length!==this.lastNumResults&&this.updateAlphaMap(e.length),this.lastNumResults=e.length},draw:function(e,t){this.ctx.drawImage(e,0,t*(512/384*64),64,512/384*64),this.el.getObject3D("mesh").material.map.needsUpdate=!0},clearCanvas:function(){const e=this.canvas;this.ctx.fillStyle="#111",this.ctx.fillRect(0,0,e.width,e.height)},updateAlphaMap:function(e){const t=this.alphaCanvas,n=this.alphaCtx;n.fillStyle="#FFF",n.fillRect(0,0,t.width,t.height),n.fillStyle="#000",n.fillRect(0,e*(512/384*64),t.width,t.height-e*(512/384*64)),this.el.getObject3D("mesh").material.alphaMap.needsUpdate=!0,this.el.getObject3D("mesh").material.needsUpdate=!0}}),window.AFRAME){const t=["search-thumbnail-atlas"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){const r=n(149),i=n(170),o=r("QULTOY3ZWU","be07164192471df7e97e6fa70c1d041d").initIndex("beatsaver"),a=n(171),s=[];if(AFRAME.registerComponent("search",{schema:{difficultyFilter:{default:"All"},genre:{default:""},playlist:{default:""},query:{default:""}},init:function(){this.eventDetail={query:"",results:a},this.keyboardEl=document.getElementById("keyboard"),this.popularHits=a,function(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}}(this.popularHits),this.queryObject={hitsPerPage:0,query:""},this.el.sceneEl.addEventListener("searchclear",()=>{this.search("")})},update:function(e){this.popularHits&&(this.search(this.data.query),e.query&&!this.data.query&&(this.keyboardEl.components["super-keyboard"].data.value="",this.keyboardEl.components["super-keyboard"].updateTextInput("")),this.debouncedSearch=i(this.search.bind(this),1e3))},play:function(){this.el.sceneEl.emit("searchresults",this.eventDetail),this.search("")},events:{superkeyboardchange:function(e){e.target===this.el&&this.debouncedSearch(e.detail.value)}},search:function(e){return e||"All"!==this.data.difficultyFilter||this.data.genre||this.data.playlist||!this.popularHits?(this.eventDetail.query=e,this.queryObject.query=e,this.queryObject.hitsPerPage=e?30:150,"favorites"===this.data.playlist?(this.eventDetail.results=JSON.parse(localStorage.getItem("favorites")),void this.el.sceneEl.emit("searchresults",this.eventDetail)):(this.data.difficultyFilter||this.data.genre||this.data.playlist?(s.length=0,this.data.difficultyFilter&&"All"!==this.data.difficultyFilter&&s.push(`difficulties:"${this.data.difficultyFilter}"`),"Video Games"===this.data.genre?s.push('genre:"Video Game" OR genre:"Video Games"'):this.data.genre&&s.push(`genre:"${this.data.genre}"`),this.data.playlist&&s.push(`playlists:"${this.data.playlist}"`),this.queryObject.filters=s.join(" AND ")):delete this.queryObject.filters,void(e&&e.length<3||o.search(this.queryObject,(e,t)=>{if(e)return this.el.sceneEl.emit("searcherror",null,!1),void console.error(e);this.eventDetail.results=t.hits,this.el.sceneEl.emit("searchresults",this.eventDetail)})))):(this.eventDetail.results=this.popularHits,this.eventDetail.query="",void this.el.sceneEl.emit("searchresults",this.eventDetail))}}),AFRAME.registerComponent("search-result-list",{init:function(){new MutationObserver(e=>{for(let t=0;t<e.length;t++)"data-index"===e[t].attributeName&&this.refreshLayout()}).observe(this.el,{attributes:!0,childList:!1,subtree:!0})},events:{click:function(e){this.el.sceneEl.emit("menuchallengeselect",e.target.closest(".searchResult").dataset.id,!1)}},refreshLayout:function(){this.el.emit("layoutrefresh",null,!1)}}),window.AFRAME){const t=["search","search-result-list"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){"use strict";var r=n(150),i=n(161);e.exports=i(r,"Browser (lite)")},function(e,t,n){(function(t){e.exports=u;var r=n(9),i=n(151),o=n(152),a=n(158),s=t.env.RESET_APP_DATA_TIMER&&parseInt(t.env.RESET_APP_DATA_TIMER,10)||12e4;function u(e,t,i){var o=n(12)("algoliasearch"),a=n(4),s=n(10),u=n(11),c="Usage: algoliasearch(applicationID, apiKey, opts)";if(!0!==i._allowEmptyCredentials&&!e)throw new r.AlgoliaSearchError("Please provide an application ID. "+c);if(!0!==i._allowEmptyCredentials&&!t)throw new r.AlgoliaSearchError("Please provide an API key. "+c);this.applicationID=e,this.apiKey=t,this.hosts={read:[],write:[]},i=i||{},this._timeouts=i.timeouts||{connect:1e3,read:2e3,write:3e4},i.timeout&&(this._timeouts.connect=this._timeouts.read=this._timeouts.write=i.timeout);var h=i.protocol||"https:";if(/:$/.test(h)||(h+=":"),"http:"!==h&&"https:"!==h)throw new r.AlgoliaSearchError("protocol must be `http:` or `https:` (was `"+i.protocol+"`)");if(this._checkAppIdData(),i.hosts)s(i.hosts)?(this.hosts.read=a(i.hosts),this.hosts.write=a(i.hosts)):(this.hosts.read=a(i.hosts.read),this.hosts.write=a(i.hosts.write));else{var d=u(this._shuffleResult,(function(t){return e+"-"+t+".algolianet.com"})),f=(!1===i.dsn?"":"-dsn")+".algolia.net";this.hosts.read=[this.applicationID+f].concat(d),this.hosts.write=[this.applicationID+".algolia.net"].concat(d)}this.hosts.read=u(this.hosts.read,l(h)),this.hosts.write=u(this.hosts.write,l(h)),this.extraHeaders={},this.cache=i._cache||{},this._ua=i._ua,this._useCache=!(void 0!==i._useCache&&!i._cache)||i._useCache,this._useRequestCache=this._useCache&&i._useRequestCache,this._useFallback=void 0===i.useFallback||i.useFallback,this._setTimeout=i._setTimeout,o("init done, %j",this)}function l(e){return function(t){return e+"//"+t.toLowerCase()}}function c(e){if(void 0===Array.prototype.toJSON)return JSON.stringify(e);var t=Array.prototype.toJSON;delete Array.prototype.toJSON;var n=JSON.stringify(e);return Array.prototype.toJSON=t,n}function h(e){var t={};for(var n in e){var r;Object.prototype.hasOwnProperty.call(e,n)&&(r="x-algolia-api-key"===n||"x-algolia-application-id"===n?"**hidden for security purposes**":e[n],t[n]=r)}return t}u.prototype.initIndex=function(e){return new o(this,e)},u.prototype.setExtraHeader=function(e,t){this.extraHeaders[e.toLowerCase()]=t},u.prototype.getExtraHeader=function(e){return this.extraHeaders[e.toLowerCase()]},u.prototype.unsetExtraHeader=function(e){delete this.extraHeaders[e.toLowerCase()]},u.prototype.addAlgoliaAgent=function(e){var t="; "+e;-1===this._ua.indexOf(t)&&(this._ua+=t)},u.prototype._jsonRequest=function(e){this._checkAppIdData();var t,o,a,s=n(12)("algoliasearch:"+e.url),u=e.additionalUA||"",l=e.cache,d=this,f=0,p=!1,m=d._useFallback&&d._request.fallback&&e.fallback;this.apiKey.length>500&&void 0!==e.body&&(void 0!==e.body.params||void 0!==e.body.requests)?(e.body.apiKey=this.apiKey,a=this._computeRequestHeaders({additionalUA:u,withApiKey:!1,headers:e.headers})):a=this._computeRequestHeaders({additionalUA:u,headers:e.headers}),void 0!==e.body&&(t=c(e.body)),s("request start");var g=[];function y(e,t,n){return d._useCache&&e&&t&&void 0!==t[n]}function v(t,n){if(y(d._useRequestCache,l,o)&&t.catch((function(){delete l[o]})),"function"!=typeof e.callback)return t.then(n);t.then((function(t){i((function(){e.callback(null,n(t))}),d._setTimeout||setTimeout)}),(function(t){i((function(){e.callback(t)}),d._setTimeout||setTimeout)}))}if(d._useCache&&d._useRequestCache&&(o=e.url),d._useCache&&d._useRequestCache&&t&&(o+="_body_"+t),y(d._useRequestCache,l,o)){s("serving request from cache");var b=l[o];return v("function"!=typeof b.then?d._promise.resolve({responseText:b}):b,(function(e){return JSON.parse(e.responseText)}))}var A=function n(i,v){d._checkAppIdData();var b=new Date;if(d._useCache&&!d._useRequestCache&&(o=e.url),d._useCache&&!d._useRequestCache&&t&&(o+="_body_"+v.body),y(!d._useRequestCache,l,o)){s("serving response from cache");var A=l[o];return d._promise.resolve({body:JSON.parse(A),responseText:A})}if(f>=d.hosts[e.hostType].length)return!m||p?(s("could not get any response"),d._promise.reject(new r.AlgoliaSearchError("Cannot connect to the AlgoliaSearch API. Send an email to support@algolia.com to report and resolve the issue. Application id was: "+d.applicationID,{debugData:g}))):(s("switching to fallback"),f=0,v.method=e.fallback.method,v.url=e.fallback.url,v.jsonBody=e.fallback.body,v.jsonBody&&(v.body=c(v.jsonBody)),a=d._computeRequestHeaders({additionalUA:u,headers:e.headers}),v.timeouts=d._getTimeoutsForRequest(e.hostType),d._setHostIndexByType(0,e.hostType),p=!0,n(d._request.fallback,v));var E=d._getHostByType(e.hostType),w=E+v.url,S={body:v.body,jsonBody:v.jsonBody,method:v.method,headers:a,timeouts:v.timeouts,debug:s,forceAuthHeaders:v.forceAuthHeaders};return s("method: %s, url: %s, headers: %j, timeouts: %d",S.method,w,S.headers,S.timeouts),i===d._request.fallback&&s("using fallback"),i.call(d,w,S).then((function(e){var n=e&&e.body&&e.body.message&&e.body.status||e.statusCode||e&&e.body&&200;s("received response: statusCode: %s, computed statusCode: %d, headers: %j",e.statusCode,n,e.headers);var i=2===Math.floor(n/100),u=new Date;if(g.push({currentHost:E,headers:h(a),content:t||null,contentLength:void 0!==t?t.length:null,method:v.method,timeouts:v.timeouts,url:v.url,startTime:b,endTime:u,duration:u-b,statusCode:n}),i)return d._useCache&&!d._useRequestCache&&l&&(l[o]=e.responseText),{responseText:e.responseText,body:e.body};if(4!==Math.floor(n/100))return f+=1,_();s("unrecoverable error");var c=new r.AlgoliaSearchError(e.body&&e.body.message,{debugData:g,statusCode:n});return d._promise.reject(c)}),(function(o){s("error: %s, stack: %s",o.message,o.stack);var u=new Date;return g.push({currentHost:E,headers:h(a),content:t||null,contentLength:void 0!==t?t.length:null,method:v.method,timeouts:v.timeouts,url:v.url,startTime:b,endTime:u,duration:u-b}),o instanceof r.AlgoliaSearchError||(o=new r.Unknown(o&&o.message,o)),f+=1,o instanceof r.Unknown||o instanceof r.UnparsableJSON||f>=d.hosts[e.hostType].length&&(p||!m)?(o.debugData=g,d._promise.reject(o)):o instanceof r.RequestTimeout?(s("retrying request with higher timeout"),d._incrementHostIndex(e.hostType),d._incrementTimeoutMultipler(),v.timeouts=d._getTimeoutsForRequest(e.hostType),n(i,v)):_()}));function _(){return s("retrying request"),d._incrementHostIndex(e.hostType),n(i,v)}}(d._request,{url:e.url,method:e.method,body:t,jsonBody:e.body,timeouts:d._getTimeoutsForRequest(e.hostType),forceAuthHeaders:e.forceAuthHeaders});return d._useCache&&d._useRequestCache&&l&&(l[o]=A),v(A,(function(e){return e.body}))},u.prototype._getSearchParams=function(e,t){if(null==e)return t;for(var n in e)null!==n&&void 0!==e[n]&&e.hasOwnProperty(n)&&(t+=""===t?"":"&",t+=n+"="+encodeURIComponent("[object Array]"===Object.prototype.toString.call(e[n])?c(e[n]):e[n]));return t},u.prototype._computeRequestHeaders=function(e){var t=n(3),r={"x-algolia-agent":e.additionalUA?this._ua+"; "+e.additionalUA:this._ua,"x-algolia-application-id":this.applicationID};return!1!==e.withApiKey&&(r["x-algolia-api-key"]=this.apiKey),this.userToken&&(r["x-algolia-usertoken"]=this.userToken),this.securityTags&&(r["x-algolia-tagfilters"]=this.securityTags),t(this.extraHeaders,(function(e,t){r[t]=e})),e.headers&&t(e.headers,(function(e,t){r[t]=e})),r},u.prototype.search=function(e,t,r){var i=n(10),o=n(11);if(!i(e))throw new Error("Usage: client.search(arrayOfQueries[, callback])");"function"==typeof t?(r=t,t={}):void 0===t&&(t={});var a=this,s={requests:o(e,(function(e){var t="";return void 0!==e.query&&(t+="query="+encodeURIComponent(e.query)),{indexName:e.indexName,params:a._getSearchParams(e.params,t)}}))},u=o(s.requests,(function(e,t){return t+"="+encodeURIComponent("/1/indexes/"+encodeURIComponent(e.indexName)+"?"+e.params)})).join("&");return void 0!==t.strategy&&(s.strategy=t.strategy),this._jsonRequest({cache:this.cache,method:"POST",url:"/1/indexes/*/queries",body:s,hostType:"read",fallback:{method:"GET",url:"/1/indexes/*",body:{params:u}},callback:r})},u.prototype.searchForFacetValues=function(e){var t=n(10),r=n(11),i="Usage: client.searchForFacetValues([{indexName, params: {facetName, facetQuery, ...params}}, ...queries])";if(!t(e))throw new Error(i);var o=this;return o._promise.all(r(e,(function(e){if(!e||void 0===e.indexName||void 0===e.params.facetName||void 0===e.params.facetQuery)throw new Error(i);var t=n(4),r=n(29),a=e.indexName,s=e.params,u=s.facetName,l=r(t(s),(function(e){return"facetName"===e})),c=o._getSearchParams(l,"");return o._jsonRequest({cache:o.cache,method:"POST",url:"/1/indexes/"+encodeURIComponent(a)+"/facets/"+encodeURIComponent(u)+"/query",hostType:"read",body:{params:c}})})))},u.prototype.setSecurityTags=function(e){if("[object Array]"===Object.prototype.toString.call(e)){for(var t=[],n=0;n<e.length;++n)if("[object Array]"===Object.prototype.toString.call(e[n])){for(var r=[],i=0;i<e[n].length;++i)r.push(e[n][i]);t.push("("+r.join(",")+")")}else t.push(e[n]);e=t.join(",")}this.securityTags=e},u.prototype.setUserToken=function(e){this.userToken=e},u.prototype.clearCache=function(){this.cache={}},u.prototype.setRequestTimeout=function(e){e&&(this._timeouts.connect=this._timeouts.read=this._timeouts.write=e)},u.prototype.setTimeouts=function(e){this._timeouts=e},u.prototype.getTimeouts=function(){return this._timeouts},u.prototype._getAppIdData=function(){var e=a.get(this.applicationID);return null!==e&&this._cacheAppIdData(e),e},u.prototype._setAppIdData=function(e){return e.lastChange=(new Date).getTime(),this._cacheAppIdData(e),a.set(this.applicationID,e)},u.prototype._checkAppIdData=function(){var e=this._getAppIdData(),t=(new Date).getTime();return null===e||t-e.lastChange>s?this._resetInitialAppIdData(e):e},u.prototype._resetInitialAppIdData=function(e){var t=e||{};return t.hostIndexes={read:0,write:0},t.timeoutMultiplier=1,t.shuffleResult=t.shuffleResult||function(e){for(var t,n,r=e.length;0!==r;)n=Math.floor(Math.random()*r),t=e[r-=1],e[r]=e[n],e[n]=t;return e}([1,2,3]),this._setAppIdData(t)},u.prototype._cacheAppIdData=function(e){this._hostIndexes=e.hostIndexes,this._timeoutMultiplier=e.timeoutMultiplier,this._shuffleResult=e.shuffleResult},u.prototype._partialAppIdDataUpdate=function(e){var t=n(3),r=this._getAppIdData();return t(e,(function(e,t){r[t]=e})),this._setAppIdData(r)},u.prototype._getHostByType=function(e){return this.hosts[e][this._getHostIndexByType(e)]},u.prototype._getTimeoutMultiplier=function(){return this._timeoutMultiplier},u.prototype._getHostIndexByType=function(e){return this._hostIndexes[e]},u.prototype._setHostIndexByType=function(e,t){var r=n(4)(this._hostIndexes);return r[t]=e,this._partialAppIdDataUpdate({hostIndexes:r}),e},u.prototype._incrementHostIndex=function(e){return this._setHostIndexByType((this._getHostIndexByType(e)+1)%this.hosts[e].length,e)},u.prototype._incrementTimeoutMultipler=function(){var e=Math.max(this._timeoutMultiplier+1,4);return this._partialAppIdDataUpdate({timeoutMultiplier:e})},u.prototype._getTimeoutsForRequest=function(e){return{connect:this._timeouts.connect*this._timeoutMultiplier,complete:this._timeouts[e]*this._timeoutMultiplier}}}).call(this,n(8))},function(e,t){e.exports=function(e,t){t(e,0)}},function(e,t,n){var r=n(28),i=n(153),o=n(154);function a(e,t){this.indexName=t,this.as=e,this.typeAheadArgs=null,this.typeAheadValueOption=null,this.cache={}}e.exports=a,a.prototype.clearCache=function(){this.cache={}},a.prototype.search=r("query"),a.prototype.similarSearch=i(r("similarQuery"),o("index.similarSearch(query[, callback])","index.search({ similarQuery: query }[, callback])")),a.prototype.browse=function(e,t,r){var i,o,a=n(155),s=this;0===arguments.length||1===arguments.length&&"function"==typeof arguments[0]?(i=0,r=arguments[0],e=void 0):"number"==typeof arguments[0]?(i=arguments[0],"number"==typeof arguments[1]?o=arguments[1]:"function"==typeof arguments[1]&&(r=arguments[1],o=void 0),e=void 0,t=void 0):"object"==typeof arguments[0]?("function"==typeof arguments[1]&&(r=arguments[1]),t=arguments[0],e=void 0):"string"==typeof arguments[0]&&"function"==typeof arguments[1]&&(r=arguments[1],t=void 0),t=a({},t||{},{page:i,hitsPerPage:o,query:e});var u=this.as._getSearchParams(t,"");return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(s.indexName)+"/browse",body:{params:u},hostType:"read",callback:r})},a.prototype.browseFrom=function(e,t){return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/browse",body:{cursor:e},hostType:"read",callback:t})},a.prototype.searchForFacetValues=function(e,t){var r=n(4),i=n(29);if(void 0===e.facetName||void 0===e.facetQuery)throw new Error("Usage: index.searchForFacetValues({facetName, facetQuery, ...params}[, callback])");var o=e.facetName,a=i(r(e),(function(e){return"facetName"===e})),s=this.as._getSearchParams(a,"");return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/facets/"+encodeURIComponent(o)+"/query",hostType:"read",body:{params:s},callback:t})},a.prototype.searchFacet=i((function(e,t){return this.searchForFacetValues(e,t)}),o("index.searchFacet(params[, callback])","index.searchForFacetValues(params[, callback])")),a.prototype._search=function(e,t,n,r){return this.as._jsonRequest({cache:this.cache,method:"POST",url:t||"/1/indexes/"+encodeURIComponent(this.indexName)+"/query",body:{params:e},hostType:"read",fallback:{method:"GET",url:"/1/indexes/"+encodeURIComponent(this.indexName),body:{params:e}},callback:n,additionalUA:r})},a.prototype.getObject=function(e,t,n){var r=this;1!==arguments.length&&"function"!=typeof t||(n=t,t=void 0);var i="";if(void 0!==t){i="?attributes=";for(var o=0;o<t.length;++o)0!==o&&(i+=","),i+=t[o]}return this.as._jsonRequest({method:"GET",url:"/1/indexes/"+encodeURIComponent(r.indexName)+"/"+encodeURIComponent(e)+i,hostType:"read",callback:n})},a.prototype.getObjects=function(e,t,r){var i=n(10),o=n(11),a="Usage: index.getObjects(arrayOfObjectIDs[, callback])";if(!i(e))throw new Error(a);var s=this;1!==arguments.length&&"function"!=typeof t||(r=t,t=void 0);var u={requests:o(e,(function(e){var n={indexName:s.indexName,objectID:e};return t&&(n.attributesToRetrieve=t.join(",")),n}))};return this.as._jsonRequest({method:"POST",url:"/1/indexes/*/objects",hostType:"read",body:u,callback:r})},a.prototype.as=null,a.prototype.indexName=null,a.prototype.typeAheadArgs=null,a.prototype.typeAheadValueOption=null},function(e,t){e.exports=function(e,t){var n=!1;return function(){return n||(console.warn(t),n=!0),e.apply(this,arguments)}}},function(e,t){e.exports=function(e,t){var n=e.toLowerCase().replace(/[\.\(\)]/g,"");return"algoliasearch: `"+e+"` was replaced by `"+t+"`. Please see https://github.com/algolia/algoliasearch-client-javascript/wiki/Deprecated#"+n}},function(e,t,n){var r=n(3);e.exports=function e(t){var n=Array.prototype.slice.call(arguments);return r(n,(function(n){for(var r in n)n.hasOwnProperty(r)&&("object"==typeof t[r]&&"object"==typeof n[r]?t[r]=e({},t[r],n[r]):void 0!==n[r]&&(t[r]=n[r]))})),t}},function(e,t,n){"use strict";var r=Array.prototype.slice,i=n(30),o=Object.keys,a=o?function(e){return o(e)}:n(157),s=Object.keys;a.shim=function(){return Object.keys?function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2)||(Object.keys=function(e){return i(e)?s(r.call(e)):s(e)}):Object.keys=a,Object.keys||a},e.exports=a},function(e,t,n){"use strict";var r;if(!Object.keys){var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,a=n(30),s=Object.prototype.propertyIsEnumerable,u=!s.call({toString:null},"toString"),l=s.call((function(){}),"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],h=function(e){var t=e.constructor;return t&&t.prototype===e},d={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!d["$"+e]&&i.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{h(window[e])}catch(e){return!0}}catch(e){return!0}return!1}();r=function(e){var t=null!==e&&"object"==typeof e,n="[object Function]"===o.call(e),r=a(e),s=t&&"[object String]"===o.call(e),d=[];if(!t&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var p=l&&n;if(s&&e.length>0&&!i.call(e,0))for(var m=0;m<e.length;++m)d.push(String(m));if(r&&e.length>0)for(var g=0;g<e.length;++g)d.push(String(g));else for(var y in e)p&&"prototype"===y||!i.call(e,y)||d.push(String(y));if(u)for(var v=function(e){if("undefined"==typeof window||!f)return h(e);try{return h(e)}catch(e){return!1}}(e),b=0;b<c.length;++b)v&&"constructor"===c[b]||!i.call(e,c[b])||d.push(c[b]);return d}}e.exports=r},function(e,t,n){(function(t){var r,i=n(12)("algoliasearch:src/hostIndexState.js"),o="algoliasearch-client-js",a={state:{},set:function(e,t){return this.state[e]=t,this.state[e]},get:function(e){return this.state[e]||null}},s={set:function(e,n){a.set(e,n);try{var r=JSON.parse(t.localStorage[o]);return r[e]=n,t.localStorage[o]=JSON.stringify(r),r[e]}catch(t){return u(e,t)}},get:function(e){try{return JSON.parse(t.localStorage[o])[e]||null}catch(t){return u(e,t)}}};function u(e,n){return i("localStorage failed with",n),function(){try{t.localStorage.removeItem(o)}catch(e){}}(),(r=a).get(e)}function l(e,t){return 1===arguments.length?r.get(e):r.set(e,t)}function c(){try{return"localStorage"in t&&null!==t.localStorage&&(t.localStorage[o]||t.localStorage.setItem(o,JSON.stringify({})),!0)}catch(e){return!1}}r=c()?s:a,e.exports={get:l,set:l,supportsLocalStorage:c}}).call(this,n(2))},function(e,t,n){e.exports=function(e){function t(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){let n;function a(...e){if(!a.enabled)return;const t=a,i=Number(new Date),o=i-(n||i);t.diff=o,t.prev=n,t.curr=i,n=i,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,i)=>{if("%%"===n)return n;s++;const o=r.formatters[i];if("function"==typeof o){const r=e[s];n=o.call(t,r),e.splice(s,1),s--}return n}),r.formatArgs.call(t,e),(t.log||r.log).apply(t,e)}return a.namespace=e,a.enabled=r.enabled(e),a.useColors=r.useColors(),a.color=t(e),a.destroy=i,a.extend=o,"function"==typeof r.init&&r.init(a),r.instances.push(a),a}function i(){const e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function o(e,t){const n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function a(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(e){return e instanceof Error?e.stack||e.message:e},r.disable=function(){const e=[...r.names.map(a),...r.skips.map(a).map(e=>"-"+e)].join(",");return r.enable(""),e},r.enable=function(e){let t;r.save(e),r.names=[],r.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){const e=r.instances[t];e.enabled=r.enabled(e.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=n(160),Object.keys(e).forEach(t=>{r[t]=e[t]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}},function(e,t){var n=1e3,r=6e4,i=60*r,o=24*i;function a(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var s,u=typeof e;if("string"===u&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var a=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"days":case"day":case"d":return a*o;case"hours":case"hour":case"hrs":case"hr":case"h":return a*i;case"minutes":case"minute":case"mins":case"min":case"m":return a*r;case"seconds":case"second":case"secs":case"sec":case"s":return a*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(e);if("number"===u&&!1===isNaN(e))return t.long?a(s=e,o,"day")||a(s,i,"hour")||a(s,r,"minute")||a(s,n,"second")||s+" ms":function(e){return e>=o?Math.round(e/o)+"d":e>=i?Math.round(e/i)+"h":e>=r?Math.round(e/r)+"m":e>=n?Math.round(e/n)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){"use strict";var r=n(162),i=r.Promise||n(163).Promise;e.exports=function(e,t){var o=n(27),a=n(9),s=n(164),u=n(165),l=n(166);function c(e,t,r){return(r=n(4)(r||{}))._ua=r._ua||c.ua,new d(e,t,r)}t=t||"",c.version=n(169),c.ua="Algolia for JavaScript ("+c.version+"); "+t,c.initPlaces=l(c),r.__algolia={debug:n(12),algoliasearch:c};var h={hasXMLHttpRequest:"XMLHttpRequest"in r,hasXDomainRequest:"XDomainRequest"in r};function d(){e.apply(this,arguments)}return h.hasXMLHttpRequest&&(h.cors="withCredentials"in new XMLHttpRequest),o(d,e),d.prototype._request=function(e,t){return new i((function(n,r){if(h.cors||h.hasXDomainRequest){e=s(e,t.headers);var i,o,u=t.body,l=h.cors?new XMLHttpRequest:new XDomainRequest,c=!1;i=setTimeout(d,t.timeouts.connect),l.onprogress=function(){c||f()},"onreadystatechange"in l&&(l.onreadystatechange=function(){!c&&l.readyState>1&&f()}),l.onload=function(){if(!o){var e;clearTimeout(i);try{e={body:JSON.parse(l.responseText),responseText:l.responseText,statusCode:l.status,headers:l.getAllResponseHeaders&&l.getAllResponseHeaders()||{}}}catch(t){e=new a.UnparsableJSON({more:l.responseText})}e instanceof a.UnparsableJSON?r(e):n(e)}},l.onerror=function(e){o||(clearTimeout(i),r(new a.Network({more:e})))},l instanceof XMLHttpRequest?(l.open(t.method,e,!0),t.forceAuthHeaders&&(l.setRequestHeader("x-algolia-application-id",t.headers["x-algolia-application-id"]),l.setRequestHeader("x-algolia-api-key",t.headers["x-algolia-api-key"]))):l.open(t.method,e),h.cors&&(u&&("POST"===t.method?l.setRequestHeader("content-type","application/x-www-form-urlencoded"):l.setRequestHeader("content-type","application/json")),l.setRequestHeader("accept","application/json")),u?l.send(u):l.send()}else r(new a.Network("CORS not supported"));function d(){o=!0,l.abort(),r(new a.RequestTimeout)}function f(){c=!0,clearTimeout(i),i=setTimeout(d,t.timeouts.complete)}}))},d.prototype._request.fallback=function(e,t){return e=s(e,t.headers),new i((function(n,r){u(e,t,(function(e,t){e?r(e):n(t)}))}))},d.prototype._promise={reject:function(e){return i.reject(e)},resolve:function(e){return i.resolve(e)},delay:function(e){return new i((function(t){setTimeout(t,e)}))},all:function(e){return i.all(e)}},c}},function(e,t,n){(function(t){var n;n="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},e.exports=n}).call(this,n(2))},function(e,t,n){(function(t,n){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */
var r;r=function(){"use strict";function e(e){return"function"==typeof e}var r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=0,o=void 0,a=void 0,s=function(e,t){p[i]=e,p[i+1]=t,2===(i+=2)&&(a?a(m):A())},u="undefined"!=typeof window?window:void 0,l=u||{},c=l.MutationObserver||l.WebKitMutationObserver,h="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),d="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function f(){var e=setTimeout;return function(){return e(m,1)}}var p=new Array(1e3);function m(){for(var e=0;e<i;e+=2)(0,p[e])(p[e+1]),p[e]=void 0,p[e+1]=void 0;i=0}var g,y,v,b,A=void 0;function E(e,t){var n=this,r=new this.constructor(_);void 0===r[S]&&I(r);var i=n._state;if(i){var o=arguments[i-1];s((function(){return F(i,r,o,n._result)}))}else D(n,r,e,t);return r}function w(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(_);return R(t,e),t}h?A=function(){return t.nextTick(m)}:c?(y=0,v=new c(m),b=document.createTextNode(""),v.observe(b,{characterData:!0}),A=function(){b.data=y=++y%2}):d?((g=new MessageChannel).port1.onmessage=m,A=function(){return g.port2.postMessage(0)}):A=void 0===u?function(){try{var e=Function("return this")().require("vertx");return void 0!==(o=e.runOnLoop||e.runOnContext)?function(){o(m)}:f()}catch(e){return f()}}():f();var S=Math.random().toString(36).substring(2);function _(){}var x=void 0;function k(t,n,r){n.constructor===t.constructor&&r===E&&n.constructor.resolve===w?function(e,t){1===t._state?T(e,t._result):2===t._state?M(e,t._result):D(t,void 0,(function(t){return R(e,t)}),(function(t){return M(e,t)}))}(t,n):void 0===r?T(t,n):e(r)?function(e,t,n){s((function(e){var r=!1,i=function(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}(n,t,(function(n){r||(r=!0,t!==n?R(e,n):T(e,n))}),(function(t){r||(r=!0,M(e,t))}),e._label);!r&&i&&(r=!0,M(e,i))}),e)}(t,n,r):T(t,n)}function R(e,t){if(e===t)M(e,new TypeError("You cannot resolve a promise with itself"));else if(i=typeof(r=t),null===r||"object"!==i&&"function"!==i)T(e,t);else{var n=void 0;try{n=t.then}catch(t){return void M(e,t)}k(e,t,n)}var r,i}function N(e){e._onerror&&e._onerror(e._result),O(e)}function T(e,t){e._state===x&&(e._result=t,e._state=1,0!==e._subscribers.length&&s(O,e))}function M(e,t){e._state===x&&(e._state=2,e._result=t,s(N,e))}function D(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+1]=n,i[o+2]=r,0===o&&e._state&&s(O,e)}function O(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,i=void 0,o=e._result,a=0;a<t.length;a+=3)r=t[a],i=t[a+n],r?F(n,r,i,o):i(o);e._subscribers.length=0}}function F(t,n,r,i){var o=e(r),a=void 0,s=void 0,u=!0;if(o){try{a=r(i)}catch(e){u=!1,s=e}if(n===a)return void M(n,new TypeError("A promises callback cannot return that same promise."))}else a=i;n._state!==x||(o&&u?R(n,a):!1===u?M(n,s):1===t?T(n,a):2===t&&M(n,a))}var C=0;function I(e){e[S]=C++,e._state=void 0,e._result=void 0,e._subscribers=[]}var P=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(_),this.promise[S]||I(this.promise),r(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?T(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&T(this.promise,this._result))):M(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===x&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===w){var i=void 0,o=void 0,a=!1;try{i=e.then}catch(e){a=!0,o=e}if(i===E&&e._state!==x)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===L){var s=new n(_);a?M(s,o):k(s,e,i),this._willSettleAt(s,t)}else this._willSettleAt(new n((function(t){return t(e)})),t)}else this._willSettleAt(r(e),t)},e.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===x&&(this._remaining--,2===e?M(r,n):this._result[t]=n),0===this._remaining&&T(r,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;D(e,void 0,(function(e){return n._settledAt(1,t,e)}),(function(e){return n._settledAt(2,t,e)}))},e}(),L=function(){function t(e){this[S]=C++,this._result=this._state=void 0,this._subscribers=[],_!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(e,t){try{t((function(t){R(e,t)}),(function(t){M(e,t)}))}catch(t){M(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(t){var n=this.constructor;return e(t)?this.then((function(e){return n.resolve(t()).then((function(){return e}))}),(function(e){return n.resolve(t()).then((function(){throw e}))})):this.then(t,t)},t}();return L.prototype.then=E,L.all=function(e){return new P(this,e).promise},L.race=function(e){var t=this;return r(e)?new t((function(n,r){for(var i=e.length,o=0;o<i;o++)t.resolve(e[o]).then(n,r)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))},L.resolve=w,L.reject=function(e){var t=new this(_);return M(t,e),t},L._setScheduler=function(e){a=e},L._setAsap=function(e){s=e},L._asap=s,L.polyfill=function(){var e=void 0;if(void 0!==n)e=n;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=L},L.Promise=L,L},e.exports=r()}).call(this,n(8),n(2))},function(e,t,n){"use strict";e.exports=function(e,t){return/\?/.test(e)?e+="&":e+="?",e+r(t)};var r=n(31)},function(e,t,n){"use strict";e.exports=function(e,t,n){if("GET"===t.method){t.debug("JSONP: start");var o=!1,a=!1;i+=1;var s=document.getElementsByTagName("head")[0],u=document.createElement("script"),l="algoliaJSONP_"+i,c=!1;window[l]=function(e){!function(){try{delete window[l],delete window[l+"_loaded"]}catch(e){window[l]=window[l+"_loaded"]=void 0}}(),a?t.debug("JSONP: Late answer, ignoring"):(o=!0,f(),n(null,{body:e,responseText:JSON.stringify(e)}))},e+="&callback="+l,t.jsonBody&&t.jsonBody.params&&(e+="&"+t.jsonBody.params);var h=setTimeout((function(){t.debug("JSONP: Script timeout"),a=!0,f(),n(new r.RequestTimeout)}),t.timeouts.complete);u.onreadystatechange=function(){"loaded"!==this.readyState&&"complete"!==this.readyState||d()},u.onload=d,u.onerror=function(){t.debug("JSONP: Script error"),c||a||(f(),n(new r.JSONPScriptError))},u.async=!0,u.defer=!0,u.src=e,s.appendChild(u)}else n(new Error("Method "+t.method+" "+e+" is not supported by JSONP."));function d(){t.debug("JSONP: success"),c||a||(c=!0,o||(t.debug("JSONP: Fail. Script loaded but did not call the callback"),f(),n(new r.JSONPScriptFail)))}function f(){clearTimeout(h),u.onload=null,u.onreadystatechange=null,u.onerror=null,s.removeChild(u)}};var r=n(9),i=0},function(e,t,n){e.exports=function(e){return function(t,o,a){var s=n(4);(a=a&&s(a)||{}).hosts=a.hosts||["places-dsn.algolia.net","places-1.algolianet.com","places-2.algolianet.com","places-3.algolianet.com"],0!==arguments.length&&"object"!=typeof t&&void 0!==t||(t="",o="",a._allowEmptyCredentials=!0);var u=e(t,o,a),l=u.initIndex("places");return l.search=i("query","/1/places/query"),l.reverse=function(e,t){var n=r.encode(e);return this.as._jsonRequest({method:"GET",url:"/1/places/reverse?"+n,hostType:"read",callback:t})},l.getObject=function(e,t){return this.as._jsonRequest({method:"GET",url:"/1/places/"+encodeURIComponent(e),hostType:"read",callback:t})},l}};var r=n(167),i=n(28)},function(e,t,n){"use strict";t.decode=t.parse=n(168),t.encode=t.stringify=n(31)},function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,o){t=t||"&",n=n||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var l=e.length;u>0&&l>u&&(l=u);for(var c=0;c<l;++c){var h,d,f,p,m=e[c].replace(s,"%20"),g=m.indexOf(n);g>=0?(h=m.substr(0,g),d=m.substr(g+1)):(h=m,d=""),f=decodeURIComponent(h),p=decodeURIComponent(d),r(a,f)?i(a[f])?a[f].push(p):a[f]=[a[f],p]:a[f]=p}return a};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";e.exports="3.35.1"},function(e,t,n){(function(t){var n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,s="object"==typeof t&&t&&t.Object===Object&&t,u="object"==typeof self&&self&&self.Object===Object&&self,l=s||u||Function("return this")(),c=Object.prototype.toString,h=Math.max,d=Math.min,f=function(){return l.Date.now()};function p(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function m(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==c.call(e)}(e))return NaN;if(p(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=p(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var s=i.test(e);return s||o.test(e)?a(e.slice(2),s?2:8):r.test(e)?NaN:+e}e.exports=function(e,t,n){var r,i,o,a,s,u,l=0,c=!1,g=!1,y=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var n=r,o=i;return r=i=void 0,l=t,a=e.apply(o,n)}function b(e){var n=e-u;return void 0===u||n>=t||n<0||g&&e-l>=o}function A(){var e=f();if(b(e))return E(e);s=setTimeout(A,function(e){var n=t-(e-u);return g?d(n,o-(e-l)):n}(e))}function E(e){return s=void 0,y&&r?v(e):(r=i=void 0,a)}function w(){var e=f(),n=b(e);if(r=arguments,i=this,u=e,n){if(void 0===s)return function(e){return l=e,s=setTimeout(A,t),c?v(e):a}(u);if(g)return s=setTimeout(A,t),v(u)}return void 0===s&&(s=setTimeout(A,t)),a}return t=m(t)||0,p(n)&&(c=!!n.leading,o=(g="maxWait"in n)?h(m(n.maxWait)||0,t):o,y="trailing"in n?!!n.trailing:y),w.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=u=i=s=void 0},w.flush=function(){return void 0===s?a:E(f())},w}}).call(this,n(2))},function(e,t){e.exports=[{author:"Arcanthia",bpm:124,difficulties:["Expert"],downloads:6302,downvotes:5,finishes:1650,id:"2588",previewDuration:10,previewStartTime:12,numBeats:{Expert:540},songDuration:205.4791836734694,songName:"Weak - AJR",songSubName:"Unknown Artist",upvotes:45,genre:"Rock",version:"2588-1801",objectID:"2588",shortSongName:"WEAK - AJR",shortSongSubName:"Unknown Artist",index:0},{author:"Rustic",bpm:128,difficulties:["Expert","Hard"],downloads:29475,downvotes:1,finishes:10275,id:"1745",previewDuration:10,previewStartTime:12,numBeats:{Expert:880,Hard:633},songDuration:251.0204988662132,songName:"Uprising",songSubName:"Muse",upvotes:188,genre:"Alternative",version:"1745-1222",objectID:"1745",shortSongName:"UPRISING",shortSongSubName:"Muse",index:1},{author:"Bastille",bpm:127,difficulties:["Hard"],downloads:17459,downvotes:11,finishes:4795,id:"2467",previewDuration:16,previewStartTime:47,numBeats:{Hard:698},songDuration:213.7400680272109,songName:"Pompeii",songSubName:"Unknown Artist",upvotes:69,genre:"Rock",version:"2467-1708",objectID:"2467",shortSongName:"POMPEII",shortSongSubName:"Unknown Artist",index:2},{author:"Slizzy McGuire",bpm:120,difficulties:["Expert","Hard"],downloads:3346,id:"3261",previewDuration:10,previewStartTime:12,songName:"Start to Finish",songSubName:"Unknown Artist",downvotes:0,finishes:660,numBeats:{Expert:400,Hard:279},songDuration:133.12,upvotes:21,genre:"R&B",version:"3261-2333",objectID:"3261",shortSongName:"START TO FINISH",shortSongSubName:"Unknown Artist",index:3},{author:"Knife Party",bpm:174,difficulties:["Hard","Normal"],downloads:65092,id:"122",previewDuration:10,previewStartTime:12,songName:"Give It Up",songSubName:"Unknown Artist",downvotes:0,finishes:18971,numBeats:{Hard:312,Normal:218},songDuration:118.8038775510204,upvotes:110,genre:"Electronic",version:"122-69",objectID:"122",shortSongName:"GIVE IT UP",shortSongSubName:"Unknown Artist",index:4},{author:"Vanessa Carlton",bpm:95,difficulties:["Expert"],downloads:7776,downvotes:4,finishes:1465,id:"3693",previewDuration:10,previewStartTime:27,numBeats:{Expert:901},songDuration:238.5314285714286,songName:"A Thousand Miles",songSubName:"Unknown Artist",upvotes:58,genre:"Pop",version:"3693-2816",objectID:"3693",shortSongName:"A THOUSAND MILES",shortSongSubName:"Unknown Artist",index:5},{author:"Madeon",bpm:126,difficulties:["Hard"],downloads:45040,id:"119",previewDuration:15,previewStartTime:148,songName:"Icarus",songSubName:"Unknown Artist",downvotes:5,finishes:13629,numBeats:{Hard:436},songDuration:213.3333333333333,upvotes:170,genre:"Electronic",version:"119-66",objectID:"119",shortSongName:"ICARUS",shortSongSubName:"Unknown Artist"},{author:"Rocket",bpm:128.1499938964844,difficulties:["Expert","Normal","Hard","Easy"],downloads:16286,downvotes:0,finishes:6623,id:"2213",previewDuration:15,previewStartTime:56,numBeats:{Expert:886,Normal:491,Hard:756,Easy:274},songDuration:230.3216326530612,songName:"Waiting For Love",songSubName:"Avicii",upvotes:114,genre:"Pop",version:"2213-1532",objectID:"2213",shortSongName:"WAITING FOR LOVE",shortSongSubName:"Avicii"},{author:"BennyDaBeast",bpm:174,difficulties:["Expert","Hard","Easy"],downloads:26236,downvotes:10,finishes:12197,id:"2302",previewDuration:10,previewStartTime:12,numBeats:{Expert:698,Hard:531,Easy:450},songDuration:232.9197732426304,songName:"Burn",songSubName:"Ellie Goulding",upvotes:225,genre:"Pop",version:"2302-1590",objectID:"2302",shortSongName:"BURN",shortSongSubName:"Ellie Goulding",index:2},{author:"Avicii",bpm:126,difficulties:["Expert","Hard","Normal"],downloads:32907,downvotes:2,finishes:17701,id:"1592",previewDuration:15,previewStartTime:30.5,numBeats:{Expert:712,Hard:408,Normal:204},songDuration:172.9984126984127,songName:"The Nights",songSubName:"Unknown Artist",upvotes:213,genre:"Uncategorized",version:"1592-1122",objectID:"1592",shortSongName:"THE NIGHTS",shortSongSubName:"Unknown Artist"},{author:"Rustic",bpm:128,difficulties:["Expert","Hard"],downloads:5119,downvotes:0,finishes:1189,id:"2667",previewDuration:10,previewStartTime:20,numBeats:{Expert:766,Hard:520},songDuration:193.1689342403628,songName:"EC1-Everything Goes",songSubName:"R3SPAWN",upvotes:47,genre:"Electronic",version:"2667-1859",objectID:"2667",shortSongName:"EC1-EVERYTHING GOES",shortSongSubName:"R3SPAWN"},{author:"GreatYazer",bpm:132,difficulties:["Expert","Hard","Normal"],downloads:9162,id:"1498",previewDuration:10,previewStartTime:12,songName:"Dangerous Night",songSubName:"30 Seconds to Mars",downvotes:2,finishes:3151,numBeats:{Expert:520,Hard:365,Normal:227},songDuration:199.6239682539683,upvotes:101,genre:"Rock",version:"1498-1051",objectID:"1498",shortSongName:"DANGEROUS NIGHT",shortSongSubName:"30 Seconds to Mars",index:5},{author:"Lukas Graham",bpm:107,difficulties:["Expert"],downloads:4594,downvotes:0,finishes:844,id:"1688",previewDuration:10,previewStartTime:12,numBeats:{Expert:750},songDuration:183.2609070294785,songName:"Off to See the World",songSubName:"My Little Pony Movie",upvotes:33,genre:"Soundtrack",version:"1688-1186",objectID:"1688",shortSongName:"OFF TO SEE THE WORLD",shortSongSubName:"My Little Pony Movie",index:1},{author:"Purphoros",bpm:174,difficulties:["ExpertPlus"],downloads:17600,downvotes:9,finishes:3672,id:"2164",previewDuration:10,previewStartTime:12,numBeats:{ExpertPlus:683},songDuration:167.6062585034014,songName:"Bonfire",songSubName:"Knife Party",upvotes:59,genre:"Electronic",version:"2164-1494",objectID:"2164",shortSongName:"BONFIRE",shortSongSubName:"Knife Party"},{author:"GreatYazer",bpm:128,difficulties:["ExpertPlus","Expert","Hard","Normal"],downloads:6463,id:"1358",previewDuration:10,previewStartTime:12,songName:"Lethargy",songSubName:"Bastille",downvotes:15,finishes:1987,numBeats:{ExpertPlus:742,Expert:659,Hard:521,Normal:294},songDuration:204.9948299319728,upvotes:74,genre:"Pop",version:"1358-945",objectID:"1358",shortSongName:"LETHARGY",shortSongSubName:"Bastille"},{author:"NovaShaft",bpm:130,difficulties:["Expert","Hard"],downloads:3286,downvotes:21,finishes:644,id:"5817",previewDuration:10,previewStartTime:13,numBeats:{Expert:430,Hard:375},songDuration:125.0183541666667,songName:"Courtney Gears Battle Theme",songSubName:"David Bergeaud",upvotes:49,genre:"Video Game",version:"5817-5281",objectID:"5817",shortSongName:"COURTNEY GEARS BATT...",shortSongSubName:"David Bergeaud"},{author:"Purphoros",bpm:128,difficulties:["ExpertPlus","Expert"],downloads:14195,downvotes:0,finishes:6132,id:"2019",previewDuration:15,previewStartTime:33,numBeats:{ExpertPlus:641,Expert:448},songDuration:214.2896598639456,songName:"When Can I See You Again",songSubName:"Owl City",upvotes:99,genre:"",version:"2019-1406",objectID:"2019",shortSongName:"WHEN CAN I SEE YOU ...",shortSongSubName:"Owl City"},{author:"BennyDaBeast",bpm:93,difficulties:["ExpertPlus"],downloads:10026,downvotes:1,finishes:2741,id:"2974",previewDuration:10,previewStartTime:12,numBeats:{ExpertPlus:708},songDuration:169.6939682539682,songName:"Otter Pop (feat. Hollis)",songSubName:"Shawn Wasabi",upvotes:176,genre:"Pop",version:"2974-2107",objectID:"2974",shortSongName:"OTTER POP (FEAT. HO...",shortSongSubName:"Shawn Wasabi"},{author:"Rustic",bpm:160,difficulties:["Expert","Hard"],downloads:6008,downvotes:0,finishes:1353,id:"2668",previewDuration:10,previewStartTime:12,numBeats:{Expert:674,Hard:456},songDuration:217.4414058956916,songName:"EC1-Haunted",songSubName:"Slips & Slurs",upvotes:69,genre:"Uncategorized",version:"2668-1860",objectID:"2668",shortSongName:"EC1-HAUNTED",shortSongSubName:"Slips & Slurs"},{author:"Orchan",bpm:170,difficulties:["Hard","Expert","ExpertPlus"],downloads:6280,id:"1567",previewDuration:33,previewStartTime:57,songName:"Be Alright",songSubName:"Stonebank",downvotes:5,finishes:1293,numBeats:{Hard:919,Expert:1309,ExpertPlus:1837},songDuration:299.3893877551021,upvotes:58,genre:"Electronic",version:"1567-1101",objectID:"1567",shortSongName:"BE ALRIGHT",shortSongSubName:"Stonebank"},{author:"Jovian",bpm:160,difficulties:["Expert","Hard","Normal"],downloads:80670,id:"1216",previewDuration:10,previewStartTime:90,songName:"Shake It Off",songSubName:"Taylor Swift",downvotes:2,finishes:26773,numBeats:{Expert:800,Hard:786,Normal:628},songDuration:219.2718367346939,upvotes:267,genre:"Pop",version:"1216-840",objectID:"1216",shortSongName:"SHAKE IT OFF",shortSongSubName:"Taylor Swift"},{author:"Rustic",bpm:128,difficulties:["Expert","Hard"],downloads:6083,id:"893",previewDuration:10,previewStartTime:35,songName:"Rainbow Notes",songSubName:"Approaching Nirvana",downvotes:3,finishes:1585,numBeats:{Expert:667,Hard:439},songDuration:206.801768707483,upvotes:48,genre:"Electronic",version:"893-598",objectID:"893",shortSongName:"RAINBOW NOTES",shortSongSubName:"Approaching Nirvana"},{author:"Rustic",bpm:173,difficulties:["Expert","Hard"],downloads:6624,downvotes:0,finishes:1342,id:"2670",previewDuration:10,previewStartTime:12,numBeats:{Expert:872,Hard:508},songDuration:180.1192290249433,songName:"EC1-Rio",songSubName:"Netsky Feat. Digital Farm Animals",upvotes:91,genre:"Electronic",version:"2670-1861",objectID:"2670",shortSongName:"EC1-RIO",shortSongSubName:"Netsky Feat. Digital Farm Ani..."},{author:"Rustic",bpm:114,difficulties:["Expert","Hard","Normal"],downloads:7441,downvotes:0,finishes:2474,id:"1950",previewDuration:10,previewStartTime:40,numBeats:{Expert:842,Hard:538,Normal:244},songDuration:245.4495691609977,songName:"Popcorn Funk",songSubName:"Monstaz.",upvotes:82,genre:"Electronic",version:"1950-1357",objectID:"1950",shortSongName:"POPCORN FUNK",shortSongSubName:"Monstaz."},{author:"Benny",bpm:132.5,difficulties:["ExpertPlus","Expert","Hard","Normal"],downloads:5327,downvotes:8,finishes:1782,id:"6353",previewDuration:10,previewStartTime:12,numBeats:{ExpertPlus:1255,Expert:930,Hard:621,Normal:405},songDuration:245.5337188208617,songName:"Empty Threat",songSubName:"CHVRCHES",upvotes:124,genre:"EDM",version:"6353-5910",objectID:"6353",shortSongName:"EMPTY THREAT",shortSongSubName:"CHVRCHES"},{author:"Rustic",bpm:172,difficulties:["Hard"],downloads:11663,id:"55",previewDuration:10,previewStartTime:46,songName:"Shakedown",songSubName:"The Score",downvotes:15,finishes:2060,numBeats:{Hard:438},songDuration:206.4353287981859,upvotes:55,genre:"Alternative",version:"55-29",objectID:"55",shortSongName:"SHAKEDOWN",shortSongSubName:"The Score"},{author:"Woodkid",bpm:134,difficulties:["Expert"],downloads:31508,id:"163",previewDuration:10,previewStartTime:14.23999977111816,songName:"Run Boy Run",songSubName:"Unknown Artist",downvotes:21,finishes:7655,numBeats:{Expert:671},songDuration:212.7405215419501,upvotes:109,genre:"Alternative",version:"163-99",objectID:"163",shortSongName:"RUN BOY RUN",shortSongSubName:"Unknown Artist"},{author:"NovaShaft",bpm:184,difficulties:["Expert","Hard"],downloads:5335,downvotes:0,finishes:1461,id:"4888",previewDuration:10,previewStartTime:13,numBeats:{Expert:781,Hard:696},songDuration:209.3076190476191,songName:"Conqueror",songSubName:"AURORA",upvotes:104,genre:"Pop",version:"4888-4228",objectID:"4888",shortSongName:"CONQUEROR",shortSongSubName:"AURORA"},{author:"subs",bpm:128,difficulties:["Hard"],downloads:5513,downvotes:19,finishes:926,id:"1893",previewDuration:10,previewStartTime:12,numBeats:{Hard:579},songDuration:149.4573469387755,songName:"Someone In The Crowd",songSubName:"La La Land",upvotes:31,genre:"Pop",version:"1893-1315",objectID:"1893",shortSongName:"SOMEONE IN THE CROWD",shortSongSubName:"La La Land"},{author:"Awfulnaut",bpm:200,difficulties:["ExpertPlus","Expert","Hard","Normal"],downloads:8219,downvotes:0,finishes:3265,id:"3931",previewDuration:10,previewStartTime:12,numBeats:{ExpertPlus:634,Expert:519,Hard:477,Normal:364},songDuration:146.4321768707483,songName:"Good Times Roll",songSubName:"Griz x Big Gigantic",upvotes:128,genre:"Pop",version:"3931-3101",objectID:"3931",shortSongName:"GOOD TIMES ROLL",shortSongSubName:"Griz x Big Gigantic"},{author:"Heisenberg",bpm:140,difficulties:["Expert","Easy"],downloads:0,downvotes:1,finishes:299,id:"6141",previewDuration:15,previewStartTime:40,numBeats:{Expert:980},songDuration:230.0265306122449,songName:"Harder, Better, Faster, Stronger",songSubName:"Far Out Remix - Daft Punk",upvotes:0,version:"6141-5650",objectID:"6141",shortSongName:"HARDER, BETTER, FAS...",shortSongSubName:"Far Out Remix - Daft Punk"},{author:"ConnorJC",bpm:174,difficulties:["ExpertPlus","Expert"],downloads:4790,downvotes:1,finishes:116,id:"5194",previewDuration:10,previewStartTime:12,numBeats:{ExpertPlus:1077},songDuration:227.3243310657596,songName:"The Covenant",songSubName:"Droptek",upvotes:28,genre:"Electronic",version:"5194-4584",objectID:"5194",shortSongName:"THE COVENANT",shortSongSubName:"Droptek"},{author:"ConnorJC",bpm:110,difficulties:["Expert"],downloads:4274,downvotes:2,finishes:1372,id:"4806",previewDuration:10,previewStartTime:12,numBeats:{Expert:512},songDuration:172.094693877551,songName:"I Wanna Be Like You (Sim Gretina Remix)",songSubName:"Jungle Book",upvotes:77,genre:"Soundtrack",version:"4806-4131",objectID:"4806",shortSongName:"I WANNA BE LIKE YOU...",shortSongSubName:"Jungle Book"},{author:"BennyDaBeast",bpm:108.5,difficulties:["ExpertPlus","Expert","Hard","Normal"],downloads:11279,downvotes:1,finishes:5718,id:"4560",previewDuration:10,previewStartTime:12,numBeats:{ExpertPlus:810,Expert:680,Hard:432,Normal:321},songDuration:254.97,songName:"Some Nights",songSubName:"Fun.",upvotes:191,genre:"Rock",version:"4560-3838",objectID:"4560",shortSongName:"SOME NIGHTS",shortSongSubName:"Fun."},{author:"BennyDaBeast",bpm:107,difficulties:["Expert","Hard","Normal"],downloads:7854,downvotes:9,finishes:3094,id:"6415",previewDuration:10,previewStartTime:12,numBeats:{Expert:592,Hard:439,Normal:215},songDuration:227.6197959183673,songName:"24K Magic",songSubName:"Bruno Mars",upvotes:121,genre:"Funk",version:"6415-5996",objectID:"6415",shortSongName:"24K MAGIC",shortSongSubName:"Bruno Mars",index:4},{author:"GreatYazer",bpm:143,difficulties:["Expert","Hard","Normal"],downloads:13694,id:"3569",previewDuration:10,previewStartTime:12,songName:"Toxic (Yazer)",songSubName:"Britney Spears",downvotes:10,finishes:4901,numBeats:{Expert:612,Hard:463,Normal:325},songDuration:202.5960997732426,upvotes:127,genre:"Pop",version:"3569-2662",objectID:"3569",shortSongName:"TOXIC (YAZER)",shortSongSubName:"Britney Spears",index:4},{author:"GreatYazer, Rustic, BennyDaBeast",bpm:143,difficulties:["Expert","Hard","Normal"],downloads:12848,downvotes:21,finishes:3896,id:"5844",previewDuration:10,previewStartTime:12,numBeats:{Expert:993,Hard:785,Normal:498},songDuration:297.5874149659864,songName:"We Built this City",songSubName:"Starship",upvotes:186,genre:"Rock",version:"5844-5309",objectID:"5844",shortSongName:"WE BUILT THIS CITY",shortSongSubName:"Starship"},{author:"RaynArch",bpm:128,difficulties:["Expert"],downloads:21863,downvotes:1,finishes:5141,id:"1643",previewDuration:0,previewStartTime:0,numBeats:{Expert:753},songDuration:172.1720861678004,songName:"Tank! (Ben Briggs Remix)",songSubName:"Cowboy Bebop",upvotes:182,genre:"Anime",version:"1643-1162",objectID:"1643",shortSongName:"TANK! (BEN BRIGGS R...",shortSongSubName:"Cowboy Bebop"},{author:"BennyDaBeast",bpm:128,difficulties:["Expert","Hard","Normal"],downloads:22774,downvotes:2,finishes:10091,id:"2811",previewDuration:10,previewStartTime:12,numBeats:{Expert:624,Hard:490,Normal:305},songDuration:199.9008390022676,songName:"Shut Up and Dance",songSubName:"WALK THE MOON",upvotes:215,genre:"Pop",version:"2811-1982",objectID:"2811",shortSongName:"SHUT UP AND DANCE",shortSongSubName:"WALK THE MOON"},{author:"Rustic",bpm:120,difficulties:["Expert","Hard"],downloads:34762,id:"41",previewDuration:10,previewStartTime:12,songName:"New Dawn",songSubName:"Prototyperaptor",downvotes:1,finishes:34574,numBeats:{Expert:511,Hard:335},songDuration:162.4375056689342,upvotes:114,genre:"Uncategorized",version:"41-17",objectID:"41",shortSongName:"NEW DAWN",shortSongSubName:"Prototyperaptor"},{author:"ConnorJC",bpm:126,difficulties:["Expert"],downloads:3501,downvotes:8,finishes:796,id:"6339",previewDuration:10,previewStartTime:12,numBeats:{Expert:669},songDuration:165.122925170068,songName:"Little Swing",songSubName:"AronChupa feat. Little Sis Nora",upvotes:63,genre:"Uncategorized",version:"6339-5887",objectID:"6339",shortSongName:"LITTLE SWING",shortSongSubName:"AronChupa feat. Little Sis Nora"},{author:"Trockenmatt",bpm:104,difficulties:["Expert"],downloads:7468,downvotes:5,finishes:1224,id:"2581",previewDuration:10,previewStartTime:12,numBeats:{Expert:517},songDuration:198.740612244898,songName:"Friction",songSubName:"Imagine Dragons",upvotes:27,genre:"Rock",version:"2581-1795",objectID:"2581",shortSongName:"FRICTION",shortSongSubName:"Imagine Dragons"},{author:"NovaShaft",bpm:105,difficulties:["Expert","Hard"],downloads:3071,downvotes:1,finishes:575,id:"5386",previewDuration:10,previewStartTime:12,numBeats:{Expert:551,Hard:493},songDuration:180.2443537414966,songName:"Promiseland",songSubName:"MIKA",upvotes:65,genre:"Pop",version:"5386-4810",objectID:"5386",shortSongName:"PROMISELAND",shortSongSubName:"MIKA"},{author:"Rustic",bpm:160,difficulties:["Expert","Hard"],downloads:6008,downvotes:0,finishes:1353,id:"2668",previewDuration:10,previewStartTime:12,numBeats:{Expert:674,Hard:456},songDuration:217.4414058956916,songName:"EC1-Haunted",songSubName:"Slips & Slurs",upvotes:69,genre:"Uncategorized",version:"2668-1860",objectID:"2668",shortSongName:"EC1-HAUNTED",shortSongSubName:"Slips & Slurs"},{author:"Rocket",bpm:90,difficulties:["Expert","Hard","Normal","Easy"],downloads:6468,downvotes:1,finishes:2290,id:"5256",previewDuration:10.69999980926514,previewStartTime:95.69999694824219,numBeats:{Expert:729,Hard:573,Normal:377,Easy:202},songDuration:244.3051247165533,songName:"Hymn For The Weekend",songSubName:"Coldplay",upvotes:81,genre:"Rock",version:"5256-4656",objectID:"5256",shortSongName:"HYMN FOR THE WEEKEND",shortSongSubName:"Coldplay"},{author:"GreatYazer",bpm:130,difficulties:["Expert","Hard","Normal"],downloads:4764,downvotes:15,finishes:1285,id:"5737",previewDuration:10,previewStartTime:12,numBeats:{Expert:923,Hard:658,Normal:370},songDuration:266.825873015873,songName:"Blue Monday (Yazer)",songSubName:"Orgy",upvotes:88,genre:"Metal",version:"5737-5198",objectID:"5737",shortSongName:"BLUE MONDAY (YAZER)",shortSongSubName:"Orgy"},{author:"NovaShaft",bpm:123,difficulties:["Expert","Hard"],downloads:4037,downvotes:0,finishes:745,id:"3999",previewDuration:10,previewStartTime:12,numBeats:{Expert:688,Hard:600},songDuration:238.9810416666667,songName:"We are Golden",songSubName:"MIKA",upvotes:48,genre:"Pop",version:"3999-3180",objectID:"3999",shortSongName:"WE ARE GOLDEN",shortSongSubName:"MIKA"},{author:"Rustic",bpm:128,difficulties:["Expert","Hard","Normal"],downloads:13509,id:"165",previewDuration:10,previewStartTime:136.2592010498047,songName:"Awe",songSubName:"prototyperaptor",downvotes:21,finishes:5253,numBeats:{Expert:785,Hard:522,Normal:267},songDuration:234.3261678004535,upvotes:148,genre:"Electronic",version:"165-101",objectID:"165",shortSongName:"AWE",shortSongSubName:"prototyperaptor"},{author:"Rustic",bpm:125,difficulties:["Expert"],downloads:206130,id:"31",previewDuration:10,previewStartTime:12,songName:"Believer",songSubName:"Imagine Dragons",downvotes:1,finishes:"70725",numBeats:{Expert:546},songDuration:205.0336507936508,upvotes:"471",genre:"Rock",version:"31-11",playlists:["fantasticflowvol1","workout-flow"],key:"31",hash:"cb952e6b2a1ebfdf2437d37b21321c8c",objectID:"31",_highlightResult:{author:{value:"Rustic",matchLevel:"none",matchedWords:[]},songName:{value:"Believer",matchLevel:"none",matchedWords:[]},songSubName:{value:"Imagine Dragons",matchLevel:"none",matchedWords:[]}}},{author:"a-ha",bpm:168,difficulties:["Expert"],downloads:175104,id:"27",previewDuration:10,previewStartTime:19,songName:"Take On Me",songSubName:"",downvotes:1,finishes:"36801",numBeats:{Expert:505},songDuration:139.4344217687075,upvotes:"1502",genre:"Rock",version:"27-9",playlists:["workout-flow"],key:"27",hash:"41d622ebd4d7df1ae0b61959bd516bf7",objectID:"27",_highlightResult:{author:{value:"a-ha",matchLevel:"none",matchedWords:[]},songName:{value:"Take On Me",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"RunRockGame",bpm:123.3000030517578,difficulties:["Expert","Hard"],downloads:174376,id:"1183",previewDuration:10,previewStartTime:51,songName:"Harder Better Faster Stronger",songSubName:"Daft Punk",downvotes:0,finishes:"74223",numBeats:{Expert:684,Hard:480},songDuration:224.088,upvotes:"2867",genre:"Electronic",version:"1183-814",playlists:[],key:"1183",hash:"30e0051212dcd36396a98251621f46d4",objectID:"1183",_highlightResult:{author:{value:"RunRockGame",matchLevel:"none",matchedWords:[]},songName:{value:"Harder Better Faster Stronger",matchLevel:"none",matchedWords:[]},songSubName:{value:"Daft Punk",matchLevel:"none",matchedWords:[]}}},{author:"Freeek",bpm:139,difficulties:["Expert","Hard","Normal","Easy"],downloads:169044,id:"811",previewDuration:10,previewStartTime:12,songName:"Beat it",songSubName:"Michael Jackson",downvotes:13,finishes:"117624",numBeats:{Expert:669,Hard:428,Normal:259,Easy:188},songDuration:143.1186621315193,upvotes:"2598",genre:"Pop",version:"811-535",playlists:[],key:"811",hash:"281c6c8588c5b1f72f7584baae98adfc",objectID:"811",_highlightResult:{author:{value:"Freeek",matchLevel:"none",matchedWords:[]},songName:{value:"Beat it",matchLevel:"none",matchedWords:[]},songSubName:{value:"Michael Jackson",matchLevel:"none",matchedWords:[]}}},{author:"GreatYazer",bpm:132,difficulties:["Expert","Hard","Normal"],downloads:167297,id:"517",previewDuration:10,previewStartTime:12,songName:"Gangnam Style",songSubName:"PSY",downvotes:17,finishes:"82700",numBeats:{Expert:982,Hard:735,Normal:419},songDuration:218.8241875,upvotes:"3470",genre:"Pop",version:"517-321",playlists:["workout-flow","lemme-see-you-dance","maps-for-new-players","best-of-kpop-vol-1"],key:"517",hash:"510bf48f5be83c4f991923eb47df366c",objectID:"517",_highlightResult:{author:{value:"GreatYazer",matchLevel:"none",matchedWords:[]},songName:{value:"Gangnam Style",matchLevel:"none",matchedWords:[]},songSubName:{value:"PSY",matchLevel:"none",matchedWords:[]}}},{author:"Toto",bpm:92,difficulties:["Expert","Hard","Normal"],downloads:155085,id:"504",previewDuration:10,previewStartTime:12,songName:"Africa",songSubName:"",downvotes:4,finishes:"27043",numBeats:{Expert:883,Hard:836,Normal:728},songDuration:260.3624489795918,upvotes:"1245",genre:"Rock",version:"504-311",playlists:[],key:"504",hash:"698eceb52a79269c85a141157be9191d",objectID:"504",_highlightResult:{author:{value:"Toto",matchLevel:"none",matchedWords:[]},songName:{value:"Africa",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"Freeek",bpm:200,difficulties:["Expert","Hard"],downloads:152881,id:"106",previewDuration:10,previewStartTime:12,songName:"TTFAF",songSubName:"DragonForce",downvotes:5,finishes:"18661",numBeats:{Expert:2832,Hard:1374},songDuration:444.4189795918367,upvotes:"1661",genre:"Rock",version:"106-58",playlists:[],key:"106",hash:"90c2df1b1339d6fa0dce3ffcc0277f51",objectID:"106",_highlightResult:{author:{value:"Freeek",matchLevel:"none",matchedWords:[]},songName:{value:"TTFAF",matchLevel:"none",matchedWords:[]},songSubName:{value:"DragonForce",matchLevel:"none",matchedWords:[]}}},{author:"Gorillaz",bpm:138.5599975585938,difficulties:["Hard"],downloads:148963,id:"727",previewDuration:10,previewStartTime:12,songName:"Feel Good Inc.",songSubName:"",downvotes:2,finishes:"31080",numBeats:{Hard:616},songDuration:221.4138775510204,upvotes:"718",genre:"Rock",version:"727-478",playlists:[],key:"727",hash:"6160a0be6c321fc795d0be7e8495fcb9",objectID:"727",_highlightResult:{author:{value:"Gorillaz",matchLevel:"none",matchedWords:[]},songName:{value:"Feel Good Inc.",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"Imagine Dragons",bpm:168,difficulties:["Expert","Hard"],downloads:148311,id:"45",previewDuration:15,previewStartTime:102,songName:"Thunder",songSubName:"(Maikyy Beatmap)",downvotes:1,finishes:"26685",numBeats:{Expert:527,Hard:368},songDuration:189.8748299319728,upvotes:"502",genre:"Pop",version:"45-20",playlists:[],key:"45",hash:"b1d713956719fdb039c72bbbae66527f",objectID:"45",_highlightResult:{author:{value:"Imagine Dragons",matchLevel:"none",matchedWords:[]},songName:{value:"Thunder",matchLevel:"none",matchedWords:[]},songSubName:{value:"(Maikyy Beatmap)",matchLevel:"none",matchedWords:[]}}},{author:"red knight",bpm:125,difficulties:["Expert"],downloads:139335,id:"81",previewDuration:10,previewStartTime:12,songName:"Super Mario Bros. Theme (Overworld Theme)",songSubName:"Nintendo",downvotes:15,finishes:"49329",numBeats:{Expert:330},songDuration:91.33215419501134,upvotes:"1058",genre:"Video Games",version:"81-41",playlists:[],key:"81",hash:"2bf0be120155fb9996c9f1e6675fb68d",objectID:"81",_highlightResult:{author:{value:"red knight",matchLevel:"none",matchedWords:[]},songName:{value:"Super Mario Bros. Theme (Overworld Theme)",matchLevel:"none",matchedWords:[]},songSubName:{value:"Nintendo",matchLevel:"none",matchedWords:[]}}},{author:"AWOLNATION",bpm:121,difficulties:["Expert"],downloads:128482,id:"111",previewDuration:25,previewStartTime:12,songName:"Sail (V2)",songSubName:"",downvotes:5,finishes:"37463",numBeats:{Expert:714},songDuration:236.198820861678,upvotes:"927",genre:"Rock",version:"111-61",playlists:[],key:"111",hash:"91d6493446b3f483fc7409e449ac4346",objectID:"111",_highlightResult:{author:{value:"AWOLNATION",matchLevel:"none",matchedWords:[]},songName:{value:"Sail (V2)",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"Jobas",bpm:149,difficulties:["Hard"],downloads:127353,id:"476",previewDuration:10,previewStartTime:12,songName:"Rasputin (Funk Overload)",songSubName:"",downvotes:4,finishes:"29624",numBeats:{Hard:768},songDuration:238.5240816326531,upvotes:"3434",genre:"Pop",version:"476-292",playlists:["workout-flow","lemme-see-you-dance"],key:"476",hash:"4f8acb1a92253d69e61f343d7ebeb2c8",objectID:"476",_highlightResult:{author:{value:"Jobas",matchLevel:"none",matchedWords:[]},songName:{value:"Rasputin (Funk Overload)",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"Hans Zimmer & Klaus Badelt",bpm:140.3999938964844,difficulties:["Expert","Hard","Normal"],downloads:121091,id:"220",previewDuration:10,previewStartTime:1,songName:"He's a pirate",songSubName:"Hans Zimmer & Klaus Badelt",downvotes:0,finishes:"36415",numBeats:{Expert:377,Hard:254,Normal:183},songDuration:90.5926530612245,upvotes:"345",genre:"Soundtrack",version:"220-128",playlists:[],key:"220",hash:"c124abfa835f3f6188f9dd47b42e22f4",objectID:"220",_highlightResult:{author:{value:"Hans Zimmer & Klaus Badelt",matchLevel:"none",matchedWords:[]},songName:{value:"He's a pirate",matchLevel:"none",matchedWords:[]},songSubName:{value:"Hans Zimmer & Klaus Badelt",matchLevel:"none",matchedWords:[]}}},{author:"Dave Rodgers",bpm:154,difficulties:["Expert","Hard","Normal","Easy"],downloads:120609,id:"559",previewDuration:10,previewStartTime:12,songName:"Deja Vu",songSubName:"Inital D",downvotes:0,finishes:54583,numBeats:{Expert:328,Hard:265,Normal:241,Easy:138},songDuration:105.3455328798186,upvotes:138,genre:"Electronic",version:"559-352",playlists:[],objectID:"559",_highlightResult:{author:{value:"Dave Rodgers",matchLevel:"none",matchedWords:[]},songName:{value:"Deja Vu",matchLevel:"none",matchedWords:[]},songSubName:{value:"Inital D",matchLevel:"none",matchedWords:[]}}},{author:"Bon Jovi",bpm:122,difficulties:["Expert","Hard","Normal"],downloads:120373,id:"322",previewDuration:17,previewStartTime:75,songName:"Livin' On A Prayer",songSubName:"Bon Jovi",downvotes:0,finishes:"47593",numBeats:{Expert:682,Hard:503,Normal:373},songDuration:250.6266666666667,upvotes:"691",genre:"Rock",version:"322-189",playlists:[],key:"322",hash:"da4c92bdb2c160c6774ab8bf4da737ba",objectID:"322",_highlightResult:{author:{value:"Bon Jovi",matchLevel:"none",matchedWords:[]},songName:{value:"Livin' On A Prayer",matchLevel:"none",matchedWords:[]},songSubName:{value:"Bon Jovi",matchLevel:"none",matchedWords:[]}}},{author:"tmoss94",bpm:110,difficulties:["Expert"],downloads:118782,id:"358",previewDuration:10,previewStartTime:12,songName:"Bangarang",songSubName:"Skrillex",downvotes:0,finishes:"30721",numBeats:{Expert:612},songDuration:215.8851927437642,upvotes:"1107",genre:"Electronic",version:"358-211",playlists:[],key:"358",hash:"8e820f918009c3aca8cb5f6c31e3ab60",objectID:"358",_highlightResult:{author:{value:"tmoss94",matchLevel:"none",matchedWords:[]},songName:{value:"Bangarang",matchLevel:"none",matchedWords:[]},songSubName:{value:"Skrillex",matchLevel:"none",matchedWords:[]}}},{author:"Freeek",bpm:70,difficulties:["Expert","Hard","Normal"],downloads:118247,id:"134",previewDuration:10,previewStartTime:12,songName:"Blue (KNY Factory Remix)",songSubName:"Effeil 65",downvotes:0,finishes:"45173",numBeats:{Expert:774,Hard:514,Normal:313},songDuration:200.0398639455782,upvotes:"847",genre:"Electronic",version:"134-78",playlists:[],key:"134",hash:"724abb375743be6a75a4ac695a2e28b1",objectID:"134",_highlightResult:{author:{value:"Freeek",matchLevel:"none",matchedWords:[]},songName:{value:"Blue (KNY Factory Remix)",matchLevel:"none",matchedWords:[]},songSubName:{value:"Effeil 65",matchLevel:"none",matchedWords:[]}}},{author:"redknight",bpm:200,difficulties:["Expert"],downloads:116162,id:"184",previewDuration:10,previewStartTime:37.73143768310547,songName:"Skyrim Theme",songSubName:"The Song Of The Dragonborn",downvotes:0,finishes:"30516",numBeats:{Expert:524},songDuration:238.1230385487528,upvotes:"529",genre:"Video Games",version:"184-110",playlists:[],key:"184",hash:"68657833d0a07c3761b945b695c47b67",objectID:"184",_highlightResult:{author:{value:"redknight",matchLevel:"none",matchedWords:[]},songName:{value:"Skyrim Theme",matchLevel:"none",matchedWords:[]},songSubName:{value:"The Song Of The Dragonborn",matchLevel:"none",matchedWords:[]}}},{author:"Cascada",bpm:142,difficulties:["Expert"],downloads:115611,id:"383",previewDuration:10,previewStartTime:12,songName:"Every Time We Touch",songSubName:"",downvotes:1,finishes:"42754",numBeats:{Expert:564},songDuration:199.1720408163265,upvotes:"2355",genre:"Electronic",version:"383-228",playlists:["fantasticflowvol1"],key:"383",hash:"58cd3f3fe7b921fb37b71281064d8f0f",objectID:"383",_highlightResult:{author:{value:"Cascada",matchLevel:"none",matchedWords:[]},songName:{value:"Every Time We Touch",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"BlueASIS",bpm:124,difficulties:["Hard","Normal"],downloads:108314,id:"1458",previewDuration:10,previewStartTime:12,songName:"Seven Nation Army",songSubName:"The White Stripes",downvotes:7,finishes:"56470",numBeats:{Hard:496,Normal:399},songDuration:232.1531065759637,upvotes:"2154",genre:"Rock",version:"1458-1020",playlists:[],key:"1458",hash:"ae37bb1f86f81b67768a0b9206fc31c7",objectID:"1458",_highlightResult:{author:{value:"BlueASIS",matchLevel:"none",matchedWords:[]},songName:{value:"Seven Nation Army",matchLevel:"none",matchedWords:[]},songSubName:{value:"The White Stripes",matchLevel:"none",matchedWords:[]}}},{author:"KingPeuche YouTube",bpm:120,difficulties:["Expert","Hard","Easy"],downloads:107578,downvotes:0,finishes:"21844",id:"1693",previewDuration:14.5,previewStartTime:142.5,numBeats:{Expert:1145,Hard:1107,Easy:544},songDuration:356.3885714285714,songName:"Bohemian Rhapsody",songSubName:"Queen",upvotes:"1229",genre:"Rock",version:"1693-1190",playlists:[],key:"1693",hash:"df1035cb7ed9a369b29f725d79a8ca8c",objectID:"1693",_highlightResult:{author:{value:"KingPeuche YouTube",matchLevel:"none",matchedWords:[]},songName:{value:"Bohemian Rhapsody",matchLevel:"none",matchedWords:[]},songSubName:{value:"Queen",matchLevel:"none",matchedWords:[]}}},{author:"Caravan Palace",bpm:124,difficulties:["Hard","Normal","Expert","Easy"],downloads:105527,id:"684",previewDuration:10,previewStartTime:12,songName:"Lone Digger",songSubName:"",downvotes:28,finishes:"57999",numBeats:{Hard:730,Normal:480,Expert:746,Easy:313},songDuration:169.9265306122449,upvotes:"3544",genre:"Electro Swing",version:"684-447",playlists:[],key:"684",hash:"f96221e9287b61ce504a7fc6a4380b54",objectID:"684",_highlightResult:{author:{value:"Caravan Palace",matchLevel:"none",matchedWords:[]},songName:{value:"Lone Digger",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"Linkin Park",bpm:120,difficulties:["Expert"],downloads:103589,id:"156",previewDuration:10,previewStartTime:12,songName:"What I've Done",songSubName:"",downvotes:21,finishes:"21753",numBeats:{Expert:641},songDuration:207.4064172335601,upvotes:"451",genre:"Uncategorized",version:"156-94",playlists:[],key:"156",hash:"a8e670561ce964f393e583a344bc6ab6",objectID:"156",_highlightResult:{author:{value:"Linkin Park",matchLevel:"none",matchedWords:[]},songName:{value:"What I've Done",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"Brian",bpm:104,difficulties:["Hard"],downloads:102443,id:"128",previewDuration:10,previewStartTime:12,songName:"Pure Imagination",songSubName:"Ready Player One OST",downvotes:0,finishes:"27879",numBeats:{Hard:338},songDuration:152.3214512471655,upvotes:"342",genre:"Soundtrack",version:"128-74",playlists:[],key:"128",hash:"2a7be3baf70d856bf2845f13ee19a96b",objectID:"128",_highlightResult:{author:{value:"Brian",matchLevel:"none",matchedWords:[]},songName:{value:"Pure Imagination",matchLevel:"none",matchedWords:[]},songSubName:{value:"Ready Player One OST",matchLevel:"none",matchedWords:[]}}},{author:"Celldweller",bpm:87,difficulties:["Normal"],downloads:100658,id:"155",previewDuration:15.42794132232666,previewStartTime:80.37290954589844,songName:"The Imperial March",songSubName:"(Pegboard Nerds Remix)",downvotes:21,finishes:"22198",numBeats:{Normal:609},songDuration:263.4971428571429,upvotes:"396",genre:"EDM",version:"155-93",playlists:[],key:"155",hash:"520c47c77d4d68110f759f5fa36c3ace",objectID:"155",_highlightResult:{author:{value:"Celldweller",matchLevel:"none",matchedWords:[]},songName:{value:"The Imperial March",matchLevel:"none",matchedWords:[]},songSubName:{value:"(Pegboard Nerds Remix)",matchLevel:"none",matchedWords:[]}}},{author:"unknow",bpm:84,difficulties:["Expert","Hard","Normal","Easy"],downloads:99853,id:"828",previewDuration:10,previewStartTime:12,songName:"Clint Eastwood",songSubName:"Gorillaz",downvotes:0,finishes:"51819",numBeats:{Expert:681,Hard:514,Normal:358,Easy:297},songDuration:199.5520634920635,upvotes:"1146",genre:"Alternative",version:"828-549",playlists:[],key:"828",hash:"8d8aa56f1380d05f3a8294455f357de4",objectID:"828",_highlightResult:{author:{value:"unknow",matchLevel:"none",matchedWords:[]},songName:{value:"Clint Eastwood",matchLevel:"none",matchedWords:[]},songSubName:{value:"Gorillaz",matchLevel:"none",matchedWords:[]}}},{author:"Kryptikos",bpm:120,difficulties:["Expert","Hard"],downloads:99445,id:"726",previewDuration:10,previewStartTime:12,songName:"Portal - Still Alive (Uppermost Remix)",songSubName:"Uppermost",downvotes:2,finishes:"32883",numBeats:{Expert:402,Hard:318},songDuration:141.0414512471655,upvotes:"1269",genre:"Video Games",version:"726-477",playlists:[],key:"726",hash:"7545d9666f63ac9c802a2967bd5adc91",objectID:"726",_highlightResult:{author:{value:"Kryptikos",matchLevel:"none",matchedWords:[]},songName:{value:"Portal - Still Alive (Uppermost Remix)",matchLevel:"none",matchedWords:[]},songSubName:{value:"Uppermost",matchLevel:"none",matchedWords:[]}}},{author:"TK",bpm:135,difficulties:["Expert","Hard"],downloads:97484,id:"25",previewDuration:31.20000076293945,previewStartTime:55.79999923706055,songName:"Unravel",songSubName:"(TV Size)",downvotes:1,finishes:"52247",numBeats:{Expert:262,Hard:174},songDuration:87.3273469387755,upvotes:"1098",genre:"Anime",version:"25-7",playlists:[],key:"25",hash:"781ca1cc3120832556b5cbb2fad436f6",objectID:"25",_highlightResult:{author:{value:"TK",matchLevel:"none",matchedWords:[]},songName:{value:"Unravel",matchLevel:"none",matchedWords:[]},songSubName:{value:"(TV Size)",matchLevel:"none",matchedWords:[]}}},{author:"Heisenberg",bpm:115,difficulties:["Expert","Normal"],downloads:96004,id:"941",previewDuration:40,previewStartTime:12,songName:"Uptown Funk",songSubName:"Mark Ronson - Bruno Mars",downvotes:4,finishes:13972,numBeats:{Expert:1262,Normal:527},songDuration:271.0987755102041,upvotes:66,genre:"Pop",version:"941-631",playlists:[],objectID:"941",_highlightResult:{author:{value:"Heisenberg",matchLevel:"none",matchedWords:[]},songName:{value:"Uptown Funk",matchLevel:"none",matchedWords:[]},songSubName:{value:"Mark Ronson - Bruno Mars",matchLevel:"none",matchedWords:[]}}},{author:"Miku Hatsune (mapped by Speed)",bpm:130,difficulties:["Hard"],downloads:95461,id:"78",previewDuration:10,previewStartTime:66,songName:"Ievan Polkka",songSubName:"(VSNS Remix)",downvotes:15,finishes:"24081",numBeats:{Hard:682},songDuration:272.1436734693878,upvotes:"876",genre:"Anime",version:"78-39",playlists:["workout-flow"],key:"78",hash:"4e8606ba49324ed3f1eba8e127b1f04b",objectID:"78",_highlightResult:{author:{value:"Miku Hatsune (mapped by Speed)",matchLevel:"none",matchedWords:[]},songName:{value:"Ievan Polkka",matchLevel:"none",matchedWords:[]},songSubName:{value:"(VSNS Remix)",matchLevel:"none",matchedWords:[]}}},{author:"TehSuperToilet",bpm:140,difficulties:["Expert","ExpertPlus","Easy","Hard"],downloads:93518,id:"170",previewDuration:10,previewStartTime:57,songName:"Dual of the Fates",songSubName:"Star Wars Remix",downvotes:21,finishes:"14802",numBeats:{Expert:1812,ExpertPlus:1945,Easy:207,Hard:1554},songDuration:245.1069387755102,upvotes:"146",genre:"Pop",version:"170-105",playlists:[],key:"170",hash:"f958d8de30200028547114c5af0f59ea",objectID:"170",_highlightResult:{author:{value:"TehSuperToilet",matchLevel:"none",matchedWords:[]},songName:{value:"Dual of the Fates",matchLevel:"none",matchedWords:[]},songSubName:{value:"Star Wars Remix",matchLevel:"none",matchedWords:[]}}},{author:"Roselia",bpm:181,difficulties:["Expert","Hard","Normal","Easy"],downloads:90956,id:"527",previewDuration:10,previewStartTime:12,songName:"Attack on Titan - Roselia",songSubName:"Guren no Yumiya Cover",downvotes:17,finishes:"47292",numBeats:{Expert:350,Hard:298,Normal:258,Easy:179},songDuration:95.06122448979592,upvotes:"1055",genre:"Anime",version:"527-331",playlists:[],key:"527",hash:"fd7af25aab1e5bb1abca2424c5a3d131",objectID:"527",_highlightResult:{author:{value:"Roselia",matchLevel:"none",matchedWords:[]},songName:{value:"Attack on Titan - Roselia",matchLevel:"none",matchedWords:[]},songSubName:{value:"Guren no Yumiya Cover",matchLevel:"none",matchedWords:[]}}},{author:"DownyCat",bpm:105,difficulties:["Expert"],downloads:90091,id:"921",previewDuration:10,previewStartTime:12,songName:"In The End - Linkin Park",songSubName:"",downvotes:0,finishes:"23037",numBeats:{Expert:667},songDuration:216.2937414965986,upvotes:"809",genre:"Rock",version:"921-618",playlists:[],key:"921",hash:"3d44a8208b3eb92c3ee66b6f9529583b",objectID:"921",_highlightResult:{author:{value:"DownyCat",matchLevel:"none",matchedWords:[]},songName:{value:"In The End - Linkin Park",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"Kleid",bpm:102.7099990844727,difficulties:["Expert","Hard","Normal","Easy"],downloads:89923,id:"657",previewDuration:10,previewStartTime:12,songName:"Kung Fu Fighting",songSubName:"Carl Douglas",downvotes:13,finishes:"32946",numBeats:{Expert:526,Hard:491,Normal:399,Easy:349},songDuration:185.4538321995465,upvotes:"791",genre:"Pop",version:"657-424",playlists:[],key:"657",hash:"e0e7bbd22fe79e3b398b99f1b4190670",objectID:"657",_highlightResult:{author:{value:"Kleid",matchLevel:"none",matchedWords:[]},songName:{value:"Kung Fu Fighting",matchLevel:"none",matchedWords:[]},songSubName:{value:"Carl Douglas",matchLevel:"none",matchedWords:[]}}},{author:"JailBird",bpm:89,difficulties:["Hard"],downloads:88855,id:"647",previewDuration:30,previewStartTime:62,songName:"Despacito",songSubName:"Luis Fonsi ft. Daddy Yankee",downvotes:1,finishes:"18040",numBeats:{Hard:717},songDuration:228.9110204081633,upvotes:"713",genre:"Electronic",version:"647-418",playlists:[],key:"647",hash:"22a04a656c6c6f7dea9e3f5d96ceb538",objectID:"647",_highlightResult:{author:{value:"JailBird",matchLevel:"none",matchedWords:[]},songName:{value:"Despacito",matchLevel:"none",matchedWords:[]},songSubName:{value:"Luis Fonsi ft. Daddy Yankee",matchLevel:"none",matchedWords:[]}}},{author:"RunRockGame",bpm:128,difficulties:["Expert","Hard","Normal"],downloads:88328,id:"1212",previewDuration:10,previewStartTime:12,songName:"I Gotta Feeling",songSubName:"The Black Eyed Peas",downvotes:2,finishes:"36096",numBeats:{Expert:849,Hard:739,Normal:574},songDuration:295.8233958333333,upvotes:"989",genre:"Pop",version:"1212-836",playlists:[],key:"1212",hash:"a406ba6c6a57a9b42030643f7f708825",objectID:"1212",_highlightResult:{author:{value:"RunRockGame",matchLevel:"none",matchedWords:[]},songName:{value:"I Gotta Feeling",matchLevel:"none",matchedWords:[]},songSubName:{value:"The Black Eyed Peas",matchLevel:"none",matchedWords:[]}}},{author:"Maurizio De Jorio",bpm:118,difficulties:["Easy","Normal","Hard","Expert","ExpertPlus"],downloads:87181,id:"691",previewDuration:10,previewStartTime:12,songName:"Running in the 90's",songSubName:"Initial D",downvotes:28,finishes:40874,numBeats:{Easy:91,Normal:133,Hard:167,Expert:345,ExpertPlus:348},songDuration:98.64253968253968,upvotes:175,genre:"Pop",version:"691-454",playlists:[],objectID:"691",_highlightResult:{author:{value:"Maurizio De Jorio",matchLevel:"none",matchedWords:[]},songName:{value:"Running in the 90's",matchLevel:"none",matchedWords:[]},songSubName:{value:"Initial D",matchLevel:"none",matchedWords:[]}}},{author:"Murata/ ONE",bpm:130,difficulties:["Hard"],downloads:86656,id:"126",previewDuration:10,previewStartTime:12,songName:"HERO!",songSubName:"Beatmap by WitchWhoCleans",downvotes:0,finishes:"25038",numBeats:{Hard:277},songDuration:89.76834467120182,upvotes:"544",genre:"Anime",version:"126-72",playlists:[],key:"126",hash:"3b754dd150d46e26486369b55db8f3c2",objectID:"126",_highlightResult:{author:{value:"Murata/ ONE",matchLevel:"none",matchedWords:[]},songName:{value:"HERO!",matchLevel:"none",matchedWords:[]},songSubName:{value:"Beatmap by WitchWhoCleans",matchLevel:"none",matchedWords:[]}}},{author:"Skrillex",bpm:145,difficulties:["Expert","Hard","Normal"],downloads:85542,id:"574",previewDuration:10,previewStartTime:12,songName:"First Of The Year (Equinox)",songSubName:"",downvotes:14,finishes:"36701",numBeats:{Expert:894,Hard:561,Normal:434},songDuration:261.5902040816326,upvotes:"711",genre:"Dubstep",version:"574-364",playlists:[],key:"574",hash:"3179c4fcbc8c4e2b8ec11fce9a10b240",objectID:"574",_highlightResult:{author:{value:"Skrillex",matchLevel:"none",matchedWords:[]},songName:{value:"First Of The Year (Equinox)",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"sonjh02",bpm:80,difficulties:["Hard"],downloads:84929,id:"310",previewDuration:10,previewStartTime:12,songName:"Happy",songSubName:"Pharrell Williams",downvotes:0,finishes:"23588",numBeats:{Hard:493},songDuration:240.6283900226758,upvotes:"467",genre:"Pop",version:"310-183",playlists:[],key:"310",hash:"296f4bbb6f606a3423ef136ca7c9d958",objectID:"310",_highlightResult:{author:{value:"sonjh02",matchLevel:"none",matchedWords:[]},songName:{value:"Happy",matchLevel:"none",matchedWords:[]},songSubName:{value:"Pharrell Williams",matchLevel:"none",matchedWords:[]}}},{author:"BennyDaBeast",bpm:105,difficulties:["Expert","Hard","Normal","ExpertPlus"],downloads:84433,id:"542",previewDuration:10,previewStartTime:12,songName:"Midnight City",songSubName:"M83",downvotes:0,finishes:"44907",numBeats:{Expert:634,Hard:367,Normal:332,ExpertPlus:931},songDuration:233.7359410430839,upvotes:"1891",genre:"Rock",version:"542-341",playlists:["fantasticflowvol2"],key:"542",hash:"fc5bf9ea102a7943d8c2986779999aff",objectID:"542",_highlightResult:{author:{value:"BennyDaBeast",matchLevel:"none",matchedWords:[]},songName:{value:"Midnight City",matchLevel:"none",matchedWords:[]},songSubName:{value:"M83",matchLevel:"none",matchedWords:[]}}},{author:"RaynArch",bpm:130,difficulties:["ExpertPlus","Expert"],downloads:83237,id:"1001",previewDuration:12,previewStartTime:46.49700164794922,songName:"Party Rock Anthem",songSubName:"LMFAO",downvotes:21,finishes:"28900",numBeats:{ExpertPlus:455,Expert:396},songDuration:135.1575510204082,upvotes:"1001",genre:"Pop",version:"1001-675",playlists:[],key:"1001",hash:"8bc8454fcef1de7214a766fa2dfb06ec",objectID:"1001",_highlightResult:{author:{value:"RaynArch",matchLevel:"none",matchedWords:[]},songName:{value:"Party Rock Anthem",matchLevel:"none",matchedWords:[]},songSubName:{value:"LMFAO",matchLevel:"none",matchedWords:[]}}},{author:"AbsolutePotato",bpm:82,difficulties:["Expert"],downloads:81622,id:"1068",previewDuration:10,previewStartTime:12,songName:"We Will Rock You",songSubName:"Queen",downvotes:6,finishes:"14251",numBeats:{Expert:720},songDuration:122.305306122449,upvotes:"197",genre:"Rock",version:"1068-725",playlists:[],key:"1068",hash:"50fce08423ef5bdb6e02e3c08b86dd06",objectID:"1068",_highlightResult:{author:{value:"AbsolutePotato",matchLevel:"none",matchedWords:[]},songName:{value:"We Will Rock You",matchLevel:"none",matchedWords:[]},songSubName:{value:"Queen",matchLevel:"none",matchedWords:[]}}},{author:"Jovian",bpm:160,difficulties:["Expert","Hard","Normal"],downloads:80670,id:"1216",previewDuration:10,previewStartTime:90,songName:"Shake It Off",songSubName:"Taylor Swift",downvotes:2,finishes:"27795",numBeats:{Expert:800,Hard:786,Normal:628},songDuration:219.2718367346939,upvotes:"1515",genre:"Pop",version:"1216-840",playlists:["fantasticflowvol2"],key:"1216",hash:"ffed628ce488f014da0546f6b63c8d6f",objectID:"1216",_highlightResult:{author:{value:"Jovian",matchLevel:"none",matchedWords:[]},songName:{value:"Shake It Off",matchLevel:"none",matchedWords:[]},songSubName:{value:"Taylor Swift",matchLevel:"none",matchedWords:[]}}},{author:"Sinlord",bpm:120,difficulties:["Expert"],downloads:80531,id:"335",previewDuration:10,previewStartTime:12,songName:"Megalovania",songSubName:"Toby Fox",downvotes:0,finishes:"15195",numBeats:{Expert:697},songDuration:158.9074149659864,upvotes:"1660",genre:"Electronic",version:"335-197",playlists:[],key:"335",hash:"652e9c9700ff022acb9d84165d083c71",objectID:"335",_highlightResult:{author:{value:"Sinlord",matchLevel:"none",matchedWords:[]},songName:{value:"Megalovania",matchLevel:"none",matchedWords:[]},songSubName:{value:"Toby Fox",matchLevel:"none",matchedWords:[]}}},{author:"Prime",bpm:135,difficulties:["Hard"],downloads:79447,id:"912",previewDuration:15,previewStartTime:38,songName:"You're Welcome",songSubName:"Moana",downvotes:0,finishes:"34012",numBeats:{Hard:275},songDuration:168.5720634920635,upvotes:"984",genre:"Soundtrack",version:"912-609",playlists:[],key:"912",hash:"274270cd9afab8119d013d8ee2f2a2af",objectID:"912",_highlightResult:{author:{value:"Prime",matchLevel:"none",matchedWords:[]},songName:{value:"You're Welcome",matchLevel:"none",matchedWords:[]},songSubName:{value:"Moana",matchLevel:"none",matchedWords:[]}}},{author:"Caravan Palace",bpm:122,difficulties:["Expert","Hard","Normal"],downloads:78518,id:"788",previewDuration:10,previewStartTime:8,songName:"Black Betty",songSubName:"Caravan Palace Cover",downvotes:38,finishes:"34223",numBeats:{Expert:914,Hard:618,Normal:402},songDuration:191.995918367347,upvotes:"1447",genre:"Electro Swing",version:"788-520",playlists:[],key:"788",hash:"5f471736e9940823bb25461e7538c3eb",objectID:"788",_highlightResult:{author:{value:"Caravan Palace",matchLevel:"none",matchedWords:[]},songName:{value:"Black Betty",matchLevel:"none",matchedWords:[]},songSubName:{value:"Caravan Palace Cover",matchLevel:"none",matchedWords:[]}}},{author:"Synodic",bpm:126,difficulties:["Expert"],downloads:77451,id:"1010",previewDuration:10,previewStartTime:22.86499977111816,songName:"Levels",songSubName:"Avicii",downvotes:21,finishes:"23518",numBeats:{Expert:845},songDuration:209.5287755102041,upvotes:"1208",genre:"House",version:"1010-682",playlists:[],key:"1010",hash:"c1af982fcaecd5efddeed1e33da379ef",objectID:"1010",_highlightResult:{author:{value:"Synodic",matchLevel:"none",matchedWords:[]},songName:{value:"Levels",matchLevel:"none",matchedWords:[]},songSubName:{value:"Avicii",matchLevel:"none",matchedWords:[]}}},{author:"Avicii",bpm:125,difficulties:["Hard"],downloads:77307,id:"757",previewDuration:30,previewStartTime:34,songName:"Hey Brother",songSubName:"(Beatmap by Chandoggie)",downvotes:16,finishes:"23454",numBeats:{Hard:419},songDuration:142.2399092970522,upvotes:"678",genre:"Electronic",version:"757-498",playlists:[],key:"757",hash:"fee126bcbe35b39c4622bbc1c7ed2280",objectID:"757",_highlightResult:{author:{value:"Avicii",matchLevel:"none",matchedWords:[]},songName:{value:"Hey Brother",matchLevel:"none",matchedWords:[]},songSubName:{value:"(Beatmap by Chandoggie)",matchLevel:"none",matchedWords:[]}}},{author:"Eminem",bpm:148,difficulties:["ExpertPlus"],downloads:75943,downvotes:5,finishes:"6492",id:"1574",previewDuration:10,previewStartTime:263,numBeats:{ExpertPlus:1099},songDuration:366.5815625,songName:"Rap God (Explicit)",songSubName:"",upvotes:"975",genre:"Rap",version:"1574-1107",playlists:[],key:"1574",hash:"23eceeac1949506d983f32de8353935c",objectID:"1574",_highlightResult:{author:{value:"Eminem",matchLevel:"none",matchedWords:[]},songName:{value:"Rap God (Explicit)",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"KelleraSW",bpm:128,difficulties:["ExpertPlus"],downloads:74640,id:"976",previewDuration:10,previewStartTime:12,songName:"Pumped up Kicks",songSubName:"Foster The People",downvotes:0,finishes:"4682",numBeats:{ExpertPlus:885},songDuration:255.9738775510204,upvotes:"190",genre:"Pop",version:"976-657",playlists:[],key:"976",hash:"6be6e1d7af99a34ee82b99018264a352",objectID:"976",_highlightResult:{author:{value:"KelleraSW",matchLevel:"none",matchedWords:[]},songName:{value:"Pumped up Kicks",matchLevel:"none",matchedWords:[]},songSubName:{value:"Foster The People",matchLevel:"none",matchedWords:[]}}},{author:"OutKast",bpm:159,difficulties:["Expert"],downloads:74510,id:"642",previewDuration:10,previewStartTime:12,songName:"Hey Ya",songSubName:"",downvotes:1,finishes:"0",numBeats:{Expert:332},songDuration:102.8963265306122,upvotes:"118",genre:"Hip Hop",version:"642-413",playlists:[],key:"642",hash:"829b7e859e084770d94d2fa8218196a1",objectID:"642",_highlightResult:{author:{value:"OutKast",matchLevel:"none",matchedWords:[]},songName:{value:"Hey Ya",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"The Chainsmokers",bpm:95,difficulties:["Expert"],downloads:73756,id:"548",previewDuration:10,previewStartTime:12,songName:"Closer ft. Halsey",songSubName:"",downvotes:0,finishes:"6379",numBeats:{Expert:865},songDuration:247.04,upvotes:"109",genre:"Electronic",version:"548-346",playlists:[],key:"548",hash:"22e4766cd0b57a4b20a6249396e313ed",objectID:"548",_highlightResult:{author:{value:"The Chainsmokers",matchLevel:"none",matchedWords:[]},songName:{value:"Closer ft. Halsey",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"NOMA (mapped by Roffle)",bpm:170,difficulties:["Expert"],downloads:73737,id:"50",previewDuration:10,previewStartTime:12,songName:"Brain Power",songSubName:"",downvotes:1,finishes:"6876",numBeats:{Expert:710},songDuration:116.8600453514739,upvotes:"517",genre:"Electronic",version:"50-24",playlists:[],key:"50",hash:"e7fc51938eef2b9863e25c250e020c2c",objectID:"50",_highlightResult:{author:{value:"NOMA (mapped by Roffle)",matchLevel:"none",matchedWords:[]},songName:{value:"Brain Power",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"DownyCat",bpm:167,difficulties:["Expert","Hard","Normal"],downloads:73661,id:"1339",previewDuration:10,previewStartTime:12,songName:"Boulevard of Broken Dreams",songSubName:"Green Day",downvotes:15,finishes:"39543",numBeats:{Expert:1049,Hard:747,Normal:474},songDuration:265.6914285714286,upvotes:"1625",genre:"Rock",version:"1339-932",playlists:[],key:"1339",hash:"e6fd84016a6f49a94904713c9b15db78",objectID:"1339",_highlightResult:{author:{value:"DownyCat",matchLevel:"none",matchedWords:[]},songName:{value:"Boulevard of Broken Dreams",matchLevel:"none",matchedWords:[]},songSubName:{value:"Green Day",matchLevel:"none",matchedWords:[]}}},{author:"Reol",bpm:128,difficulties:["Normal","Hard","Expert"],downloads:73454,id:"65",previewDuration:20,previewStartTime:23.10000038146973,songName:"LUVORATORRRRRY!",songSubName:"feat.nqrse",downvotes:15,finishes:"31684",numBeats:{Normal:357,Hard:459,Expert:536},songDuration:138.7498185941043,upvotes:"1581",genre:"Vocaloid",version:"65-33",playlists:["lemme-see-you-dance"],key:"65",hash:"ea18712c2f9cc6ae768950e2e3998734",objectID:"65",_highlightResult:{author:{value:"Reol",matchLevel:"none",matchedWords:[]},songName:{value:"LUVORATORRRRRY!",matchLevel:"none",matchedWords:[]},songSubName:{value:"feat.nqrse",matchLevel:"none",matchedWords:[]}}},{author:"Earth, Wind & Fire",bpm:126,difficulties:["Expert","Hard","Normal"],downloads:71298,downvotes:30,finishes:"43006",id:"1628",previewDuration:16,previewStartTime:19,numBeats:{Expert:409,Hard:367,Normal:291},songDuration:141.9089115646258,songName:"September",songSubName:"",upvotes:"1670",genre:"R&B",version:"1628-1152",playlists:["lemme-see-you-dance"],key:"1628",hash:"d344fe48437cdfa79ca488ff2cef67fd",objectID:"1628",_highlightResult:{author:{value:"Earth, Wind & Fire",matchLevel:"none",matchedWords:[]},songName:{value:"September",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"Queen",bpm:152,difficulties:["Expert","Hard","Normal"],downloads:70733,downvotes:3,finishes:"23611",id:"2095",previewDuration:10,previewStartTime:12,numBeats:{Expert:709,Hard:435,Normal:419},songDuration:213.5555555555555,songName:"Don't Stop Me Now",songSubName:"Mapped by Looneyks",upvotes:"777",genre:"Rock",version:"2095-1453",playlists:[],key:"2095",hash:"0fd92f91f3bebd047ce2d74819077ef4",objectID:"2095",_highlightResult:{author:{value:"Queen",matchLevel:"none",matchedWords:[]},songName:{value:"Don't Stop Me Now",matchLevel:"none",matchedWords:[]},songSubName:{value:"Mapped by Looneyks",matchLevel:"none",matchedWords:[]}}},{author:"Nintendo",bpm:114,difficulties:["Hard"],downloads:70303,id:"19",previewDuration:10,previewStartTime:12,songName:"Mii Channel Theme (Fixed)",songSubName:"",downvotes:10,finishes:"8995",numBeats:{Hard:222},songDuration:55.35673469387755,upvotes:"174",genre:"Video Game",version:"19-3",playlists:[],key:"19",hash:"b900cb303e2472cd8545c470fa1b86ff",objectID:"19",_highlightResult:{author:{value:"Nintendo",matchLevel:"none",matchedWords:[]},songName:{value:"Mii Channel Theme (Fixed)",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"Daft Punk",bpm:120,difficulties:["Easy","Normal"],downloads:68781,id:"203",previewDuration:10,previewStartTime:12,songName:"Derezzed",songSubName:"Tron: Legacy Soundtrack",downvotes:0,finishes:"24440",numBeats:{Easy:219,Normal:218},songDuration:104.9890208333333,upvotes:"358",genre:"Electronic",version:"203-122",playlists:[],key:"203",hash:"287a3c1d5e2476875f6451382eb753fe",objectID:"203",_highlightResult:{author:{value:"Daft Punk",matchLevel:"none",matchedWords:[]},songName:{value:"Derezzed",matchLevel:"none",matchedWords:[]},songSubName:{value:"Tron: Legacy Soundtrack",matchLevel:"none",matchedWords:[]}}},{author:"GreatYazer",bpm:174,difficulties:["Expert","Hard","Normal"],downloads:68345,downvotes:2,finishes:"39426",id:"1996",previewDuration:10,previewStartTime:12,numBeats:{Expert:825,Hard:639,Normal:462},songDuration:222.1975510204082,songName:"Mr. Blue Sky",songSubName:"Electric Light Orchestra",upvotes:"3542",genre:"Rock",version:"1996-1392",playlists:["workout-flow"],key:"1996",hash:"3f8d73a1d61bb0aeb881147c6809fb57",objectID:"1996",_highlightResult:{author:{value:"GreatYazer",matchLevel:"none",matchedWords:[]},songName:{value:"Mr. Blue Sky",matchLevel:"none",matchedWords:[]},songSubName:{value:"Electric Light Orchestra",matchLevel:"none",matchedWords:[]}}},{author:"IKILLPXLS",bpm:120,difficulties:["Expert","Hard","Normal"],downloads:67538,id:"824",previewDuration:10,previewStartTime:12,songName:"This is America",songSubName:"Childish Gambino",downvotes:0,finishes:"19959",numBeats:{Expert:779,Hard:611,Normal:388},songDuration:192.9897505668934,upvotes:"667",genre:"Hip Hop",version:"824-545",playlists:[],key:"824",hash:"50c91cfdb4b167b04e43b1e08ff9906e",objectID:"824",_highlightResult:{author:{value:"IKILLPXLS",matchLevel:"none",matchedWords:[]},songName:{value:"This is America",matchLevel:"none",matchedWords:[]},songSubName:{value:"Childish Gambino",matchLevel:"none",matchedWords:[]}}},{author:"Pentatonix",bpm:133,difficulties:["Hard","Expert","Normal"],downloads:67409,id:"799",previewDuration:10,previewStartTime:12,songName:"Daft Punk",songSubName:"medley",downvotes:13,finishes:"26826",numBeats:{Hard:593,Expert:678,Normal:479},songDuration:250.412358276644,upvotes:"1063",genre:"Pop",version:"799-527",playlists:[],key:"799",hash:"d01823528785eb966a6b3bff16cdce6f",objectID:"799",_highlightResult:{author:{value:"Pentatonix",matchLevel:"none",matchedWords:[]},songName:{value:"Daft Punk",matchLevel:"none",matchedWords:[]},songSubName:{value:"medley",matchLevel:"none",matchedWords:[]}}},{author:"kyuz",bpm:128,difficulties:["Expert","Hard","Normal"],downloads:65712,id:"612",previewDuration:10,previewStartTime:12,songName:"The Fox (What Does The Fox Say?)",songSubName:"Ylvis",downvotes:1,finishes:"38274",numBeats:{Expert:451,Hard:340,Normal:309},songDuration:149.9286167800454,upvotes:"1073",genre:"Pop",version:"612-395",playlists:[],key:"612",hash:"ac0d3cbbea33fb05bfebbafac27c262b",objectID:"612",_highlightResult:{author:{value:"kyuz",matchLevel:"none",matchedWords:[]},songName:{value:"The Fox (What Does The Fox Say?)",matchLevel:"none",matchedWords:[]},songSubName:{value:"Ylvis",matchLevel:"none",matchedWords:[]}}},{author:"magic",bpm:128,difficulties:["Expert"],downloads:65149,id:"887",previewDuration:10,previewStartTime:12,songName:"MEME MEGAMASHUP 2",songSubName:"daymanoursavior",downvotes:3,finishes:"21783",numBeats:{Expert:1539},songDuration:562.9910204081633,upvotes:"1552",genre:"Meme",version:"887-595",playlists:[],key:"887",hash:"28d2838ade38c9ce70f99f6badc620f2",objectID:"887",_highlightResult:{author:{value:"magic",matchLevel:"none",matchedWords:[]},songName:{value:"MEME MEGAMASHUP 2",matchLevel:"none",matchedWords:[]},songSubName:{value:"daymanoursavior",matchLevel:"none",matchedWords:[]}}},{author:"Knife Party",bpm:174,difficulties:["Hard","Normal"],downloads:65092,id:"122",previewDuration:10,previewStartTime:12,songName:"Give It Up",songSubName:"",downvotes:0,finishes:"19406",numBeats:{Hard:312,Normal:218},songDuration:118.8038775510204,upvotes:"484",genre:"Electronic",version:"122-69",playlists:["songs-with-fantastic-flow-vol-3"],key:"122",hash:"1183a0af1eda01ff0ed9f0f1babaed4b",objectID:"122",_highlightResult:{author:{value:"Knife Party",matchLevel:"none",matchedWords:[]},songName:{value:"Give It Up",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"Maculate",bpm:200,difficulties:["Expert","Hard","Normal","Easy"],downloads:64361,id:"881",previewDuration:20,previewStartTime:94,songName:"Get Schwifty (Andromulus Remix)",songSubName:"",downvotes:3,finishes:"25636",numBeats:{Expert:684,Hard:629,Normal:518,Easy:411},songDuration:278.7787755102041,upvotes:"1299",genre:"Pop",version:"881-590",playlists:["workout-flow"],key:"881",hash:"5ab1151c40a740a8129caf5d698e8271",objectID:"881",_highlightResult:{author:{value:"Maculate",matchLevel:"none",matchedWords:[]},songName:{value:"Get Schwifty (Andromulus Remix)",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"Producer Kairu & Dekamolisher",bpm:100,difficulties:["ExpertPlus","Expert"],downloads:64271,id:"197",previewDuration:10,previewStartTime:12,songName:"Shelter",songSubName:"Porter Robinson & Madeon",downvotes:0,finishes:"24036",numBeats:{ExpertPlus:618,Expert:616},songDuration:220.0032653061224,upvotes:"762",genre:"Pop",version:"197-118",playlists:[],key:"197",hash:"00d66638787ee0b77aafd2e627d28548",objectID:"197",_highlightResult:{author:{value:"Producer Kairu & Dekamolisher",matchLevel:"none",matchedWords:[]},songName:{value:"Shelter",matchLevel:"none",matchedWords:[]},songSubName:{value:"Porter Robinson & Madeon",matchLevel:"none",matchedWords:[]}}},{author:"poc",bpm:131.9199981689453,difficulties:["Expert","Hard","Normal"],downloads:63550,id:"472",previewDuration:12,previewStartTime:38,songName:"I'm Gonna Be (500 Miles)",songSubName:"The Proclaimers",downvotes:4,finishes:"15221",numBeats:{Expert:749,Hard:652,Normal:457},songDuration:215.6041496598639,upvotes:"699",genre:"Rock",version:"472-288",playlists:[],key:"472",hash:"32a152e6ee191eedd69923c02c7d5133",objectID:"472",_highlightResult:{author:{value:"poc",matchLevel:"none",matchedWords:[]},songName:{value:"I'm Gonna Be (500 Miles)",matchLevel:"none",matchedWords:[]},songSubName:{value:"The Proclaimers",matchLevel:"none",matchedWords:[]}}},{author:"Camellia feat. nanahira",bpm:200,difficulties:["Expert","Easy","Normal","Hard"],downloads:63009,id:"21",previewDuration:15,previewStartTime:57.654,songName:"Bassdrop Freaks",songSubName:"",downvotes:10,finishes:"25495",numBeats:{Expert:490,Easy:143,Normal:233,Hard:365},songDuration:116.647619047619,upvotes:"147",genre:"Electronic",version:"21-4",playlists:[],key:"21",hash:"b3bc314396683cd95cf5ceeb6d5e1193",objectID:"21",_highlightResult:{author:{value:"Camellia feat. nanahira",matchLevel:"none",matchedWords:[]},songName:{value:"Bassdrop Freaks",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"DownyCat",bpm:186,difficulties:["Expert","Hard","Normal"],downloads:61451,downvotes:0,finishes:"34648",id:"1934",previewDuration:10,previewStartTime:12,numBeats:{Expert:835,Hard:553,Normal:344},songDuration:173.9755102040816,songName:"American Idiot",songSubName:"Green Day",upvotes:"1291",genre:"Rock",version:"1934-1345",playlists:[],key:"1934",hash:"31546503481cf0719730358eee621e22",objectID:"1934",_highlightResult:{author:{value:"DownyCat",matchLevel:"none",matchedWords:[]},songName:{value:"American Idiot",matchLevel:"none",matchedWords:[]},songSubName:{value:"Green Day",matchLevel:"none",matchedWords:[]}}},{author:"Raxtus",bpm:148,difficulties:["ExpertPlus","Expert","Hard","Easy"],downloads:61322,downvotes:0,finishes:"13202",id:"1678",previewDuration:10,previewStartTime:1,numBeats:{ExpertPlus:1049,Expert:1009,Hard:875,Easy:618},songDuration:223.7983673469388,songName:"Mr Brightside",songSubName:"The Killers",upvotes:"645",genre:"Rock",version:"1678-1177",playlists:[],key:"1678",hash:"f2ff991ebd5b2a6be275b1091e33cb8b",objectID:"1678",_highlightResult:{author:{value:"Raxtus",matchLevel:"none",matchedWords:[]},songName:{value:"Mr Brightside",matchLevel:"none",matchedWords:[]},songSubName:{value:"The Killers",matchLevel:"none",matchedWords:[]}}},{author:"Lil Miss Jay",bpm:113.6999969482422,difficulties:["Expert"],downloads:60917,id:"1119",previewDuration:10,previewStartTime:16,songName:"I'll Make a Man out of You",songSubName:"Disney's Mulan",downvotes:21,finishes:"15263",numBeats:{Expert:674},songDuration:198.0429931972789,upvotes:"763",genre:"Soundtrack",version:"1119-764",playlists:[],key:"1119",hash:"239be9fb0c3bea9a330aa26efef3dc79",objectID:"1119",_highlightResult:{author:{value:"Lil Miss Jay",matchLevel:"none",matchedWords:[]},songName:{value:"I'll Make a Man out of You",matchLevel:"none",matchedWords:[]},songSubName:{value:"Disney's Mulan",matchLevel:"none",matchedWords:[]}}},{author:"Kaskade",bpm:126,difficulties:["Expert"],downloads:60426,id:"46",previewDuration:10,previewStartTime:12,songName:"Never Sleep Alone",songSubName:"",downvotes:1,finishes:"13603",numBeats:{Expert:536},songDuration:199.8557596371882,upvotes:"520",genre:"EDM",version:"46-21",playlists:[],key:"46",hash:"ac83f849173ffd27638de488e45c4308",objectID:"46",_highlightResult:{author:{value:"Kaskade",matchLevel:"none",matchedWords:[]},songName:{value:"Never Sleep Alone",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"LuLu",bpm:120,difficulties:["Normal"],downloads:60311,id:"982",previewDuration:10,previewStartTime:12,songName:"Stayin' Alive",songSubName:"",downvotes:0,finishes:"18891",numBeats:{Normal:130},songDuration:60.52571428571429,upvotes:"217",genre:"EDM",version:"982-662",playlists:[],key:"982",hash:"867adb6edc5b1dc2822d07f052955c6b",objectID:"982",_highlightResult:{author:{value:"LuLu",matchLevel:"none",matchedWords:[]},songName:{value:"Stayin' Alive",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"Alstroemeria Records ft. Nomico",bpm:137.9810028076172,difficulties:["Expert"],downloads:59621,id:"94",previewDuration:10,previewStartTime:12,songName:"Bad Apple!!",songSubName:"",downvotes:5,finishes:"4737",numBeats:{Expert:571},songDuration:121.6472562358277,upvotes:"110",genre:"Video Games",version:"94-51",playlists:[],key:"94",hash:"5e67cec516ae75199805be867d721bd7",objectID:"94",_highlightResult:{author:{value:"Alstroemeria Records ft. Nomico",matchLevel:"none",matchedWords:[]},songName:{value:"Bad Apple!!",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"BennyDaBeast",bpm:123,difficulties:["Expert","Hard"],downloads:59102,id:"421",previewDuration:10,previewStartTime:12,songName:"Kids",songSubName:"MGMT",downvotes:0,finishes:"20243",numBeats:{Expert:866,Hard:729},songDuration:270.9683219954649,upvotes:"889",genre:"Pop",version:"421-251",playlists:["workout-flow"],key:"421",hash:"c7107f921dd0058a57a9c2628f5f11ab",objectID:"421",_highlightResult:{author:{value:"BennyDaBeast",matchLevel:"none",matchedWords:[]},songName:{value:"Kids",matchLevel:"none",matchedWords:[]},songSubName:{value:"MGMT",matchLevel:"none",matchedWords:[]}}},{author:"CANADIAN",bpm:144,difficulties:["Expert"],downloads:58017,downvotes:4,finishes:"0",id:"13548",previewDuration:10,previewStartTime:12,numBeats:{Expert:604},songDuration:180.889410430839,songName:"Bang",songSubName:"NGHTMRE & Shaquille O'Neal & Lil Jon",upvotes:"33",version:"13548-14610",genre:"Uncategorized",playlists:[],key:"13548",hash:"049d032353651fab65dea565f414c0c7",objectID:"13548",_highlightResult:{author:{value:"CANADIAN",matchLevel:"none",matchedWords:[]},songName:{value:"Bang",matchLevel:"none",matchedWords:[]},songSubName:{value:"NGHTMRE & Shaquille O'Neal & Lil Jon",matchLevel:"none",matchedWords:[]}}},{author:"xDannicus",bpm:134,difficulties:["Expert","Hard","Normal"],downloads:57364,downvotes:30,finishes:"23720",id:"1615",previewDuration:15,previewStartTime:30,numBeats:{Expert:764,Hard:672,Normal:460},songDuration:198.8971655328798,songName:"Mortal Kombat (Original Theme)",songSubName:"Techno Syndrome",upvotes:"975",genre:"Electronic",version:"1615-1140",playlists:[],key:"1615",hash:"8780d81b5f753f1c546219e5c442607e",objectID:"1615",_highlightResult:{author:{value:"xDannicus",matchLevel:"none",matchedWords:[]},songName:{value:"Mortal Kombat (Original Theme)",matchLevel:"none",matchedWords:[]},songSubName:{value:"Techno Syndrome",matchLevel:"none",matchedWords:[]}}},{author:"Alan Walker (Map. dragonfyre)",bpm:90,difficulties:["Hard","Normal"],downloads:56693,id:"1084",previewDuration:10,previewStartTime:12,songName:"Fade",songSubName:"",downvotes:0,finishes:"17453",numBeats:{Hard:780,Normal:492},songDuration:194.7996598639456,upvotes:"427",genre:"EDM",version:"1084-738",playlists:[],key:"1084",hash:"88eefb75fd246896bf018b28ef4a597b",objectID:"1084",_highlightResult:{author:{value:"Alan Walker (Map. dragonfyre)",matchLevel:"none",matchedWords:[]},songName:{value:"Fade",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"Basshunter",bpm:140,difficulties:["Expert","Hard","Normal"],downloads:56399,id:"754",previewDuration:15,previewStartTime:34,songName:"DotA",songSubName:"",downvotes:16,finishes:"32014",numBeats:{Expert:893,Hard:500,Normal:412},songDuration:201.9787755102041,upvotes:"1942",genre:"Electronic",version:"754-495",playlists:["workout-flow"],key:"754",hash:"4ee86afead4daa2f785138966fe66d47",objectID:"754",_highlightResult:{author:{value:"Basshunter",matchLevel:"none",matchedWords:[]},songName:{value:"DotA",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"Moon920",bpm:157.3999938964844,difficulties:["Hard","Normal"],downloads:56234,id:"1157",previewDuration:10,previewStartTime:12,songName:"Danger Zone",songSubName:"Kenny Logins",downvotes:1,finishes:"22449",numBeats:{Hard:361,Normal:187},songDuration:156.3455555555556,upvotes:"514",genre:"Soundtrack",version:"1157-795",playlists:[],key:"1157",hash:"44685dc56da322a7a38ef1ccd2e6ab13",objectID:"1157",_highlightResult:{author:{value:"Moon920",matchLevel:"none",matchedWords:[]},songName:{value:"Danger Zone",matchLevel:"none",matchedWords:[]},songSubName:{value:"Kenny Logins",matchLevel:"none",matchedWords:[]}}},{author:"Freeek",bpm:137,difficulties:["Expert","ExpertPlus","Hard","Normal","Easy"],downloads:56055,id:"1167",previewDuration:10,previewStartTime:12,songName:"Knights of Cydonia (Single Edit)",songSubName:"Muse",downvotes:1,finishes:"15156",numBeats:{Expert:1109,ExpertPlus:1109,Hard:854,Normal:413,Easy:232},songDuration:250.3327664399093,upvotes:"495",genre:"Rock",version:"1167-802",playlists:[],key:"1167",hash:"cb921cd82357ca70a066495af7bcdd6f",objectID:"1167",_highlightResult:{author:{value:"Freeek",matchLevel:"none",matchedWords:[]},songName:{value:"Knights of Cydonia (Single Edit)",matchLevel:"none",matchedWords:[]},songSubName:{value:"Muse",matchLevel:"none",matchedWords:[]}}},{author:"Kubo",bpm:128,difficulties:["Expert"],downloads:55178,id:"120",previewDuration:10,previewStartTime:12,songName:"Spin Me Round",songSubName:"",downvotes:0,finishes:"4500",numBeats:{Expert:533},songDuration:196.0533333333333,upvotes:"78",genre:"Pop",version:"120-67",playlists:[],key:"120",hash:"55fbc3d90de00290ca1e589345fa0fbb",objectID:"120",_highlightResult:{author:{value:"Kubo",matchLevel:"none",matchedWords:[]},songName:{value:"Spin Me Round",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"David Glen Eisleyn",bpm:122,difficulties:["Expert"],downloads:54963,id:"942",previewDuration:10,previewStartTime:12,songName:"Sweet Victory",songSubName:'from "Band Geeks"',downvotes:4,finishes:"13916",numBeats:{Expert:272},songDuration:113.95820861678,upvotes:"517",genre:"Soundtrack",version:"942-632",playlists:[],key:"942",hash:"7d24240613fdcd80d98979cd1a0ef710",objectID:"942",_highlightResult:{author:{value:"David Glen Eisleyn",matchLevel:"none",matchedWords:[]},songName:{value:"Sweet Victory",matchLevel:"none",matchedWords:[]},songSubName:{value:'from "Band Geeks"',matchLevel:"none",matchedWords:[]}}},{author:"DarkGrisen",bpm:130,difficulties:["Hard"],downloads:54046,downvotes:5,finishes:"188",id:"7943",previewDuration:10,previewStartTime:12,numBeats:{Hard:138},songDuration:40.72210884353741,songName:"DarkGrisen",songSubName:"DarkGrisen",upvotes:"10",version:"7943-7966",genre:"Uncategorized",playlists:[],key:"7943",hash:"33ac3b08501a8a9c38866975ce453232",objectID:"7943",_highlightResult:{author:{value:"DarkGrisen",matchLevel:"none",matchedWords:[]},songName:{value:"DarkGrisen",matchLevel:"none",matchedWords:[]},songSubName:{value:"DarkGrisen",matchLevel:"none",matchedWords:[]}}},{author:"mastgrr",bpm:110,difficulties:["Expert","Hard"],downloads:52796,id:"477",previewDuration:10,previewStartTime:12,songName:"Cooking by the Book ft. Lil Jon",songSubName:"",downvotes:4,finishes:"22163",numBeats:{Expert:255,Hard:213},songDuration:78.65575963718821,upvotes:"490",genre:"Rap",version:"477-293",playlists:[],key:"477",hash:"14127132722267e6f13aec02908d19ac",objectID:"477",_highlightResult:{author:{value:"mastgrr",matchLevel:"none",matchedWords:[]},songName:{value:"Cooking by the Book ft. Lil Jon",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"Edit by Barudaq",bpm:60,difficulties:["Hard"],downloads:52786,id:"30",previewDuration:10,previewStartTime:13.5,songName:"Ducktales",songSubName:"Intro",downvotes:1,finishes:"6404",numBeats:{Hard:166},songDuration:56,upvotes:"139",genre:"EDM",version:"30-10",playlists:[],key:"30",hash:"6d9dc8d30c5a6ffe5ee8b7ab23653163",objectID:"30",_highlightResult:{author:{value:"Edit by Barudaq",matchLevel:"none",matchedWords:[]},songName:{value:"Ducktales",matchLevel:"none",matchedWords:[]},songSubName:{value:"Intro",matchLevel:"none",matchedWords:[]}}},{author:"Jobas",bpm:102,difficulties:["Expert"],downloads:51433,id:"202",previewDuration:16,previewStartTime:56,songName:"My Hero Academia Opening 3",songSubName:"My Hero Academia",downvotes:0,finishes:"13109",numBeats:{Expert:295},songDuration:94.19755102040817,upvotes:"187",genre:"Uncategorized",version:"202-121",playlists:[],key:"202",hash:"8c60f305065171ec6cde16fd5360f6e0",objectID:"202",_highlightResult:{author:{value:"Jobas",matchLevel:"none",matchedWords:[]},songName:{value:"My Hero Academia Opening 3",matchLevel:"none",matchedWords:[]},songSubName:{value:"My Hero Academia",matchLevel:"none",matchedWords:[]}}},{author:"Panic! At The Disco",bpm:120,difficulties:["Hard"],downloads:51130,id:"124",previewDuration:10,previewStartTime:12,songName:"Victorious",songSubName:"",downvotes:0,finishes:"11968",numBeats:{Hard:557},songDuration:178.6775510204082,upvotes:"273",genre:"Rock",version:"124-70",playlists:[],key:"124",hash:"14484abb66283c3f9a7dc9d5482ac21f",objectID:"124",_highlightResult:{author:{value:"Panic! At The Disco",matchLevel:"none",matchedWords:[]},songName:{value:"Victorious",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"Goanna",bpm:138,difficulties:["Hard"],downloads:51012,id:"577",previewDuration:10,previewStartTime:12,songName:"Crazy Frog - Axel F",songSubName:"Axel F",downvotes:14,finishes:"17258",numBeats:{Hard:566},songDuration:173.0583219954649,upvotes:"403",genre:"Pop",version:"577-367",playlists:[],key:"577",hash:"8023a1202d7479e75818d6db58beab11",objectID:"577",_highlightResult:{author:{value:"Goanna",matchLevel:"none",matchedWords:[]},songName:{value:"Crazy Frog - Axel F",matchLevel:"none",matchedWords:[]},songSubName:{value:"Axel F",matchLevel:"none",matchedWords:[]}}},{author:"Ween",bpm:246,difficulties:["Expert"],downloads:49924,id:"975",previewDuration:10,previewStartTime:12,songName:"Ocean Man",songSubName:"",downvotes:0,finishes:"16213",numBeats:{Expert:246},songDuration:75.61789115646259,upvotes:"304",genre:"Uncategorized",version:"975-656",playlists:[],key:"975",hash:"12fff9fee02ed2be8fd7d9da6588c656",objectID:"975",_highlightResult:{author:{value:"Ween",matchLevel:"none",matchedWords:[]},songName:{value:"Ocean Man",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"RJCCJ",bpm:94,difficulties:["Hard"],downloads:49181,id:"739",previewDuration:10,previewStartTime:12,songName:"Halo (Mjolnir Mix)",songSubName:"Martin O'Donnell",downvotes:16,finishes:"9971",numBeats:{Hard:616},songDuration:251.688,upvotes:"210",genre:"Soundtrack",version:"739-485",playlists:[],key:"739",hash:"f3bac6f5d7810e085c14831e0d79ddfa",objectID:"739",_highlightResult:{author:{value:"RJCCJ",matchLevel:"none",matchedWords:[]},songName:{value:"Halo (Mjolnir Mix)",matchLevel:"none",matchedWords:[]},songSubName:{value:"Martin O'Donnell",matchLevel:"none",matchedWords:[]}}},{author:"Neplock",bpm:125,difficulties:["Expert"],downloads:48839,id:"1050",previewDuration:14,previewStartTime:23,songName:"ME!ME!ME!",songSubName:"TeddyLoyd feat. daoko",downvotes:6,finishes:"12029",numBeats:{Expert:276},songDuration:92.83675,upvotes:"557",genre:"Anime",version:"1050-711",playlists:[],key:"1050",hash:"33828f82d8c938efb55f124f4ecb0ff8",objectID:"1050",_highlightResult:{author:{value:"Neplock",matchLevel:"none",matchedWords:[]},songName:{value:"ME!ME!ME!",matchLevel:"none",matchedWords:[]},songSubName:{value:"TeddyLoyd feat. daoko",matchLevel:"none",matchedWords:[]}}},{author:"Hanazawa Kana (charted by FrostByte)",bpm:120,difficulties:["Expert"],downloads:48539,id:"209",previewDuration:10,previewStartTime:0,songName:"Renai Circulation",songSubName:"",downvotes:0,finishes:"11273",numBeats:{Expert:429},songDuration:91.48662131519275,upvotes:"632",genre:"J-Pop",version:"209-125",playlists:[],key:"209",hash:"fa1795ffb7bc7a5586fec01474f1cf13",objectID:"209",_highlightResult:{author:{value:"Hanazawa Kana (charted by FrostByte)",matchLevel:"none",matchedWords:[]},songName:{value:"Renai Circulation",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"Far Out Remix",bpm:143,difficulties:["Expert"],downloads:48203,id:"127",previewDuration:10,previewStartTime:12,songName:"The Force Theme",songSubName:"",downvotes:0,finishes:"8882",numBeats:{Expert:542},songDuration:188.0959863945578,upvotes:"360",genre:"Alternative",version:"127-73",playlists:[],key:"127",hash:"19cba4f6c295fb73da0c0208bda95005",objectID:"127",_highlightResult:{author:{value:"Far Out Remix",matchLevel:"none",matchedWords:[]},songName:{value:"The Force Theme",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"Jobas",bpm:127,difficulties:["Hard"],downloads:46207,id:"426",previewDuration:10,previewStartTime:12,songName:"Rasputin-Boney M",songSubName:"",downvotes:0,finishes:"12605",numBeats:{Hard:701},songDuration:265.9787755102041,upvotes:"764",genre:"EDM",version:"426-253",playlists:["workout-flow"],key:"426",hash:"46500fd0c9f06de82b3446446b45e60c",objectID:"426",_highlightResult:{author:{value:"Jobas",matchLevel:"none",matchedWords:[]},songName:{value:"Rasputin-Boney M",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"Windmill",bpm:120,difficulties:["Expert"],downloads:45697,id:"759",previewDuration:18,previewStartTime:6,songName:"DARE",songSubName:"Gorillaz",downvotes:16,finishes:"10021",numBeats:{Expert:349},songDuration:121.6742176870748,upvotes:"356",genre:"Pop",version:"759-499",playlists:[],key:"759",hash:"3b5bc095562aba308ae5ed7ad0588300",objectID:"759",_highlightResult:{author:{value:"Windmill",matchLevel:"none",matchedWords:[]},songName:{value:"DARE",matchLevel:"none",matchedWords:[]},songSubName:{value:"Gorillaz",matchLevel:"none",matchedWords:[]}}},{author:"Zedd",bpm:128,difficulties:["Hard"],downloads:45381,id:"398",previewDuration:15,previewStartTime:31,songName:"Clarity",songSubName:"mapped by Mr__Tomnus",downvotes:0,finishes:"10738",numBeats:{Hard:500},songDuration:273.2225850340136,upvotes:"107",genre:"Electronic",version:"398-236",playlists:[],key:"398",hash:"42b543a221daf7970838b652906dfa3b",objectID:"398",_highlightResult:{author:{value:"Zedd",matchLevel:"none",matchedWords:[]},songName:{value:"Clarity",matchLevel:"none",matchedWords:[]},songSubName:{value:"mapped by Mr__Tomnus",matchLevel:"none",matchedWords:[]}}},{author:"Madeon",bpm:126,difficulties:["Hard"],downloads:45040,id:"119",previewDuration:15,previewStartTime:148,songName:"Icarus",songSubName:"",downvotes:5,finishes:"13906",numBeats:{Hard:436},songDuration:213.3333333333333,upvotes:"714",genre:"Electronic",version:"119-66",playlists:["fantasticflowvol1"],key:"119",hash:"b4d6f9233101c76ef6b5d37380b4e502",objectID:"119",_highlightResult:{author:{value:"Madeon",matchLevel:"none",matchedWords:[]},songName:{value:"Icarus",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"succducc",bpm:160,difficulties:["Hard"],downloads:40076,id:"15",previewDuration:15,previewStartTime:88,songName:"me & u",songSubName:"",downvotes:10,finishes:"8377",numBeats:{Hard:365},songDuration:144.0677777777778,upvotes:"169",genre:"EDM",version:"15-1",playlists:[],key:"15",hash:"d54026dbd90a7b92ee8966c96e3e68d9",objectID:"15",_highlightResult:{author:{value:"succducc",matchLevel:"none",matchedWords:[]},songName:{value:"me & u",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"Purphoros",bpm:128,difficulties:["Hard"],downloads:35883,id:"1101",previewDuration:10,previewStartTime:12,songName:"Evangelion Opening",songSubName:"A Cruel Angel's Thesis",downvotes:21,finishes:"12497",numBeats:{Hard:247},songDuration:90.6709977324263,upvotes:"647",genre:"Uncategorized",version:"1101-751",playlists:[],key:"1101",hash:"467f9610c5214b70b0f9a3d8114398ee",objectID:"1101",_highlightResult:{author:{value:"Purphoros",matchLevel:"none",matchedWords:[]},songName:{value:"Evangelion Opening",matchLevel:"none",matchedWords:[]},songSubName:{value:"A Cruel Angel's Thesis",matchLevel:"none",matchedWords:[]}}},{author:"Vodka Chartreuse",bpm:120,difficulties:["Easy","Normal","Hard","Expert","ExpertPlus"],downloads:35593,id:"821",previewDuration:10,previewStartTime:12,songName:"The Avengers Theme Song",songSubName:"Marvel",downvotes:0,finishes:"18269",numBeats:{Easy:113,Normal:202,Hard:245,Expert:372,ExpertPlus:436},songDuration:123.6636734693878,upvotes:"346",genre:"Uncategorized",version:"821-542",playlists:[],key:"821",hash:"5cff75130f45058215d083b2ba619446",objectID:"821",_highlightResult:{author:{value:"Vodka Chartreuse",matchLevel:"none",matchedWords:[]},songName:{value:"The Avengers Theme Song",matchLevel:"none",matchedWords:[]},songSubName:{value:"Marvel",matchLevel:"none",matchedWords:[]}}},{author:"Kryptikos",bpm:126,difficulties:["Expert"],downloads:35253,id:"364",previewDuration:10,previewStartTime:14.5,songName:"Megalovania (Cement City Remix)",songSubName:"Undertale",downvotes:1,finishes:"12404",numBeats:{Expert:598},songDuration:164.4740136054422,upvotes:"906",genre:"Video Games",version:"364-216",playlists:[],key:"364",hash:"c911362429bcb8655e6d832984e29a69",objectID:"364",_highlightResult:{author:{value:"Kryptikos",matchLevel:"none",matchedWords:[]},songName:{value:"Megalovania (Cement City Remix)",matchLevel:"none",matchedWords:[]},songSubName:{value:"Undertale",matchLevel:"none",matchedWords:[]}}},{author:"Rustic",bpm:120,difficulties:["Expert","Hard"],downloads:34762,id:"41",previewDuration:10,previewStartTime:12,songName:"New Dawn",songSubName:"Prototyperaptor",downvotes:1,finishes:"35038",numBeats:{Expert:511,Hard:335},songDuration:162.4375056689342,upvotes:"340",genre:"Uncategorized",version:"41-17",playlists:["songs-with-fantastic-flow-vol-3"],key:"41",hash:"8e3b0d862e9378443f1810d1ddd3c867",objectID:"41",_highlightResult:{author:{value:"Rustic",matchLevel:"none",matchedWords:[]},songName:{value:"New Dawn",matchLevel:"none",matchedWords:[]},songSubName:{value:"Prototyperaptor",matchLevel:"none",matchedWords:[]}}},{author:"YLance",bpm:154,difficulties:["ExpertPlus","Expert","Hard"],downloads:34556,id:"731",previewDuration:12,previewStartTime:19,songName:"Senbonzakura Feat.Hatsune Miku",songSubName:"Kurousa-P",downvotes:16,finishes:"12932",numBeats:{ExpertPlus:1322,Expert:1122,Hard:930},songDuration:244.2710204081632,upvotes:"931",genre:"Anime",version:"731-481",playlists:[],key:"731",hash:"a339b708761e7f5ddaed58c630f7f53e",objectID:"731",_highlightResult:{author:{value:"YLance",matchLevel:"none",matchedWords:[]},songName:{value:"Senbonzakura Feat.Hatsune Miku",matchLevel:"none",matchedWords:[]},songSubName:{value:"Kurousa-P",matchLevel:"none",matchedWords:[]}}},{author:"Saut",bpm:160,difficulties:["ExpertPlus","Expert","Hard","Normal","Easy"],downloads:34132,downvotes:2,finishes:"0",id:"9639",previewDuration:15,previewStartTime:120,numBeats:{ExpertPlus:1417,Expert:1332,Hard:1155,Normal:820,Easy:522},songDuration:221.2543541666667,songName:"CANDYYYLAND (Pa's Lam System Remix)",songSubName:"tofubeats",upvotes:"455",version:"9639-10572",genre:"Electronic",playlists:[],key:"9639",hash:"36a1a51e78fcfddd7155646f9a4a1d47",objectID:"9639",_highlightResult:{author:{value:"Saut",matchLevel:"none",matchedWords:[]},songName:{value:"CANDYYYLAND (Pa's Lam System Remix)",matchLevel:"none",matchedWords:[]},songSubName:{value:"tofubeats",matchLevel:"none",matchedWords:[]}}},{author:"trickcrafter",bpm:120,difficulties:["Expert"],downloads:33791,id:"871",previewDuration:10,previewStartTime:12,songName:"Call Me Maybe",songSubName:"",downvotes:33,finishes:"7629",numBeats:{Expert:434},songDuration:199.5232653061224,upvotes:"150",genre:"Pop",version:"871-581",playlists:[],key:"871",hash:"e470dd7fe1c7830a9daf053b8abe96b6",objectID:"871",_highlightResult:{author:{value:"trickcrafter",matchLevel:"none",matchedWords:[]},songName:{value:"Call Me Maybe",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"Cranberry",bpm:137,difficulties:["Expert"],downloads:33729,downvotes:0,finishes:"11166",id:"3074",previewDuration:10,previewStartTime:76,numBeats:{Expert:684},songDuration:190.0441723356009,songName:"Radioactive",songSubName:"Imagine Dragons",upvotes:"863",genre:"Rock",version:"3074-2181",playlists:[],key:"3074",hash:"befd26890e411557c5a666789068786f",objectID:"3074",_highlightResult:{author:{value:"Cranberry",matchLevel:"none",matchedWords:[]},songName:{value:"Radioactive",matchLevel:"none",matchedWords:[]},songSubName:{value:"Imagine Dragons",matchLevel:"none",matchedWords:[]}}},{author:"DownyCat",bpm:110.0350036621094,difficulties:["Expert","Hard","Normal"],downloads:33701,downvotes:0,finishes:"16454",id:"2757",previewDuration:10,previewStartTime:12,numBeats:{Expert:899,Hard:653,Normal:367},songDuration:187.585306122449,songName:"Numb",songSubName:"Linkin Park",upvotes:"1235",genre:"Rock",version:"2757-1934",playlists:[],key:"2757",hash:"6097819e1e5f7ee7d5d5065a8f2e2788",objectID:"2757",_highlightResult:{author:{value:"DownyCat",matchLevel:"none",matchedWords:[]},songName:{value:"Numb",matchLevel:"none",matchedWords:[]},songSubName:{value:"Linkin Park",matchLevel:"none",matchedWords:[]}}},{author:"Crankor",bpm:125,difficulties:["ExpertPlus","Expert"],downloads:33425,downvotes:0,finishes:"10614",id:"1903",previewDuration:10,previewStartTime:11.34899997711182,numBeats:{ExpertPlus:1188,Expert:879},songDuration:219.3546258503401,songName:"Toxicity",songSubName:"System of a Down",upvotes:"701",genre:"Rock",version:"1903-1324",playlists:[],key:"1903",hash:"69f86b9cf29b286ae3d23973b954b362",objectID:"1903",_highlightResult:{author:{value:"Crankor",matchLevel:"none",matchedWords:[]},songName:{value:"Toxicity",matchLevel:"none",matchedWords:[]},songSubName:{value:"System of a Down",matchLevel:"none",matchedWords:[]}}},{author:"Logomik",bpm:120,difficulties:["Expert","Hard","Normal","Easy"],downloads:32932,id:"849",previewDuration:13,previewStartTime:100,songName:"Doomsday - Nero",songSubName:"",downvotes:33,finishes:"18682",numBeats:{Expert:340,Hard:239,Normal:167,Easy:98},songDuration:118.41,upvotes:"603",genre:"Dubstep",version:"849-565",playlists:[],key:"849",hash:"593eeb2f1f9d3f1c3ee0307766d03a8f",objectID:"849",_highlightResult:{author:{value:"Logomik",matchLevel:"none",matchedWords:[]},songName:{value:"Doomsday - Nero",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"Avicii",bpm:126,difficulties:["Expert","Hard","Normal"],downloads:32907,downvotes:2,finishes:"19914",id:"1592",previewDuration:15,previewStartTime:30.5,numBeats:{Expert:712,Hard:408,Normal:204},songDuration:172.9984126984127,songName:"The Nights",songSubName:"",upvotes:"1692",genre:"Uncategorized",version:"1592-1122",playlists:["fantasticflowvol1"],key:"1592",hash:"931227c05f2b2f557c2e755667b07aae",objectID:"1592",_highlightResult:{author:{value:"Avicii",matchLevel:"none",matchedWords:[]},songName:{value:"The Nights",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"Pegboard Nerds",bpm:132,difficulties:["Expert"],downloads:32886,id:"71",previewDuration:10,previewStartTime:12,songName:"New Style",songSubName:"",downvotes:15,finishes:"8696",numBeats:{Expert:673},songDuration:239.892947845805,upvotes:"333",genre:"Electronic",version:"71-36",playlists:[],key:"71",hash:"299c5f34b46ae5540085d3ff0cf7fe78",objectID:"71",_highlightResult:{author:{value:"Pegboard Nerds",matchLevel:"none",matchedWords:[]},songName:{value:"New Style",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"DJ S3RL",bpm:175,difficulties:["Expert"],downloads:32746,id:"292",previewDuration:10,previewStartTime:12,songName:"Bass Slut",songSubName:"",downvotes:0,finishes:"5614",numBeats:{Expert:1303},songDuration:329.3779591836734,upvotes:"449",genre:"Electronic",version:"292-178",playlists:[],key:"292",hash:"0960f44c87002cfbea446cf669dc8cef",objectID:"292",_highlightResult:{author:{value:"DJ S3RL",matchLevel:"none",matchedWords:[]},songName:{value:"Bass Slut",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"Kleid",bpm:95.95999908447266,difficulties:["Hard","Normal","Easy","Expert"],downloads:32543,id:"686",previewDuration:10,previewStartTime:12,songName:"Shia LaBeouf",songSubName:"Rob Cantor",downvotes:28,finishes:"14247",numBeats:{Hard:368,Normal:323,Easy:266,Expert:406},songDuration:153.9395918367347,upvotes:"734",genre:"Uncategorized",version:"686-449",playlists:[],key:"686",hash:"c103402ff5b1fbf75984305c6d676833",objectID:"686",_highlightResult:{author:{value:"Kleid",matchLevel:"none",matchedWords:[]},songName:{value:"Shia LaBeouf",matchLevel:"none",matchedWords:[]},songSubName:{value:"Rob Cantor",matchLevel:"none",matchedWords:[]}}},{author:"Machinae Supremacy",bpm:120,difficulties:["Normal","Expert","Hard"],downloads:32498,id:"447",previewDuration:10,previewStartTime:12,songName:"Gerudo Valley METAL",songSubName:"",downvotes:0,finishes:"14409",numBeats:{Normal:290,Expert:470,Hard:377},songDuration:153,upvotes:"428",genre:"Uncategorized",version:"447-271",playlists:[],key:"447",hash:"1214c42597e2ae7884f57becf308c1b2",objectID:"447",_highlightResult:{author:{value:"Machinae Supremacy",matchLevel:"none",matchedWords:[]},songName:{value:"Gerudo Valley METAL",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"NPC Innkeeper",bpm:160,difficulties:["Hard"],downloads:32404,downvotes:3,finishes:"14516",id:"3015",previewDuration:10,previewStartTime:12,numBeats:{Hard:550},songDuration:178.0126458333333,songName:"Take Me Home, Country Roads",songSubName:"Fallout 76",upvotes:"1222",genre:"Soundtrack",version:"3015-2139",playlists:[],key:"3015",hash:"c4bbbce348266348468deb33bf9c2b0a",objectID:"3015",_highlightResult:{author:{value:"NPC Innkeeper",matchLevel:"none",matchedWords:[]},songName:{value:"Take Me Home, Country Roads",matchLevel:"none",matchedWords:[]},songSubName:{value:"Fallout 76",matchLevel:"none",matchedWords:[]}}},{author:"BallpointPen",bpm:96,difficulties:["Expert"],downloads:31754,id:"1502",previewDuration:10,previewStartTime:56,songName:"Shape of You",songSubName:"Ed Sheeran",downvotes:2,finishes:"7171",numBeats:{Expert:892},songDuration:239.0320634920635,upvotes:"304",genre:"Pop",version:"1502-1054",playlists:[],key:"1502",hash:"b79c1326dcfbb97276e47b76f86109cd",objectID:"1502",_highlightResult:{author:{value:"BallpointPen",matchLevel:"none",matchedWords:[]},songName:{value:"Shape of You",matchLevel:"none",matchedWords:[]},songSubName:{value:"Ed Sheeran",matchLevel:"none",matchedWords:[]}}},{author:"The Eagles",bpm:74,difficulties:["Normal"],downloads:31681,downvotes:1,finishes:"6412",id:"1638",previewDuration:30,previewStartTime:129,numBeats:{Normal:758},songDuration:390.4522448979592,songName:"Hotel California",songSubName:"",upvotes:"199",genre:"Rock",version:"1638-1160",playlists:[],key:"1638",hash:"cd2dcfe69bd53f1c1d96f044b493608f",objectID:"1638",_highlightResult:{author:{value:"The Eagles",matchLevel:"none",matchedWords:[]},songName:{value:"Hotel California",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"DM DOKURO",bpm:260,difficulties:["ExpertPlus"],downloads:31612,id:"906",previewDuration:15,previewStartTime:46,songName:"Reality Check Through The Skull",songSubName:"Mapped by Rickput",downvotes:0,finishes:"1757",numBeats:{ExpertPlus:1899},songDuration:334.0449659863946,upvotes:"1121",genre:"Electronic",version:"906-607",playlists:[],key:"906",hash:"a7f83a25e610ee9145651b4b10dfe495",objectID:"906",_highlightResult:{author:{value:"DM DOKURO",matchLevel:"none",matchedWords:[]},songName:{value:"Reality Check Through The Skull",matchLevel:"none",matchedWords:[]},songSubName:{value:"Mapped by Rickput",matchLevel:"none",matchedWords:[]}}},{author:"Woodkid",bpm:134,difficulties:["Expert"],downloads:31508,id:"163",previewDuration:10,previewStartTime:14.23999977111816,songName:"Run Boy Run",songSubName:"",downvotes:21,finishes:"8004",numBeats:{Expert:671},songDuration:212.7405215419501,upvotes:"801",genre:"Alternative",version:"163-99",playlists:["songs-with-fantastic-flow-vol-3"],key:"163",hash:"d8b323dfaa6ecaea3874d84c621ff796",objectID:"163",_highlightResult:{author:{value:"Woodkid",matchLevel:"none",matchedWords:[]},songName:{value:"Run Boy Run",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"Purphoros",bpm:140,difficulties:["ExpertPlus"],downloads:31007,id:"760",previewDuration:10,previewStartTime:12,songName:"Centipede",songSubName:"Knife Party",downvotes:16,finishes:"3387",numBeats:{ExpertPlus:594},songDuration:141.5,upvotes:"269",genre:"Dubstep",version:"760-500",playlists:[],key:"760",hash:"38ea1bfd1d9a2d6e1edcd0d82e2bbc43",objectID:"760",_highlightResult:{author:{value:"Purphoros",matchLevel:"none",matchedWords:[]},songName:{value:"Centipede",matchLevel:"none",matchedWords:[]},songSubName:{value:"Knife Party",matchLevel:"none",matchedWords:[]}}},{author:"DaeFox",bpm:145,difficulties:["Hard"],downloads:30707,id:"1147",previewDuration:10,previewStartTime:42,songName:"Pokemon",songSubName:"(theme)",downvotes:1,finishes:"8108",numBeats:{Hard:339},songDuration:201.1375,upvotes:"334",genre:"Soundtrack",version:"1147-786",playlists:[],key:"1147",hash:"a7b3acc0fa4c6921119aa0b4b4e6bfcf",objectID:"1147",_highlightResult:{author:{value:"DaeFox",matchLevel:"none",matchedWords:[]},songName:{value:"Pokemon",matchLevel:"none",matchedWords:[]},songSubName:{value:"(theme)",matchLevel:"none",matchedWords:[]}}},{author:"BennyDaBeast",bpm:113,difficulties:["Expert"],downloads:30624,downvotes:2,finishes:"9160",id:"1587",previewDuration:10,previewStartTime:12,numBeats:{Expert:579},songDuration:237.8686167800454,songName:"CAN'T STOP THE FEELING!",songSubName:"Justin Timberlake",upvotes:"1376",genre:"Pop",version:"1587-1118",playlists:["fantasticflowvol1","workout-flow","lemme-see-you-dance"],key:"1587",hash:"ff0c9c6727a2df8112a0c344bc9d8ac6",objectID:"1587",_highlightResult:{author:{value:"BennyDaBeast",matchLevel:"none",matchedWords:[]},songName:{value:"CAN'T STOP THE FEELING!",matchLevel:"none",matchedWords:[]},songSubName:{value:"Justin Timberlake",matchLevel:"none",matchedWords:[]}}},{author:"TehSuperToilet",bpm:126.3000030517578,difficulties:["Hard"],downloads:30424,id:"283",previewDuration:10,previewStartTime:12,songName:"YMCA By Village People",songSubName:"Dance your Pants off Edition",downvotes:38,finishes:"1908",numBeats:{Hard:1440},songDuration:201.1515873015873,upvotes:"113",genre:"Soul",version:"283-172",playlists:[],key:"283",hash:"a18d9f059748b6ff602e4d339289940b",objectID:"283",_highlightResult:{author:{value:"TehSuperToilet",matchLevel:"none",matchedWords:[]},songName:{value:"YMCA By Village People",matchLevel:"none",matchedWords:[]},songSubName:{value:"Dance your Pants off Edition",matchLevel:"none",matchedWords:[]}}},{author:"N'Sync",bpm:86.5,difficulties:["Hard"],downloads:29943,id:"664",previewDuration:10,previewStartTime:12,songName:"Bye Bye Bye",songSubName:"",downvotes:13,finishes:"6814",numBeats:{Hard:479},songDuration:200.64,upvotes:"232",genre:"Pop",version:"664-429",playlists:[],key:"664",hash:"3fb97a22200d79f2e06f787ed084a400",objectID:"664",_highlightResult:{author:{value:"N'Sync",matchLevel:"none",matchedWords:[]},songName:{value:"Bye Bye Bye",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"Manuel - Initial D",bpm:154,difficulties:["Expert"],downloads:29906,id:"1053",previewDuration:7,previewStartTime:77,songName:"Gas Gas Gas",songSubName:"[mao_]",downvotes:6,finishes:"4140",numBeats:{Expert:1226},songDuration:271.8360090702948,upvotes:"444",genre:"Anime",version:"1053-714",playlists:[],key:"1053",hash:"bec8b2a885932f87b0e873cfca4c0e63",objectID:"1053",_highlightResult:{author:{value:"Manuel - Initial D",matchLevel:"none",matchedWords:[]},songName:{value:"Gas Gas Gas",matchLevel:"none",matchedWords:[]},songSubName:{value:"[mao_]",matchLevel:"none",matchedWords:[]}}},{author:"RinkuSenpai",bpm:162.5,difficulties:["Expert","Hard"],downloads:29799,downvotes:1,finishes:"0",id:"8423",previewDuration:10,previewStartTime:12,numBeats:{Expert:709,Hard:545},songDuration:144.5740362811791,songName:"Rockefeller Street (Nightcore)",songSubName:"Getter Jaani",upvotes:"1152",version:"8423-11733",genre:"Nightcore",playlists:[],key:"8423",hash:"7a952e9bf65b1940ae3521b28c4893b7",objectID:"8423",_highlightResult:{author:{value:"RinkuSenpai",matchLevel:"none",matchedWords:[]},songName:{value:"Rockefeller Street (Nightcore)",matchLevel:"none",matchedWords:[]},songSubName:{value:"Getter Jaani",matchLevel:"none",matchedWords:[]}}},{author:"Heisenberg",bpm:176,difficulties:["Expert"],downloads:29745,id:"1295",previewDuration:30,previewStartTime:12,songName:"Centuries",songSubName:"Fall Out Boy",downvotes:13,finishes:3960,numBeats:{Expert:3009},songDuration:231.3926530612245,upvotes:39,genre:"Alternative",version:"1295-903",playlists:[],objectID:"1295",_highlightResult:{author:{value:"Heisenberg",matchLevel:"none",matchedWords:[]},songName:{value:"Centuries",matchLevel:"none",matchedWords:[]},songSubName:{value:"Fall Out Boy",matchLevel:"none",matchedWords:[]}}},{author:"Jeff Williams",bpm:105,difficulties:["ExpertPlus","Expert","Hard"],downloads:29670,id:"1184",previewDuration:10,previewStartTime:18.5,songName:"Red Like Roses - Part II",songSubName:"Ft. Casey Lee Williams and Sandy Casey",downvotes:0,finishes:"0",numBeats:{ExpertPlus:952,Expert:723,Hard:622},songDuration:245.3061904761905,upvotes:"148",genre:"Soundtrack",version:"1184-815",playlists:[],key:"1184",hash:"7ac67de0434cd97550d14e10f0263b38",objectID:"1184",_highlightResult:{author:{value:"Jeff Williams",matchLevel:"none",matchedWords:[]},songName:{value:"Red Like Roses - Part II",matchLevel:"none",matchedWords:[]},songSubName:{value:"Ft. Casey Lee Williams and Sandy Casey",matchLevel:"none",matchedWords:[]}}},{author:"Rustic",bpm:128,difficulties:["Expert","Hard"],downloads:29475,downvotes:1,finishes:"11598",id:"1745",previewDuration:10,previewStartTime:12,numBeats:{Expert:880,Hard:633},songDuration:251.0204988662132,songName:"Uprising",songSubName:"Muse",upvotes:"1422",genre:"Alternative",version:"1745-1222",playlists:["fantasticflowvol1"],key:"1745",hash:"e04119b29eb187a7ece1bb85e4ea69e5",objectID:"1745",_highlightResult:{author:{value:"Rustic",matchLevel:"none",matchedWords:[]},songName:{value:"Uprising",matchLevel:"none",matchedWords:[]},songSubName:{value:"Muse",matchLevel:"none",matchedWords:[]}}},{author:"Robbie Rotten",bpm:81,difficulties:["Expert"],downloads:29316,id:"411",previewDuration:10,previewStartTime:12,songName:"We Are Number One",songSubName:"but it's a Beat Saber custom track",downvotes:0,finishes:"1787",numBeats:{Expert:580},songDuration:142.5763265306122,upvotes:"53",genre:"Soundtrack",version:"411-244",playlists:[],key:"411",hash:"c66c8005edf9bdd8d257016a3154b520",objectID:"411",_highlightResult:{author:{value:"Robbie Rotten",matchLevel:"none",matchedWords:[]},songName:{value:"We Are Number One",matchLevel:"none",matchedWords:[]},songSubName:{value:"but it's a Beat Saber custom track",matchLevel:"none",matchedWords:[]}}},{author:"Crankor",bpm:143,difficulties:["ExpertPlus"],downloads:29242,downvotes:1,finishes:"8640",id:"1707",previewDuration:10,previewStartTime:12,numBeats:{ExpertPlus:641},songDuration:171.3444897959184,songName:"Tetris",songSubName:"Trap Remix",upvotes:"711",genre:"Uncategorized",version:"1707-1199",playlists:[],key:"1707",hash:"2473c413ea660fa05f93ff8d6739d4e0",objectID:"1707",_highlightResult:{author:{value:"Crankor",matchLevel:"none",matchedWords:[]},songName:{value:"Tetris",matchLevel:"none",matchedWords:[]},songSubName:{value:"Trap Remix",matchLevel:"none",matchedWords:[]}}},{author:"YLance",bpm:126,difficulties:["Hard"],downloads:28992,id:"590",previewDuration:20,previewStartTime:12,songName:"Tokyo Drift",songSubName:"KVSH",downvotes:14,finishes:"8639",numBeats:{Hard:545},songDuration:165,upvotes:"523",genre:"Rap",version:"590-377",playlists:[],key:"590",hash:"789c37e00a87cdaa0cd176fad7d64d0a",objectID:"590",_highlightResult:{author:{value:"YLance",matchLevel:"none",matchedWords:[]},songName:{value:"Tokyo Drift",matchLevel:"none",matchedWords:[]},songSubName:{value:"KVSH",matchLevel:"none",matchedWords:[]}}},{author:"Capital Cities",bpm:118,difficulties:["Expert"],downloads:28968,id:"484",previewDuration:10,previewStartTime:12,songName:"Safe and Sound",songSubName:"",downvotes:4,finishes:"8835",numBeats:{Expert:553},songDuration:193.3061224489796,upvotes:"287",genre:"Alternative",version:"484-297",playlists:[],key:"484",hash:"53792a9a617e1c10431f0d2f66568b5f",objectID:"484",_highlightResult:{author:{value:"Capital Cities",matchLevel:"none",matchedWords:[]},songName:{value:"Safe and Sound",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"Jobas",bpm:100,difficulties:["Expert","ExpertPlus"],downloads:28791,id:"228",previewDuration:29,previewStartTime:59,songName:"My Hero Academia Opening 2",songSubName:"My Hero Academia",downvotes:0,finishes:"7875",numBeats:{Expert:461,ExpertPlus:625},songDuration:92.05551020408163,upvotes:"82",genre:"Uncategorized",version:"228-133",playlists:[],key:"228",hash:"18a642ddf8de838b69fe66b84da2abf2",objectID:"228",_highlightResult:{author:{value:"Jobas",matchLevel:"none",matchedWords:[]},songName:{value:"My Hero Academia Opening 2",matchLevel:"none",matchedWords:[]},songSubName:{value:"My Hero Academia",matchLevel:"none",matchedWords:[]}}},{author:"Invidia Snow",bpm:128,difficulties:["Expert","Hard","Normal"],downloads:28683,id:"818",previewDuration:10,previewStartTime:130,songName:"Freaks",songSubName:"Timmy Trumpet & Savage",downvotes:13,finishes:"12005",numBeats:{Expert:639,Hard:462,Normal:335},songDuration:153.2737868480726,upvotes:"1220",genre:"EDM",version:"818-540",playlists:["lemme-see-you-dance"],key:"818",hash:"aa9cc826eeb76fa4c97b9abd97dee7c4",objectID:"818",_highlightResult:{author:{value:"Invidia Snow",matchLevel:"none",matchedWords:[]},songName:{value:"Freaks",matchLevel:"none",matchedWords:[]},songSubName:{value:"Timmy Trumpet & Savage",matchLevel:"none",matchedWords:[]}}},{author:"attackpanda11",bpm:95,difficulties:["Expert","Hard"],downloads:28254,downvotes:0,finishes:"11188",id:"2559",previewDuration:10,previewStartTime:28,numBeats:{Expert:643,Hard:505},songDuration:217.51,songName:"X Gon' Give It To Ya",songSubName:"DMX",upvotes:"745",genre:"Hip Hop",version:"2559-1779",playlists:[],key:"2559",hash:"84d89113dd99eaba0ad0f5cac3b307a3",objectID:"2559",_highlightResult:{author:{value:"attackpanda11",matchLevel:"none",matchedWords:[]},songName:{value:"X Gon' Give It To Ya",matchLevel:"none",matchedWords:[]},songSubName:{value:"DMX",matchLevel:"none",matchedWords:[]}}},{author:"GreatYazer",bpm:100,difficulties:["Expert","Hard","Normal"],downloads:28139,id:"1092",previewDuration:10,previewStartTime:12,songName:"Blow Me Away",songSubName:"Breaking Benjamin",downvotes:0,finishes:"11891",numBeats:{Expert:615,Hard:454,Normal:286},songDuration:206.5320408163265,upvotes:"618",genre:"Soundtrack",version:"1092-745",playlists:["workout-flow"],key:"1092",hash:"8f1de5dfad5bdd728bf9850ee9d0ba91",objectID:"1092",_highlightResult:{author:{value:"GreatYazer",matchLevel:"none",matchedWords:[]},songName:{value:"Blow Me Away",matchLevel:"none",matchedWords:[]},songSubName:{value:"Breaking Benjamin",matchLevel:"none",matchedWords:[]}}},{author:"Nicki Minaj",bpm:135,difficulties:["Expert"],downloads:27427,id:"63",previewDuration:10,previewStartTime:12,songName:"Anaconda",songSubName:"MurmaiderMan",downvotes:15,finishes:"6280",numBeats:{Expert:553},songDuration:264.2843764172336,upvotes:"97",genre:"Soundtrack",version:"63-32",playlists:[],key:"63",hash:"d5fa8865268bdb9b2f47460aa05c31b5",objectID:"63",_highlightResult:{author:{value:"Nicki Minaj",matchLevel:"none",matchedWords:[]},songName:{value:"Anaconda",matchLevel:"none",matchedWords:[]},songSubName:{value:"MurmaiderMan",matchLevel:"none",matchedWords:[]}}},{author:"Jobas",bpm:93,difficulties:["Expert","ExpertPlus"],downloads:27130,id:"251",previewDuration:10,previewStartTime:57,songName:"My Hero Academia Opening 1",songSubName:"My Hero Academia",downvotes:38,finishes:"8116",numBeats:{Expert:449,ExpertPlus:473},songDuration:89.75673469387755,upvotes:"193",genre:"J-Pop",version:"251-151",playlists:[],key:"251",hash:"0f941e576012b4e2ee213558a9e57651",objectID:"251",_highlightResult:{author:{value:"Jobas",matchLevel:"none",matchedWords:[]},songName:{value:"My Hero Academia Opening 1",matchLevel:"none",matchedWords:[]},songSubName:{value:"My Hero Academia",matchLevel:"none",matchedWords:[]}}},{author:"TehSuperToilet",bpm:120,difficulties:["Expert"],downloads:26731,id:"244",previewDuration:12,previewStartTime:104,songName:"Cantina Band",songSubName:"DJ AG",downvotes:0,finishes:"3515",numBeats:{Expert:618},songDuration:167.0030385487528,upvotes:"175",genre:"Alternative",version:"244-146",playlists:[],key:"244",hash:"2b67e63080d28b9c93b1998063ec932e",objectID:"244",_highlightResult:{author:{value:"TehSuperToilet",matchLevel:"none",matchedWords:[]},songName:{value:"Cantina Band",matchLevel:"none",matchedWords:[]},songSubName:{value:"DJ AG",matchLevel:"none",matchedWords:[]}}},{author:"Marshmello",bpm:142,difficulties:["Expert"],downloads:26709,id:"665",previewDuration:10,previewStartTime:19,songName:"Alone",songSubName:"Made By JWaters",downvotes:13,finishes:"6883",numBeats:{Expert:660},songDuration:199.505850340136,upvotes:"368",genre:"Electronic",version:"665-430",playlists:[],key:"665",hash:"03c1510da36279f5bee4e5dd7f25cacd",objectID:"665",_highlightResult:{author:{value:"Marshmello",matchLevel:"none",matchedWords:[]},songName:{value:"Alone",matchLevel:"none",matchedWords:[]},songSubName:{value:"Made By JWaters",matchLevel:"none",matchedWords:[]}}},{author:"Rake5000",bpm:186.3000030517578,difficulties:["Hard"],downloads:26595,id:"295",previewDuration:10,previewStartTime:12,songName:"Hysteria",songSubName:"v106",downvotes:0,finishes:"5267",numBeats:{Hard:696},songDuration:226.7310884353742,upvotes:"209",genre:"Rock",version:"295-179",playlists:[],key:"295",hash:"35229302801e7b1634be739a3bcb3694",objectID:"295",_highlightResult:{author:{value:"Rake5000",matchLevel:"none",matchedWords:[]},songName:{value:"Hysteria",matchLevel:"none",matchedWords:[]},songSubName:{value:"v106",matchLevel:"none",matchedWords:[]}}},{author:"Michael Jackson",bpm:118,difficulties:["Normal"],downloads:26585,downvotes:0,finishes:"6817",id:"2555",previewDuration:10,previewStartTime:12,numBeats:{Normal:496},songDuration:241.7000680272109,songName:"Thriller",songSubName:"",upvotes:"428",genre:"Pop",version:"2555-1775",playlists:[],key:"2555",hash:"0a2c88ea06f7f844a12082979bfc6cee",objectID:"2555",_highlightResult:{author:{value:"Michael Jackson",matchLevel:"none",matchedWords:[]},songName:{value:"Thriller",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"BennyDaBeast",bpm:174,difficulties:["Expert","Hard","Easy"],downloads:26236,downvotes:10,finishes:"14209",id:"2302",previewDuration:10,previewStartTime:12,numBeats:{Expert:698,Hard:531,Easy:450},songDuration:232.9197732426304,songName:"Burn",songSubName:"Ellie Goulding",upvotes:"1539",genre:"Pop",version:"2302-1590",playlists:["fantasticflowvol1"],key:"2302",hash:"344a7835249e2fef30fa126e8e606ead",objectID:"2302",_highlightResult:{author:{value:"BennyDaBeast",matchLevel:"none",matchedWords:[]},songName:{value:"Burn",matchLevel:"none",matchedWords:[]},songSubName:{value:"Ellie Goulding",matchLevel:"none",matchedWords:[]}}},{author:"Freeek",bpm:87,difficulties:["Expert","Hard","Normal","Easy"],downloads:26027,id:"847",previewDuration:10,previewStartTime:12,songName:"Witchcraft",songSubName:"Pendulum",downvotes:33,finishes:"10234",numBeats:{Expert:740,Hard:435,Normal:322,Easy:214},songDuration:166.9204535147392,upvotes:"484",genre:"Rock",version:"847-563",playlists:[],key:"847",hash:"35e2043b85624cf1516a77cd21a697e7",objectID:"847",_highlightResult:{author:{value:"Freeek",matchLevel:"none",matchedWords:[]},songName:{value:"Witchcraft",matchLevel:"none",matchedWords:[]},songSubName:{value:"Pendulum",matchLevel:"none",matchedWords:[]}}},{author:"Skrillex",bpm:147,difficulties:["Expert"],downloads:25735,id:"303",previewDuration:0,previewStartTime:0,songName:"Purple Lamborghini",songSubName:"",downvotes:0,finishes:"6283",numBeats:{Expert:632},songDuration:179.5918367346939,upvotes:"170",genre:"Soundtrack",version:"303-181",playlists:[],key:"303",hash:"6d1f3cdf96469e0b998ea7e7770b53f3",objectID:"303",_highlightResult:{author:{value:"Skrillex",matchLevel:"none",matchedWords:[]},songName:{value:"Purple Lamborghini",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}},{author:"Die Antwoord",bpm:120,difficulties:["Hard"],downloads:25458,id:"229",previewDuration:10,previewStartTime:12,songName:"Fink U Freeky",songSubName:"",downvotes:0,finishes:"8287",numBeats:{Hard:422},songDuration:182.8024263038549,upvotes:"328",genre:"Uncategorized",version:"229-134",playlists:[],key:"229",hash:"a1e5d4dd6129b475d0bd3c7bab0ab543",objectID:"229",_highlightResult:{author:{value:"Die Antwoord",matchLevel:"none",matchedWords:[]},songName:{value:"Fink U Freeky",matchLevel:"none",matchedWords:[]},songSubName:{value:"",matchLevel:"none",matchedWords:[]}}}]},function(e,t,n){if(AFRAME.registerComponent("song-info-positioner",{schema:{victory:{default:!1}},update:function(){this.data.victory?this.el.object3D.position.y=-1.2:this.el.object3D.position.y=-1}}),window.AFRAME){const t=["song-info-positioner"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){var r=n(1);if(AFRAME.registerComponent("song-preview-system",{schema:{previewStartTime:{type:"int"},selectedChallengeId:{type:"string"}},init:function(){this.audio=document.createElement("audio"),this.audio.volume=.5},update:function(e){const t=this.data;this.audio.pause(),t.selectedChallengeId&&e.selectedChallengeId!==t.selectedChallengeId&&(this.audio.setAttribute("src",r.getS3FileUrl(t.selectedChallengeId,"song.ogg")),this.audio.currentTime=t.previewStartTime,this.audio.play())}}),window.AFRAME){const t=["song-preview-system"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("song-progress-info",{dependencies:["geometry","material"],schema:{enabled:{default:!1}},init:function(){this.tick=AFRAME.utils.throttleTick(this.tick.bind(this),1e3),this.progress=this.el.getObject3D("mesh"),this.progress.geometry.translate(.285,0,0),this.el.sceneEl.addEventListener("cleargame",()=>{this.progress.scale.x=1e-4})},update:function(e){this.progress.scale.x=1e-4},updateInfo:function(){const e=this.el.sceneEl.components.song.source;if(!e||!e.buffer)return;const t=this.el.sceneEl.components.song.getCurrentTime()/e.buffer.duration;t&&(this.progress.scale.x=t)},tick:function(){this.data.enabled&&this.updateInfo()}}),window.AFRAME){const t=["song-progress-info"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){n(1);const r={once:!0};let i=AFRAME.utils.getUrlParameter("skip");if(i=i?parseInt(i)/1e3:0,AFRAME.registerComponent("song",{schema:{audio:{type:"string"},analyserEl:{type:"selector",default:"#audioAnalyser"},challengeId:{default:""},isBeatsPreloaded:{default:!1},isGameOver:{default:!1},isLoading:{default:!1},isPlaying:{default:!1},isVictory:{default:!1}},init:function(){this.analyserSetter={buffer:!0},this.audioAnalyser=this.data.analyserEl.components.audioanalyser,this.context=this.audioAnalyser.context,this.isAudioPlaying=!1,this.songStartTime=0,this.onSongComplete=this.onSongComplete.bind(this),this.audioAnalyser.gainNode.gain.value=.5,this.el.addEventListener("gamemenurestart",this.onRestart.bind(this)),this.el.addEventListener("wallhitstart",this.onWallHitStart.bind(this)),this.el.addEventListener("wallhitend",this.onWallHitEnd.bind(this))},update:function(e){const t=this.data;if(!e.isLoading&&t.isLoading&&t.audio)this.processAudio();else if(!e.audio&&t.audio&&t.isLoading)this.processAudio();else if(e.isGameOver||!t.isGameOver){if(e.isGameOver&&!t.isGameOver&&(this.audioAnalyser.gainNode.value=.5),!e.isVictory&&t.isVictory)return this.data.analyserEl.addEventListener("audioanalyserbuffersource",e=>{this.audioAnalyser.resumeContext();const t=this.audioAnalyser.gainNode.gain;t.cancelScheduledValues(0),t.setValueAtTime(.05,0),this.source=e.detail,this.source.start(),this.el.emit("victory")},r),void this.audioAnalyser.refreshSource();!e.isBeatsPreloaded&&this.data.isBeatsPreloaded&&this.source&&this.startAudio(),!e.challengeId||t.challengeId?(e.isPlaying&&!t.isPlaying&&(this.audioAnalyser.suspendContext(),this.isAudioPlaying=!1),!e.isPlaying&&t.isPlaying&&this.source&&(this.audioAnalyser.resumeContext(),this.isAudioPlaying=!0)):this.stopAudio()}else this.onGameOver()},processAudio:function(){this.el.sceneEl.emit("songprocessstart",null,!1),this.getAudio().then(e=>{this.el.sceneEl.emit("songprocessfinish",null,!1)}).catch(console.error)},getAudio:function(){const e=this.data;return this.source&&this.stopAudio(),this.isAudioPlaying=!1,new Promise(t=>{e.analyserEl.addEventListener("audioanalyserbuffersource",e=>{this.source=e.detail,t(this.source)},r),this.analyserSetter.src=this.data.audio,e.analyserEl.setAttribute("audioanalyser",this.analyserSetter)})},stopAudio:function(){this.source?(this.source.onended=null,this.isAudioPlaying&&this.source.stop(),this.source.disconnect(),this.source=null,this.isAudioPlaying=!1):console.warn("[song] Tried to stopAudio, but not playing.")},onSongComplete:function(){this.data.isPlaying&&this.el.emit("songcomplete")},onGameOver:function(){this.isAudioPlaying=!1;const e=this.source.playbackRate;e.setValueAtTime(e.value,this.context.currentTime),e.linearRampToValueAtTime(0,this.context.currentTime+3.5);const t=this.audioAnalyser.gainNode.gain;t.setValueAtTime(t.value,this.context.currentTime),t.linearRampToValueAtTime(0,this.context.currentTime+3.5),setTimeout(()=>{this.data.isGameOver&&this.stopAudio()},3500)},onRestart:function(){this.isAudioPlaying=!1,this.source&&this.source.disconnect(),this.audioAnalyser.gainNode.gain.cancelScheduledValues(0),this.data.analyserEl.addEventListener("audioanalyserbuffersource",e=>{this.source=e.detail,this.el.sceneEl.emit("songloadfinish",null,!1)},r),this.audioAnalyser.refreshSource()},onWallHitStart:function(){this.audioAnalyser.gainNode.gain.linearRampToValueAtTime(.1,this.context.currentTime+.1)},onWallHitEnd:function(){this.audioAnalyser.gainNode.gain.linearRampToValueAtTime(.5,this.context.currentTime+.1)},startAudio:function(){this.audioAnalyser.gainNode.gain.setValueAtTime(.5,this.context.currentTime),this.songStartTime=this.context.currentTime,this.source.onended=this.onSongComplete,this.source.start(0,i||0),this.isAudioPlaying=!0},getCurrentTime:function(){return this.context.currentTime-this.songStartTime}}),window.AFRAME){const t=["song"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r);const o=[{name:"bgcolor",property:"backglow.color"},{name:"leftglow",property:"leftsideglow.color"},{name:"rightglow",property:"rightsideglow.color"}],a=[{id:"off",dur:500,to:"off"},{id:"primary",dur:5,to:"primary"},{id:"primarybright",dur:500,from:"tertiary",to:"primarybright"},{id:"secondary",dur:5,to:"secondary"},{id:"secondarybright",dur:500,from:"tertiary",to:"secondarybright"}],s=["off","secondary","secondary","secondarybright","","primary","primary","primarybright","primarybright"];AFRAME.registerComponent("stage-colors",{schema:{colorScheme:{default:"default"}},init:function(){this.el.addEventListener("cleargame",this.resetColors.bind(this)),this.el.sceneEl.addEventListener("playbuttonclick",this.resetColors.bind(this)),function(e,t){for(let n=0;n<o.length;n++){const r=o[n];for(let n=0;n<a.length;n++){const o=a[n];e.setAttribute(`animation__${r.name}${o.id}`,{property:"systems.materials."+r.property,type:"color",isRawProperty:!0,easing:"linear",dur:o.dur,from:o.from?i.a.schemes[t][o.from]:"",startEvents:`${r.name}${o.id}`,to:i.a.schemes[t][o.to]})}}}(this.el.sceneEl,this.data.colorScheme)},update:function(e){e.colorScheme&&this.data.colorScheme!==e.colorScheme&&function(e,t){for(let n=0;n<o.length;n++){const r=o[n];for(let n=0;n<a.length;n++){const o=a[n],s=`animation__${r.name}${o.id}`;o.from&&e.setAttribute(s,"from",i.a.schemes[t][o.from]),e.setAttribute(s,"to",i.a.schemes[t][o.to])}}}(this.el.sceneEl,this.data.colorScheme)},play:function(){this.el.emit("bgcolorsecondary",null,!1)},setColor:function(e,t){s[t]||(t=5),e.startsWith("curve")?this.el.emit(e+"stageeventcolor",s[t].replace("bright",""),!1):this.el.emit(`${e}color${s[t]}`,null,!1)},setColorInstant:function(e,t){const n=this.el.sceneEl.systems.materials;if("stars"===e){let e;return e=0===t?i.a.schemes[this.data.colorScheme].secondarybright:i.a.schemes[this.data.colorScheme].secondary,void l(n.stars,"color",e)}const r=i.a.schemes[this.data.colorScheme][s[t]];"moon"===e&&l(n.moon,"tint",r)},resetColors:function(){this.el.emit("bgcolorsecondary",null,!1),this.el.emit("curveevenstageeventcolor","off",!1),this.el.emit("curveoddstageeventcolor","off",!1)}});const u=new THREE.Color;function l(e,t,n){u.set(n),e.uniforms?(e.uniforms[t].value.x=u.r,e.uniforms[t].value.y=u.g,e.uniforms[t].value.z=u.b):e[t].set(n)}if(window.AFRAME){const t=["stage-colors"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("stage-lasers",{schema:{enabled:{default:!0}},init:function(){this.speed=0,this.lasers=[this.el.children[0].object3D,this.el.children[1].object3D,this.el.children[2].object3D]},pulse:function(e){this.speed=e/8},tick:function(e,t){0!==this.speed&&(t/=1e3,!this.data.enabled&&(this.speed*=.97,Math.abs(this.speed)<.01)?this.speed=0:(this.lasers[0].rotation.z+=this.speed*t,this.lasers[1].rotation.z-=this.speed*t*1.01,this.lasers[2].rotation.z+=this.speed*t*1.02))}}),window.AFRAME){const t=["stage-lasers"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){const r=n(0);if(AFRAME.registerComponent("stars",{schema:{color:{type:"color",default:r.initial.secondary},count:{default:500},radius:{default:300}},init:function(){const e=()=>(Math.random()-.5)*this.data.radius*2,t=new THREE.BufferGeometry;this.material=this.el.sceneEl.systems.materials.stars;const n=[];for(let t=0;t<this.data.count;t++)n.push(e(),e(),4*e());t.setAttribute("position",new THREE.Float32BufferAttribute(n,3)),t.computeBoundingSphere();const r=new THREE.Points(t,this.material);this.el.setObject3D("stars",r)},update:function(){this.material.color.setStyle(this.data.color)}}),window.AFRAME){const t=["stars"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("stats-param",{init:function(){"true"===AFRAME.utils.getUrlParameter("stats")&&this.el.setAttribute("stats","")}}),window.AFRAME){const t=["stats-param"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("stepback",{init:function(){this.message=document.getElementById("stepback"),this.camera=document.getElementById("camera"),this.lastTime=0,this.limit=-.9,this.throttling=300},tick:function(e,t){if(!(e-this.lastTime<this.throttling)){var n=this.camera.object3D.position,r=this.message.object3D.position;n.z<this.limit?(this.throttling=10,this.message.object3D.visible=!0,this.message.getObject3D("mesh").material.opacity=1-Math.abs(n.z-r.z),r.x=n.x,r.y=n.y):(this.message.object3D.visible=!1,this.throttling=500),this.lastTime=e}}}),window.AFRAME){const t=["stepback"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("sub-object",{schema:{from:{type:"selector"},name:{type:"string"}},init:function(){var e=this.el,t=this.data;t.from.addEventListener("model-loaded",n=>{const r=n.detail.model.getObjectByName(t.name);e.setObject3D("mesh",r.clone()),e.setAttribute("material","shader","flat"),e.emit("subobjectloaded",null,!1)})}}),window.AFRAME){const t=["sub-object"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){var r={superkeyboard:{wrapCount:20,inputOffsetY:.008,inputOffsetX:.08,img:"keyboard.png",hoverImg:"keyboard-hover.png",layout:[{key:"1",x:.013,y:.03,w:.093,h:.176},{key:"2",x:.106,y:.03,w:.088,h:.176},{key:"3",x:.194,y:.03,w:.077,h:.176},{key:"4",x:.271,y:.03,w:.085,h:.176},{key:"5",x:.356,y:.03,w:.081,h:.176},{key:"6",x:.437,y:.03,w:.081,h:.176},{key:"8",x:.603,y:.03,w:.082,h:.176},{key:"7",x:.519,y:.03,w:.084,h:.176},{key:"9",x:.685,y:.03,w:.076,h:.176},{key:"0",x:.76,y:.03,w:.088,h:.176},{key:"Delete",x:.867,y:.03,w:.124,h:.176},{key:"q",x:.013,y:.213,w:.098,h:.186},{key:"w",x:.111,y:.213,w:.107,h:.186},{key:"e",x:.218,y:.213,w:.096,h:.186},{key:"r",x:.313,y:.213,w:.095,h:.186},{key:"t",x:.408,y:.213,w:.094,h:.186},{key:"y",x:.503,y:.213,w:.099,h:.186},{key:"u",x:.602,y:.213,w:.097,h:.186},{key:"i",x:.701,y:.213,w:.085,h:.186},{key:"o",x:.786,y:.213,w:.099,h:.186},{key:"p",x:.885,y:.213,w:.097,h:.186},{key:"a",x:.063,y:.408,w:.1,h:.182},{key:"s",x:.163,y:.408,w:.097,h:.182},{key:"d",x:.26,y:.408,w:.098,h:.182},{key:"f",x:.358,y:.408,w:.094,h:.182},{key:"g",x:.452,y:.408,w:.1,h:.182},{key:"h",x:.552,y:.408,w:.105,h:.182},{key:"j",x:.657,y:.408,w:.085,h:.182},{key:"k",x:.743,y:.408,w:.105,h:.182},{key:"l",x:.848,y:.408,w:.1,h:.182},{key:"z",x:.107,y:.596,w:.106,h:.197},{key:"x",x:.213,y:.596,w:.1,h:.197},{key:"c",x:.313,y:.596,w:.093,h:.197},{key:"v",x:.406,y:.596,w:.096,h:.197},{key:"b",x:.502,y:.596,w:.093,h:.197},{key:"n",x:.595,y:.596,w:.099,h:.197},{key:"m",x:.694,y:.596,w:.106,h:.197},{key:" ",x:.372,y:.798,w:.249,h:.169},{key:"Insert",x:.017,y:-.001,w:.038,h:.018}]}};if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");var i={roboto:17,aileronsemibold:20,dejavu:20.5,exo2bold:20,exo2semibold:20.3,kelsonsans:22.8,monoid:19.5,mozillavr:9.5,sourcecodepro:20.3};function o(e,t){for(var n=0;n<e.length;n++)if(e[n].id===t)return e[n];return null}if(AFRAME.registerComponent("super-keyboard",{schema:{align:{default:"left",oneOf:["left","center","right"]},blinkingSpeed:{type:"int",default:400},filters:{type:"array"},font:{default:"aileronsemibold"},hand:{type:"selector"},imagePath:{default:"."},injectToRaycasterObjects:{default:!0},inputColor:{type:"color",default:"#6699ff"},interval:{type:"int",default:50},keyBgColor:{type:"color",default:"#000"},keyColor:{type:"color",default:"#6699ff"},keyHoverColor:{type:"color",default:"#1A407F"},keyPressColor:{type:"color",default:"#5290F6"},label:{type:"string",default:""},labelColor:{type:"color",default:"#aaa"},maxLength:{type:"int",default:0},model:{default:"basic"},show:{default:!0},value:{type:"string",default:""},width:{default:.8}},init:function(){this.el.addEventListener("mousedown",this.click.bind(this)),this.changeEventDetail={},this.keys=null,this.focused=!1,this.keyHover=null,this.prevCheckTime=null,this.shift=!1,this.rawValue=this.data.value,this.defaultValue=this.data.value,this.userFilterFunc=null,this.intervalId=0,this.kbImg=document.createElement("a-entity"),this.kbImg.classList.add("keyboardRaycastable"),this.kbImg.classList.add("superKeyboardImage"),this.kbImg.addEventListener("raycaster-intersected",this.hover.bind(this)),this.kbImg.addEventListener("raycaster-intersected-cleared",this.blur.bind(this)),this.el.appendChild(this.kbImg),this.label=document.createElement("a-entity"),this.label.setAttribute("text",{align:"center",font:this.data.font,baseline:"bottom",lineHeight:40,shader:"msdf",negate:!0,value:this.data.label,color:this.data.labelColor,width:this.data.width,wrapCount:30}),this.el.appendChild(this.label),this.textInput=document.createElement("a-entity"),this.textInput.setAttribute("mixin","superKeyboardTextInput"),this.textInput.setAttribute("text",{align:this.data.align,font:this.data.font,lineHeight:35,value:this.data.value,color:this.data.inputColor,width:this.data.width,wrapCount:20}),this.el.appendChild(this.textInput),this.cursor=document.createElement("a-entity"),this.cursor.object3D.position.set(0,0,.001),this.cursor.setAttribute("material",{shader:"flat",color:this.data.inputColor}),this.textInput.appendChild(this.cursor),this.cursorUpdated=!1,this.keyBgColor=new THREE.Color,this.keyHoverColor=new THREE.Color,this.keyPressColor=new THREE.Color;var e=this;document.addEventListener("keydown",(function(t){if("t"===t.key){for(var n="",r="abcdefghijklmopqrstuvQWIEUTGASDLIGKBXACQWETL102394676457",i=Math.floor(20*Math.random()),o=0;o<i;o++)n+=r[Math.floor(Math.random()*r.length)];e.el.setAttribute("super-keyboard",{value:n})}})),document.addEventListener("show",this.open.bind(this)),this.hand=null,this.handListenersSet=!1,this.raycaster=null},update:function(e){var t=r[this.data.model],n=this.data.width,i=this.data.width/2;if(void 0!==t){e&&this.defaultValue===e.defaultValue?this.updateTextInput(this.filter(this.rawValue)):(this.rawValue=this.data.value,this.defaultValue=this.data.value,this.updateTextInput(this.filter(this.data.value))),this.data.width===e.width&&this.data.height===e.height&&this.data.keyColor===e.keyColor||(this.kbImg.setAttribute("geometry",{primitive:"plane",width:n,height:i}),this.kbImg.setAttribute("material",{shader:"flat",src:this.data.imagePath+"/"+t.img,color:this.data.keyColor,transparent:!0})),this.data.label===e.label&&this.data.labelColor===e.labelColor&&this.data.width===e.width||(this.label.setAttribute("text",{value:this.data.label,color:this.data.labelColor,width:this.data.width}),this.label.object3D.position.set(0,.4*n,-.02)),this.data.width===e.width&&this.data.keyBgColor===e.keyBgColor||this.initKeyColorPlane();var o="center"!==this.data.align?t.inputOffsetX*n:0;"right"===this.data.align&&(o*=-1),this.data.font===e.font&&this.data.inputColor===e.inputColor&&this.data.width===e.width&&this.data.align===e.align||this.textInput.setAttribute("text",{font:this.data.font,color:this.data.inputColor,width:n,wrapCount:t.wrapCount,align:this.data.align});for(var a=0;a<t.layout.length;a++){var s=t.layout[a];"Insert"===s.key&&(this.inputRect=s)}this.textInput.object3D.position.set(o,n/4-(this.inputRect.y+this.inputRect.h/2)*n/2+t.inputOffsetY*n,.002),this.data.width!==e.width&&this.cursor.setAttribute("geometry",{primitive:"plane",width:.03*n,height:.01*n}),this.updateCursorPosition(),this.setupHand(),this.keyBgColor.set(this.data.keyBgColor),this.keyHoverColor.set(this.data.keyHoverColor),this.keyPressColor.set(this.data.keyPressColor),this.data.show?this.open():this.close()}else console.error('super-keyboard ERROR: model "'+this.data.model+'" undefined.')},tick:function(e){var t;if(!(this.prevCheckTime&&e-this.prevCheckTime<this.data.interval))if(this.prevCheckTime){if(this.raycaster&&this.focused&&(t=this.raycaster.getIntersection(this.kbImg)))for(var n=t.uv,i=r[this.data.model].layout,o=0;o<i.length;o++){var a=i[o];if(n.x>a.x&&n.x<a.x+a.w&&1-n.y>a.y&&1-n.y<a.y+a.h){this.keyHover!==a&&(this.keyHover=a,this.updateKeyColorPlane(this.keyHover.key,this.keyHoverColor));break}}}else this.prevCheckTime=e},play:function(){this.cursorUpdated&&this.startBlinking()},pause:function(){this.stopBlinking()},initKeyColorPlane:function(){var e=r[this.data.model],t=this.keyColorPlane=document.createElement("a-entity");t.classList.add("superKeyboardKeyColorPlane"),t.object3D.position.z=.001,t.object3D.visible=!1,t.setAttribute("geometry",{primitive:"plane",buffer:!1}),t.setAttribute("material",{shader:"flat",color:this.data.keyBgColor,transparent:!0}),e.hoverImg&&t.setAttribute("material",{src:this.data.imagePath+"/"+e.hoverImg}),t.addEventListener("componentinitialized",(function(t){"material"===t.detail.name&&(e.hoverImg||(this.getObject3D("mesh").material.blending=THREE.AdditiveBlending))})),this.el.appendChild(t)},updateKeyColorPlane:function(e,t){var n=r[this.data.model],i=this.keyColorPlane;if(e){for(var o=0;o<n.layout.length;o++){var a=n.layout[o];if(a.key===e){var s=this.data.width,u=this.data.width/2,l=s/2,c=u/2,h=a.w*s,d=a.h*u;i.object3D.scale.x=h,i.object3D.scale.y=d,i.object3D.position.x=a.x*s-l+h/2,i.object3D.position.y=(1-a.y)*u-c-d/2,i.getObject3D("mesh").material.color.copy(t);var f=i.getObject3D("mesh").geometry,p=f.faceVertexUvs[0],m=1-a.y;p[0][0].set(a.x,m),p[0][1].set(a.x,m-a.h),p[0][2].set(a.x+a.w,m),p[1][0].set(a.x,m-a.h),p[1][1].set(a.x+a.w,m-a.h),p[1][2].set(a.x+a.w,m),f.uvsNeedUpdate=!0;break}}i.object3D.visible=!0}else i.object3D.visible=!1},setupHand:function(){if(this.hand&&this.hand.ownRaycaster&&this.hand.removeAttribute("raycaster"),this.data.hand?this.hand=this.data.hand:this.hand=document.querySelector(["[cursor]","[vive-controls]","[tracked-controls]","[oculus-touch-controls]","[windows-motion-controls]","[hand-controls]","[daydream-controls] [cursor] > [raycaster]"].join(",")),this.hand){if(!this.hand.hasLoaded)return void this.hand.addEventListener("loaded",this.setupHand.bind(this));var e=this.hand.components.raycaster,t={};if(e){if(this.hand.ownRaycaster=!1,this.data.injectToRaycasterObjects){var n=e.data.objects.split(",");-1===n.indexOf(".keyboardRaycastable")&&n.push(".keyboardRaycastable"),t.objects=n.join(",").replace(/^,/,""),this.hand.setAttribute("raycaster",t)}}else this.hand.ownRaycaster=!0,t.showLine=this.data.show,t.enabled=this.data.show,this.data.injectToRaycasterObjects&&(t.objects=".keyboardRaycastable"),this.hand.setAttribute("raycaster",t);this.raycaster=this.hand.components.raycaster}else console.error('super-keyboard: no controller found. Add <a-entity> with controller or specify with super-keyboard="hand: #selectorToController".')},filter:function(e){if(""===e)return"";for(var t=0;t<this.data.filters.length;t++)switch(this.data.filters[t]){case"custom":this.userFilterFunc&&(e=this.userFilterFunc(e));break;case"allupper":e=e.toUpperCase();break;case"alllower":e=e.toLowerCase();break;case"title":e=e.split(" ").map((function(e){return e[0].toUpperCase()+e.substr(1)})).join(" ");break;case"numbers":e=e.split("").filter((function(e){return!isNaN(parseInt(e))||"."===e})).join("");break;case"first":e=e[0].toUpperCase()+e.substr(1);break;case"trim":e=e.trim()}return this.data.maxLength>0?e.substr(0,this.data.maxLength):e},click:function(e){if(this.keyHover){switch(this.keyHover.key){case"Enter":this.accept();break;case"Insert":return;case"Delete":this.rawValue=this.rawValue.substr(0,this.rawValue.length-1);var t=this.filter(this.rawValue);this.el.setAttribute("super-keyboard","value",t),this.updateTextInput(t),this.changeEventDetail.value=t,this.el.emit("superkeyboardchange",this.changeEventDetail);break;case"Shift":this.shift=!this.shift,this.keyHover.el.setAttribute("material","color",this.shift?this.data.keyHoverColor:this.data.keyBgColor);break;case"Escape":this.dismiss();break;default:if(this.data.maxLength>0&&this.rawValue.length>this.data.maxLength)break;this.rawValue+=this.shift?this.keyHover.key.toUpperCase():this.keyHover.key,t=this.filter(this.rawValue),this.el.setAttribute("super-keyboard","value",t),this.updateTextInput(t),this.changeEventDetail.value=t,this.el.emit("superkeyboardchange",this.changeEventDetail)}this.updateKeyColorPlane(this.keyHover.key,this.keyPressColor);var n=this;setTimeout((function(){n.updateKeyColorPlane(n.keyHover.key,n.keyHoverColor)}),100),this.updateCursorPosition()}},open:function(){this.el.object3D.visible=!0,this.hand&&this.hand.ownRaycaster&&this.hand.setAttribute("raycaster",{showLine:!0,enabled:!0})},close:function(){this.el.object3D.visible=!1,this.hand&&this.hand.ownRaycaster&&this.hand.setAttribute("raycaster",{showLine:!1,enabled:!1})},accept:function(){this.el.object3D.visible=!1,this.hand&&this.hand.ownRaycaster&&this.hand.setAttribute("raycaster",{showLine:!1,enabled:!1}),this.el.emit("superkeyboardinput",{value:this.data.value}),this.data.show=!1},dismiss:function(){this.data.value=this.defaultValue,this.updateTextInput(),this.el.object3D.visible=!1,this.hand&&this.hand.ownRaycaster&&this.hand.setAttribute("raycaster",{showLine:!1,enabled:!1}),this.el.emit("superkeyboarddismiss"),this.data.show=!1},blur:function(){this.focused=!1,this.keyHover&&"Shift"!==this.keyHover.key&&(this.keyColorPlane.object3D.visible=!1),this.keyHover=null},hover:function(e){this.focused=!0},startBlinking:function(){this.stopBlinking(),this.intervalId=window.setInterval(this.blink.bind(this),this.data.blinkingSpeed)},stopBlinking:function(){window.clearInterval(this.intervalId),this.intervalId=0},blink:function(){this.cursor.object3D.visible=!this.cursor.object3D.visible},setCustomFilter:function(e){this.userFilterFunc=e},addCustomModel:function(e,t){e&&(r[e]=t)},updateCursorPosition:function(){var e=this.textInput.components.text.currentFont;if(!e){var t=this;return this.cursor.object3D.visible=!1,void window.setTimeout((function(){t.updateCursorPosition(),t.startBlinking()}),700)}var n=this.data.width,a=r[this.data.model],s=-this.inputRect.h/2*n/2.4+a.inputOffsetY*n,u=this.data.width/this.textInput.components.text.data.wrapCount,l=0,c=i[this.textInput.components.text.data.font];void 0===c&&(c=20);for(var h=0;h<Math.min(11,this.data.value.length);h++){var d=o(e.chars,this.data.value.charCodeAt(h));l+=d.width+d.xadvance*(32===d.id?2:1)}"center"===this.data.align?l=l*u*c*.0011/2+.02*n:"left"===this.data.align?(l=l*u*c*.0011+.02*n,l-=n/2):"right"===this.data.align&&(l=-l*u*c*.0011-.02*n,l+=n/2),this.cursor.object3D.position.set(.92*l,s+.05,.001),this.cursorUpdated=!0},updateTextInput:function(e){this.textInput.setAttribute("text","value",function(e,t){return e?e.length>=12?"..."+e.substring(e.length-12,e.length):e:""}(e||this.data.value))}}),window.AFRAME){const t=["super-keyboard"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){const r=new THREE.Color;if(AFRAME.registerComponent("supercurve-color",{init:function(){const e=this.el;e.sceneEl.addEventListener("curveevenstageeventcolor",e=>{e.detail&&"off"!==e.detail?this.setColor("color1",e.detail):this.setColor("color1","primary")}),e.sceneEl.addEventListener("curveoddstageeventcolor",e=>{e.detail&&"off"!==e.detail?this.setColor("color2",e.detail):this.setColor("color2","secondary")})},setColor:function(e,t){const n=this.el.components.material.material.uniforms[e].value,i=this.el.sceneEl.systems.materials.scheme[t];r.set(i),n.x=r.r,n.y=r.g,n.z=r.b}}),window.AFRAME){const t=["supercurve-color"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r);if(AFRAME.registerShader("supercurve",{schema:{cameraPercent:{type:"number",is:"uniform"},color1:{type:"color",is:"uniform",default:i.a.initial.primary},color2:{type:"color",is:"uniform",default:i.a.initial.secondary},fogColor:{type:"color",is:"uniform",default:i.a.initial.primary},side:{default:"double"},transparent:{default:!0}},fragmentShader:n(185),vertexShader:n(186),update:function(e){this.updateVariables(e,"attribute"),this.updateVariables(e,"uniform"),this.el.sceneEl.systems.materials.registerCurve(this.material)}}),window.AFRAME){const t=[],n=["supercurve"],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t){e.exports="varying vec2 vUvs;\nvarying vec3 vWorldPos;\nuniform vec3 color1;\nuniform vec3 color2;\nuniform vec3 fogColor;\nuniform float opacity;\n\n#define BLACK vec3(0.0)\n#define YELLOW vec3(250.0 / 255.0, 244.0 / 255.0, 180.0 / 255.0)\n\nvoid main() {\n  vec3 col;\n\n  // Lines.\n  float f1 = clamp(sin(vUvs.x * 12.9 + 1.4) - 0.99, 0.0, 1.0) * 80.0;\n  float f2 = clamp(sin(3.1416 + vUvs.x * 12.9 + 1.45) - 0.99, 0.0, 1.0) * 80.0;\n\n  // Gradients.\n  f1 += sin(vWorldPos.y - vWorldPos.x - vWorldPos.z * 0.4 + 1.4) * 0.1 + 0.1;\n  f2 += sin(vWorldPos.y - vWorldPos.x - vWorldPos.z * 0.3 + 5.5) * 0.1 + 0.1;\n  float f3 = sin(vWorldPos.y - vWorldPos.x - vWorldPos.z * 0.1 + 10.3) * 0.1 + 0.1;\n\n  // Build color.\n  col = mix(BLACK, color1, f1);\n  col = mix(col, color2, f2);\n  col = mix(col, YELLOW, f3);\n\n  // Fog.\n  float far = 100.0;\n  float fog = 1.0 - clamp(length(vWorldPos - cameraPosition) / 400.0, 0.0, 1.0);\n\n  col = mix(fogColor, col, fog);\n\n  // fade beginning and end\n  float alpha = 0.0;\n  alpha += smoothstep(0.0, 0.003, vUvs.y);\n  alpha -= smoothstep(0.997, 1.0, vUvs.y);\n\n  gl_FragColor = vec4(col, alpha * (fog * fog));\n}\n"},function(e,t){e.exports="varying vec2 vUvs;\nvarying vec3 vWorldPos;\n\nvoid main() {\n  vWorldPos = (modelMatrix * vec4(position, 1.0)).xyz;\n  vUvs = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n"},function(e,t,n){n(188),n(189);const r=new THREE.Vector3,i=new THREE.Vector3;if(AFRAME.registerComponent("supercurve",{schema:{debug:{default:!1}},init:function(){this.buffers={},this.curve=null,this.fullLength=null,this.indexes={},this.length=null,this.points=[]},play:function(){this.generateCurve(1500)},generateCurve:function(e){this.length=e,e+=200,this.fullLength=e,this.points.length=0,this.points.push(new THREE.Vector3(0,0,0)),this.points.push(new THREE.Vector3(0,0,-100));let t,n=100;for(let r=2;r<=Math.ceil(e/100)-1;r++)t=this.points[r-1],n+=100,this.points.push(new THREE.Vector3(t.x+(10*Math.random()*2-10),t.y+(10*Math.random()*2-10),-1*n));const r=new THREE.CatmullRomCurve3(this.points),i=e-r.getLength(),o=r.getTangent(1,new THREE.Vector3),a=this.points[this.points.length-1].clone().add(o.multiplyScalar(i));this.points.push(a),this.setCurve(this.points),this.el.emit("supercurvegenerate")},setCurve:function(e){const t=this.buffers,n=(this.data,this.el),o=this.indexes;this.points=e;const a=this.curve=new THREE.CatmullRomCurve3(e),s=a.getLength(),u=a.getSpacedPoints(350),l=s/350,c=new THREE.BufferGeometry;t.position=new Float32Array(2106),t.normal=new Float32Array(2106),t.uvs=new Float32Array(1404),o.position=0,o.normal=0,o.uvs=0;const h=new THREE.Vector3(-1.5,0,-1*l/2),d=new THREE.Vector3(1.5,0,-1*l/2);for(let e=0;e<u.length;e++){const a=e/(u.length-1),s=u[e];if(0===u[e].x&&0===u[e].y&&0===u[e].z?(u[e].set(.001,0,.001),i.y=-1*Math.abs(i.y)):(i.copy(r).cross(u[e]).normalize(),i.y=-1*i.y),this.getPositionRelativeToTangent(a,h,r),t.position[o.position++]=r.x,t.position[o.position++]=r.y,t.position[o.position++]=r.z,t.normal[o.normal++]=i.x,t.normal[o.normal++]=i.y,t.normal[o.normal++]=i.z,t.uvs[o.uvs++]=0,t.uvs[o.uvs++]=a,this.getPositionRelativeToTangent(a,d,r),t.position[o.position++]=r.x,t.position[o.position++]=r.y,t.position[o.position++]=r.z,t.normal[o.normal++]=i.x,t.normal[o.normal++]=i.y,t.normal[o.normal++]=i.z,t.uvs[o.uvs++]=1,t.uvs[o.uvs++]=a,this.data.debug){const e=document.createElement("a-box");e.setAttribute("geometry",{width:.1,height:.1,depth:.1}),e.setAttribute("material",{shader:"flat",color:"#333"}),e.object3D.position.copy(s),e.object3D.position.y+=.1,n.appendChild(e)}}if(c.setAttribute("normal",new THREE.BufferAttribute(t.normal,3)),c.setAttribute("position",new THREE.BufferAttribute(t.position,3)),c.setAttribute("uv",new THREE.BufferAttribute(t.uvs,2)),n.getObject3D("mesh"))n.getObject3D("mesh").geometry=THREE.BufferGeometryUtils.toTrianglesDrawMode(c,THREE.TriangleStripDrawMode);else{const e=new THREE.Mesh(THREE.BufferGeometryUtils.toTrianglesDrawMode(c,THREE.TriangleStripDrawMode));n.setObject3D("mesh",e)}},getPointAt:function(e,t){e=this.songProgressToCurveProgress(e),this.curve.getPointAt(e,t)},getTangentAt:function(e,t){e=this.songProgressToCurveProgress(e),this.curve.getTangentAt(e,t)},getPositionRelativeToTangent:function(){const e=new THREE.Object3D,t=new THREE.Vector3,n=new THREE.Vector3;return function(r,i,o,a){return this.curve,e.parent||this.el.sceneEl.object3D.add(e),this.getPointAt(r,e.position),this.getTangentAt(r,n),a?e.lookAt(t.copy(e.position).sub(n)):e.lookAt(t.copy(e.position).add(n)),e.updateMatrixWorld(),o.copy(i),e.localToWorld(o),o}}(),alignToCurve:function(){new THREE.Vector3,new THREE.Vector3;const e=new THREE.Vector3(0,0,-.01),t=new THREE.Vector3;return function(n,r){this.getPositionRelativeToTangent(n,e,t),r.lookAt(t),r.position.y+=.01}}(),songProgressToCurveProgress:function(e){return e*this.length/this.fullLength},curveProgressToSongProgress:function(e){return e*this.fullLength/this.length}}),AFRAME.registerComponent("supercurve-follow",{schema:{enabled:{default:!1},speed:{type:"number"},target:{type:"selector"}},init:function(){this.curveProgress=0,this.songProgress=0},update:function(){this.supercurve=this.data.target.components.supercurve},tick:(new THREE.Vector3(0,0,1),new THREE.Vector3,function(e,t){const n=this.data;if(this.el,!n.enabled||!t)return;if(this.curveProgress>=1)return;const r=this.supercurve,i=r.curve;if(!i)return;this.curveProgress=this.curveProgress||0;const o=n.speed*(t/1e3);if(this.curveProgress+=o/this.supercurve.fullLength,this.data.target.components.material.material.uniforms.cameraPercent.value=this.curveProgress,this.curveProgress>=1)return this.curveProgress=1,void(this.data.target.components.material.material.uniforms.cameraPercent.value=this.curveProgress);i.getPointAt(this.curveProgress,this.el.object3D.position),this.songProgress=r.curveProgressToSongProgress(this.curveProgress),r.alignToCurve(this.songProgress,this.el.object3D)})}),window.AFRAME){const t=["supercurve","supercurve-follow"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t){const n=THREE.Math,r=THREE.Vector3,i=THREE.Matrix4;function o(){this.type="Curve",this.arcLengthDivisions=200}var a,s,u;Object.assign(o.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e,t){var n;void 0===e&&(e=5),t?(n=t).length=0:n=[];for(var r=0;r<=e;r++)n.push(this.getPoint(r/e));return n},getSpacedPoints:function(e,t){var n;void 0===e&&(e=5),t?(n=t).length=0:n=[];for(var r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n},getLength:(u=[],function(){var e=this.getLengths(void 0,u);return e[e.length-1]}),getLengths:function(e,t){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1,t&&(t.length=0);var n,r,i=t||[],o=this.getPoint(0),a=0;for(i.push(0),r=1;r<=e;r++)a+=(n=this.getPoint(r/e)).distanceTo(o),i.push(a),o=n;return this.cacheArcLengths=i,i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,r=this.getLengths(),i=0,o=r.length;n=t||e*r[o-1];for(var a,s=0,u=o-1;s<=u;)if((a=r[i=Math.floor(s+(u-s)/2)]-n)<0)s=i+1;else{if(!(a>0)){u=i;break}u=i-1}if(r[i=u]===n)return i/(o-1);var l=r[i];return(i+(n-l)/(r[i+1]-l))/(o-1)},getTangent:(a=new THREE.Vector3,s=new THREE.Vector3,function(e,t){var n,r=e-1e-4,i=e+1e-4;return r<0&&(r=0),i>1&&(i=1),this.getPoint(r,a),this.getPoint(i,s),t?(n=t).copy(s).sub(a):n=s.clone().sub(a),n.normalize()}),getTangentAt:function(e,t){var n=this.getUtoTmapping(e);return this.getTangent(n,t)},computeFrenetFrames:function(e,t){var o,a,s,u=new r,l=[],c=[],h=[],d=new r,f=new i;for(o=0;o<=e;o++)a=o/e,l[o]=this.getTangentAt(a),l[o].normalize();c[0]=new r,h[0]=new r;var p=Number.MAX_VALUE,m=Math.abs(l[0].x),g=Math.abs(l[0].y),y=Math.abs(l[0].z);for(m<=p&&(p=m,u.set(1,0,0)),g<=p&&(p=g,u.set(0,1,0)),y<=p&&u.set(0,0,1),d.crossVectors(l[0],u).normalize(),c[0].crossVectors(l[0],d),h[0].crossVectors(l[0],c[0]),o=1;o<=e;o++)c[o]=c[o-1].clone(),h[o]=h[o-1].clone(),d.crossVectors(l[o-1],l[o]),d.length()>Number.EPSILON&&(d.normalize(),s=Math.acos(n.clamp(l[o-1].dot(l[o]),-1,1)),c[o].applyMatrix4(f.makeRotationAxis(d,s))),h[o].crossVectors(l[o],c[o]);if(!0===t)for(s=Math.acos(n.clamp(c[0].dot(c[e]),-1,1)),s/=e,l[0].dot(d.crossVectors(c[0],c[e]))>0&&(s=-s),o=1;o<=e;o++)c[o].applyMatrix4(f.makeRotationAxis(l[o],s*o)),h[o].crossVectors(l[o],c[o]);return{tangents:l,normals:c,binormals:h}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),THREE.Curve=o},function(e,t){const n=THREE.Vector3,r=THREE.Curve;function i(){var e=0,t=0,n=0,r=0;function i(i,o,a,s){e=i,t=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(e,t,n,r,o){i(t,n,o*(n-e),o*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,o,a,s){var u=(t-e)/o-(n-e)/(o+a)+(n-t)/a,l=(n-t)/a-(r-t)/(a+s)+(r-n)/s;i(t,n,u*=a,l*=a)},calc:function(i){var o=i*i;return e+t*i+n*o+r*(o*i)}}}var o=new n,a=new i,s=new i,u=new i;function l(e,t,n,i){r.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=i||.5}l.prototype=Object.create(r.prototype),l.prototype.constructor=l,l.prototype.isCatmullRomCurve3=!0,l.prototype.getPoint=function(e,t){var r,i,l,c,h=t||new n,d=this.points,f=d.length,p=(f-(this.closed?0:1))*e,m=Math.floor(p),g=p-m;if(this.closed?m+=m>0?0:(Math.floor(Math.abs(m)/f)+1)*f:0===g&&m===f-1&&(m=f-2,g=1),this.closed||m>0?r=d[(m-1)%f]:(o.subVectors(d[0],d[1]).add(d[0]),r=o),i=d[m%f],l=d[(m+1)%f],this.closed||m+2<f?c=d[(m+2)%f]:(o.subVectors(d[f-1],d[f-2]).add(d[f-1]),c=o),"centripetal"===this.curveType||"chordal"===this.curveType){var y="chordal"===this.curveType?.5:.25,v=Math.pow(r.distanceToSquared(i),y),b=Math.pow(i.distanceToSquared(l),y),A=Math.pow(l.distanceToSquared(c),y);b<1e-4&&(b=1),v<1e-4&&(v=b),A<1e-4&&(A=b),a.initNonuniformCatmullRom(r.x,i.x,l.x,c.x,v,b,A),s.initNonuniformCatmullRom(r.y,i.y,l.y,c.y,v,b,A),u.initNonuniformCatmullRom(r.z,i.z,l.z,c.z,v,b,A)}else"catmullrom"===this.curveType&&(a.initCatmullRom(r.x,i.x,l.x,c.x,this.tension),s.initCatmullRom(r.y,i.y,l.y,c.y,this.tension),u.initCatmullRom(r.z,i.z,l.z,c.z,this.tension));return h.set(a.calc(g),s.calc(g),u.calc(g)),h},l.prototype.copy=function(e){r.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},l.prototype.toJSON=function(){var e=r.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},l.prototype.fromJSON=function(e){r.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var o=e.points[t];this.points.push((new n).fromArray(o))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},THREE.CatmullRomCurve3=l},function(e,t,n){if(AFRAME.registerShader("superCutFxShader",{schema:{startTime:{type:"float",is:"uniform"},timeMs:{type:"time",is:"uniform"},color:{type:"color",is:"uniform"}},vertexShader:"\n    varying vec2 uvs;\n    varying vec3 worldPos;\n    void main() {\n      uvs.xy = uv.xy;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }\n  ",fragmentShader:"\n    uniform float startTime;\n    uniform float timeMs;\n    uniform vec3 color;\n    varying vec2 uvs;\n    varying vec3 worldPos;\n\n    void main() {\n      float time = (timeMs - startTime) / 2000.0;\n      vec2 p = uvs.xy - 0.5;\n      float r = p.x * p.x + p.y * p.y;\n      float alpha = 1.0 - smoothstep(time - 0.01, time, r);\n      alpha *= smoothstep(time - 0.1, time, r);\n      alpha *= 1.0 - time * 5.5;\n      gl_FragColor = vec4(color, alpha);\n    }\n  "}),window.AFRAME){const t=[],n=["superCutFxShader"],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){const r=new THREE.Color;if(AFRAME.registerComponent("supercutfx",{schema:{colorPrimary:{type:"string"},colorSecondary:{type:"string"}},init:function(){this.rigEl=document.getElementById("curveFollowRig"),this.startTime=-1100},createSuperCut:function(e,t){const n=this.el,i=this.el.getObject3D("mesh");i.material.transparent=!0,this.rigEl.object3D.worldToLocal(n.object3D.position.copy(e.position)),n.object3D.position.z-=.25,n.object3D.visible=!0,this.startTime=n.sceneEl.time,r.set("red"===t?this.data.colorPrimary:this.data.colorSecondary);const o=i.material.uniforms.color.value;o.x=r.r,o.y=r.g,o.z=r.b,i.material.uniforms.startTime.value=this.startTime-50,n.play()},tick:function(e){e>this.startTime+1e3&&(this.el.object3D.visible=!1,this.el.pause())}}),window.AFRAME){const t=["supercutfx"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("tail",{schema:{height:{default:.1},segments:{default:10,type:"int"},target:{type:"selector"},width:{default:1}},init:function(){const e=this.data,t=this.geometry=new THREE.PlaneBufferGeometry(e.width,e.height,e.segments,1);t.deleteAttribute("normal"),t.translate(e.width/2,0,0);const n=this.el.sceneEl.systems.materials.handStarTrail,r=new THREE.Mesh(t,n);r.frustumCulled=!1,this.el.setObject3D("mesh",r),this.positions=t.attributes.position.array,this.numVerts=2*e.segments+2,this.geometry=t,this.target=e.target.object3D,this.targetPos=new THREE.Vector3},tick:function(e,t){const n=this.positions,r=this.targetPos;let i,o=this.numVerts/2*3,a=this.data.height/2;for(let e=this.numVerts/2-1;e>0;e--)n[i=3*e]=n[i-3],n[i+1]=n[i-2],n[i+2]=n[i-1],n[i+=o]=n[i-3],n[i+1]=n[i-2],n[i+2]=n[i-1];this.target.getWorldPosition(r),n[0]=r.x,n[1]=r.y+a,n[2]=r.z-.1,n[o+0]=r.x,n[o+1]=r.y-a,n[o+2]=r.z-.1,this.geometry.attributes.position.needsUpdate=!0}}),window.AFRAME){const t=["tail"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("text-counter",{dependencies:["text"],schema:{decimals:{default:0},dur:{default:2e3,type:"int"},enabled:{default:!1},emit:{default:!1},prefix:{default:""},suffix:{default:""},value:{default:0,type:"float"}},init:function(){this.currentValue=0,this.hasCompleted=!1,this.textValue={value:""}},update:function(e){this.currentValue=0,this.textValue.value=`${this.data.prefix}${this.decimals(0)}${this.data.suffix}`,this.el.setAttribute("text",this.textValue),this.hasCompleted=!1},tick:function(e,t){this.data.enabled&&!this.hasCompleted&&(this.currentValue+=this.data.value*(t/this.data.dur),this.currentValue>=this.data.value&&(this.currentValue=this.data.value,this.data.emit&&this.el.emit("textcounterdone",null,!1),this.hasCompleted=!0),this.textValue.value=`${this.data.prefix}${this.decimals(this.currentValue)}${this.data.suffix}`,this.el.setAttribute("text",this.textValue))},decimals:function(e){var t=Math.pow(10,this.data.decimals);return(parseInt(e*t)/t).toFixed(this.data.decimals)}}),window.AFRAME){const t=["text-counter"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){var r=(0,AFRAME.utils.debug)("aframe-text-component:error"),i=new THREE.FontLoader;if(AFRAME.registerComponent("text-geometry",{schema:{bevelEnabled:{default:!1},bevelSize:{default:8,min:0},bevelThickness:{default:12,min:0},curveSegments:{default:12,min:0},font:{type:"asset",default:"https://rawgit.com/ngokevin/kframe/master/components/text-geometry/lib/helvetiker_regular.typeface.json"},height:{default:.05,min:0},size:{default:.5,min:0},style:{default:"normal",oneOf:["normal","italics"]},weight:{default:"normal",oneOf:["normal","bold"]},value:{default:""}},update:function(e){const t=this.data,n=this.el;if(!t.value)return;let o=n.getObject3D("mesh");o||(o=new THREE.Mesh,n.setObject3D("mesh",o)),t.font.constructor===String?i.load(t.font,(function(e){const n=AFRAME.utils.clone(t);n.font=e,o.geometry=new THREE.TextGeometry(t.value,n),o.geometry.translate(-.18,0,-.07)})):t.font.constructor===Object?(o.geometry=new THREE.TextGeometry(t.value,t),o.geometry.translate(-.18,0,-.07)):r("Must provide `font` (typeface.json) or `fontPath` (string) to text component.")}}),window.AFRAME){const t=["text-geometry"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("text-truncate",{schema:{value:{type:"string"},length:{type:"int",default:10}},update:function(){this.el.setAttribute("text","value",function(e,t){return e?e.length>=t?e.substring(0,t-3)+"...":e:""}(this.data.value,this.data.length))}}),window.AFRAME){const t=["text-truncate"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("text-uppercase",{schema:{value:{type:"string"}},update:function(){this.el.setAttribute("text","value",this.data.value.toUpperCase())}}),window.AFRAME){const t=["text-uppercase"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("toggle-pause-play",{schema:{isPlaying:{default:!1}},update:function(){const e=this.data.isPlaying?"pause":"play";parent.postMessage(JSON.stringify({verify:"game-action",action:e}),"*")}}),window.AFRAME){const t=["toggle-pause-play"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r);if(AFRAME.registerComponent("trail",{schema:{color:{default:"primary"},colorScheme:{default:"default"},enabled:{default:!1},hand:{type:"string"}},init:function(){const e=this.geometry=new THREE.BufferGeometry,t=this.maxPoints=12,n=this.vertices=new Float32Array(36*t),r=this.colors=new Float32Array(48*t);this.bladeColor={alpha:1},this.rigContainer=document.getElementById("rigContainer"),this.bladeEl=this.el.querySelector(".blade"),this.layers=0,this.bladeTrajectory=[{top:new THREE.Vector3(-.5,0,0),center:new THREE.Vector3(0,0,0),bottom:new THREE.Vector3(.5,0,0)},{top:new THREE.Vector3(-.5,.5,0),center:new THREE.Vector3(0,.5,0),bottom:new THREE.Vector3(.5,.5,0)},{top:new THREE.Vector3(-.5,1,0),center:new THREE.Vector3(0,1,0),bottom:new THREE.Vector3(.5,1,0)}],this.newSample=null,e.setAttribute("position",new THREE.BufferAttribute(n,3).setUsage(THREE.DynamicDrawUsage)),e.setAttribute("vertexColor",new THREE.BufferAttribute(r,4).setUsage(THREE.DynamicDrawUsage));const i=new THREE.ShaderMaterial({side:THREE.DoubleSide,vertexColors:THREE.VertexColors,transparent:!0,depthTest:!1,blending:THREE.AdditiveBlending,vertexShader:["varying vec4 vColor;","attribute vec4 vertexColor;","void main() {","vec4 modelViewPosition = modelViewMatrix * vec4(position, 1.0);","vColor = vertexColor;","gl_Position = projectionMatrix * modelViewPosition;","}"].join(""),fragmentShader:["varying vec4 vColor;","uniform float pulse;","void main() {","gl_FragColor = vec4(vColor.xyz, vColor.a + pulse);","}"].join(""),uniforms:{pulse:{value:0}}}),o=this.mesh=new THREE.Mesh(e,i);o.frustumCulled=!1,o.vertices=n,this.rigContainer.setObject3D("trail__"+this.data.hand,o)},update:function(e){this.mesh.visible=this.data.enabled,!e.enabled&&this.data.enabled&&(this.enabledTime=this.el.sceneEl.time),e.colorScheme!==this.data.colorScheme&&(this.bladeColor=new THREE.Color(i.a.schemes[this.data.colorScheme][this.data.color]),this.bladeColor.red=this.bladeColor.r,this.bladeColor.green=this.bladeColor.g,this.bladeColor.blue=this.bladeColor.b)},tock:function(e,t){this.data.enabled&&(!this.mesh.visible&&e>this.enabledTime+250&&(this.mesh.visible=!0),this.mesh.material.uniforms.pulse.value*=.9,this.sampleBladePosition())},pulse:function(){this.mesh.material.uniforms.pulse.value=1},addLayer:function(e){const t=this.bladeColor,n=this.colors,r=this.segments,i=this.vertices;let o=2/r;this.layers>=this.maxLayers&&(this.layers=0);const a=this.layers*e;e=a+e;const s=this.layers*r*18,u=this.layers*r*24;for(let l=0;l<r;++l)i[s+18*l]=l*o-1,i[s+18*l+1]=a,i[s+18*l+2]=0,n[u+24*l]=t.red,n[u+24*l+1]=t.green,n[u+24*l+2]=t.blue,n[u+24*l+3]=t.alpha,i[s+18*l+3]=l*o-1,i[s+18*l+4]=e,i[s+18*l+5]=0,n[u+24*l+4]=t.red,n[u+24*l+5]=t.green,n[u+24*l+6]=t.blue,n[u+24*l+7]=t.alpha,i[s+18*l+6]=l*o-1+o,i[s+18*l+7]=e,i[s+18*l+8]=0,n[u+24*l+8]=t.red,n[u+24*l+9]=t.green,n[u+24*l+10]=t.blue,n[u+24*l+11]=t.alpha,i[s+18*l+9]=l*o-1+o,i[s+18*l+10]=a,i[s+18*l+11]=0,n[u+24*l+12]=t.red,n[u+24*l+13]=t.green,n[u+24*l+14]=t.blue,n[u+24*l+15]=t.alpha,i[s+18*l+12]=l*o-1,i[s+18*l+13]=a,i[s+18*l+14]=0,n[u+24*l+16]=t.red,n[u+24*l+17]=t.green,n[u+24*l+18]=t.blue,n[u+24*l+19]=t.alpha,i[s+18*l+15]=l*o-1+o,i[s+18*l+16]=e,i[s+18*l+17]=0,n[u+24*l+20]=t.red,n[u+24*l+21]=t.green,n[u+24*l+22]=t.blue,n[u+24*l+23]=t.alpha;this.layers++,this.geometry.attributes.position.needsUpdate=!0,this.geometry.attributes.vertexColor.needsUpdate=!0,this.geometry.attributes.uv.needsUpdate=!0},initGeometry:function(){const e=this.bladeColor,t=this.geometry.attributes.vertexColor.array,n=this.geometry.attributes.position.array,r=this.bladeTrajectory;let i,o,a;for(let s=1;s<r.length;s++){1===s&&(o=i),i=1-(r.length-s)/r.length;const u=r[s];a=r[s-1],n[36*s]=a.center.x,n[36*s+1]=a.center.y,n[36*s+2]=a.center.z,t[48*s]=e.red,t[48*s+1]=e.green,t[48*s+2]=e.blue,t[48*s+3]=.2*o,n[36*s+3]=u.top.x,n[36*s+4]=u.top.y,n[36*s+5]=u.top.z,t[48*s+4]=e.red,t[48*s+5]=e.green,t[48*s+6]=e.blue,t[48*s+7]=i,n[36*s+6]=a.top.x,n[36*s+7]=a.top.y,n[36*s+8]=a.top.z,t[48*s+8]=e.red,t[48*s+9]=e.green,t[48*s+10]=e.blue,t[48*s+11]=o,n[36*s+9]=a.center.x,n[36*s+10]=a.center.y,n[36*s+11]=a.center.z,t[48*s+12]=e.red,t[48*s+13]=e.green,t[48*s+14]=e.blue,t[48*s+15]=.2*o,n[36*s+12]=u.center.x,n[36*s+13]=u.center.y,n[36*s+14]=u.center.z,t[48*s+16]=e.red,t[48*s+17]=e.green,t[48*s+18]=e.blue,t[48*s+19]=.2*i,n[36*s+15]=u.top.x,n[36*s+16]=u.top.y,n[36*s+17]=u.top.z,t[48*s+20]=e.red,t[48*s+21]=e.green,t[48*s+22]=e.blue,t[48*s+23]=i,n[36*s+18]=a.bottom.x,n[36*s+19]=a.bottom.y,n[36*s+20]=a.bottom.z,t[48*s+24]=e.red,t[48*s+25]=e.green,t[48*s+26]=e.blue,t[48*s+27]=0,n[36*s+21]=u.center.x,n[36*s+22]=u.center.y,n[36*s+23]=u.center.z,t[48*s+28]=e.red,t[48*s+29]=e.green,t[48*s+30]=e.blue,t[48*s+31]=.2*i,n[36*s+24]=a.center.x,n[36*s+25]=a.center.y,n[36*s+26]=a.center.z,t[48*s+32]=e.red,t[48*s+33]=e.green,t[48*s+34]=e.blue,t[48*s+35]=.2*o,n[36*s+27]=a.bottom.x,n[36*s+28]=a.bottom.y,n[36*s+29]=a.bottom.z,t[48*s+36]=e.red,t[48*s+37]=e.green,t[48*s+38]=e.blue,t[48*s+39]=0,n[36*s+30]=u.bottom.x,n[36*s+31]=u.bottom.y,n[36*s+32]=u.bottom.z,t[48*s+40]=e.red,t[48*s+41]=e.green,t[48*s+42]=e.blue,t[48*s+43]=0,n[36*s+33]=u.center.x,n[36*s+34]=u.center.y,n[36*s+35]=u.center.z,t[48*s+44]=e.red,t[48*s+45]=e.green,t[48*s+46]=e.blue,t[48*s+47]=.2*i,o=i}this.geometry.attributes.position.needsUpdate=!0,this.geometry.attributes.vertexColor.needsUpdate=!0},sampleBladePosition:function(){let e;this.bladeTrajectory.length===this.maxPoints?((e=this.newSample=this.bladeTrajectory.shift()).top.set(0,-.5,0),e.center.set(0,0,0),e.bottom.set(0,.5,0)):this.newSample?(this.newSample.top.set(0,-.5,0),this.newSample.center.set(0,0,0),this.newSample.bottom.set(0,.5,0),e=this.newSample):e={top:new THREE.Vector3(0,-.5,0),center:new THREE.Vector3(0,0,0),bottom:new THREE.Vector3(0,.5,0)};const t=this.bladeEl.object3D;t.localToWorld(e.top),t.localToWorld(e.center),t.localToWorld(e.bottom),this.rigContainer.object3D.worldToLocal(e.top),this.rigContainer.object3D.worldToLocal(e.center),this.rigContainer.object3D.worldToLocal(e.bottom),this.bladeTrajectory.push(e),this.initGeometry()}}),window.AFRAME){const t=["trail"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("tunnels",{dependencies:["pool_tunnels"],schema:{isPlaying:{default:!1},songDuration:{default:0}},init:function(){this.addTunnel=this.addTunnel.bind(this),this.clearTunnels=this.clearTunnels.bind(this),this.curveEl=document.getElementById("curve"),this.curveFollowRig=document.getElementById("curveFollowRig"),this.timeout=0,this.tunnels=[],this.tick=AFRAME.utils.throttleTick(this.tick.bind(this),1e3),this.el.addEventListener("cleargame",this.clearTunnels),this.el.addEventListener("gamemenuexit",this.clearTunnels),this.el.addEventListener("gamemenurestart",this.clearTunnels)},update:function(e){!e.isPlaying&&this.data.isPlaying&&this.requestTunnel(),e.isPlaying&&!this.data.isPlaying&&this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},play:function(){this.pool=this.el.components.pool__tunnels},requestTunnel:function(){this.timeout=setTimeout(this.addTunnel,Math.floor(3e3+1e4*Math.random()))},addTunnel:function(){const e=this.pool.requestEntity();if(!e)return;e.setAttribute("render-order","tunnel"),e.object3D.visible=!0;const t=this.curveEl.components.supercurve;let n=(this.el.components.song.getCurrentTime()+20)/this.data.songDuration;n>1&&(n=1),t.getPointAt(n,e.object3D.position),t.alignToCurve(n,e.object3D),e.play(),this.tunnels.push(e),this.requestTunnel()},clearTunnels:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null);for(let e=0;e<this.tunnels.length;e++)this.tunnels[e].object3D.visible=!1,this.pool.returnEntity(this.tunnels[e]);this.tunnels.length=0},tick:function(e,t){if(0!=this.tunnels.length)for(let e=0;e<this.tunnels.length;e++){if(!(this.tunnels[e].object3D.position.z>this.curveFollowRig.object3D.position.z+5))return;{const t=this.tunnels.splice(e,1)[0];t.object3D.visible=!1,this.pool.returnEntity(t)}}}}),window.AFRAME){const t=["tunnels"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){var r=new THREE.Color;if(AFRAME.registerComponent("vertex-colors-buffer",{schema:{baseColor:{type:"color"},itemSize:{default:3}},update:function(e){var t,n,i,o,a=this.data,s=this.el,u=this;if((o=this.el.getObject3D("mesh"))&&o.geometry)if((i=o.geometry).attributes.position){for(i.attributes.color||i.setAttribute("color",new THREE.BufferAttribute(new Float32Array(i.attributes.position.array.length),3)),t=i.attributes.color.array,r.set(a.baseColor),n=0;n<t.length;n+=a.itemSize)t[n]=r.r,t[n+1]=r.g,t[n+2]=r.b;i.attributes.color.needsUpdate=!0}else console.warn("Geometry has no vertices",s);else s.addEventListener("object3dset",(function t(n){"mesh"===n.detail.type&&(s.removeEventListener("object3dset",t),u.update(e))}))}}),window.AFRAME){const t=["vertex-colors-buffer"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("victory-accuracy-ring",{dependencies:["geometry","material"],schema:{accuracy:{default:0}},update:function(){this.el.getObject3D("mesh").material.uniforms.progress.value=0,this.el.setAttribute("animation","to",this.data.accuracy/100),this.el.components.animation.beginAnimation()}}),window.AFRAME){const t=["victory-accuracy-ring"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){const r={sphericalEnvMap:"",roughness:.8,metalness:.4},i={sphericalEnvMap:"#envmapImg",roughness:.2,metalness:.6};if(AFRAME.registerComponent("victory-rank",{schema:{isVictory:{default:!1},rank:{type:"string"}},update:function(e){const t=this.el,n=this.data.rank;if(e.isVictory&&!this.data.isVictory&&this.el.object3D.scale.set(.001,.001,.001),n)switch(t.setAttribute("text-geometry","value",n),n[0]){case"S":t.setAttribute("material",Object.assign({color:"#F0e077"},i));break;case"A":t.setAttribute("material",Object.assign({color:"#6FF9EA"},i));break;case"B":t.setAttribute("material",Object.assign({color:"#F8d"},i));break;case"C":t.setAttribute("material",Object.assign({color:"#F971C3"},r));break;case"D":t.setAttribute("material",Object.assign({color:"#1E6269"},r));break;case"F":t.setAttribute("material",Object.assign({color:"#e3170a"},r))}}}),window.AFRAME){const t=["victory-rank"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("visible-raycastable",{schema:{default:!0},update:function(){this.el.object3D.visible=this.data,this.data?this.el.setAttribute("raycastable",""):this.el.removeAttribute("raycastable","")}}),window.AFRAME){const t=["visible-raycastable"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){const r=n(0);if(AFRAME.registerShader("wallShader",{schema:{colorTertiary:{type:"color",is:"uniform",default:r.initial.tertiary},environment:{type:"map",is:"uniform",default:"#envmapImg"},hitLeft:{type:"vec3",is:"uniform",default:{x:0,y:9e3,z:0}},hitRight:{type:"vec3",is:"uniform",default:{x:0,y:9e3,z:0}},iTime:{type:"time",is:"uniform"},opacity:{type:"number",is:"uniform"}},vertexShader:n(205),fragmentShader:n(206)}),window.AFRAME){const t=[],n=["wallShader"],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t){e.exports="varying vec2 uvs;\nvarying vec3 nrml;\nvarying vec3 worldPos;\n\nvoid main() {\n  uvs.xy = uv.xy;\n  nrml.xyz = normal.xyz;\n  vec4 p = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  worldPos = (modelMatrix * vec4( position, 1.0 )).xyz;\n  gl_Position = p;\n}\n"},function(e,t){e.exports="uniform float iTime;\nuniform float opacity;\nuniform sampler2D environment;\nuniform vec3 colorTertiary;\nuniform vec3 hitLeft;\nuniform vec3 hitRight;\nvarying vec2 uvs;\nvarying vec3 nrml;\nvarying vec3 worldPos;\n\n#define SEED 19.1252\n#define time (3.0 + iTime) / 1000.0\n\nfloat noise(vec3 uv) {\n  return fract(sin(uv.x*123243. + uv.y*424. + uv.z*642. + SEED) * 1524.);\n}\n\nvec4 drawHit(vec3 p, vec3 center, vec3 color) {\n  center.z -= 0.1;\n  float dist = 1.0 - smoothstep(0.0, 0.3, length(p - center));\n  float glitch = noise(floor(p*3.0)) * 0.06 - 0.03;\n  float alpha = 1.0 - smoothstep(0.0, 0.01, abs(p.z-center.z + glitch));\n  alpha += 1.0 - smoothstep(0.0, 0.01, abs(p.y-center.y + glitch));\n  return vec4(color * dist, alpha * dist + alpha);\n}\n\nvoid main() {\n  vec2 uv1 = uvs.xy-0.5;\n  float alpha = 0.0;\n  // border\n  alpha += smoothstep(0.44, 0.50, abs(uv1.x));\n  alpha += smoothstep(0.44, 0.50, abs(uv1.y));\n  alpha += smoothstep(0.486, 0.49, abs(uv1.x));\n  alpha += smoothstep(0.486, 0.49, abs(uv1.y));\n  alpha = min(1.0, alpha * 0.5);\n\n  // weapon collision\n  vec4 hit;\n  hit = drawHit(worldPos, hitRight, colorTertiary);\n  hit += drawHit(worldPos, hitLeft, colorTertiary);\n\n  // reflection\n  vec3 ray = reflect(normalize(cameraPosition - worldPos + sin(worldPos.z) * 0.1 + cos(worldPos.z * 0.3) * 0.3), nrml);\n  float m = 2.0 * sqrt(pow(ray.x, 2.0) + pow(ray.y, 2.0) + pow(ray.z, 2.0));\n  vec2 uv = ray.xy / m + 0.5;\n  vec3 col = texture2D(environment, uv).rgb * 0.3;\n\n  gl_FragColor = vec4(mix(col, colorTertiary, alpha) + hit.rgb, (alpha * 0.2 + 0.8) * opacity + hit.a);\n}\n"},function(e,t,n){"use strict";if(n.r(t),n(20),AFRAME.registerComponent("wall",{dependencies:["material"],init:function(){this.curveEl=document.getElementById("curve"),this.curveFollowRig=document.getElementById("curveFollowRig"),this.el.setObject3D("mesh",new THREE.Mesh),this.geometry=null,this.isCeiling=!1,this.isRaycastable=!1,this.localPosition=new THREE.Vector3,this.songPosition=void 0,this.tick=AFRAME.utils.throttleTick(this.tick.bind(this),1e3)},play:function(){this.el.object3D.visible=!0},tick:function(e,t){const n=this.curveFollowRig.components["supercurve-follow"].songProgress;!this.isRaycastable&&n+.01>=this.songPosition&&(this.isRaycastable=!0,this.el.setAttribute("data-wall-active",""),this.isCeiling||(this.el.setAttribute("data-weapon-particles",""),this.el.setAttribute("raycastable-game",""))),n>=this.backPosition+.01&&this.returnToPool()},onGenerate:function(e,t,n,r,i,o){const a=this.el;this.isCeiling=i,this.backPosition=o,this.songPosition=e,this.setWallGeometry(e,t,n,r,i),a.getObject3D("mesh").material.uniforms.opacity.value=0,a.object3D.position.y=-5,a.components.animation__fadein.beginAnimation(),a.components.animation__scalein.beginAnimation()},setWallGeometry:function(){const e=new THREE.Vector3,t=new THREE.Vector3,n=new THREE.Vector3;return function(r,i,o,a,s){const u=this.el.sceneEl.components["beat-system"],l=this.curveEl.components.supercurve,c=r,h=r+a/l.length,d=s?1.5:2.5,f=-1*u.horizontalPositions[i]-o/2+.25;t.x=f-o/2,n.x=f+o/2;const p=(this.geometry=new THREE.BoxBufferGeometry(o,d,1,1,1,30)).attributes.position.array;for(let r=0;r<p.length;r+=3){const i=p[r+2]+.5;l.getPositionRelativeToTangent(c+i*(h-c),p[r]<0?t:n,e),p[r]=e.x,p[r+1]+=e.y+d/2,p[r+2]=e.z}let m=u.verticalPositions.middle+u.size/2;"punch"===u.data.gameMode&&(m-=.1),this.el.getObject3D("mesh").geometry=this.geometry,this.el.getObject3D("mesh").position.y=s?m:.1}}(),returnToPool:function(){this.el.object3D.visible=!1,this.el.removeAttribute("data-weapon-particles"),this.el.removeAttribute("data-wall-active"),this.el.removeAttribute("raycastable-game"),this.isCeiling=!1,this.isRaycastable=!1,this.el.isPlaying&&this.el.sceneEl.components.pool__wall.returnEntity(this.el),this.geometry&&this.geometry.dispose()}}),window.AFRAME){const t=["wall"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){const r={direction:{x:0,y:-.25,z:-1}},i={direction:{x:0,y:1,z:-1}};if(AFRAME.registerComponent("weapon-particles",{schema:{enabled:{default:!1},gameMode:{default:""},hand:{type:"string"}},init:function(){this.hiddenIntersection={x:999,y:0,z:0},this.intersectedEl=null,this.weaponEnter=this.weaponEnter.bind(this),this.weaponLeave=this.weaponLeave.bind(this)},update:function(e){e.gameMode!==this.data.gameMode&&this.el.setAttribute("raycaster__game","punch"===this.data.gameMode?r:i)},pause:function(){this.el.removeEventListener("mouseenter",this.weaponEnter),this.el.removeEventListener("mouseleave",this.weaponLeave)},play:function(){this.el.addEventListener("mouseenter",this.weaponEnter),this.el.addEventListener("mouseleave",this.weaponLeave)},weaponEnter:function(e){this.data.enabled&&e.target===this.el&&e.detail.intersectedEl.hasAttribute("data-weapon-particles")&&(this.intersectedEl=e.detail.intersectedEl)},weaponLeave:function(e){if(e.detail.target===this.el){if(this.intersectedEl.components.wall||"floor"===this.intersectedEl.id){const e=this.data.hand===RIGHT?"hitRight":"hitLeft";this.intersectedEl.getObject3D("mesh").material.uniforms[e].value=this.hiddenIntersection}this.intersectedEl=null}},tick:function(e,t){if(!this.data.enabled||!this.intersectedEl)return;const n=this.el.components.raycaster__game.getIntersection(this.intersectedEl);if(n&&(this.intersectedEl.components.wall||"floor"===this.intersectedEl.id)){const e="right"===this.data.hand?"hitRight":"hitLeft";this.intersectedEl.getObject3D("mesh").material.uniforms[e].value=n.point}}}),window.AFRAME){const t=["weapon-particles"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("zip-loader",{schema:{difficulties:{type:"array"},isLoading:{default:"false"},version:{type:"string"}},init:function(){this.loadingIndicator=document.getElementById("zipLoaderIndicator"),this.cachedZip=null,this.cachedVersion=null,this.message={},this.worker=new Worker("build/zip.js"),this.worker.onmessage=this.onMessage.bind(this),this.worker.onerror=console.error},update:function(e){const t=this.data;e.version&&e.version!==t.version&&this.cachedVersion!==t.version&&(this.message.abort=!0,this.message.difficulties=JSON.stringify(this.data.difficulties),this.message.version=e.version,this.worker.postMessage(this.message)),t.version&&e.version!==t.version&&(this.cachedVersion=null,this.cachedZip=null,this.fetchZip(t.version)),e.isLoading||!this.data.isLoading||this.cachedVersion!==this.data.version||this.cachedZip||this.el.emit("songloaderror")},fetchZip:function(e){if(this.el.emit("ziploaderstart",null,!1),this.cachedVersion===e)return this.cachedZip?void this.el.emit("ziploaderend",this.cachedZip,!1):void this.el.emit("songloaderror");this.message.abort=!1,this.message.difficulties=JSON.stringify(this.data.difficulties),this.message.version=e,this.worker.postMessage(this.message)},onMessage:function(e){switch(e.data.message){case"error":this.el.emit("songloaderror");break;case"progress":if(e.data.version!==this.data.version)return;this.loadingIndicator.setAttribute("material","progress",e.data.progress);break;case"load":{let t;this.cachedVersion=e.data.version,this.cachedZip=e.data.data;const n=e.data.data.beats;for(t in n)break;if(!t)return this.cachedZip=null,void(e.data.version===this.data.version&&this.el.emit("songloaderror"));e.data.version===this.data.version&&this.el.emit("ziploaderend",e.data.data,!1);break}}}}),window.AFRAME){const t=["zip-loader"],n=[],r=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){var r={"./index.js":211,"./test.js":17};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=210},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r);const o=n(1),a={};let s=!1;const u={},l={author:"Juancho Pancho",difficulty:"Expert",id:"31",image:"assets/img/molerat.jpg",songDuration:100,songName:"Friday",songLength:100,songSubName:"Rebecca Black"},c="true"===AFRAME.utils.getUrlParameter("skipintro"),h=localStorage.getItem("colorScheme")||"default";let d=localStorage.getItem("favorites");if(d)try{d=JSON.parse(d)}catch(e){d=[]}else d=[];function f(e){let t=Math.ceil(e.search.results.length/6);e.search.hasPrev=e.search.page>0,e.search.hasNext=e.search.page<t-1,e.search.songNameTexts="",e.search.songSubNameTexts="",e.searchResultsPage.length=0,e.searchResultsPage.__dirty=!0;for(let t=6*e.search.page;t<6*e.search.page+6;t++){const n=e.search.results[t];if(!n)break;e.searchResultsPage.push(n),e.search.songNameTexts+=p(n.songName,22).toUpperCase()+"\n",e.search.songSubNameTexts+=p("Unknown Artist"!==n.songSubName?n.songSubName:n.author,32)+"\n"}for(let t=0;t<e.searchResultsPage.length;t++)e.searchResultsPage[t].index=t;b(e)}function p(e,t){return e?e.length>=t?e.substring(0,t-3)+"...":e:""}AFRAME.registerState({nonBindedStateKeys:["genres"],initialState:{activeHand:localStorage.getItem("hand")||"right",challenge:{audio:"",author:"",difficulty:"",id:AFRAME.utils.getUrlParameter("challenge"),image:"",isBeatsPreloaded:!1,numBeats:void 0,songDuration:0,songName:"",songNameShort:"",songSubName:""},colorPrimary:i.a.schemes[h].primary,colorScheme:h,colorSecondary:i.a.schemes[h].secondary,colorSecondaryBright:i.a.schemes[h].secondarybright,colorTertiary:i.a.schemes[h].tertiary,controllerType:"",damage:0,difficultyFilter:"All",difficultyFilterMenuOpen:!1,favorites:d,gameMode:"ride",genre:"",genres:n(212),genreMenuOpen:!1,has3DOFVR:!1,has6DOFVR:!1,hasSongLoadError:!1,hasVR:AFRAME.utils.device.checkHeadsetConnected()||"true"===AFRAME.utils.getUrlParameter("debugvr"),introActive:!c,inVR:"true"===AFRAME.utils.getUrlParameter("debugvr"),isIOS:AFRAME.utils.device.isIOS(),isGameOver:!1,isLoading:!1,isMenuOpening:!c,isPaused:!1,isPlaying:!1,isSearching:!1,isSongProcessing:!1,isVictory:!1,isZipFetching:!1,leaderboard:[],leaderboardFetched:!1,leaderboardQualified:!1,leaderboardNames:"",leaderboardScores:"",mainMenuActive:!1,menuActive:c,menuDifficulties:[],menuSelectedChallenge:{author:"",difficulty:"",downloads:"",downloadsText:"",genre:"",id:"",index:-1,image:"",isFavorited:!1,numBeats:void 0,songDuration:0,songInfoText:"",songLength:void 0,songName:"",songSubName:"",version:""},optionsMenuOpen:!1,playlist:"",playlists:n(19),playlistMenuOpen:!1,playlistTitle:"",score:{accuracy:100,accuracyScore:0,accuracyInt:100,activePanel:!1,beatsHit:0,beatsMissed:0,beatsText:"",combo:0,finalAccuracy:100,maxCombo:0,rank:"",score:0},search:{activePanel:!0,page:0,hasError:!1,hasNext:!1,hasPrev:!1,query:"",queryText:"",results:[],songNameTexts:"",songSubNameTexts:""},searchResultsPage:[],speed:10},handlers:{activehandswap:e=>{e.activeHand="right"===e.activeHand?"left":"right",localStorage.setItem("activeHand",e.activeHand)},beathit:(e,t)=>{e.damage>.25&&(e.damage-=.25),e.score.beatsHit++,e.score.combo++,e.score.combo>e.score.maxCombo&&(e.score.maxCombo=e.score.combo),t.score=isNaN(t.score)?100:t.score,e.score.accuracyScore+=t.percent,e.score.score+=Math.floor(t.score),S(e)},beatmiss:e=>{e.score.beatsMissed++,y(e),S(e)},beatwrong:e=>{e.score.beatsMissed++,y(e),S(e)},beatloaderpreloadfinish:e=>{e.menuActive||(e.challenge.isBeatsPreloaded=!0)},colorschemechange:(e,t)=>{e.colorScheme=t,e.colorPrimary=i.a.schemes[t].primary,e.colorSecondary=i.a.schemes[t].secondary,e.colorSecondaryBright=i.a.schemes[t].secondarybright,e.colorTertiary=i.a.schemes[t].tertiary,localStorage.setItem("colorScheme",t)},controllerconnected:(e,t)=>{e.controllerType=t.name,e.has6DOFVR=-1!==["oculus-quest-controls","oculus-touch-controls","vive-controls","windows-motion-controls","generic-tracked-controller-controls"].indexOf(e.controllerType),e.has3DOFVR=-1!==["oculus-go-controls","daydream-controls"].indexOf(e.controllerType)},debugbeatpositioning:e=>{e.gameMode="classic",e.introActive=!1,e.menuActive=!1},debuggameplay:e=>{v(e),Object.assign(e.challenge,e.menuSelectedChallenge),e.menuActive=!1,e.menuSelectedChallenge.id="",e.isSearching=!1,e.isLoading=!1},debuggameover:e=>{e.isGameOver=!0,e.menuActive=!1},debugloading:e=>{l.id="-1",Object.assign(e.menuSelectedChallenge,l),Object.assign(e.challenge,l),e.menuActive=!1,e.isSongProcessing=!0},debugvictory:e=>{Object.assign(e.menuSelectedChallenge,l),Object.assign(e.challenge,l),e.isVictory=!0,e.leaderboardQualified=!0,e.menuActive=!1,e.score.accuracy=74.99,e.score.beatsHit=125,e.score.beatsMissed=125,e.score.maxCombo=123,e.score.rank="A",e.score.score=9001,e.introActive=!1,A(e)},difficultyfilter:(e,t)=>{e.difficultyFilter=t,e.difficultyFilterMenuOpen=!1,e.menuSelectedChallenge.id=""},difficultyfiltermenuclose:e=>{e.difficultyFilterMenuOpen=!1},difficultyfiltermenuopen:e=>{e.difficultyFilterMenuOpen=!0},displayconnected:e=>{if(e.hasVR=!0,!s)try{"getVRDisplays"in navigator&&navigator.getVRDisplays().then(e=>{e.length&&(gtag("event","entervr",{event_label:e[0].displayName}),s=!0)})}catch(e){}},favoritetoggle:e=>{const t=e.menuSelectedChallenge.id,n=a[t];if(n)if(e.menuSelectedChallenge.isFavorited){e.menuSelectedChallenge.isFavorited=!1;for(let n=0;n<e.favorites.length;n++)if(e.favorites[n].id===t)return e.favorites.splice(n,1),void localStorage.setItem("favorites",JSON.stringify(e.favorites))}else{if(e.menuSelectedChallenge.isFavorited=!0,e.favorites.filter(e=>e.id===t).length)return;e.favorites.push(n),localStorage.setItem("favorites",JSON.stringify(e.favorites))}},gamemenuresume:e=>{e.isPaused=!1},gamemenurestart:e=>{v(e),e.challenge.isBeatsPreloaded=!1,e.isGameOver=!1,e.isPaused=!1,e.isLoading=!0,e.isVictory=!1,e.leaderboardQualified=!1},gamemenuexit:e=>{v(e),e.challenge.isBeatsPreloaded=!1,e.isGameOver=!1,e.isPaused=!1,e.isVictory=!1,e.menuActive=!0,e.menuSelectedChallenge.id=e.challenge.id,e.menuSelectedChallenge.difficulty=e.challenge.difficulty,e.challenge.id="",e.leaderboardQualified=!1},gamemode:(e,t)=>{e.gameMode=t},genreclear:e=>{e.genre="",e.menuSelectedChallenge.id=""},genreselect:(e,t)=>{e.genre=t,e.genreMenuOpen=!1,e.menuSelectedChallenge.id="",e.playlist="",e.search.query=""},genremenuclose:e=>{e.genreMenuOpen=!1},genremenuopen:e=>{e.genreMenuOpen=!0},keyboardclose:e=>{e.isSearching=!1},keyboardopen:e=>{e.isSearching=!0,e.menuSelectedChallenge.id=""},leaderboard:(e,t)=>{e.leaderboard.length=0,e.leaderboardFetched=!0,e.leaderboardNames="",e.leaderboardScores="";for(let n=0;n<t.scores.length;n++){let r=t.scores[n];e.leaderboard.push(r),e.leaderboardNames+=`#${n+1} ${p(r.username,18)} (${Math.round(r.accuracy||0)}%)\n`,e.leaderboardScores+=r.score+"\n"}e.leaderboardLoading=!1},leaderboardqualify:e=>{e.has6DOFVR&&(e.leaderboardQualified=!0)},leaderboardscoreadded:(e,t)=>{for(let n=0;n<e.leaderboard.length;n++)if(t.scoreData.score>=e.leaderboard[n].score||n>=e.leaderboard.length-1){e.leaderboard.splice(n,0,t.scoreData);break}e.leaderboardNames="",e.leaderboardScores="";for(let t=0;t<e.leaderboard.length;t++){let n=e.leaderboard[t];e.leaderboardNames+=`${n.username} (${n.accuracy||0}%)\n`,e.leaderboardScores+=n.score+"\n"}},leaderboardsubmit:e=>{e.leaderboardQualified=!1},menuback:e=>{e.difficultyFilterMenuOpen=!1,e.genreMenuOpen=!1,e.isSearching=!1,e.optionsMenuOpen=!1,e.playlistMenuOpen=!1},menuchallengeselect:(e,t)=>{!function(e,t){let n=a[t];if(!n)return;Object.assign(e.menuSelectedChallenge,n),e.menuSelectedChallenge.songName=p(n.songName,24),e.menuDifficulties.length=0;for(let t=0;t<n.difficulties.length;t++)e.menuDifficulties.unshift(n.difficulties[t]);e.menuDifficulties.sort(g),e.difficultyFilter&&-1!==e.menuDifficulties.indexOf(e.difficultyFilter)?e.menuSelectedChallenge.difficulty=e.difficultyFilter:e.menuSelectedChallenge.difficulty=e.menuDifficulties[0],e.menuSelectedChallenge.image=o.getS3FileUrl(t,"image.jpg"),w(e,n),e.challenge.audio="",b(e),e.isSearching=!1;const r=!!e.favorites.filter(e=>e.id===t).length;e.menuSelectedChallenge.isFavorited=r,E(e),e.leaderboardLoading=!0,e.hasSongLoadError=!1,u[t]&&(e.hasSongLoadError=!0)}(e,t)},menuchallengeunselect:e=>{e.menuSelectedChallenge.id="",e.menuSelectedChallenge.difficulty="",E(e)},menudifficultyselect:(e,t)=>{e.menuSelectedChallenge.difficulty=t,w(e,e.menuSelectedChallenge),E(e),e.leaderboardLoading=!0},menuopeningend:e=>{e.isMenuOpening=!1},minehit:e=>{y(e)},optionsmenuopen:e=>{e.optionsMenuOpen=!0},pausegame:e=>{e.isPlaying&&(e.isPaused=!0)},playbuttonclick:(e,t)=>{!function(e,t){if(u[e.menuSelectedChallenge.id])return;let n="frontpage";e.playlist&&(n="playlist"),e.search.query&&(n="search"),e.genre&&(n="genre"),gtag("event","songsource",{event_label:n}),v(e),Object.assign(e.challenge,e.menuSelectedChallenge),e.challenge.songNameShort=p(e.challenge.songName,2),gtag("event","difficulty",{event_label:e.challenge.difficulty}),e.menuActive=!1,e.menuSelectedChallenge.id="",e.menuSelectedChallenge.difficulty="",e.isSearching=!1,e.isLoading=!0,e.loadingText="Loading...",gtag("event","colorscheme",{event_label:e.colorScheme})}(e)},playlistclear:(e,t)=>{e.menuSelectedChallenge.id="",e.playlist=""},playlistselect:(e,t)=>{e.genre="",e.menuSelectedChallenge.id="",e.playlist=t.id,e.playlistTitle=t.title,e.playlistMenuOpen=!1,e.search.query=""},playlistmenuclose:e=>{e.playlistMenuOpen=!1},playlistmenuopen:e=>{e.playlistMenuOpen=!0},searcherror:(e,t)=>{e.search.hasError=!0},searchprevpage:e=>{0!==e.search.page&&(e.search.page--,f(e))},searchnextpage:e=>{e.search.page>Math.floor(e.search.results.length/6)||(e.search.page++,f(e))},searchresults:(e,t)=>{var n;for(e.search.hasError=!1,e.search.page=0,e.search.query=t.query,e.search.queryText=p(t.query,10),e.search.results=t.results,n=0;n<t.results.length;n++){let e=t.results[n];e.songSubName=e.songSubName||"Unknown Artist",e.shortSongName=p(e.songName,22).toUpperCase(),e.shortSongSubName=p(e.songSubName,32),a[e.id]=e}f(e),e.menuSelectedChallenge.id="",e.isSearching&&(e.genre="",e.playlist="")},songcomplete:e=>{if(gtag("event","songcomplete",{event_label:e.gameMode}),"ride"===e.gameMode||!e.inVR)return e.challenge.isBeatsPreloaded=!1,e.isVictory=!1,e.menuActive=!0,void(e.challenge.id="");e.isVictory=!0,e.score.score=isNaN(e.score.score)?0:e.score.score,S(e),e.score.finalAccuracy=e.score.accuracy;const t=parseFloat(e.score.accuracy);e.score.rank=t>=97?"S":t>=90?"A":t>=80?"B":t>=70?"C":t>=60?"D":"F",A(e)},songloadcancel:e=>{e.challenge.isBeatsPreloaded=!1,e.challenge.audio="",e.challenge.id="",e.challenge.version="",e.isZipFetching=!1,e.isLoading=!1,e.isSongProcessing=!1,e.menuActive=!0},songloaderror:e=>{u[e.menuSelectedChallenge.id||e.challenge.id]=!0,e.hasSongLoadError=!0,e.loadingText="Sorry! There was an error loading this song.\nPlease select another song.",e.challenge.id="",e.challenge.isBeatsPreloaded=!1,e.isSongProcessing=!1,e.isZipFetching=!1},songprocessfinish:e=>{e.isSongProcessing=!1,e.isLoading=!1},songprocessstart:e=>{e.isSongProcessing=!0,e.loadingText="Wrapping up..."},"enter-vr":e=>{e.inVR=AFRAME.utils.device.checkHeadsetConnected()},"exit-vr":e=>{e.inVR=!1,e.isPlaying&&(e.isPaused=!0)},startgame:e=>{!function(e){e.introActive=!1,e.menuActive=!0}(e)},victoryfake:e=>{e.score.accuracy="74.99",e.score.rank="C"},wallhitstart:e=>{y(e)},ziploaderend:(e,t)=>{e.challenge.audio=t.audio,e.hasSongLoadError=!1,e.menuSelectedChallenge.version="",e.isZipFetching=!1},ziploaderstart:e=>{e.challenge.isBeatsPreloaded=!1,e.isZipFetching=!0}},computeState:e=>{e.isPlaying=!(e.menuActive||e.isLoading||e.isPaused||e.isVictory||e.isGameOver||e.isZipFetching||e.isSongProcessing||!e.challenge.id||e.introActive);const t=e.menuActive||e.isPaused||e.isVictory||e.isGameOver||e.isLoading||e.introActive;e.leftRaycasterActive=t&&"left"===e.activeHand&&e.inVR,e.rightRaycasterActive=t&&"right"===e.activeHand&&e.inVR,e.mainMenuActive=e.menuActive&&!e.genreMenuOpen&&!e.difficultyFilterMenuOpen&&!e.playlistMenuOpen&&!e.optionsMenuOpen&&!e.isSearching,e.score.active="ride"!==e.gameMode&&e.inVR&&(e.isPlaying||e.isPaused)}});const m=["Easy","Normal","Hard","Expert","ExpertPlus"];function g(e,t){const n=m.indexOf(e),r=m.indexOf(t);return n<r?-1:n>r?1:0}function y(e){e.isPlaying&&e.inVR&&(e.score.combo=0)}function v(e){e.damage=0,e.score.accuracy=100,e.score.accuracyInt=100,e.score.accuracyScore=0,e.score.beatsHit=0,e.score.beatsMissed=0,e.score.finalAccuracy=100,e.score.combo=0,e.score.maxCombo=0,e.score.score=0}function b(e){e.menuSelectedChallenge.index=-1;for(let t=0;t<e.searchResultsPage.length;t++)if(e.searchResultsPage[t].id===e.menuSelectedChallenge.id){e.menuSelectedChallenge.index=t;break}}function A(e){e.score.beatsText=`${e.score.beatsHit} / ${e.score.beatsMissed+e.score.beatsHit} BEATS`}function E(e){e.leaderboard.length=0,e.leaderboard.__dirty=!0,e.leaderboardNames="",e.leaderboardScores="",e.leaderboardFetched=!1}function w(e,t){e.menuSelectedChallenge.songInfoText=`By ${p(t.author,55)}\n${t.genre&&"Uncategorized"!==t.genre?t.genre+"\n":""}${function(e){e/=60;const t=""+Math.floor(e);var n=Math.round(60*(e-t));return n<10&&(n="0"+n),`${t}:${n}`}(t.songDuration)} / ${t.numBeats[e.menuSelectedChallenge.difficulty]} beats`}function S(e){const t=e.score.beatsHit+e.score.beatsMissed;e.score.accuracy=e.score.accuracyScore/(100*t)*100,e.score.accuracy=e.score.accuracy.toFixed(2),e.score.accuracyInt=parseInt(e.score.accuracy)}},function(e,t){e.exports=[{name:"Pop",row:1,column:1},{name:"R&B",row:1,column:2},{name:"Rap",row:1,column:3},{name:"Rock",row:1,column:4},{name:"Soundtrack",row:1,column:5},{name:"Video Games",row:1,column:6},{name:"Electronic",row:2,column:1},{name:"Hip Hop",row:2,column:2},{name:"House",row:2,column:3},{name:"J-Pop",row:2,column:4},{name:"K-Pop",row:2,column:5},{name:"Meme",row:2,column:6},{name:"Alternative",row:3,column:1},{name:"Anime",row:3,column:2},{name:"Comedy",row:3,column:3},{name:"Disney",row:3,column:4},{name:"Dubstep",row:3,column:5},{name:"EDM",row:3,column:6}]},function(e,t,n){var r=n(16);"string"==typeof r&&(r=[[e.i,r,""]]);var i=n(218)(r,{hmr:!0,transform:void 0,insertInto:void 0});r.locals&&(e.exports=r.locals),e.hot.accept(16,(function(){var t=n(16);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var n,r=0;for(n in e){if(!t||e[n]!==t[n])return!1;r++}for(n in t)r--;return 0===r}(r.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");i(t)})),e.hot.dispose((function(){i()}))},function(e,t){e.exports=function(e){return"string"!=typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),/["'() \t\n]/.test(e)?'"'+e.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':e)}},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,r=e[1]||"",i=e[3];if(!i)return r;if(t&&"function"==typeof btoa){var o=(n=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),a=i.sources.map((function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"}));return[r].concat(a).concat([o]).join("\n")}return[r].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAU0AAAGDCAMAAACYzLIyAAACWFBMVEUAAAAAkP8AkP8AkP8AkP8AkP8AkP8AkP8AkP8AkP8AkP8BkP8AkP8AkP8AkP8AkP8Bkf8AkP8AkP8Dkf8BkP8BkP8Bkf8Vj/y44P8Rl///drb/drZx/+n/drZx/+n/drb/drZx/+n/drf/drZw/+pu/upx/+n/drdx/+lWtv//drb/drbL6f9w/+r+drdx/+n/drZw/+pu/utx/+ll9exMsv9x/+lx/+lw/+r/drb/drb/drb8drf+drdx/+nh8v9q+uzR7P9w/+phu//e8f8wpf9s++qJzP8Ek/9w/urZ7v9v/url9P9x/+n9drf/drb9drdDrv9x/+l2w/9uwf9u/eps++px/+mt3P//drY7qv//drZ7xv/2d7ml2P9x/+knov9x/+m+4//W7f+03/9I1/H8drf/drYru/iZ0/+AyP/B5P//drZx/+kXp/tpvv/t9/86yvX/draU0P8gnv/+drbp9v//drZ+g9xx/+mSgdZK2fHF5v9x/+nWe8Py+f8Xp/uQz///drYbnP/3/P+f1f9x/+kVpfsxwPZO3vD/drbfecArjPMwi/IktPncesBx/+lV5e9Wh+dx/+khjfY9iu5+g9ucgNMajvhx/+mDyf8Kmv6+fcmOgte4fcr/dra5fcpGiexOiOkpjPSwfs1J2PEVpfuIgtkpufcouPj/drb/drbteLzSe8MPoPyof89KiesPoPzreLxghuQ8y/Rx/+n/drZx/+kktPnGfMc9zfNLierleb64fctd7O3oeL1x/+n/drZb6vj/////drZx/+lv/exr+vEkKZq9AAAAw3RSTlMAeUKEWG9nmlCMKho2YJMVCkolDyEwOgbfoXqEZ5R3Zm6EN0xPI4xUk7iNROZEH1qcLjacCbRgbT8qYFoVP3zxFepKvO+rD8ygVu0p83EPdTCxOsPCHRng2uCuJcUK1+2poeHt3Q8Zox7Rx+LvmEC+9xazz6cG9cVD8g8i5Lkm+SvN6qX806lINy+sQGRXLzfASDW0XEwhFWf4yFIvLBrmIVRDQjYpYjYlUdjPbF5YThhsU0xJx7rOW1RBKUlCPGTZ+uxEzOy6AABDfElEQVR42uycz05iSRTGZ2zaK9oiyP9HuAlb1oQAoUPYEFkQQowBN8pCEw0rE2NsX6Jfhxeb+nu/W/dUUVywp3smfGaSnhm7+9SvvnOq6lThXwcddNBBBx100EEHHXTQ/1dVKfYL8XXQrhzzxQuiIlNeijP+jxGuCnPkDUUDqv6ykeQ5ybOzUulSqyR1FgmAdSx/INiqAKix6YjPrJJD+fQQFMnL09NyufxNqqx0GiliDLgg+1vQgmAE0MRXUu44NYQB8bF8LtFqUZP8VqkcWVThijOO2CbJ/mto4UAABD/g4+bQqiQkhsMHAqKfgPKCoWQkBcjCSUKFk4JUgm/E9jSG1qwIn12cYEAHQM0P8IygC1psUBgRGwmI7ssSKDnITOac6ZjpHMpEigE2nAuyFtcCraa7HV+sHrQAugEa9LQ3Mg6J0YDonjzzjGWEMsMxfhX6+++vho6FANlgywSyEVomghZ0FWGIAVO64F8GO1IACUAnPxkuj/vYKjEWEAXP3YzJWLI/SaJkFJm+GPob+sq/TLwgC7RGPTAKAuhiMaMqSV1KRb+tDH4OgOAHdCpcETuEEYmhRETBc0djMpYFFgdHyUFms9lcXFmIMJZsCVmgBVvDtsZiRlVWwuIBfFsANPCZ3sgmpIcSEd2DZ14Yk7EEylwQBL3mw9Ws359djR86YXM07U0DCIQB17CtURAIWs6WqgIdWSUWDvBzAxQy6eWEAof4aMQQROgxnvnUMIUxOUvlyiBo9petNdGP18dht92YT67v+vdXnXA01YAJWiSQja1WcsNwor/ELyOBHfh5AFJ+YdgZz/pvd9eT2/lLo90edFut1nA47C4aL/Pr/jj8HkREwbN0VkwFs8hgCmMKliyGYPrWXm+r4YDB/XibPYSjUcy2IGthaxR/LY4pjkyvG2AHfG6AhN99/25yu2wPho/+odz+7Eii4MntWaymgMlLpjImz/Bev7HeUY+tdqPGbHvVaY6QQVwGW7qUQQliICe+gM/lwGYzHN+/fUzmjUWL8vNr+PHQ+R7nWUG2bwXz8rRypIzJWALlfnplpl3eCrRhs0nQgi0IQxQb4AFfDOCMObD20u6uPiP04Rg8GU6S7X6Yyphg+bladdsvtclHfzYGWuAVhDlkUzmgM1aPUZNnMCuAt0s48FM1fNA8o2zfEmZZw2T18tfApAWB1/1btpS9sbVszLwLwoZGTE2ObvazLxYPRq+LAvgrNZT5/lVm+3Y48wZMsPwN+vHjx+vr4+NqOGQL7Wr1+Mr+w/p3ahh+z3Gc5wpnfput0R8C80/UkONkPAXO0kV1i32mhvm9vT4oifM9kNl+wmonct0HMxs8d9cHEa1Ytiuc5c2ls3pxBpi91fogm1oC53nGVzqLZ0jz6ev6oA04UTqd1iyVjwqqZrbWNrUn/auHsPNwxTYoT3yHUls2xBHt/yDWcli1uNarVw/OLErnZmueu1fzWg+ba7P1Uq8/T5v8BMwPcN3/Ro1gh94XdjITx4dp771eNwc07Uxart8aBqJ0FljpdJkzr6zpgFmb1gO2eyXCOYVLx9JrdmZ9djJZDNd/kIaLxu31089xOOpJeOgjUuXYOJpPbetEPMvSCXPSPNfWzFpgtkOGMiu6p0rOIzTYRrYNx/2732Ta4YB3XRjA6bMGCHwwh7UlIIi+12y5HjCcMKcrz4U1e9SYQU6ijPpl7BfiS+grRWwYN27aUXjF+xGNwWe7FhksHHjPAN5ogOBH6dF+1Vc5IEk0F9RrNpzZjeZUeQ5rmjC/SJQZ0qxFt5b0u0GWoIVr75+ub18Wrdfd6Q15/4QXwAfJzwswjo7bQinZSD0Wtw4Onh2rOZHol3oJCtemur1AHU8zJwV6k8CVQAy2IOtGq9m+30ybohn+9DFhu4X5fPnSYA3xxaDb7Q4W7XajsZzXbieT6+uPJ7Z2dFj1Y/A0PSQwADr4GfBOINyoF+RY2BgUT4KzazcnEr1yZF2CGu+ydSJRiiuwb5C+sqnYr7koWTda9Cm9QlsU+NwGpHfT9HJafknJwaiLb9XlfU4m7BjmtCY6r5o0zxeBPugLlOJ69hI3sNY7WMAFWQPtOWELup57RAjswM8LMIaPacMVaZmNhAMVPGFPak4ciMhe80s2uQRNoybUtzJ/QnIBmdfcArKMQs0sMgimpWhhW+D1Ceho/aP3zLjahCEZSAEw+dwPAxJjETyVPecmmCtpzool1bHX7CcXoKzKct6+vyjK+6UqF148crE3NppkQQGLl3f9CsXz8MLcLVCp/2l7uhOvfjCgiAZFJ/EkBgYpSmE88lkg56nsmavbzMmaH6WLPFmDsNckq7lq3pcuJEoqwZKhlCRF2IbdzFcoRj2AcSBjccWX+Hfr2gF8yGAzGi4Y2QimzHgWi/bHv5KntGc2meth7otahxKVM88TXVhzav6Outj08yzHPZ2dpQw+o98rJRMTr1AK3BRlvBcCWgEXKjDKkGIGgR593kSjcQdzBJ7WoTEyah+ewPkUSKN9wyYJK3pBrEEvNM/FysX+PjvMvGSp39jI90rJJUStGGIQaginqLVKxpuYCv8i4v9Vy3yNiwJIohHh2IMRQAVP1/iYPy/Leu9Yp6l+LMyZJ2VTJPqNeZ4Mcho/Si3521T0Inh9Isup7XlPtxP4bkYOQg5BjsB4ZqnpArBLtrfiF0IkGrYc63ACvTnNIRg1uzL3ig634FxjmrPJcep1iNJM7txDmefuw31eZILeSOjYg/ro6mPeja7EXhe1p3GvLonqIUSOqEaVH5sFn+KvEvHo3xVNr9OftFuizfa6arGuYgfBsGgUz1OnPc8uxZmbmPNHL1qHyCLEvz14MqtmlOf2mpmXVtDRf5Ek+8u1VbUZH4QaAhyRtzxz9anKREdti6Z3X9sQDAOqeSIYV6uSmnPG1yFdOOkiFMwTVXNjnhfNt188+CaJnbRIxRDgCEzUjkKapI2m1mRANU+9bdncq2yaW07QtC5Cg3VMPVE1keckfLz9QnPAp8aMDQGOwAj2EdIE0TxvE03tWfNkwSDbaa4rc9ZdNL2LUJtZU31z3hk+Tl5+lvA8HOEawY5PJNNHUxP+lME4s73IzUnP3eONNM1j5SRQ5/pS0Rm+sgKJ3uPPEI7ACPaGWUgbDXiqYFylpxiVwpqdprGkX6olvbOOqc8THVXTHj5aAqk0H0lHYAT7w6QNilTJgmxHMHRhud7oTZwrjxnNWaIhKtZ/kLeHnwuaL+vUqt0EOTKCPWAiTULc5aRJFpXtCMakWbFk+gMIEZpoeeAcit2UM3xYIS1PMoI9YaY3Jr1eIMF4aCLT6Xbzbh3TCDS94e8/grPi3jBFxVzuGMxSvCcETgfNtrtu4pWhrSpgp09rMsJ/N2Zrx3qF6rwnzNruwXSnQY7iTE8TNXayjulZ0yyS3dd+4UMvfDnFeeu3wUSuIFX2pmlGU5c0T0HTOBl4w18s5xP+/LfR9Y7gfLfSiTzxRzMctBvLRrs79OMkqeKnWTW/90h879JDE2Y43xh++7o/GsWfpc8WG0eA9PIrfZ50WZ8DD7/Dh/6kuxEnTZV8tLJ8OM5CvhXrVfabjmB6I7Pc4bf7U9314pItMUZ04RpBNs1KlDZPum8MpP5ETXTpHD61UqSKddfjpxkf8CrI4hbJkllZe/jtn7yvYd4oCqQM6NjqiRuSXims6cmTbshQmtGICeZAW06cmNu9aLbigUQ08/bMmtpYdkTw8rrgGFe9fBDcoQvb79lxJUI0gElYGtFwxZ7EdFr2VMHcUpo/vTTRQloZg7TQjD/xHNDor2T0+tpF61x/9JX5c+FML/ghVZ4786Q7FhswFY0Ox3gSc2VZk6aWucVp8Z72NylNFhSP6XUNNUCTtKaM62XwV9Hrz3QX8GRCfixbjGA0sOOEH3bI8zqlMjCikTfr7B/jSYzt1W/3O51bP01fQ24e6O5mPmFNZBbN2Ph7pYq6MFP3h1HnETgtt3nFnfKcnIBWTRKN1JG+zdSn+kdyKiJzSzsZoHm8Hc1b0CTWRGaRo8S5vuPFdaL+cRbRCAb29DpPZ87ihjwf1APVtMwkoynLaDKq4xQ8tzxzi/cGSZr3oOlrb16DJu3ov1uMibdfFf6EAi9R9I9aKWSiptPQ5ustzUmrTkhgKmNyluLFz2UpFgyPRvCUk0uzPUzOLWhe0Z4lpSm/dbSO6U7QROed3DYRGgKmjF7+oCsl9WOA9AhEvRpQP6Q0ZxFVp01hCmOqaEoyGgRzxniiU09xNsjcRjTHW9M05/gtwLcm61SPwMQHEEX0xTz5uUolNQKV7cmtZz0awIWPI606FKY0pj0aRpTzFMmicHrmFv30By9NtN4dRcFXp9po/FZE9FXXzwOqRIa4ed3PnKg6dQtMfPLZGk1V8FSTC5zuuQUiYriMSbMKGzu3pubr46bt013k7Zd1BNoQ2aDpHEBxL2sCZqW8KRoxucDpnlt3+t4RmnQzRS8yUDVlnXqhCzLCBwsLTxgCt81kAIjNraLLmsO6iMb/EyPyfHI5TqSKa279NPOpLjIQvy3Pszr8EsJ3vFrShrBslJ7J9T0VYnZZsxkAJoxpn1zgzAahe25BM5GWH5rmWd57kZEFTSP+uqVoKpg6fJ8hMvI41SUD2HYdQqI8J/M8C5i+WYnjTOb6O+bWSfMaNFNeZCD+0L7xrnj6k8j26Kg/TmTXtqnuTpQuphYwvThlxVg55jZOMztybMnTXWTQ+JHnpEngtZW9dM6kHSreVHcnyhifdgZMD06VKsHMPbc44BiNswloprrIcMc/Jf1AL4mS8AO1ecOwg1MImWwvBtHUAqYXZ9me66McUIFmb3uaczdNxD8m1tR5Xt22kSb9QM15k8WmzOfvii1RwhRTSz8R+WCmOrrlLpq3dpoVAcrsxChMKi4aPzZ3aRu9qnRSa/2EHfxlE4liWvM8Q6bWnyqZc2rOeqzUFX2NIc8l2w/Q3BD/fco+L/xgM+ectFR9ZbNHrCnzHFO71c8sUubsmJmCwpmOJj5CYNLMKJo4L4kyDPWwBPnMQH9KA+oGrS5bls2ZxZqY2rRz+31oHgbBykszzZUl4jd3+AuJHPGnHABSne5xqSwR18ixOd3UwunYcNPCuT/NR3zgwPieOdlwoU6lM+cJUt3RlHGXzVNb2WnmvqS3JrbSODeSTNmJZttO0x1/Ty3CjjrlX5TRfqW3J25hhaU0T1JYk7R9QlvhLO9Fk16n00UI2yNHZvp3SUh1euvspWnrjw2MSp9ubplXsKrTTsVONBdraAiaznPqJMDhJaVIqvuXIXebBvsr91T46zA+4UM7vLvQHNhp+u9FUsePVA+WjuYAke8o3BFlM23ZwR+I4dFj+EV6mkZPpxVPujzaTO4WqF/+l+QdJBeRZ9lE2Uwfjb1wNoAgBU3fwxmnG6apy2b6lz2QZ/qHqcum72Zs8Hk0B3aaNUdephWtHah9oOk7pf/D3pnsphEEYTi77Sw2MUmARxhprpwRYhAR8gUNB4SQZYEvhgOWQD5ZiiySl8jr5MXSK383RdMzwwx2lkoUJ5HiFF9X9VJdXXXhGv4cliG4Z96e7j8uZXeuPtmAJ6PJV7BbT96URzxLxx02iV6aaRIO/VvS7M7Vcty0pN28h7nQbG63lrM8T5b+ZT+nqQrLaGqaM/lP96QZbg+jeeKb3ogctn7/rG0aBpX8XghLzLWDZqHz5vxJzZuRY9703ACnuBf6v6aXMPa+IA3uLH9sR/Vn7DfvitxvejMOfXUo8DDwXz0L3YOmd+zT5Hr48xf/9nM6rMnzBhioHA+q/5AYUidzDKnsiyHRBA73K2lvjpwzvikXvceLbwY5xDcBwB3fJN5A5pY0+Zvu2PvzvyD2LllhdOiuBjTHPpr+3GLnvVD/9C+5F1JD23LcC5F1j1ySQ5Cy5Dg2Oe8sw7zvLE/3ubNcpLuzxHeDozvuLNOcBXGkd5zUCrxPnz/6fbpO9oBv0vt00Iw8cQpytqAngUPlesweI9eDJiLRXA9MLf41k9gxMZQD5SF1HiUPCUlyrjykVHEWegqnCZxwrri4HLn2vjlyrWw5cirXue/KkXNsIqp0B0IrA9D1/6D5m8ep8jd7OeVv0ncZQzgKDR/SgJzzUQbdcP4xucVx1txi+DmtolchgOh+zr3hpFukPybvvfE1W947/VgdPHGhzkuLpHi3SBNMHMnfZDw79JuMVUFvMmp6Dn9XJgsLOXk6JvXIsah53wvhiUvm90JXytGfzHshOYefkYCqJwToYD+E59lv2ULi6+T12KO9ZbtdmdqAJ1XGesvW/k7esmFo3dtNerCk8WJ6GNjZ5aVBXjb631m+PNA7S4wunXI87ywxtHhyTkI02G46o0h0x+V7A4xnq0nfAC9vD/EGWIxuaXuV4M/kDbCj+AANANN3gf5lCBPnGcwBHQscT6o/S56+9+ndQ7xPV2+qNVA8Txfvqd3v01tW8YQybl3cNVL8NHtY13y1E0i1gkPWTggdtRPUe/9zrU5Zl05Qb/1dtRPu7cIeWH+b7iXd39mhg8rFqOuBt6IEp7Oux6fNuh6NA9T10KP75b1WB2U9vqxLmW+r4lM3is6QvaGfJk5qcxK+VMbsqznTXR6d0Joz57rMi6fmTC+3mjPQRo4u1LFKzhzrgkJH7e01ZxAYw2am5VnSaYjL9WTcWw/p1qhA9HGjHhJTv9h6SONt2sjRNQoivTDKIemK0cF3oowZF3NvtH84lnRgQqiePCsmtbpmO2p1vdqo1XVccK2ubQXqump0jWJdZqkuVVuq4ShrB9Okjo7rX3cnMWenDDigXUcuoh/AqtxmNWh8U2QdOVTBsSTi2iigTJQqGiXqntnSNurI2YdYe4kOcEOe9MlMD4tDshqHgf4ETNDekqvvrHE42bPGobt8ZTQ/OjXV4T+Ngot9f41D4uj+aZNeqro3Lv76myOj/uZr8UOXvOzN4eTEGDLW3/SUVo1adQGUiVV+k/n43F9/c1ePjAWmzV3R7NB13ktcG/bnUHVnEqK7NxVTG9Zf9jcK1sVhURo2iBKVUYZpEl9sYdr0VCNwGGeKusU3U6tucS++nORVtzhDSeroIa7rwsVBEC+A0lu3uGQGq/zTJg1xNV0nvlK6mtrN8TXrMjuozrq51tTOWi69ETW/qZLaPpibMxvCAd5pk3a0dG5lc6/3Hq6IMaTHWVS9d3xW130eps3E3VZr5l6QfoDlAXoRoG+Yr3x+e5JZmWab9CKAH5Ibh8CaNqnGpBMwjBPWc7g+GRXV++7MENnSDmTz0wYjC5j2+WBO+6dj2tzVpTogxomZrdAeLgDJIKIv40a/RYYVTIk2+fVwgZ/TGp8BbQKcqnstDIj2FwrCDOq3SX8hxZGDZAjRM3SjFygnC6a5dDua1cnIOmp2wzTh6J5odstzPMje+wrqk95XFebXkuO5arjN5AWRL5wsmJbLlb20QZF6jCxgump2T+3m6Z62jSH1dUyd2fuyQX3Sl02SFBzRM5y32T+G8D+hYfd7wVT0zS5l1gYzpjmy3nNK4M8UrewwTkydsM78egYqknbvdbt9vRY07EbLbm6iWbVBjzv0DESzTscZuvF1vQZVnqU3Tkyd6JdI+1muqkns8ifpZwmSmqPu0v2aCvtbDVW37JYmSrprdprJlEGQG5+OfTgFE37uWoP8xhm4DtNfxOg5e60GHqDVIem1ii72du91dAnRov/GYGp1lbe1YeoMqwmUwQUMOpVKU9cwt5smkuOSGyei8BIn/k9XH+D6Q+hQfir7AEN95lgCJUgyjqRJ96kSNOwGU3SVF0AtbcTwLvuOPsD9JZThTg4vR9d0AyY1TWw2fcZJo6+hjpvBH2iPagWUER1dzoyAVzS+iYdbelTL+y70jTdB6ibd7V7Qn47iVlAftpeqeziYWl3l2TeENmp4OdFVwNSZRHffvn+7iyazy1F9ZSijeyrLT4WG8B8Bk5om1qBsxhliR4Zm4+7+6YLEqj0cXq1qte3905VVHptd7DXHWo8BaDaQwYDu4dcPrTa+o9VVnn9T9KIn/dO1nBJlVFIFPpCYMVwwYZqVpOn9FOdXtBsQ5lne2dv/xNPbn6PEP3oOu75qPVQjb4O/6o3qyC6+M4ByA/2sBmnD2qELVeYcLLV542hF/Rymmcg44euQ5gp7XO5UmmdZ8YTHYg0xVg44Jb+QtVFqnwxuwlTnqTkzUmVnJhsxgUAbqKN0sZVRXfElS0y9Moti/Gubn8M0ExknfN2QyRLeTnnaqwkTsqvRCwY+q5zddN/4cZaY3kNPmqjltwKotUtQComvHyxl3srPAZYvcPE/JKHZi6/kmJ3wpiV0xAawIsuMI60J2TNaW269mVHQYZUcZau6T1yyv1JAbQOFNsfq7lR+OYYy8iPwhA7JEk6OEyr1czz78Bqn8nUnTmO3qJUpVbh9npHzjBacXDBZAuWqE/7aV+7nzEKpgUKbF+Iynf+C4746mFYYSrDEcaqH3b9hmghZlNLetEwcBzHwVCc7EXfEWVvELJjK8oc6VZsosT3tz/ZGiaAUNVChDUIo/IsMm2i9Ncq3YImj/j5+TiPr7Z2nbJjAuY47lhEHYoIwmvY6oMTRKTe572810HOhDoRHn7QFlNYowdJycgrzNX2m6/d1rES087nJE14jI7oI8vIor0CqSWqUjnNfIQYqgdope2zUhYhAqkJps+zNXDDT+DkNRYWOuAsyjrC8KDuEVeqULqz0mCx/OmISec+gGO63wibXVD+JiDRQguUSw0xhws/T4MRKtJvnG+w2pCDGqziuSWIJjzH2BUh1CQOFcnK+hCCQivkHsTw3TLyMynLn377byRMpXAwbYyfXTv47xNY0SeyGCpZqoLVTymFjoQUbD4VSsryCcm6Y8PO0K9HJ0dWFZ46SRFVIF0FexNbWJFOuO41uOL6+XHTieNR5uLkcDMZ3UWKgnCeGWyDlTLVop7Hmn55Lu+8tEyb8PNVKJFOZV66PEI5ULEYiVYJDkB0TqtUTbCwRdUKyyymXdRZOMPox7ibb1CugONhaaZASpDn/ONW7aB+dZIVJrwHdFGbTtiaKeC6ivDqCUxv+JOdGT7fzUzQNh+iAUK8+TZKHMI7JcCMNEl6DzZrTy0+eZ4NJLiWB0yHVUa+mA10QZVC1dqszaCa2yVgltG0G2+1BEkx7wU0CovfTZQ0hUQicxjeVXygvzwgTOBF/7jV2K92t/pi2hiyWqYK8VyzK2+ovqvBJP8lOHcmWRj7tB+ai/Av/qS1KEmU2OkpiorNFa1Ujwy2dphZ0sMFwGKb08mww8fgMT+dYbCrhnPft7uIWifnJUc7ryibpLHcs5JUULG0qrbUXJ8s9Gj/M61eMqZbaVT1eSJv0GCbCuplg0haF8PYipBtroyQr8AtbPq7jU2aP+3pyD7i9aHSb4aRxgbC+1zC1l+P+O53gybG5FrUL4dnt1I3s9M3d4XtLsEtURPWJvx4DaH5yEWjDxAPnPaS8kZLSC3NnaaCUNklOLudacIIBUQEUBpovS2WY8HICM/taJHj2wzxRsq0QUHKSeHh2vg5UnCnRx2uOFXedxnVvfZQHUEyYOqFmLy+na9F7MwOhFeaEsi/MEihlgEJ3O8e714oU8XuRzyk7suPyxzDQICeeDckShgkv3xen8PZ8eXan8HDcd+lQKZIJiSC9kxFVQG0D7UT7swzWLGGYe8GE8nLytHgO9+I56ViTJVBqkkm04kQlUGKg825uLKlh5uTtNs92RgOd/Jj3juzJEiiFTaYYZwEUBprHDNqIN1nmaJjw9g2eWYBOLmNG0rRKaZZAmcFxXAZaj6P0KB8YSsTBOctcDRNK2zw10OG0mUzPcDDSJDVKeDhFmdlA1ftYCXQepUSJPC+whGbF8USCxnA4X4zdakezy2nAQIIkR2lNlvsqXCIGCqBBZxAlIDmIgbJQlpQnVNZEjxjTYLQYXI/vmxN2cptVB5c3i84oriuOJxZJGyUpUbO/gQKoeOHZ6lxHTpDjG0ESKItlSXkCKMLBViIaorwIfIIkUBIPz8tAARRIp4vBOOxG7Ij+7a4RTZqzwWLUCuA12PcWzBI8tQlAZyZ2dBgxXjO2BpL5o6QGCuWeG0iJiKgVnX8Eywwuk3kRtVKrEcm2BCldAiRI5oqSGqgGCt02BhtDDq8xUR6CJXhqlTdSuHhAV4v8g/WIAiSBshjtABTDTUcbXmOGCDjKQ7CkKmuiL9QNoCmKIh74mCQL1bVkAjWRatGXQ5wjAoBA6R/pQoBKoshDE1y50MdnRZOkQKVyQEpGm3jNwVHSo7IOkXGoTL5IeS8FsTWQPJAo5YAUg32M1EMBUpF8FJSUqFQbiWhGkJc82j2k6Cewargx2CrjA6MtSZaePQGpCKYCqhQEeR+JIw3fcaQYbQy4BPlUSFpMKyVLKkyePQWpcCvFaEOewGj/qfKbPTqmAQAAgRgoggH/TiEhePjhbure/tu1rkJuAwAAAAAAAMCwdwariQRBGL6EiLKQQNjVVxC8zlkGFZfQF1kPQWQPiZeNBz0sngSR1ZfI6/hiW2Pb801PMehMxtUFv44QkkvyUfZ4qPrrxo2zUbfIN3JuvRKf6odTPAlx39H/JrgenXT71D/oq3mkV9PCFhAHgt3fco1m0SfamNUGeDhP79zBJD2vwtcDqX5NBPtmL1OzFKAT6Otz+2FqCrabYLSsIQx63H3IEks6jt2mzaL2fG6pQC0Qf2QHEnKR4gubOMoyWtcN+Rb2gFhSfmO3tYRa/0Yo+3LCX7ZA/OkFMXEgmhwvQhajn3WphkWE/SwD3MU4w4JXuZhVVYvavC20deSpCzBboGfP1cYd6BEDjOKz+By1U+myvgU7ZgP3MUm/qMVsrFbQarFrDYMIczxEB3fqAlQCM/2xIMYmgN8r9v8LRvFZrDBrcQ59PKTqkZxjkpPSi1nUeveBdyFgl4cZoG0PITROH/4yBOLPyXLFYU/maJYzis+ChZkaUbbhcFAF5di6VWZRi1vK1sHDDNCGOoEozWMC8RfL8/L+fBi2dUbxWTB8QlyiMhr67AUzicKUSenhrNMMBqPeqAIJw9lmyenUly3AN1C/I3kcf0pglj+2w1QAGGk9BLEVjVIgBondMtWKhLmwlgU2q7nphq1XmUfvv8umlcHICUatbzbbLXrZGyYvd1grhjvtTwvM9teU4ECbkyqD9a0wlHHrdtsY031rLV9/9odubl3FfBSL6GLv0TrcnYp5Frnb9XjWHAwSZYtZ3KIWvK1h8kKZfME98AaWowQqf+/9Xy+Tafh8QpScmXx0xKiKoMkz1GqXBhHK3yu+LGDeDlsNKdsfnUDMWrh0lVoqFzAGPDyov6wKDAJZULTeyqT/Gxt2cmC2M6Km8gfKPRFtWGoW30qKdjrZq20GgVKLWwyD1oY89CUEjqUCG8uwu9iVgBnikxi0XDJtYeKyXBbdcNl42fbHQ9SiV6iKY7DSUCdUYBBE72C5ACdTKrBUzEx85gjiRGacYUoo15mZt6N7fyKPsrU8y4ZSuxj2GAhBpG780d8/PMRelwvwnJhO/pDYR08mLi/AZrNZrebzhTHyoF0s5iv5we5SEMcpqRWEvh//aHQlMq8RQ+wui0dOW0b+PdzdSGH+VKpqWcZxmdXK7+7uxl/2zsI3qiAI4wSHQFIguBxWipQCpRToXaEUKEEqSJEipViRKwR3De7ursHd3f8tZmZ339y92XePu5Ig4SuQd/Ag4cc3M7uzG0ZoBUa7GczGOH1m4eB4jP8iyQmMNEyMU6f/nKaSjZ//KwZOTp0+8wIpZw60TyGeOGzsoi6DF42FBcpSXKE0W5BKW7R/QdByWDEQ9XnFRh+cdfxTZyMx304ObaHFtWy9NG++rKQP7oBxAzfk78gRsOldBzsz2j6UDNVTFPgvVDJ4onaUVJdaep6890zLJPucVR7oTCN7hOoYMWKc3ttn8JRhsDOZOerzH6RRM1NhwM7pcV1GDyV43EcU0vOMlw6y/kMsE/NWRZzLGcCsQV14Wg/JewvNbB3bdhk3bN5vMu2oEdh1AYAlywzACHxeTQGe7WIfCj8QBycKc9rHgg6VxuRJUqYhRl/u/o6bLdu2Fo+cHov9iNQRv9q1HMHkwPkAcLoByPwkPdmvqsHDTcxoMYkz9pxq68hahmmmnIlmLckgVnwZsCYr0bJr5y+dNmvdzIEbE6c3CvsnmAAXKX6+ABmdmgyj5Wqk6klyHjwHW83Jgd5Qxbmc6z9kKMDkCXwuqUNo1lHQXvyOOrn3JKiGP1qaDz69pA81w5dumwirhRkzFqxLhYb4zBFDhgwZMXPQoNTUBTOazZo4cdq0bUuhdgyG7AfwgJ4IYAnwodF1R/eUzqD4OAVVm8eMeY63HGI3Jwd6k6rWEpTKo6lpOiSfcYH4yAa/X7ly5diVY6RLRvtACBa5ohkMVolW9imlZMeZ8UkDRhJ8oXXzxU2lHVoLWeZv08TMO+TRq8vcATuOzWkNdMyaMs5nOoOUCSUdz/IYENcZ7GGlVY4ea2muZFzmShKVzOcc0bOh7GrWX2eICO/JzSdar5R2OtqP2sSqy9NhI8YCN/MwJ2+IxFqzWh13CSoxTSjz37Kj5O0A/PH16+Pnzp27cePqqreg+45W3XfIomsZK5/vuCbj+UmWDqyJJv1RBJP/NMFDbr179y49fdc10FqjuREyo0MbR82ldw2WG6vM2cQS6rzWHOYuQHXMAPq6NI+6qXMllm88gtY8OH4cSF69Chxfou6y8CNC1boMwnygEy4XMi5l+GWX+UV5dae2lgpf40CC17Fjxx6sjqjc7t2JKOAcnwOarZSRAX+f2c5YWx6nDmSa28wJzQ89KlTWIAx0Wc1VlMOmVKGUWkMskeSeN28ePXr0HnQnQvARoBqkN27cOAyqd/kKiM/EWZG11fnS3ww6VtStMkh+9eph9O7alf4OQRLHzFaovih6yszM7DGciPZLT++VnDw+L896+ZdH/dNap5kYpa7rkCtzJmGgkzVLon9Hc1r0Y5TzOZ1keeL4xbNX3+7ZAyRTglmBQNu2bQtbRKiwsJCYKp++fXv16jnQ69fAlK8LOcmf1cAleXcBvyKuN0H6278f4hdRds8FkpmZSDG/DWoAip7ykSoSJaDMU6iROr7V63AXzqW19PRvXiRxRW9ANWidjHOqXJ6TN5quOXHx4tkDCiWQJJAtQV0jBB+RKSF99OjNnj1vr567eBz1+jVPtSKZxQJ+CdFP8/Ua9w0mSHlrQcASUA5HSwJIoNiuXbtOLPiEVPOBKAE1PDPsVwvgaAfjVsb6EIJD5kwSaZMCfXr0ftLEeT3PxuiaE+c3AMvsDoQSSSLH1qCePcvLy3fvhh964kdgSkQDgfcpCPTA2Q0Xz58APQC572vVjS3LXXGsjotBc4FlP2BJKJEkcuzcuaKid+/eZWVl8GNFRefOyBSJElDNszjHas8ksCfVFBnrfRCnqUOSpnvl3sXEuXlfGvP8xQ0HsrM7pABLQtkVUPYsX7Ly9qTwxy9aH8OTbq/cDVCJaGHbQCArpUO24rmmKYkqGS8W/BR5K5Ev/WfMXpw8klgOzySURLJ32faDzz+Urj516uvXr6dOrS798Hz99rLeRJSAZip/jmR7ilNc2nMLc24d6tQhUYTw9VpLo7OmE+f2nNkUjFnU3mHZUpG8feGLVZOIKPBEoEHgmX2gaMP5E029rrlKxb4zOzunOLlXej/Dsp0i+XTCV5smPFVE2xmeyp4ZMVqV0pxTsA6ZxCmLkF5TcdbkOLdGORqzWwfNklBOYnpWoruBJwBtG8gCnt2y229IC02t8iuUMXs8GdOwRJRHmKSV6BEEaniSPTna7b3KPq4lJ9O0FaGokVFDKWtynFuiHI0ZdFhKlFIXVoJBMd6JZ3b7/mmhgl8B0xizh2G5XaC0Ad1uePYge3K0i1gnczb3oulbhAaBNfXLSfYoPwAw0ZiCpY9BwZ+Kp8I5p2Bq5WGyMZUvmaUPT/KntqdXtDdCc8p997iYNKO3lRNxPUVZs5EFpolyMqZg6ePPZ4Yn4iyaTNFeeZhkTKg9gqU/T6hHYE8d7RmSppMKm9lpRpX0hrqkD458dxgGOmdNCROjXBtTsPSz5xLiiTi7UbRPrTxMNqZg6ceT7EnRbsfJhWVaTG/yvrIm0JziaohS/WfyAiZEORpziazi/jwpfVJxZ5yVg4kZE4y5vvRrvCpdD/Zsk4/RrnBKmk0skb6ICQma3PLgfSivpiRMHeXxG5PTJxV3xpkwzF4IMzFjsj0p2hFnL8bpS5MjXS4350W+O1rQFDA5yhPFScmTcBZUxpndCWasjPmN5ZE9VbRDLWJ3SpqDvPMm3zK0ZQWx0jdac55WRirKy+OMclncFc7JcwoqE+Y9FMwJ3hi/G3nwLIXFEiVPDvaEaHKOnRj57jJDs5Eb5mSGicZMXBcoeRLOIo71BHOmhKkoSnnZU+Gk3FmcVymasv43VzTrumg2DaUV/RTM8IVJt27dmjTpQtg3eWaldEswdeYVe8B0g/xkJGhaccIyPh6aTaPfrUrvLvCnOTWU1r99t5SsmDC33Lq9BNZASlDzl6wMx8JZGAh2SAxn3vhkAVOo9MPTg0d6Vyj1Xo89kK+xceb2i65ESU5l2ea7F7JXrI2q31SV95UMs0MwUOgJc8ttBEkNIxI8ENGwF86uLbgSxV/O++XGhFn6HEB2hiYciLqc8AxIn6+OgTMTKpHCKVc9cdCcGXnvE2jKU6QCgJndARftXe0wt6ykvobqD6Oo5UntJQ+HlreOuxJxnGM5z2SYciEJKLE/jM030gD80AmBrvbEibsiSJ2zK0lzoKu1rGgmRcCcwxVot40l7hkJJJxmBLTgEYmiQ8O23xN/JeI4p3LOMAVLRImNduy0k/rm5yNSXJkeXG3F2WlAPuDE1Dlb0jztS5NbSCtcTQ9BkyuQjUx4pWKJILOygsFgSkpKEJSVFVBAwZ/h2JWoIKE472SDWXoQWAJKAEnnakrwhEgBqAfP7ZbUybvF+bK/KWlChwSboZG3gVIlTbKmdwXaQstH3N5gsw3UjQQPwJSAgj+Zp6xEFOsJxXmZBaZmScdpeOabm9sdvsPTcDx8UzzLJM7SMpM6Odb9afo15GbUMt3NJLc1C71gEktASSCz22tlA1EECpYmnmHvSlTE5qxcnJ86QlvFfH2QBkeTY5T6wTMewRFP3NWf8kqdHOuyk8E0a/4czVlMU1jTUoHCSwCmZokgi4r6OyoCogAU/dnCniN261iPx5x5Os4HQJxLg1WAMYllLoBM7wUaicKHdECaSzzBnhXbV9tSp471KJr13TTnM02/9uY0QXMqWZMWR+W2KEeYimVR/8lpaWlztNLSJiNQaIYST5U9pa8LhTn9rGnifL2AqY1JLNN7jUxOTi4uHo8qLobnkb3Siaeyp4z29SbWjTmZ5ljZs5Q01aujI1+dRzSp886rI7amPcqDhmUoFCqYqlUQCiFQ9KdpiJaHZayzOeOwJsV5qYSpjNlRsSyGqzF5GUp5OTnjixXPjmhPjVPGepQ5HZrjfGnaz38313Je5TjX1twtYVKUA0xgmZYWcp1NLEeg4E/gGfSI9nLHnKH4rElxLmEqY44hlq6zHiCKPMegPb1wdmJzRvXTF/nRlK13e1IoUCWIrClgmihvTyyXV2FxmkCegFNFe/nHypkzx7FmmR2mMiazFDzJnh44yxxz5tgRseGqR9NsKmxsXZouDzmroyWuAqRh0qGEZMn+xHDX0d4V/xBpziBnzgStyTDJmIal5Dke7SlxSnN6h+88QVMspuRBhgl0QKFWRxcsBTlAUc7nuXaelD31xjTsZc7Q8p/Mmj0s1lxdxjD5ANLjzJhxbj/lZc6fopkU70FGgSroljhHDLoL5LM1LKDsiThV6pTmxA2RCHUbCi9rHqlgmMKYwp4GZ6eK9V7mzMlgmq7rCT/Yu5YVJ6IgGtSNj4XgIuILRHCh+MLxAT5Q0YiPAR1QUYni20Ui6qZJQBHRLGYhAReSjbocxvWMW/0zu27n9unOuZfqm86MmWh/QEOf1DlVt6rOzUeL5vqN6iBjLdDMEn3PM4do9sFklrN63kVDr0HBmVD9ZAGix8cgo5qdQZ7vzoCpvgVwDnK9Y4IzPhAJ1T1o3gOagYMMEH2ReF6o3Qu2mxgXOKOB4CSqq0RHaEI0dxCYOpyiGD0Kzm0HEqoDzbXXPSV5wCCDiM48L9IAQtXqls7I5CFQXSd6HFL5iOrGonns6CWAWQjOS0dj6Wwu9Jv2Vjl3n06pjgPOHdrfIDT1QYaf6LPguS53yZv6cG4ZDPNvKdVVNFOif2aem4gCmDqcx8H1DJqfU6pn0bxQHM2HfjTrKdEjCk3Lc/BT0c5EOhGcoPrWYlSv3Tg04yL6G7R6a0GNKMP1LtAE1WcO3XhCaHIrg8ZCq/NjoWSnSwYZlp99olOpSTxXHiudVLlGaVav67LJRJfQTHk+FdAkFa6b4EzRBNUT4dykNYaUIdsHoJnKJhM9Cuvz8oG/4cjq8cvqBWRTAOg4QhN93mJwCtcRnECzA+EMQZMtBBbNNQmakM2te2bzqokUBHIWkU4bnBFn9V2n8NNosrngCk3muc51BGc6Hu5COAPQVEeWftlsiGoiBQUH5yDVX4tw7tqrVZxTbtn82QwMTUR6EpzNn4ImC2d5NF/mDAd1t2zOG9VECgoLTqb6DxFOSkOqbCILTyM0Q4Nz27Q0SgVNFs6h0DzrQ1OCySWbszYJcwrSg9NB9dvm11HT0BmLZofQjIUuLDQhw4ImC6egWas8KYEmj9ORhLg8orNgsSrJRfUG0pCCZv/rSTYPxF9PoakHp431Vj6p2V+n8uS5gqaynHAVaCbjNXw8Ez18XZCoTmlIiyVJQrHO4VlIMvqMZA16FB2+IjoswjnwwultSVIfBs3LPjSraShFTpkDMcOpfjsvHQh2PaU3f1EoxbIZRnS8UIK9m33hr2aa1F8Ngeb57D0gGKdbNCWl/8h+++J2I5vX7gYSPVckzDveqKKZpPTmfbdsVkIfCGeu8dFMknoYmvriTNX97a+Hk02c+1Fy4TSAs6VeIGXRbGmyGS7EFs0bpdG8TGjKfI14WQpN1o4IJVKRU3qLv92Uh5WRpKGWLTgFzU8jZPrTfrm5PTvE+G1qd+SMoEdRYh1N2UroEZqhSQjRztrRk/67QbOmohmycAg03zOaQzkAUCUsutGsBxbvOprBStyDdhCaZU6W1f0WzQZVhyNFcx5dpFA0b5lz5b7yaOIx536gyf1NtSPH/c1/PDbPWTSVuRB1ix+70fyvm0BTmwDrc6EVktMPL2VOn9ugbM7wzPKje2a5MurN3pLWm3PKxqF2DwWMgf/PQoKm4iII2PWoqio3Buf07lKe0+dogYM8wLQ4695DGt8e0kKu9T50D6mm9ZCA5j3VJV1gR67t72+eWPn9TTPK8Pc3Bc13rkR9BGgG7W+2fb33LZPQezdEx6/DvXeg+VBHU98trrrnQtGkzIUM0QfRfJBFE8dF55AcD60s8bGp6p5Zfhv1zHL735hZ3hwgOs8sBU1ldOZ3uLD7qvrFztNfT9o83S57gOg8T596btE87x32sDPwqq8lV2mP4a7HsZK7HryIxLJpx0LvXtDtUuREpaGld62r/XSC95CwJOeWzQqhyexVVg7zC5zVr8uwIzdbdkeuG7wjh70ZhCbvyMkggxtym6khRzcDOPO/COdk72/uIF9GB7IpaFINSQ05NmX4z/Ttt5O9W2x5jh8Gsjn1igHiFhIXnP7OcvvrSth7bz0Ycu8dCR3HSrv3zuTlS1LUEukRCgBD9bdFPBmV5fZkPBixJwM5aOe0tV9tfPWOEgsf07lEOs9J3foI2t8VvxAsLiX9QvvHxC8Uv0UEmKa6rsSiJ/U7giaE8+tb1csm5t/68nnZXMHZ62S9bMCTsSzgZdsXd4rNnva6Vc5ykw+W3C9GFwnCCaq7fJawBhb1WW5dHp8lvIHsC9R8ljYHseUcl0ug3FS7SJshnJbqHg8wbKvj5gGGb5U9q34P8P2cQZ0bwOwL1NOQCCeEQajO/nS2VF9L8BwPf3riqe4DCo7fNH5qvz+9m7s8YRPuMlXuSCE0yWppb4cVOPnuBLb7nxI8tbsTDo7y7gQfnEet399enlCzVydYrz/dneC82AO3Fp/1p3T9nx0uZm8uFuV03usBOL33euz/S/d6mLsoZtKLPf4wd94tTkRRFMduxN6SAUUFEaIRbFFBsBDjig1j7IqR2HvFsvbeC/beRVEQUcQ/FFECfi7vfWXOJDeTlyZ6bBtBWX85572Zt+M9i/yxHgso5HrsTLkpPjcxdAZBxybkoonWkR2lt/VBM7dWmjmzYeBwOXNmhZ45M981c2Z3s2fOnN02zMxJGYqhM6MxcmaompESPnMGA5EQdN5V3Fu6xo/bemhvycR3DJ2ROH/trjAPacS/mIekZ/gEBiJNDIxD0vN7wuch4WAPQY+JTQhbumxrwlE9dnUbdTGr62mFWV2TSmZ1Ecu/OqsLY2egnJkvNQHDugKjuiaY2VLKmHI/19bknMug48u/FZrEwpoysA8Vz5HbEDJHjnhijhxJzZEjln9xjhz+07+cfWaAkswYOYtSzj2Tc+SK0HRfLZZNOXIcUZcHH/zAhzCnxbm70ozDwcUzDoll6IzDrQ3POJyLpVPM5TNA1ZBD/k4faZRVzTiUQXcvm3JeF6IOczYwf5MUPn/zYoPzN7F0luNJefcHcE72x29SxpmlHsb7O3z+ZnhHxh6xbIprJNnA6MGcrtmw4En7EUbDmvamUZVnw06qezasGGcqhnD6w2ExGtZM2GeaGLGN2bBmSjmsKUvWUmLZLHuNlAw1Zw1zi9/vL5lb/G5r0+cWu0ftYtru9Zs8uHjstrEE8vrXHCZFE8yKc4t7ov8vVsWyKVsDpwlzorGJcTpmagPpsmXvSI3M1G58DDR0MJe7n8vppRI0y8LEohnYg7yCa9l0N1rCnPznzE70H817FyPKqxNoVpr3jhYxWBNBF8umq20V5jRZx07U/C6C1lBi6A1zdRGczdUNU3YRoPUKexCCjmWzbNTRBCzNWZJ14GxaT0YpzKhpce0RkK60i4b0ZNRXOgJjip4MWIxvuWV/OpbNSi3VcWFOk3WBs5kdLtEgSIKoC4ZZJX2LhFUzlR0uk2tJ+2/6FtrhUtoWWLKbxGUJcG3ttVg6gbORfqGLol/IcGSQhBDl1yVdoEwWTIvKmuZy2m+6ecq+O9kvhJzLDX2KLKgO34dSBZl1LJ3AWX/31VPZfRWNUqwVx96mcJvUVqg/kwXTPuvGBYrEak87xsKj+wowdc5lo/JmUZ5eqbYxIbOOpRM46+1lOyl72VpbqXFVGZK9qCmqmv1gfzJ/62WZdlVM++7aRc3SpuSuzl42YmlSPlLCRAOw3IMQVqloBXNi6Qy4c8X8ZnUG3n1CjcC9u4Cjbaq2JeDBfm8F1vfp8bcbN+6aqme91tsZSCxFZ2AfCxM5R9Bn+nsQlm+3OeXSyTijGue89WTPmvssT8o+yyfP7jz+doNIgiMjJHWQot/VUA3Trl2vHn/LJeiLkXbN80vOnfEvfv8ipRzttdz+a2CKnIs9yG3OeCFk6ewfqP6ex2lvqGuVYR49+vgxNX+/VCQtx0DFfztf5jeCTBXQ/kSUWuVLulZVQai7GtTvBg12ra7btbF3Px9meWvKcmq3OXEKzzj9WnqkvfYeYDam/frR0aNHH715Q13/bTVJy5EZRoy6G5mXFqtiykCJKHXQn+ea/qIe4CG6UTmkB/j6WWVL9NYi5esIJj0qA5hlrYmLTbc504ViJdJqJyIz6LT3DKZ9hOWpgKqO6nfBu3PuqN5d1FFtWT569ebAixe3r3Q2JAGyeyeW56Uz8YWbV2ZT8eTy9F7P49/sDqYEVFv03PbtVOh/6JDfUT1gLjqqj3z5uSSXo5Lq+3SnvuTnl5voqJ47wHYq25SPI5Zv/UZ/wJTWRNBrNmdC7URkBlP0b+8y2Z6Kp+hP5/r03dyfThxtf7pZL9VWTihfHThAKK/cumxI+hy9zMpVW6ZN2Vko1bE1a0+k0p5hykSNRR8yUDIo96ebIoyi/vRtY7W2Ffen2z56YqlTziyvdt1OxuwWBhPWxB7kMKfEyX+LTTvbs4+1p89zUqDbf7jo9ieSbEuV8UvXFMoDn58TynsdtScVSG916kRsesGh6bFNC9MeE1UeNUCNQZnnyKG6kH6C6PanF5qkraJHFz23hu869Lbr9u3amBqmzLmwpsOcyDo07VT3iEk729Pn2dpqeGqgTJSRKjFE5kggmSShpFr/S9eIZTFK7UkvvilRqEGxHWRStqgBSjy1QS+M+WEMykS5oIk1mSCy5s5VJI0tFxBLDrlhycY891AbM9J9Zr5QLuewZlXmFFlnrdmLtJfwfHKUaukVUEuUmVoNYpBM8tN3YvmKFktGSSzv3WMDKFN66c35Qu1KnMiQRS1QGPQ1G5SAMlFGyppAEEnEUZE0tpzNLGcEWG6nkBtjLp9VKNEck3NY021OZL3Mdae2p+ZJ62dUF9M/eUZAr/lEuZ/J1yReKRXJa69evXnDtlQoO9p8e6lYoX7FFp5SQIVBxyzQRJkpazz/xByZJLuSbMkZn6H2Hs2SjalYRpDyMjnv36UvW9NpTmS9PM6IsSd49olGiacGaokyU4hBMsnHhJL2nedXrlwGylMtiUKjOryDHWoN+sE3qCJKSAkqaSj9IIwEUpFUtqTnkwglsVSbTyDknTI4NoI1Tc71eYdTODhhnGskTk/ZEzy7ENCPH1tb6USXgRJR0jXWJV/04tWjx4SSr4bMYmlduXBLoTmKpcsZ9NDrC/SwDDElTZw48QeJOSqSixZPXbfOojwOlirkHozpzrk769iJpD2DPAmoIkoiqJroM2L6CFIk9YWlj7Kd2nUaCbg06EJpUH1RT9ehsy9ovabXJLq359MSoOSN3LBEyCVMDqbIuTvr2IkEztXgae/smGjv3nSUS1TvBPSYRCRvMEmg1LZc7kDZsEGJpwH6mvkZ7SKtU6IP6LVB2TbIMrMlDKbMuTvrITsR4g6efGdnjsj0ce431o0b9F3pBcmQDKI89WCam03jK6gFev7q1atv3/o81S8M8vjxfoSyLaMEy72xggOmyLkbp9yJJE+2gCFq9JKwvrS6/fI2gbQkfZRedkvhLyq2FwZloJ2Z6Hb6vK72Ox6Qf5DaqzOj1Czlgilhcs5hzdp2ovS+UJ64s7PnjoSVxAe7Wu2JY7d7liSuhv6yYnEYVH1yD/0jUSscpBqUmuXqWMENEzmvdSeKdFo9x7FGaaLmSBeHvDhb80nWuO9MmZXIr121pyWbXdlyYtOqpUvz+6ZXDZR54u3WCSKmRvx+2wNArD+ZsM/udCoIEzmvdSdqE+l+KuyfkFjp6cMHjdSIAFq1CZ4JecnqLyyn5zdlk8lOWt1ZnYwy8ZVn8rOqu6jXQHF8x0x9ddMgg+tP6Kc3J90pUh9MLJ04RwmnsGVz2hLFea6FaDiyJ5c/yFcLcmlLKqkZ8l8L4a8jpsnNawpu5bPi7e5oxB8jNQhNSMojbeqECZw440tUNMHKjKf++ZGgjKG8dKpl6bSqPZlNKo54cwyG4jdJMc3EN1VB9PDmvR6ORCGExrWUzzEprxMmcOL8OTOlUFGzYmc2p5af8jxzyLuaTnlTC/fEkEk3yRbKtgGpEJrVmCOqP4CjNFHy6MpqLLplT+qUJ95uHRov3iIuMIQxVcoBsx6ctHb26084zdlUlWvesX1zdp4u1KzpO5LGk3KVM5cHWtjamChbNMtA3cqf2JFcTUytvNXJ7B7tSYcxcawLmPXg7N3F4ETa/4ZmZa0pxQ7ctli9/K9pWqIMNFl9AnbOmTJrWmLNlDk41nca06YcX/+uR1F6Die4F6X/Cs9ZLQal9qQCiavDrkXCVaImaoASzyyANk9z4sqYSDku2utRH+xF+v410XSWAZT4oi4ekCH1tlKv1B0MiCqgMGhzWRpjIuUCZv17keK5MNFMlHQpZFHiDrU/cbTPGbF6GPHH9jmlfpqoAWoNurIpQLFgRmBMkfL69yKVdsszlWgSyoXKlkDJJBklgcSDhaSolvpYPc/JTA1RBho0aLxJPKdoljAmUt4oTpX25vKctRkJNyg1yS5MEg8TCuHxTiJqgBYbtGV64yzjPksYEzAbUVQvnkU8l/9p345ZEwaiOIBLF1uoECzUfgXB1VnElIBbyRIkOCQu6pAh0KlQOvR7917uHv87H4LGS0wh/w4tnR6/9y6YZ3KTZx45F0tQsuQlVZGoBhUDWqy9WcrB9HTaXc/3mgOa/xYfQ/diCcpqJq/pM4FiQH1cQRfxqaXHwcRpP/GsA5pvY5K0plKPJShrHJxzAzqPw+spfxQl9uBk6XUwUbTryaCbw/KyOmdJypJMiRMuKWsP6IgHlECL8EpKOjTCEpU15okHNDaboszOlx0et4epgoQkUToXy1sLDsSAAnQaJeEFkkkMykYtpSdKZtGhMp2mZbLLvpa5unM7viXbfRml8dw4PjmSLiU94ID4GVCAquLmq2gXnoXM9pUkKBu2lJ4MqkWxd+Rgy4vFJyRBKU64rwEFKEgPZZLN1qG6Rf/+XIT58piU6WqKU4PPvQ1bwpNHADWruNth7Hid3Rok/VPKAX3EZgSkInprJa4/xlIemUY8xwyKb1YMKoJlN0NC0iulHFAGRW0nzUbLcWpsyjYs4cklu4/9j2ifyxlVP85LFJAEZTPVARTtlt3GqbFXBETZhqUsmUVp7ahREaOIF3xsyUZrDWxQm5RDghRyxAIQlDU67QO0EsXbUtqVIl8+a0cSoNxukIpui1PTOqW8VeYVGaGqvOo862C3BsmWwsWBlGK+SkfLCZIl70EpRXXZhGpnTBEv7bYZfgXWtBvNftC/0G0tGQw6kIk2pcLt0D/u5YjaiNRsRMnUzdhAdkXSMZ0ETiYqg24k4CPk5v7d/q9Bt19U9F+d6XafPn369Olza/4AHTMK9clhnYAAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAcFBgYGBQcGBgYICAcJCxIMCwoKCxcQEQ0SGxccHBoXGhkdISokHR8oIBkaJTIlKCwtLzAvHSM0ODQuNyouLy7/2wBDAQgICAsKCxYMDBYuHhoeLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi7/wgARCACrB9ADAREAAhEBAxEB/8QAHAABAAICAwEAAAAAAAAAAAAAAAYHBAUCAwgB/8QAGgEBAAMBAQEAAAAAAAAAAAAAAAIDBAEFBv/aAAwDAQACEAMQAAAA82gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAG2WZyUbUgACdNUFZQAAAAAM1OxG2Xx07BLFciss9cMOqVgAAAAAfSVtNgc27/lvM03YQTuKDsvFwAAADvdsBrrhjAAAykp22R9TGmcAAAAAAAAAADaLJc1OPneapXGGfqcAAAAAka+RL4Kx4iIAAAE3a8vkxw7zAQjqjBQAAAAAAk7Ru+XB04HIgfceOiAAANqslvNTri5qlUZUdTgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsmfoyvuui6/DAA2/bvR1v0Plun5j4AAAAAWNZ6N3d9vNWHOJyDvT2FOR8eqa/K4gAAAA2PbL3s92dN3x353g5c6civctB1+Do40AAADvS9b3fV0BDwYBDAAAN/2/1PZ9RUcfKpWHigAAAAAAAAAATqW30RP6P50PprFNJQ8WvYeeAAAALln7Fwy9fyzX8vH+UAAAAeorPqN/3R87z6fed4djCeY6ah40bjmAAAAAvCft2jL1fnQ+859d5u+Ua/lNRykAAAT6W/0JP6H53h365qlVIQ8SAwwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAXlq+inNno+XsXx+LyAAt7R7lr3e15ex/H6uNIAAAAtHR69xX+9ixhVdHiwOvztfyrP7bOLN9qX+1sJXVhV41NZfCAAAA2ErfRWz6jctMQr8+rKPHjUcgkUtVnXevN7fSwVXnbJ8to4ZwAAO/svVW77L5ztC5vmoTV54AG8no9N7Prqqo8anc/hAAAAAWDf6UGp8/H5EAAAATW3ff2n6eqaPEhteCQy02no9raSu8+ZfmIfVhAAAAt3R7dtX+35lx/I6KGcAAAD0rs+tzuzpzN4Hb2Wy7dLLNsvs38O8oLL8zDasIAAAAufR79mXevTufwMTlZ36civq/Nx+RAAAE6t9G+dP0tTUeFEK8UilqtTR7Ox7d54y/LxSvEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB9PTW76jZytpzN4laUeaB2u+mt/wBPsO20jl8KvqfPAAAAk9mn0Ps+j1/IefMfzukhQABs5W+gtn0W7ldROXwILThAAAF+bPfmdm6saPMqDN4vEAH0s7R61waPX0Ec3nLD85wcAAHd2XqXf9V9d4I0Pk8CHVYwBu53+mN309V5/JqDN44AAAAzez9M7vp6wo8qqM/lAAAACaW7b61/QUtl8SuqfNEks1ei9n0cEqwUXk8EAAAC2tPr2zo9fzRh+Y0cKAAAAPSO76bud80YfmABMrd176/e60fNWH5nXxrAAAAuTT7Vl3+n5iw/L62NQAAAAAE4t33tr96k8vh17T5wlNmv0Ns+ir6nzqRy+GAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABuZWelN3ucOc0cavOWLxfgJ3bqvDX6vziA1ZKTy+WAAABfOv1ppbqoLJ5MPqygAASGd/ovZ7OgjT5yxeKAABIZ3ejtvtRaujz3j8biAAAXpr9adW6qIyeTCKsoAA7u99Q7ve0MKtpKeT3tC5PIiddAG6nb6W2+5Vmfz6iz+cAABvp25nZdfOWDdssK7bjI0Tk8n453OxSunrcAAEzt03zr9el8vl13TjGb2Xp/d70Nry0Lk8kAAAC2dHoWxo9HzTh8PSRqAAAA9H7fa70vNOLwwALJv3XLp9Krs+Cos/nAAAAXDp9KzL93mPD4WujAAAAAACbW6r11etSmby6/pxjYyn6c3e7B6ctFZfJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsS6+4tGuHV1zGy2g8uCK11i/tW3fTt08YZ8u+bcXn/AAADmend3pa/nPOGLzvgAAAPQOvfKLLPMmHzcHnAABZ1+i2tGulc2OA00AAACWWW37r3VzTnpzNkAAHb3vp7b6MLrqrGjNfWrd3dULkwxiFY3Ep+k9voVbRmqbPlAAAldlt/a93XznUcT6dh2d7FK6qEyYfgAAJjZbeuvdTWbHX1NHYWzo02XfqqDNkranOAAABa1+m1tGrzZi8/TRgAAAB6L2b+93zbj88ADtd9NbvR1cYedMeAAAAC3tGuyLr4dXT1OfTmcnaVzZMPnAAABNLbrz07aWzY4DVR29W7o1WNdppvNkrunOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABc+myVTnQOWn0HruiFcKYzV7mXfQGu6A1QwIrQvn54yU6qPAAAMjr0rsviVcaPzVAAAAXBosn9s/PeSnSR4AALXvsse6dA5ao/CIAAAz5d9Ia7oZXGk81QAA7D0ptvh9caXzVSGcry02/Sis1OghzbS76J13VnTCrKKwAABcWi2aWy4ccXDvMFA5atTGIAAEssld+m2PQjic5vZy2Hew+vlLZqeAAAABaF9lo3T865KdRHgAAAHoHXd3nnfJSAAL+1W7WXfNuOn4AAAC177LDun1cfTl1zOw84ZKdfHgAAAmFkrs02x6EcXnN9OWd3sLr5TGaniAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD6Xzqho49qHPK1r+SycaJzSsC3k4t5SOafeXTphV1EoVX0AADmegdUdHFS+eQAAAFt3xl9nKEyzwOAABYd3LGtjTWeUbh0AAAbWXL00xhlfapokAAOZ6C1wilfalokN/NcV8etymc8ul2+dMK8qlXFPQAABKZ8tm+PB3ifTk5p49pjPL4AAASafLg0Rwudy+808e1xTKNwfAAAAAWJdyx7Y0NmnrYgAAALv0x7iis0gABeumPPqh8sgAAALLujPreUJlnicADgAAAASqfLf0Rw+dyu80se1tTKOQfAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADY9ja19MFrtiVc9vKNoXUQ6uyVThrOSrKm7kW/fn0MZV5VcAAALTuo2UuVFRfj86AABzLevz/CoKNHwAAG/lGyrqIfXZBq7QAABL7K51ZVA67olXMAAci5NGePwlXNVwG5lGy7qenivKrrPuohddsJrsAAA5Fq30Z/ecQD6ciuqrY7CYAAG9lGy7qIBVdKZw2Mo1TRfhc6AAAABNLK5xZVUFGjC50AAAC1b6O0qWi8ADY9jbN9EajZXVNoAAAE5tqmU66co0Y/OgAAAAASCULLupr2q6X2V5veVLRfic6AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAN7KuUTpg1ejD5ITmzPl9jyIhC/URmJjZRn9jX9WkAAAb2VcqnTpI2ROFwAAEmnVIZVR+NsYhaAAB9J9bm7SD134fJAADI7yc2Z+ZAatHS6AAPpYluXU8siFdwA2fYzGyjrO9yORtjcLQAANzKEknVx47u87HDuK646XYXXf8AAAAbOUJnOiJwuweTnFmbX8nDK7/gAAAAJHOqSyqgFenG50AAACc2Z+fUDq0ADmTOzPsexhVejW8kAAABJp1SKVVeVaep0AAAAADayhMp0RKF2HyU4sz6zk4ZXeAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANzKrJRjsbwM/sNxKrrdjsL/gNl2vbSrjsb+nnQAAPpvpU5HY4HJ6mNvEA+mz7Xs5V9bsehfxAAABmdju5U9fO6bluLyQA73N1Onuc1MbddyYAAAk08+HyeljaABl9ju5VfXNZGzV8sAAAAGb2O6lTj8loI3AAAADK7Heyp08bcDk9n2G0lVqI26/kwAAABs+17WVcbhf1ugAAAb+VPJyPRvH0yex2va8jsdfyzURsAAAAG17Xs5VxqGjgAAAAAAZfY7yVOmjbg8ntO17OVemjbg8mAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABm9hwdxeSA+mb2HTzuOkBzczOwxk+nnQAAB9MzsOTnw6kuJ9O1zk58dxOS4OgAAADv7HIcOcHep0cztRHSljckAAABndr60sXkgAB2uZXY47vRyQAAAAGZ2GPyXW6AAAAOxzL7DFT6udGZ2HJzC5Z8AAAAO/schHC5ZxAAAAMzsObnF0cnAd6XcbkgAAAAMjse9Hi78PoBh8n8AAAB2OZfYYvJ9TozOw5OYXLPgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB/8QAThAAAQMCAgUHBgkKBQMFAQAAAQIDBAAFBhEHEhMxQRQhIjBRYXEgU3Jzk7EQIzI2QkNSkcEVFyQzVGBiY4GhNDV0ktEmQIIWRVCDoLL/2gAIAQEAAT8A/wDyG4Xtn5Yv8G28H3Qk+FY9sIw5iibbWwdgFazHeg7vLuuDxA0eW/ERCxKff6fcg7uuttsn3N8R4EV19w8EJzqzaILzKAXcpTMIfeqoeh/DrX+KnS36GivB3mZPtalaIsLug7B+WxV30OT2gV2m4tSf4HOiavVgu1keLNyhOsd5HMeuAJOQGZrD2AsR30BxiEWmD9a90RVs0MsAA3O7+KWRTGifCTY6Zlu+K6XopweoZBEpPg5Vw0NWxYJt91ea7nav+jPEtoC3UMCYwPpsUtC21lC0lKhzEHqoSEuS2G1jNClgEd2daR8ALsARdLWFu2txI1uJZPUWyC/cpzEGKAXnlBKAaOiPFv2IvtaxVg+8YXRGXdEtAP5hBQvPd/3GHrLNv9zbtsBKS+vdrHIUdE2LPNMe0r802LPNMe0o6KMWD6hj2lT8AYrggqdtLy0jijpU/HfjuFt9pbaxvSoZHrMKYRu+KOU/ktLZDGWuVqy30NEeLfsRfa1c4Mi2zn4MoAPsq1VAdVadGuJbrbGLjFbY2D6dZGa6/NNizzTHtK/NPizzTHtKXopxaPqGT4OVL0dYujAk2l1foVNtVxgKKZcJ9k/xoI67C+DL1idh9+2IaKGSAorXlX5psWeaY9pX5p8WeaY9pX5p8WeaY9pX5psWeaY9pX5psWeaY9pQ0SYs83G9rU6I9BmPw3wA6ysoWB2jqcOWKdiG5Jt1vSgvkFXSOQyFHRNizzTHta/NNizzTHtKXooxaPqGT4OVPwDiqACt60vFA4o6VPMPMLLbzS21jeFDI/uvoTgbfE65x3RWv7mtN1n5ZbI17aGbsboO+ifKwtal3q/Qrcjc64NbuSN9YytzU3BlwtjSAA1HzaHoURkSOswLo6k3oIn3YmLA4J+m7VogW2zRRFtcRuO2PsjnV4mtrW07SBW3R51H+4UHOwg1tamNRZ8ZUWcw3IYVzFDiQaxxoz5Khy5YdzcY3ri8UeFKSUqKVAgg5EHq7JaJ97nIhW9kuuq+5Peawfo9tFhCJM5CJ1w7VjNCD3CttzZZ5AbgKDhNF5I3rQPE0HknctB8DW0IoPEbjWLMGWTEraluMiNO4SGh76xPhu5YcmmNOb6P1bo+SsdTA5pjHrE++s2n4SWH20uMuNBK0KGYUCK0jYHcsD5n28Fy1On2J7D5eBjliy1+vFLd6Z5609rziWbxc/7jRAcsaxfRNF7vranhW0VQfI4mrzZ7PfGCzdIDL2e5eWSx4GsdaPJNhC59tJlW7j9prq9Ai8hefBum3umnn41jk54sunrj1IrALuWC7P6n8TW2ramtqaD57aeLMhBbkstvIO9LiAof3rEOjnDl3C3IrXIJJ4s/J+6sVYRu2GnspbevHJ6D6PknrNBK8rRdPWprbd9batqaDvfQdpDprFZzxLdf9Sv39ToZOWNGvVLovd9bUmtoqg+RxNXuyWW+slm5wGnexwDJY8DWOtH8uwZzoJMq29v0mvH91tDUPkuHn5vGS7/YVco7dyt0qA+M230FBq5Q3YE+RCfGTjLhQR4HydC1o1BLvrw/ks/jWuFgoV8lYKT4GsSQlW++zoh+rdIHV6M8FImFF8u7WcZJzYZP1h7TW04AZAcwA4VcrpDtcRUu4SEssp4nefCsQ6VpSytixsBlHnnBmqp2Jb9PWVSbrKX3BZArls3PPlb2fpmoOJL7BUFRrrKR3bQkVYNK09khq9MIktecR0V1Z71b7zFEq3SA6jin6SfEUHSK0l4KblNu3y0M5Pp55DKfp946qyWqXebi1AhoKnXD9w7TWFrDBw1bhEiIzeIzef4rNBZNYpx/arEVsNZTJo+gg9FHiavGkPEtyWQJhis8EMdGnrncXjrOzpCz3uGmbncWTm1OkIPc4atGP8TW0j9OMhv7D/SrC+ka13gojTgIMs/7FVr/ANQavVtg3y3uQLg0FtL3K4oPaDWKsPy8O3NcORmpG9pzgtPUQv8AFsemPfTLh2DPq0+6nwzJYdjSWkusOp1VoUMwRWPsGu2CSZcQFy2Onoq833HysGHLFFt9cmnHDrq8a04rzjWjxc6zR9glF/t0+bNzQ3qluN3rqdEegzH4b6Sl1lZQod46vROcsZRfA0XK0p4ivNqvcdi3T3mGiwCUo7czTOPsVtbrs4fTANWrSvd2VgXKMxJa7hqKqwX+BfoXK4DueXy2z8pBorStCm3EhbaxkpJ3EVpGw4mwXsmOMoUnptd3d1Wg05flfwRTbp1x41jQ54pufrj1IrAy8sH2n1P4mr7PegWWdNYy2rLRWnPnGdfnTxN2xvZUjSviIb24i/Fuoel2TumWplfe2SKs+kXD1yIbcdXDdPB3dSHkrQFoUFoPOFJOYNSmo82M5EmMIfjuDJSFjMGsf4Qcw5N20bNy2vHNpf2P4T1ehJeVquXrBSV5qAq66T77DuUqK2zFKGnCgZor87GIPMRP9lDSziDzET2dfnav/mIn+yhpbv8A5iHU+U5OmvzHsg48srVluzPU6ITljBr1aqLlaUcR3m1X9DFvnvMNFlJ1UUxj/FbO66rV6YBq06V7q0sJukVmS1xKeiqrFfYF8hCZAd1k/TQflIPfSyh1tbLyAtpwaq0K3EVpBw6MP3xbbIPJH+mz+6iQVEJHGsMwhbcO26FlkUMpKvE85oGtMVnDF0Zu7IyblJyX6Y8iMyuRIbYbGa3FBIHeasFvRaLLDtyPqkDW71HfQNaYYHJ8RomDdKbB6rAWHziC+tsLB5K18Y+e4UhDbTaGmkBDTYCUJG4AVfbxDsVsduM1fRTzIRxcVwArE2Ip+IpypMxwhH1bQ+SgeVYrzPsc5EyA8ULB508FjsIrC2IYeJLYJkfoPp5nmfsKpJrSfhsWW7iZFRlBmZrT/AriOoAzrRnhwWWyic+jKdMSFd6EcBQ5zWkfHBilyyWV3J3c++PcKUpS1FSiSTvJ8kVo7x0uM43Z706VxVczL53tmv7jgaxpYG8RWN2NkOVtArYX39lONracU24kpWk5EHgfLh/4tn0x76aPxDPq0+6s6kMx5cZ2LLaS9HdTqrQriKx3g9/DsovsZu2109Bf2O4+Tg75zW31yad/WK8a03fqLR4udXZ7e/dLlHgR05uPLCatcJi022NbowybYQE+J4mtMNgycav8VHMvoSPHger0U/PKL4GjvNaZvnBF/wBMPefhwLeX7NiKK6hZ2Lqg26jgUn4NL8RL+F25X02Hx9x6rQh/7v4Ipr9YnxrGXznufrldSKwP80LT6r8TWLPmtd/UGjvPkYLxrNsD6WH1l+3KOS2j9DvTUOVHnRGpkR0OMOpzQoVdbdFu9uft0xAU08MvRPAir5a5Fmukm3SRk4ysjxHA9VoV/wAsufrE01+sFYh/zy4evX7+u0SfO9n1aqNaZPnO36hHw6Pby9aMRxslnYPqDTqeBBrjWmWIHsOxZn02H9XPuI/dTCUA3LEUCHlmFupz8KcUCo5cw4Cs6xnahesNy4gGbyBtGvEUpJSopIyIOR+HRRZ+X4h5a6jNiENfxVwoqzJNZ1pgg8osEecN8Z3I+B6rRTa027DHKyMn5q9Y+iN1DInnOQ4mtI2IV3u9raaWeRRSUND3nqMGX56wXtmUknYKOo8jtTSHEOIQ60rWbcSFJPcax1bE3fC0xjLN1kbZrxFEZEjy8D2oXjEsKIsZta4W56IpahnkBkBzADgKx9f/AMg2Ba2VZS5GbbX4mlrUtalrJKlHMk9RotxCbtZ1W+SvOVD3HipFIVkcxWlW0pt2J3H2k5Myxth48fLif4pn0x76aP6Oz6tPurGV6esNrZuLICspCUrR9pNWe6Q7xAROgua7St44oPYalR4s6K7DmMh2O6MlINY3wlIw5MK283be6c2nfwPkYQ+c1t9emnT8avxrTb+otHi51Fjwreb7Fdk2yMHkNq1VdIUcBYpG+1ro4HxON9rcrRhhd+0l+53NjZyj0GkK4CterhFYuVvkQJIBaeQUnuPA1JwNiJuU80zb1uISshKxuIoYExQd1rXTWj3Fbm62keKxT7S2HnGV5a6FFJyPEeXoq+eUSlGtMnzhi/6Ye8/DZ2Vv3WGy2CVLdSBl41uCU9iQK0sPoawctHF19IHVaEd938EU0fjE+NYx+c1z9erqsD/M+0+q/E1iz5rXf/TmjvPk6JsSKiT/AMhynP0WT+q/gXW6tM1pC2od7aR/Jd6rQt/ltz9NNNH4wVf/APO5/r1+/rtE3zwY9Wqia0xfOdHqEfDYGFyL3BZbBKlPJ99bsh2ACtLz4bwmhni7JT/YH91ND0IO3t+erdGa/uaCszVgxKmbi+72sr6AVkx/48xpDmRrSFaPyTiSSEDJh/45vwPwCtHdrFowwzrjJ+Udsv8ACp81qBBkzXj8Ww2Vn8KwTeVXmx8qcObqXlJX+FYkiC5YduULLMqZKk+KeelApUUnh1DKSt1CBxUBVsaEW1QYydzTCB/asW3A27DNylg5L2Wog955qUSpRJ3nqdHVxM/CMQrOa2CWTQyWFNqGYWkpP9avLHJbtMj+bdUn+/l6F4+dxnzPNtav31r1pduBlYjEMHoRWkpy7zznqdGtwMDFkLgh9WxX4KoqyJrTJHDlpgTOLbhR5cX/ABLXpj30yr9HZ9Wn3VpXOeFB69NYSxLMw5PDzPTjL5nmTuUKtV0h3aCidBcC2V/eg9hqbGiXGG7BnNB2O4MlA8O8VjLC0nDk4jndhOHNl78D8OEzliO3euTTq/jV+NaajmzaP/s6jR9iNeHr2hbhPIn+g+nu7aU6CApC9ZBGaVDiKLp7aLue81tKDlJePaaS6e2tI+JjZLIYkdeU6YNUfwI4miSSSTmT5ei05Yxh0V85rTCc8Qxv9MPefgYZdfWG2W1LWeYBIzrR1g12A8m83ZGTwHxDP4mgoqPea0vXtEuexaGF5oi87npnqtCh6d39BFMq+NT41i454kuXrldVgZX/AEfavVH3msWK/wClbv6g+8eVGeXHfbfbJSttQUkjgRVtnCfbYk4fXtJWfEiscRhNwlcmiMyhG0H9Oq0MnKBc/TTQcyOYqTgDDsp9190y9dxRUrJwV+bfDPbM9oP+KGjbDHbM9oP+KGjTC/bN9qP+KGjPC/bN9qP+KuzDcW5y4zOezadUhOe/IHqdFJyxex6Cq1uetL5zxOn1CPgYYefcDbLS3FqOQCRnWjrBzlscF4uqMpP1LP2O80lRUe81pbvaJ91ZtkdebMMdLvWf3U0WRREw65J3Lkuf2FXCcmFb5UtRyDTalVa7o/BvTVzSo7RLuuaZltSGGpLJzadQFpPca0n24XCxImoGb0M/eg/BhO2G7X2LE+hray/RFbRCQEI5kJASkdwrSredjbmLS0vpvnXd9EVohn6js+3LPy0B1A7xTbqdbpc6TzEd1YmhmBfZ0XLIIdOXUW/Ll0f1iffW1Gqj0R7q0nPkYRcSOL6Px6rRC6RY5yOx+mnemnn4isYfOa5euPl6HSEQ7p4ppLvSFY7cLmLLoT58jqbEsovMFY3h9Hvpx3pmtKawrCqfXjy4369v0hTLv6Ox6tPurSkvPCw/1CfgwliWXh2cHW83Iyzk8zwUKt1ziXOGibCd12V/ek9hq4RodzhOQZ7YcYcH9UntFYsw5Jw/PLS83Iy+dl7gofBhg5X+3+uTTro2q/GtMa827V/59TozxHy63G0Sl5yYw+K70UXqLtbWg7Qdp6azEjPS5C9VllOso1iW8P3y7PznjzKOSE/ZT1GjM5Yuh0XRmavuGrTfZaJU8vbRKNQaishlTGB8Ltb4z7npu1b7darcByGAwyftBOZ+80HCqsYY4i2hhyJbXA/cVjLXHOlmnXXHnFOuqK1rOalHeT1WhteS7r6CKZdG1R41ik54huB/nK6rBLuWEbX6s+81it3PC929R+I8vAr5OEbbnwQRV2WFWa4JPGOv3Ureep0Pryg3P0k1ta5bFHMZTAPe4KE2J+1x/apoTYv7ZH9qmhNi/tkf2qabmxP2yP7VNX0hV6nqBBBfX7z1Oi85Ysj+gqi6KvuGLRfZomzy9tQkI6CgBkKYwNhdrfGec9N2oFvtduGUGCwyftBOZ+80HCcz95rGWOYtsjOQbW6Hp6xkXE/Japxa3VqcWoqWo5knj+6aRmQBxqzpTAtEKGPq2hn48a0g3LY4eUwk9KQsJ/oPg0dXgv2hcB1ebkU9H0DTq25DLsd3nbdSUKFXaGuBcZERe9tZA7xWjOEI0ORdHB03Ts2/Ab65UlIKlqySkZqPcKxNc13a8yZZPRKskdyRWDJxt+Iob2eSVK1FeB5qMgAnnrSawBeWpidz7Y+8dQwrUeQvsUDUeaHYrDoPMppB/tWOs5WFZaBzltSHOq0apMbDrjp+ufP3ACm5ICs893PV8f5ReJr323VH+/l6KpYaduLHFSAqhJyNY9aLWKJp4OEOfeM+pwwwZN/t7Xa+n30uVmonOtJ0wGyRWOK3s/LZOTqPSFMyf0dn1afdWkl7Xw4kfz0+4/DhbEcqwTAtGbkZfM6zwIqFdIs+KiXDdC2V/eO41c2Il0hOQpyNdpW48UHtFYhskiyTVMO9Nk87To3LFYeOV6gnseTTskbVfPxrSs7tE2zwX1OAIT798blNuFtqP01rHupUnMmi/W3oP0JFYwjv3PD77EdwpcQQ5qD6YG8UQQSD1Gj5epimGaMkU9eYLExuC9JCJLgzQgjfXKKxJiB+yw0SWoXKEqORUVZBBq74yvdzCmy/sGT9Brmokkkk5nq9FDuzdufoIpmT8ajxrEJ1r3PV/OV1WD39XC9uH8B//o1iaRnhq6D+T+I8vDWcTDtujq5lBoE/156xBODFhuK/5JT9/VaK3dSLcfFNNSRtE+NXR1w3KVktX61XHvrauecV99bVzzivvrauecV99bVzzivv6rRyvUxRHPcqjIpy8QWpybe5JCZSxmlBrb1ifET9jitvtQuUJWctcqyCDV4xje7oC2t/Ysn6trmokkkn91LBHEq8RGlfJLgKvAb6VMzJOdY9ml+YxFB5mkZnxPwYZuJtl2ae+rV0V+BoysiclZ1jWFymVFmMjpOnZL8eBqGpEKGxEb+S0gJ/rxrFd25LZnG0K+NkHZjw4/A2soWlaTkUkEVDuIkQ2HwfloBNY5AlWlt7ephf9j1OGLnt7FGzV0ms2lU88iQw9GdPQdQUH+tTY64sp2O4MlIVl1DLannUNIGalHICrfqQIEeEjcygA953mrlc+S22U+VZFLZCfE81KJUoqO8+Xg2dyG+MkqyQ7m2f60ZZBIrHsflDbFxRvQNm5+B6nAUbVlu3Fe5oFKPSNcrrH0/lE9mKDmGEc/ifLb+WnxpmX8Sz6CfdWOn9pZEJ/nD3HyMO3yRZpOaSVx18zjdMXJmUwmRGc12l7j+Bq5NxrnEVEljNB+Srig9ooW9+1X6O07zp2gKFjcoZ05L+MVz8a0hvbUQO4L6htCnFhCBmpRyAFWOM3aLaiKMtqek6rtVXKu+uVd9cqrlXfQld9Jl5GsX21MScZLA/R3+cdyuI6jBq9niGKrvrlffWOX1G9NOoUQpLSfeaw9fRcrekrV+ktdFwe41JWzLjOxZA1mnU5KH41dYLlumuRl7geie0dZo7e2Ts/vQmmpnxqefjV4VrXWWrtdV1WGJWph+CnsSfeav8rWsVwT2tfiPKsUEz7myx9DPNZ7EjfRmDcnmSOYDsFY4uWraURArpvqzI7h1Wj17ZMTvFNNS/jE1POc2Qe1xXv67BLmzxAwruNcsrHD6//UAebOSktoINWC+pudvS4o5SG+i6PxqWWJsR2JIGbToyPceBq6QnLfNcjOfRPMe0cD+6uFhqS3ZB+gjIeJoSyTlnV2kcruMh/gpZy8PhtFyL9vaKj02xqK/pRkhW/I5HMZ0JefGsRTjMnEA5ttDVT8OG5xNs2RPO0r31NcEmFIjn6aDl48OpwxcTEfXHWrJt7+yhXK++sQRBNRyprLboHSH2x1GHIYjkTnx0/q0n31yusUXErbRBQr+Nz8B1CFFKgpJyIOYNQbpyuIh/Pp5ZL9KnX0PMrZdGs2sZKFXKEuE+UHpNnnQrtHlworkt9LLfHergkdtRFtRIyIzPMhA+89tOXBDLS3nD0EDM1LkLlSXZDpzW4oqPlo+UKbl/FN+gPdWJ39rbEp/mj3HybPdXra7zEqZV8tFNz23W0utL1kK3GpDjUlKA8NbUVrJPEGjMzJOdYte2vJO4K6jDqobEgy5T6EFv5CSDv7aN7gftiPuP/FG+wP2ofcaYuLT6CtlwLSDlXK6EulXuElRSZIBHcaF8gftafuNTrhbJ0NyM5Mb5+dJyPMr7qIyJHl4dXs7uwrvrlffWKHNrcUn+WKtk5yBLS+2e5Q7RSJyHW0utqzQoZir2wi4xf57QzQe0cRRGRyPV4Se2TkrvSKbmdNPPxqedaa+rtWeqsknUtMZPYD7zV1la1rlp7UfiPJabW6sNtpKlHmAFWaOi2MEZgvr+Wr8KEztVkBvNXuebhOW79Wnoo8Oqwk9sm5XflTczpipJzkOntUeuw2vZ3ZpfjXLO+sUObW6FX8tNWme5bpaXkHo7lp7RSJyFoStC80KGYNX5hNwi66cuUNc6f4hxH7q2texjHtWaellDK157k83kWmSWHignor99cpp+aW2FrB58sh40SSST8NnfLTriOC00mVkc86lJCJDqRu1ubqASDmKhXAvNaqz8Ynf399CVluNTIzT5LjZCHOI4GltrbOS0kHyEpKjkkEmocRDZDj+RPBH/ADXKu+n5wZbK96voinFqcWVrOaicyept0xUV3+WrmUK5TxCswdxp5xt9stujNPuqREU0SUHXR2jyY8Zbx+yn7RqMWozeo1x3q4mhJq5zi+dig/Fp3956gUmT0E8/0RV2e2kQJz+n5UCa5EXxLZ3ppMoKSFJVmk1ynvq8u7TY9wPV22UYz2RPQXzGuU99TZxaYOqemvmHV2xWpNaVXKauy9pJB/gHwWqaWc2FnoE5juNcpyq5tJ19u3uV8odh6uzO7Nb3eBSJPSHPUg5vuHtUeqgP6kNpOe4H31Mka0N5Oe9P4/CEqVuBNMwnV/LyQnvqIlmKDshmvis765T31cp5KDHaPpke7q7M7s0vd+VJk9Ic9OHNxZ7z11rXqTEKrlNXZe0llX8I+C1TVNjk6z0Sc09xoSSDvq5MgOF5sdFW8dh/dRDoSkJHCn3tZvV7fIByOYoP5gGpLuuAngPIaVqOJVW3qQrWXrdSlRSdZJyIpEnMc/Ma29F4KGSsiO+ilk8CK2bX2jQQ0O00hxCBkgAVt6VJyFOLU4rWUerZfU30d6a29B/vpSml/KSK2bXaa2bXaaRsk7k5+Nbetv307IUoFKT1Qf5hUh3Xby7/AC2XlN+ia29SV6+r1jUglAB3innC4vPhw6thWq6lVbepK9dzPu+FuQSnpHnFF4KSUncaUMieqiuahVQfpZzWT39Uy9qtJTW34Gtdv7Ca2qOCRQfrb99benJSiClBy7+siuagXW37612/sJrXb+wmtdv7Ca12/sJraN/YTR3nqWFajoNbepC9dzP4W5BKefeKU6FJKTuNKGRI/dPPrMz1mZrM1mazNZmszWZ6/M1mazNZmszWZ6zM/wDweZ8nM9ZmeszNZmszWZrM9fmazNZmszWZrM9XmfJzP/4E/wD/xAAqEQABAwQCAgICAgIDAAAAAAABAAIRAxASMCExIDITQVFgIkBCoFJhcP/aAAgBAgEBPwD/AFJeVypP9PlcoT/6WwSnN4nyAkos2tZ+VgsFgsFgsFgiz8bACUGQsVgsFgsFgsEWkasU5kebRJRYnCP7DBJWCwWCwWCcyOdbBKDEe9QbIWCwWCwWKwRaRsaJWCwWCwWCw1NElYLBYLBYosI/VqLf4ysJ4REGPGiz7QanCDGulSn+RWKIA5KdV/4ouNg4hNq/lAAiQg1VKUjIamtLjATaYaIWCe5rf+yjUJUlSUHkJj2uWKLARBT2FpjQFisQqlPHryZ7BYqsIjZSpZAkoiDGuiJcsFVJaeFm5CqftNhwkINVVmJ1UBMoNT/Y6mNloRbAJXylfKUKv5Ca9hWCwVSnjroiQVgjUIK+Ur5SvlK+Uo6aQlywVUlpgLNyFX8poDhIQaqjMT+qsENAtWbzPi0QItWH8p1U2ZGznBokp7y48+TXFpkJjw4WqsgyNNJmIm1WrH8R50qscGz25DQPCpTx8WewtX+tYEmEBAhVmf5a6Ptav3em7E2rCW6qH2gn+x1U/UJ/qfGnULUDKIkQU5sGNVDo2d2d1H2tW9r0nQ61ccfqjBJF3iW+FFsmb1hInVRENtVfkdDHYm1QS3QwS61R+I00nyItVEO8xZ7sRKa4ESEee09mJ8GewtX0NYXdL43fhfG5UmRybHkQvjcvjd+F8T/xoo+1q3dx3at66qH3Z/sdVP1Cf6nyovgxasPvVQ6NndndR9rVva7e7Vj/AB/VKI5mzXy4i1RsG9MQ1EwJTHSE7kHUOAnmGnVTMtsRB86Pdqx500jDrVuvMWq+qY8tKBBEhEA9p7MTdnsLVvrRTdidFR8DRS9rVu706ccm1Z0mNVH7s/2Oqn6hP9T5BAyJT+WnVR6NviaviaviaviavhaiIOml7Wre16dOOTaq6TH6pS6RMBAwZUqqJE2YJNqruIVE/VnCDoFqvrqo9Wf2fOj92f7HS3u1X101fWzHlpQM9IwRBTm4mzOxatppPkR5TCc6TOil7WLQe18bUAB1Z9SOBro/dndnUz1Cf6nzZ6hHo6qJ7tKlSpUo96aXtYsBPKFNqAA6s+pHA/VRwFUPFqbuIsRBVMfalOMlMMFSqnekFP8AXVT4ClHvzpFSn+2lvalVDxolVOrtdigUYITmwU3tSqv1pYOVKlSps/kaafspWQUpzoReTspfalO71M9QndHzbwE48HVSUo7qfspWQmFKc6EXk/qre1KebNMFSnhBOMC4KfyNLTxrHARMDQwwVKf+dLPypTzolP68GuhAo8qIKlP0t4ClSpUqVKeIOhnalP7TXSLERspqUe9Tek7ryaJKlPPGpilHcztSnnlNdIXaIj9VapR7uDwpUpxk3aeNTSpThoaFKcdINiPMBBTplO68QYU2lO0NhZBSFKm2QUhEg6G9qU7tAwpR52MU6x0iePICFKJk6mqd7VKd2gYUoif1UKfAWnwCnUDoAUqdQN40E6ZR8gbnWDadYsbA2OsKdYR8ItKJ1j+gLGwNj/sD/wD/xAAyEQABBAECBQMEAgAGAwAAAAABAAIDERIEMAUTICExEBVBIiNRYDIzFCRAQnGgUmGB/9oACAEDAQE/AP8AqGxMzeGqeMxvLet0GMIfvMY55poUfD5Hfy7JvDmfJXt8aPDmJ/Dnj+JT4nsNOG/FpZJPATOG/wDkUOHRr2+NO4aPgqTRSs+L229ytRpTGMh42GNLjQXt8ym0z4ay+f8AURxmR2IXt8y9vmR0EydpJR8IgjzuQ6d8t4r2+ZOaWmjtR6KV7Q4L2+Ze3zI6CZHRyj4To3N8jeh0z5RbV7fMvb5l7fMvb5l7fMvb5k5paSDsxROkdi1e3zL2+ZHQTJ2llb8Igjz+r8Niykv8LicFtDx8dUERlkDVqILhLRu6XQOl+p3YKOBkYpoWKpdlSxTomvFOFrVcOLfqj3IonSOxatPw9kfd3crFYqgqCxWKn0TJR+Cp4Hwup2yzyEIw5lFazRmE5N8dem/tag1cVFBv+o0AuYLFYrFYqTTMkH1BarQui+pvcbfCheSLVqf7XbWkb9hqxWKxWKMYPkKXh0b/AB2Kn0skJ+rc4ULY5YrFYrFYoNU/9rv+dnhouZYqlisVJpmSD6gtVoXQ9x3H6twqICIuPypYhIwtKkYWOLT8dPCYPMhRaCtQzCRzdvh+hz+5J4QACkkZE3JxoKfihPaIUn6mV/lyzd+UzUyt8OUPFHjtILUMscoyYVQWv0II5ke1FE6Vwa1abSsgZQVBanXxw9h3Kl4hM/5oIyvPkoSPHgqLXzM+bWm4jHL9LuxVBTQMlbi5ajTugfidhn8gmgYhOY1worW6IwHJvdvVpP7mqguMeG7mi0PPYXFPYWOLTt8O/vCpcTnkjkAYa7Ia6ceHKLisgP1i1BPHM3JpRaCKK12m5Enbwdrg/wDuVBar+521ox/l2qdxZGXDyF7nMhxSX8BN4sf9zVDxGB/Y9ihR7hOjY8U7uFrdGYHWP47fCP4OVKXiUrXloHhe6y/gL3WX8Be6y/gL3WX8BPcXuLjs8L/vVLiM8kctMKbr5x4couKvH8xagmZM3JhRYHCitdpuRJQ8H9Vg+3E1q5i4lH9YePnoAs0oajjDAuYuIt+7l+drSw82Sj4CDwBQUuoETMnKfUPmdbuqGZ8TsmFQasTMyC5i10GD8m+Ds6CIRMyPkrmLW64j7cZ69Fry37cnhcxaqMTx18hEV1t8oSdguYnODhi7uFqtKYjY8dOmNStXMXFHWG7cbC9waFFUbAwLiMVnmt2+HmpwuYuJuuQf8eukmMUoIXMXEvqiv8bXCnVkhItSbldtaR9QNWofcTunS618Jo+E2YOGTVKGyMLXKWMxvLTtcLdTHISKY3Id7hxqcLmLiRuX/wCeuimMUoXMXEvqjDv1SFuTwFzFmp/uRkdGkbb8j8LmLmLW/UwHa0Ywjv5K5i1Uxkf/AOhsQSmJ1rmLUfcjI2IGZPAXMU+owZ22dLqC5mJ+FzFq21JY+etvlCTsppyxuQTJg8WEXBwxcp4eWe3johNSBcxa51gbDIXvFtX+Hk/C5En4Wkj5ducuYnODmlpRgeD4XIk/CGmk/CIrr0hqULmLWm3j1Z/ILmLVyXFW1oHVkhIpjch2tO+omqZ/23dWjnLTgVzFrRdP2tC6mlCRSfzO9ozUi5i1puT1jFvC5i1j7jr9U0/Z1rmJs1uIXMUop3rCcWoy0LUcthPdk0jaa+gAny007UUn0BcxO8nr05okrmKd+TtmF+LlzFqDYHWEHqd9sUchYeyEtiwi4EUU9mJ9YzTguYtQ662IZCwrmLmLmLmLmLmLmKWYhtDYhNPC5inNu9YWYnIrNTyZGtrTOq0JFIbcdqJ9MCe+2nqBooS2LUjsmEbWndQK5iMbD3XKYuUxcpi5UaIo7MBp65inNu9YWY/UVmp5MjX6ox1BZoGjazTzfoFmnOsUmOpZo7Oac6xtMdQWaJs9bHUs042dkLNOdY2M051j0a4hZoutH0BorNPdey1/alms1ms1ms042dhhorNGj5VBBwCzRk22OpZomztNfQRfY62voIv7bTHUs1ms1ms1mjssNFZo0fKoIOAWaMn6rkgb9CaWSCJWXrkgb2ckHbRcstgmlkgb2skDexkgb6Mlkgb9M0DeyTSyWSyWSyWWyVkrWSBvdJpZbeVIO68kHbRNLPfJpZLJZoG/1ZxoK1H6OFhWmOV2mdz6lMPfZd2KtA3skodzsP8ACtRn42Xn4VqPxsWmHv0EWu6DqV2Faj2S6yrVq1atWmOvYf4VqPwnCirpA2NyRWh42nHumnuOpxoK1HtSK0N5/hWo/Cd2KBpA2P1WTx6NFD1cKPqwUPV47odjsyCxfox1dth7vgekbfnZIooJrrHWTQRNoBAUNmPz0ubaqkD6RfOw+/AWDvwsHIgj1wKwP4QDgfGw/wAekfhEWPRjqO5J6DxtO8pvkdTnWfRgobUnoN5/j0j8JzbHow0f1V/coCz0PFhUgLPQ8Kk02NlzaVJrq6i6/CpBt7Tm2qQ7IO6S6kbKpMbWzSYO/U5tqlSj23iwqTW2dt3hUmePR7flUmH423qkPG04d00d+guCJJVJjfnbeqQ3n+FSZ49HN+VSYfj9UpNHTSaOgqk3axVKl3VlWVSpUgK2yFSpC1ZVld1SpBu1SaOsi1imjcIQFbZ8KkPUtVbZCpDaIVKiqVKlSDdxwVKiu67qiqO0VSHqQq/6hv8A/9k="},function(e,t,n){var r,i,o={},a=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=r.apply(this,arguments)),i}),s=function(e,t){return t?t.querySelector(e):document.querySelector(e)},u=function(e){var t={};return function(e,n){if("function"==typeof e)return e();if(void 0===t[e]){var r=s.call(this,e,n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}}(),l=null,c=0,h=[],d=n(219);function f(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=o[r.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](r.parts[a]);for(;a<r.parts.length;a++)i.parts.push(b(r.parts[a],t))}else{var s=[];for(a=0;a<r.parts.length;a++)s.push(b(r.parts[a],t));o[r.id]={id:r.id,refs:1,parts:s}}}}function p(e,t){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],a=t.base?o[0]+t.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function m(e,t){var n=u(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=h[h.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),h.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=u(e.insertAt.before,n);n.insertBefore(t,i)}}function g(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=h.indexOf(e);t>=0&&h.splice(t,1)}function y(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var r=n.nc;r&&(e.attrs.nonce=r)}return v(t,e.attrs),m(e,t),t}function v(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function b(e,t){var n,r,i,o;if(t.transform&&e.css){if(!(o="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=o}if(t.singleton){var a=c++;n=l||(l=y(t)),r=w.bind(null,n,a,!1),i=w.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",v(t,e.attrs),m(e,t),t}(t),r=_.bind(null,n,t),i=function(){g(n),n.href&&URL.revokeObjectURL(n.href)}):(n=y(t),r=S.bind(null,n),i=function(){g(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=p(e,t);return f(n,t),function(e){for(var r=[],i=0;i<n.length;i++){var a=n[i];(s=o[a.id]).refs--,r.push(s)}for(e&&f(p(e,t),t),i=0;i<r.length;i++){var s;if(0===(s=r[i]).refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete o[s.id]}}}};var A,E=(A=[],function(e,t){return A[e]=t,A.filter(Boolean).join("\n")});function w(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=E(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function S(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function _(e,t,n){var r=n.css,i=n.sourceMap,o=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||o)&&(r=d(r)),i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var i,o=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?e:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")}))}},function(e,t,n){const r='\x3c!-- https://freesound.org/people/deleted_user_2731495/sounds/183881/ --\x3e\n<audio id="introSong" ></audio>\n\n\n\n\n<a-scene\n  bind__beat-generator="challengeId: challenge.id; difficulty: challenge.difficulty; gameMode: gameMode; has3DOFVR: has3DOFVR; hasSongLoadError: hasSongLoadError; isPlaying: isPlaying; isZipFetching: isZipFetching; menuSelectedChallengeId: menuSelectedChallenge.id; songDuration: challenge.songDuration; speed: speed"\n  bind__beat-system="gameMode: gameMode; hasVR: hasVR; isLoading: isLoading; isPlaying: isPlaying"\n  bind__gameover="isGameOver: isGameOver"\n  bind__intro-song="isPlaying: menuActive && !menuSelectedChallenge.id; isSearching: isSearching"\n  bind__leaderboard="difficulty: menuSelectedChallenge.difficulty || challenge.difficulty; gameMode: gameMode; inVR: inVR; isVictory: isVictory; menuSelectedChallengeId: menuSelectedChallenge.id; challengeId: challenge.id"\n  bind__search="difficultyFilter: difficultyFilter; genre: genre; playlist: playlist; query: search.query"\n  bind__song="audio: challenge.audio; challengeId: challenge.id; isLoading: isLoading; isPlaying: isPlaying; isBeatsPreloaded: challenge.isBeatsPreloaded; isGameOver: isGameOver; isVictory: isVictory"\n  bind__song-preview-system="previewStartTime: menuSelectedChallenge.previewStartTime; selectedChallengeId: menuSelectedChallenge.id"\n  bind__stage-colors="colorScheme: colorScheme"\n  bind__tunnels="isPlaying: isPlaying; songDuration: challenge.songDuration"\n  bind__zip-loader="difficulties: menuDifficulties; isLoading: isLoading; version: menuSelectedChallenge.version"\n  animation__gameover="property: object3D.background; type: color; to: #750000; startEvents: gameover"\n  console-shortcuts\n  debug-beat-generator\n  debug-beat-positioning\n  debug-controller\n  debug-intro\n  debug-song-time\n  debug-state\n  hack\n  gpu-preloader\n  \n  leaderboard="apiKey: AIzaSyAilakXLvMgwPcBcHs3oys51eLp4yrfz0w; authDomain: moonrider-prod.firebaseapp.com; databaseURL: https://moonrider-prod.firebaseio.com; projectId: moonrider-prod; storageBucket: moonrider-prod.appspot.com; messagingSenderId: 172125624222"\n  loading-screen="backgroundColor: #000"\n  pool__beat-arrow-blue="mixin: arrowBlueBeat; size: 30; container: #beatContainer; dynamic: true"\n  pool__beat-arrow-red="mixin: arrowRedBeat; size: 30; container: #beatContainer; dynamic: true"\n  pool__beat-dot-blue="mixin: dotBlueBeat; size: 30; container: #beatContainer; dynamic: true"\n  pool__beat-dot-red="mixin: dotRedBeat; size: 30; container: #beatContainer; dynamic: true"\n  pool__beat-mine="mixin: mine; size: 30; container: #beatContainer"\n  pool__plume-arrow-blue="mixin: arrowBluePlume; size: 30; container: #beatContainer; dynamic: true"\n  pool__plume-arrow-red="mixin: arrowRedPlume; size: 30; container: #beatContainer; dynamic: true"\n  pool__plume-dot-blue="mixin: dotBluePlume; size: 30; container: #beatContainer; dynamic: true"\n  pool__plume-dot-red="mixin: dotRedPlume; size: 30; container: #beatContainer; dynamic: true"\n  pool__plume-mine="mixin: minePlume; size: 12; container: #beatContainer; dynamic: true"\n  pool__beat-broken-blue="mixin: blueBeatBroken; size: 10; container: #rigContainer; dynamic: true"\n  pool__beat-broken-red="mixin: redBeatBroken; size: 10; container: #rigContainer; dynamic: true"\n  pool__beat-broken-blue-dot="mixin: blueDotBroken; size: 10; container: #rigContainer; dynamic: true"\n  pool__beat-broken-red-dot="mixin: redDotBroken; size: 10; container: #rigContainer; dynamic: true"\n  pool__punch-broken-blue-dot="mixin: blueDotPunchBroken; size: 10; container: #rigContainer; dynamic: true"\n  pool__punch-broken-red-dot="mixin: redDotPunchBroken; size: 10; container: #rigContainer; dynamic: true"\n  pool__beat-broken-mine="mixin: mineBroken; size: 10; container: #rigContainer; dynamic: true"\n  pool__beat-fx-blue="mixin: blueBeatFX; size: 10; container: #rigContainer; dynamic: true"\n  pool__beat-fx-red="mixin: redBeatFX; size: 10; container: #rigContainer; dynamic: true"\n  pool__beat-fx-mine="mixin: mineFX; size: 12; container: #rigContainer; dynamic: true"\n  pool__punch-fx-blue="mixin: bluePunchFX; size: 10; container: #rigContainer; dynamic: true"\n  pool__punch-fx-red="mixin: redPunchFX; size: 10; container: #rigContainer; dynamic: true"\n  pool__punch-fx-mine="mixin: yellowPunchFX; size: 12; container: #rigContainer; dynamic: true"\n  pool__tunnels="mixin: tunnel; size: 10; container: #tunnelsContainer; dynamic: true"\n  pool__wall="mixin: wall; size: 20; container: #wallContainer; dynamic: true"\n  proxy-event__cleargame1="event: gamemenuexit; as: cleargame; to: a-scene"\n  proxy-event__cleargame2="event: gamemenurestart; as: cleargame; to: a-scene"\n  proxy-event__cleargame3="event: songcomplete; as: cleargame; to: a-scene"\n  proxy-event__pausegame="event: pausegame; as: textglowoff; to: a-scene"\n  proxy-event__resumegame="event: gamemenuresume; as: textglownormal; to: a-scene"\n  play-sound__crescendo="sound: #crescendo; event: victory; volume: 0.75"\n  render-order="stage, aurora, sideglow, tunnel, curve, curveshadow, beatShadow, score, beats, menu, menuitem, menubutton, menutext, menugenre, cursor, particles, weapon, victory, stepback"\n  stats-param\n  tunnels\n  vr-mode-ui="enterVRButton: #vrButton">\n\n  <a-assets timeout="3000">\n    \x3c!-- <require path="C:UsersQuitterieDesktopQUITTERIE\facL3StageApterostageelyamoonrider-mastersrcassets.html"> --\x3e\n<a-asset-item id="VigaRegularThree" src="assets/fonts/Viga-Regular-Three.json"></a-asset-item>\n\n<a-asset-item id="arrowredObj" src="assets/models/arrowred.obj"></a-asset-item>\n<a-asset-item id="arrowblueObj" src="assets/models/arrowblue.obj"></a-asset-item>\n<a-asset-item id="beatObj" src="assets/models/beat.obj"></a-asset-item>\n<a-asset-item id="laserObj" src="assets/models/laser/laser.obj"></a-asset-item>\n\n<a-asset-item id="tunnelObj" src="assets/models/tunnel.obj"></a-asset-item>\n<a-asset-item id="redBeatObj" src="assets/models/redbeat.obj"></a-asset-item>\n<a-asset-item id="blueBeatObj" src="assets/models/bluebeat.obj"></a-asset-item>\n<a-asset-item id="dotRedObj" src="assets/models/dotred.obj"></a-asset-item>\n<a-asset-item id="dotBlueObj" src="assets/models/dotblue.obj"></a-asset-item>\n<a-asset-item id="backGlowObj" src="assets/models/backglow.obj"></a-asset-item>\n<a-asset-item id="aurorasObj" src="assets/models/auroras.obj"></a-asset-item>\n<a-asset-item id="merkabaObj" src="assets/models/merkaba.obj"></a-asset-item>\n<a-asset-item id="ringsObj" src="assets/models/rings.obj"></a-asset-item>\n<a-asset-item id="homeObj" src="assets/models/home.obj"></a-asset-item>\n<a-asset-item id="homeShadowObj" src="assets/models/homeshadow.obj"></a-asset-item>\n<a-asset-item id="weaponObj" src="assets/models/weapon.obj"></a-asset-item>\n<a-asset-item id="weaponHandleObj" src="assets/models/weaponhandle.obj"></a-asset-item>\n<a-asset-item id="weaponGlowObj" src="assets/models/weaponglow.obj"></a-asset-item>\n<a-asset-item id="beatBrokenObj" src="assets/models/beatbroken.obj"></a-asset-item>\n<a-asset-item id="dotBrokenObj" src="assets/models/dotbroken.obj"></a-asset-item>\n<a-asset-item id="dotPunchBrokenObj" src="assets/models/dotbroken.gltf"></a-asset-item>\n<a-asset-item id="cutfxObj" src="assets/models/cutfx.obj"></a-asset-item>\n<a-asset-item id="punchfxObj" src="assets/models/punchfx.obj"></a-asset-item>\n<a-asset-item id="leftFistObj" src="assets/models/leftfist.obj"></a-asset-item>\n<a-asset-item id="leftFistWeaponObj" src="assets/models/leftfistweapon.obj"></a-asset-item>\n<a-asset-item id="rightFistObj" src="assets/models/rightfist.obj"></a-asset-item>\n<a-asset-item id="rightFistWeaponObj" src="assets/models/rightfistweapon.obj"></a-asset-item>\n<a-asset-item id="plumeObj" src="assets/models/plume.obj"></a-asset-item>\n\n<a-asset-item id="mineObj" src="assets/models/mine.obj"></a-asset-item>\n<a-asset-item id="mineBrokenObj" src="assets/models/minebroken.gltf"></a-asset-item>\n\n\x3c!--\n https://freesound.org/people/juskiddink/sounds/70043/\n https://freesound.org/people/Robinhood76/sounds/337436/\n--\x3e\n<audio id="confirmSound" src="assets/sounds/beatHit.ogg"></audio>\n<audio id="clearSound" src="assets/sounds/clear.ogg"></audio>\n<audio id="hoverSound" src="assets/sounds/hover.ogg"></audio>\n<audio id="victorySound" src="assets/sounds/victory.ogg"></audio>\n<audio id="crescendo" src="assets/sounds/crescendo.ogg"></audio>\n\n\n<audio id="hitSound1" src="assets/sounds/hit1.ogg"></audio>\n<audio id="hitSound1left" src="assets/sounds/hit1left.ogg"></audio>\n<audio id="hitSound1right" src="assets/sounds/hit1right.ogg"></audio>\n\n<audio id="hitSound2" src="assets/sounds/hit2.ogg"></audio>\n<audio id="hitSound2left" src="assets/sounds/hit2left.ogg"></audio>\n<audio id="hitSound2right" src="assets/sounds/hit2right.ogg"></audio>\n\n<audio id="hitSound3" src="assets/sounds/hit3.ogg"></audio>\n<audio id="hitSound3left" src="assets/sounds/hit3left.ogg"></audio>\n<audio id="hitSound3right" src="assets/sounds/hit3right.ogg"></audio>\n\n<audio id="hitSound4" src="assets/sounds/hit4.ogg"></audio>\n<audio id="hitSound4left" src="assets/sounds/hit4left.ogg"></audio>\n<audio id="hitSound4right" src="assets/sounds/hit4right.ogg"></audio>\n\n<audio id="hitSound5" src="assets/sounds/hit5.ogg"></audio>\n<audio id="hitSound5left" src="assets/sounds/hit5left.ogg"></audio>\n<audio id="hitSound5right" src="assets/sounds/hit5right.ogg"></audio>\n\n<audio id="hitSound6" src="assets/sounds/hit6.ogg"></audio>\n<audio id="hitSound6left" src="assets/sounds/hit6left.ogg"></audio>\n<audio id="hitSound6right" src="assets/sounds/hit6right.ogg"></audio>\n\n<audio id="hitSound7" src="assets/sounds/hit7.ogg"></audio>\n<audio id="hitSound7left" src="assets/sounds/hit7left.ogg"></audio>\n<audio id="hitSound7right" src="assets/sounds/hit7right.ogg"></audio>\n\n<audio id="hitSound8" src="assets/sounds/hit8.ogg"></audio>\n<audio id="hitSound8left" src="assets/sounds/hit8left.ogg"></audio>\n<audio id="hitSound8right" src="assets/sounds/hit8right.ogg"></audio>\n\n<audio id="hitSound9" src="assets/sounds/hit9.ogg"></audio>\n<audio id="hitSound9left" src="assets/sounds/hit9left.ogg"></audio>\n<audio id="hitSound9right" src="assets/sounds/hit9right.ogg"></audio>\n\n<audio id="hitSound10" src="assets/sounds/hit10.ogg"></audio>\n<audio id="hitSound10left" src="assets/sounds/hit10left.ogg"></audio>\n<audio id="hitSound10right" src="assets/sounds/hit10right.ogg"></audio>\n\n\n<img id="cursorMeshImg" src="assets/models/laser/laser.png">\n<img id="downIconImg" src="assets/img/downIcon.png">\n<img id="envmapTemplateImg" src="assets/img/envmap.png">\n<img id="envmapImg">\n<img id="favoriteImg" src="assets/img/favorite.png">\n<img id="sliceImg" src="assets/img/slice.png">\n<img id="stepbackImg" src="assets/img/stepback.png">\n<img id="soundboxingImg" src="assets/img/soundboxing.jpg">\n<img id="genresImg" src="assets/img/genres.png">\n<img id="starImg" src="assets/img/star.png">\n<img id="merkabaBloomImg" src="assets/img/merkababloom.png">\n<img id="homeShadowImg" src="assets/img/homeshadow.jpg">\n<img id="backGlowImg" src="assets/img/backglow.png">\n<img id="weaponImg" src="assets/img/weapon.jpg">\n<img id="weapon2Img" src="assets/img/weapon2.jpg">\n<img id="weaponHandleImg" src="assets/img/weaponhandle.png">\n<img id="difficultyImg" src="assets/img/difficulty.png">\n<img id="selectedImg" src="assets/img/selected.png">\n<img id="cutfxImg" src="assets/img/cutfx.png">\n\x3c!--\n<img id="cutFxTemplateImg" src="assets/img/cutfx.png">\n<img id="cutFxImg">\n--\x3e\n<img id="minefxImg" src="assets/img/minefx.png">\n<img id="sideglowImg" src="assets/img/sideglow.png">\n<img id="logoImg" src="assets/img/logo.png">\n<img id="moonImg" src="assets/img/moon.png">\n<img id="plumeImg" src="assets/img/plume.png">\n<img id="tubeImg" src="assets/img/tube.png">\n<img id="tubeColorImg" src="assets/img/tube.jpg">\n<img id="handStarTrailImg" src="assets/img/handstartrail.png">\n\n<img id="modeRideImg" src="assets/img/moderide.jpg">\n<img id="modeClassicImg" src="assets/img/modeclassic.jpg">\n<img id="modePunchImg" src="assets/img/modepunch.jpg">\n<img id="modeViewerImg" src="assets/img/modeviewer.jpg">\n\n<a-mixin id="slice" slice9="color: #050505; transparent: true; opacity: 0.9; src: #sliceImg; left: 50; right: 52; top: 50; bottom: 52; padding: 0.18"></a-mixin>\n<a-mixin id="font" text="font: assets/fonts/Viga-Regular.json; shader: msdf; letterSpacing: 1"></a-mixin>\n\n<a-mixin id="superKeyboardTextInput" mixin="font"></a-mixin>\n\n<a-mixin id="beat"></a-mixin>\n<a-mixin id="beatBlock"></a-mixin>\n<a-mixin id="beatSign"></a-mixin>\n\n<a-mixin id="arrowBlueBeat" mixin="beat" beat="color: blue; type: arrow"></a-mixin>\n<a-mixin id="arrowRedBeat" mixin="beat" beat="color: red; type: arrow"></a-mixin>\n<a-mixin id="dotBlueBeat" mixin="beat" beat="color: blue; type: dot"></a-mixin>\n<a-mixin id="dotRedBeat" mixin="beat" beat="color: red; type: dot"></a-mixin>\n<a-mixin id="mine" mixin="beat" beat="type: mine"></a-mixin>\n<a-mixin id="beatShadow" mixin="beat" geometry="primitive: plane; width: 0.7; height: 0.6" rotation="-90 0 0" material="src: #minefxImg; shader: flat; color: #000; transparent: true; opacity: 0.2" render-order="beatShadow"></a-mixin>\n\n<a-mixin id="plume" plume obj-model="obj: #plumeObj"></a-mixin>\n<a-mixin id="arrowBluePlume" mixin="plume" plume="type: arrow; color: blue" materials="name: arrowBluePlume"></a-mixin>\n<a-mixin id="arrowRedPlume" mixin="plume" plume="type: arrow; color: red" materials="name: arrowRedPlume"></a-mixin>\n<a-mixin id="dotBluePlume" mixin="plume" plume="type: dot; color: blue" materials="name: dotBluePlume"></a-mixin>\n<a-mixin id="dotRedPlume" mixin="plume" plume="type: dot; color: red" materials="name: dotRedPlume"></a-mixin>\n<a-mixin id="minePlume" mixin="plume" plume="type: mine" materials="name: minePlume"></a-mixin>\n\n<a-mixin\n  id="superCut"\n  bind__supercutfx="colorPrimary: colorPrimary; colorSecondary: colorSecondary"\n  supercutfx\n  geometry="primitive: plane; width: 3; height: 3"\n  material="shader: superCutFxShader; transparent: true; depthWrite: false"></a-mixin>\n\n<a-mixin\n  id="redBeatBroken"\n  obj-model="obj: #beatBrokenObj"\n  beat-cut-fx="color: red"\n  render-order="beats"></a-mixin>\n<a-mixin\n  id="blueBeatBroken"\n  obj-model="obj: #beatBrokenObj"\n  beat-cut-fx="color: blue"\n  render-order="beats"></a-mixin>\n<a-mixin\n  id="redDotBroken"\n  obj-model="obj: #dotBrokenObj"\n  beat-cut-fx="color: red; type: dot"\n  render-order="beats"></a-mixin>\n<a-mixin\n  id="blueDotBroken"\n  obj-model="obj: #dotBrokenObj"\n  beat-cut-fx="color: blue; type: dot"\n  render-order="beats"></a-mixin>\n\n<a-mixin\n  id="redDotPunchBroken"\n  gltf-model="#dotPunchBrokenObj"\n  beat-cut-fx="color: red; type: dot"\n  render-order="beats"></a-mixin>\n<a-mixin\n  id="blueDotPunchBroken"\n  gltf-model="#dotPunchBrokenObj"\n  beat-cut-fx="color: blue; type: dot"\n  render-order="beats"></a-mixin>\n\n<a-mixin\n  id="redBeatFX"\n  bind__material="color: colorPrimary"\n  obj-model="obj: #cutfxObj"\n  material="shader: cutfxShader; progress: 1"\n  render-order="menu"\n  animation="property: components.material.material.uniforms.progress.value; from: 0; to: 1; dur: 400; loop: false; easing: linear; startEvents: explode"></a-mixin>\n\n<a-mixin\n  id="blueBeatFX"\n  bind__material="color: colorSecondary"\n  obj-model="obj: #cutfxObj"\n  material="shader: cutfxShader; progress: 1"\n  render-order="menu"\n  animation="property: components.material.material.uniforms.progress.value; from: 0; to: 1; dur: 400; loop: false; easing: linear; startEvents: explode"></a-mixin>\n\n<a-mixin\n  id="mineBroken"\n  gltf-model="#mineBrokenObj"\n  beat-cut-fx="type: mine"\n  render-order="beats"></a-mixin>\n\n<a-mixin\n  id="mineFX"\n  geometry="primitive: plane; width: 0.6; height: 0.6"\n  material="shader: flat; transparent: true; src: #minefxImg; color: #fff568; depthWrite: false"\n  render-order="menu"\n  animation="property: components.material.material.opacity; from:1; to:0; dur: 400; loop: false; easing: linear; startEvents: explode"></a-mixin>\n\n<a-mixin\n  id="redPunchFX"\n  bind__material="color: colorPrimary"\n  obj-model="obj: #punchfxObj"\n  material="shader: cutfxShader; progress: 1"\n  render-order="menu"\n  animation="property: components.material.material.uniforms.progress.value; from: 0; to: 1; dur: 600; loop: false; easing: linear; startEvents: explode"></a-mixin>\n\n<a-mixin\n  id="bluePunchFX"\n  bind__material="color: colorSecondary"\n  obj-model="obj: #punchfxObj"\n  material="shader: cutfxShader; progress: 1"\n  render-order="menu"\n  animation="property: components.material.material.uniforms.progress.value; from: 0; to: 1; dur: 600; loop: false; easing: linear; startEvents: explode"></a-mixin>\n\n<a-mixin\n  bind__material="color: colorTertiary"\n  id="yellowPunchFX"\n  obj-model="obj: #punchfxObj"\n  material="shader: cutfxShader; progress: 1"\n  render-order="menu"\n  animation="property: components.material.material.uniforms.progress.value; from: 0; to: 1; dur: 600; loop: false; easing: linear; startEvents: explode"></a-mixin>\n\n<a-mixin\n  id="wall"\n  material="shader: wallShader; transparent: true; side: double; opacity: 0"\n  animation__fadein="property: components.material.material.uniforms.opacity.value; from: 0; to: 1; easing: easeInCubic; autoplay: false; dur: 1500"\n  animation__scalein="property: object3D.position.y; from: -5; to: 0; easing: easeInOutElastic; autoplay: false; dur: 1500"\n  render-order\n  wall></a-mixin>\n\n<a-mixin\n  id="tunnel"\n  obj-model="obj: #tunnelObj"\n  materials="name: tunnel"></a-mixin>\n\n<a-mixin\n  id="bigMenuButton"\n  geometry="primitive: plane; width: 1.15; height: 0.23"\n  material="shader: panelShader; brightness: 0.5; borderWidth: 0.05; ratio: 4; borderRadius: 0.6"\n  animation__mouseenter1="property: components.material.material.uniforms.activePanel.value; from: 0; to: 1; startEvents: mouseenter; pauseEvents: mouseleave; dur: 100"\n  animation__mouseleave1="property: components.material.material.uniforms.activePanel.value; from: 1; to: 0; startEvents: mouseleave; pauseEvents: mouseenter; dur: 100"\n  animation__mouseenter2="property: scale; from: 1 1 1; to: 1.04 1.04 1.04; startEvents: mouseenter; pauseEvents: mouseleave; dur: 80"\n  animation__mouseleave2="property: scale; to: 1 1 1; from: 1.04 1.04 1.04; startEvents: mouseleave; pauseEvents: mouseenter; dur: 80"\n  render-order="menubutton"></a-mixin>\n\n<a-mixin id="cancelSoundUI" play-sound__cancel="event: click; sound: #clearSound; volume: 0.5"></a-mixin>\n<a-mixin id="clickSoundUI" play-sound__click="event: click; sound: #confirmSound; volume: 0.25"></a-mixin>\n<a-mixin id="hoverSoundUI" play-sound__hover="event: mouseenter; sound: #hoverSound; volume: 0.1"></a-mixin>\n\x3c!-- </require> --\x3e</require>\n  </a-assets>\n\n  <a-entity id="beatObjTemplate" obj-model="obj: #beatObj" visible="false"></a-entity>\n  <a-entity id="redBeatObjTemplate" obj-model="obj: #redBeatObj" visible="false"></a-entity>\n  <a-entity id="blueBeatObjTemplate" obj-model="obj: #blueBeatObj" visible="false"></a-entity>\n  <a-entity id="dotRedObjTemplate" obj-model="obj: #dotRedObj" visible="false"></a-entity>\n  <a-entity id="dotBlueObjTemplate" obj-model="obj: #dotBlueObj" visible="false"></a-entity>\n  <a-entity id="mineObjTemplate" obj-model="obj: #mineObj" visible="false"></a-entity>\n  <a-entity id="cursorLaser" obj-model="obj: #laserObj" visible="false"></a-entity>\n\n  \x3c!-- <require path="C:UsersQuitterieDesktopQUITTERIE\facL3StageApterostageelyamoonrider-mastersrc\templatesloading.html"> --\x3e\n<a-entity\n  id="loadingSongInfoContainer"\n  bind__animation__scale="enabled: isLoading"\n  bind__visible="isLoading"\n  animation__scale="property: scale; from: 1 1 1; to: 1.05 1.05 1.05; dir: alternate; loop: true; dur: 1200; easing: easeInOutCubic"\n  position="0 1.5 -2">\n\n  <a-entity\n    id="loadingMenuBackground"\n    bind-toggle__raycastable="isLoading"\n    render-order="menu"\n    geometry="primitive: plane; width: 1.15; height: 1.2"\n    material="shader: panelShader; ratio: 1.15; borderRadius: 0.4"\n    position="0 0 -0.03"></a-entity>\n\n  <a-entity id="loadingSongImage"\n    copy-texture="from: #menuSelectedChallengeImage"\n    geometry="primitive: plane; buffer: false; skipCache: true; height: 0.3; width: 0.3"\n    material="shader: flat; transparent: false"\n    position="0 0.24 0"\n    render-order="menu"></a-entity>\n\n  <a-entity id="loadingSongInfo">\n    <a-entity\n      position="0 -0.05 0"\n      mixin="font"\n      bind__text="color: colorSecondary"\n      bind__text-truncate="value: challenge.songSubName + \' - \' + challenge.author + \' - \' + challenge.difficulty"\n      text="wrapCount: 40; align: center"\n      text-truncate="length: 35"\n      render-order="menutext"></a-entity>\n\n    <a-entity position="0 -0.13 0"\n      mixin="font"\n      text="align: center; color: #FFF; wrapCount: 21; baseline: top; lineHeight: 36; width: 0.81"\n      bind__text="value: challenge.songNameShort"\n      render-order="menutext"></a-entity>\n\n    <a-entity\n      id="loadingText"\n      mixin="font"\n      bind__animation__color="enabled: isLoading"\n      bind__text="color: colorPrimary; value: loadingText; wrapCount: hasSongLoadError && 24 || 18"\n      bind__visible="isLoading"\n      text="align: center; wrapCount: 18; width: 0.65"\n      render-order="menutext"\n      position="0 -0.32 0.001"></a-entity>\n\n    <a-entity\n      id="zipLoaderIndicator"\n      bind__material="color: colorPrimary"\n      bind__visible="isZipFetching"\n      geometry="primitive: plane; height: 0.1; width: 0.1"\n      material="shader: ring; radiusInner: 0.2; radiusOuter: 0.9; progress: 0; transparent: true"\n      render-order="menuitem"\n      position="0 -0.4 0.002">\n    </a-entity>\n\n    <a-entity\n      id="songProcessingIndicator"\n      bind__animation__spin="enabled: isSongProcessing"\n      bind__material="color: colorPrimary"\n      bind__visible="isSongProcessing"\n      animation__spin="property: object3D.rotation.z; from: 0; to: -360; easing: linear; dur: 1000; loop: true"\n      geometry="primitive: plane; height: 0.15; width: 0.15"\n      material="shader: ring; radiusInner: 0.2; radiusOuter: 0.4; transparent: true; progress: 0.2"\n      render-order="menutext"\n      position="0 -0.4 0.004"\n      visible="false">\n    </a-entity>\n\n    <a-entity\n      id="loadingCancelButton"\n      mixin="bigMenuButton"\n      bind-toggle__raycastable="isLoading"\n      position="0 -0.67 0.01"\n      proxy-event="event: click; to: a-scene; as: songloadcancel">\n      <a-entity mixin="font" text="align: center; color: #FAFAFA; wrapCount: 20; value: CANCEL" position="0 -0.065 0.001"></a-entity>\n    </a-entity>\n  </a-entity>\n</a-entity>\n\x3c!-- </require> --\x3e</require>\n  \x3c!-- <require path="C:UsersQuitterieDesktopQUITTERIE\facL3StageApterostageelyamoonrider-mastersrc\templatesstage.html"> --\x3e\n<a-entity\n  id="audioAnalyser"\n  audioanalyser="fftSize: 32; enableBeatDetection: false; enableLevels: false; enableWaveform: false; enableVolume: false"></a-entity>\n\n<a-entity id="stage" no-frustum-cull follow-z="target: #curveFollowRig">\n  <a-entity\n    id="backglow"\n    obj-model="obj: #backGlowObj"\n    materials="name: backglow"\n    render-order="stage"></a-entity>\n\n  <a-entity\n    id="rings"\n    obj-model="obj: #ringsObj"\n    materials="name: rings"\n    position="0 0 -1500"\n    render-order="stage"></a-entity>\n\n  <a-entity\n    id="auroras"\n    class="aurora"\n    obj-model="obj: #aurorasObj"\n    materials="name: aurora"\n    render-order="aurora"></a-entity>\n\n  <a-entity\n    id="merkaba"\n    obj-model="obj: #merkabaObj"\n    bind__visible="!isVictory && !isGameOver"\n    materials="name: merkaba"\n    animation="property: rotation; from: 0 0 0; to: 360 360 360; dur: 50000; easing: linear; loop: true"\n    position="0 46 -1500"></a-entity>\n\n  <a-entity\n    class="merkababloom"\n    geometry="primitive: plane; width: 200; height: 200"\n    material="shader: flat; src: #merkabaBloomImg; blending: additive; depthTest: false; color: #888"\n    position="0 46 -1400"\n    render-order="stage"></a-entity>\n\n  <a-entity\n    class="merkababloom"\n    bind__material="color: colorTertiary"\n    geometry="primitive: plane; width: 250; height: 250"\n    animation="property: object3D.rotation.z; from: 0; to: 360; loop: true; easing: linear; dur: 30000"\n    material="shader: flat; src: #merkabaBloomImg; blending: additive; depthTest: false"\n    position="0 46 -1380"\n    render-order="stage"></a-entity>\n\n  <a-entity\n    id="moon"\n    geometry="primitive: plane; width: 1000; height: 500"\n    position="0 1000 -1000"\n    rotation="45 0 0"\n    materials="name: moon"\n    ></a-entity>\n\n  <a-entity class="stars" stars render-order="particles"></a-entity>\n\n  \x3c!-- <require path="C:UsersQuitterieDesktopQUITTERIE\facL3StageApterostageelyamoonrider-mastersrc\templatesintro.html"> --\x3e\n\n<a-entity\n  id="mainLogo"\n  geometry="primitive: plane; width: 9; height: 1.125"\n  material="shader: flat; src: #logoImg; transparent: true; depthTest: false; blending: additive; opacity: 0"\n  position="0 3.3 -2.5"\n  rotation="0 0 0"\n  scale="0.8 0.8 0.8"\n  bind__visible="introActive || menuActive"\n  animation__opacity="property: components.material.material.opacity; from: 0; to: 1; dur: 2000; delay: 1000"\n  animation__position="property: object3D.position.y; to: 3.4; dur: 2000; easing: easeInOutQuad; startEvents: startgame"></a-entity>\n\n<a-entity\n  id="startButton"\n  bind__visible-raycastable="introActive"\n  geometry="primitive: plane; width: 1; height: 0.35"\n  position="0 1.6 -2.2"\n  render-order="menu"\n  proxy-event="event: click; to: a-scene, #menu, #mainlogo, #menuTopButtons, #menuBackground; as: startgame"\n  delayed-proxy-event="event: click; to: a-scene; as: menuopeningend; delay: 1800"\n  mixin="bigMenuButton"\n  play-sound__hover="event: mouseenter; sound: #hoverSound; volume: 0.1"\n  play-sound__click="event: click; sound: #confirmSound;  volume: 0.25"\n  material="ratio: 3; opacity: 0"\n  animation="property: components.material.material.uniforms.opacity.value; from: 0; to: 1; dur: 500; delay: 3000">\n  <a-entity\n    id="startButtonLabel"\n    mixin="font"\n    text="value: BEGIN; color: #f0f0f0; align: center; width: 1; wrapCount: 12; opacity: 0"\n    position="0 -0.1 0.01"\n    animation="property: components.text.material.uniforms.opacity.value; from: 0; to: 1; dur: 500; delay: 3500"\n    ></a-entity>      \n</a-entity> \n\n\n\n\n\n\x3c!-- </require> --\x3e</require>\n</a-entity>\n\x3c!-- </require> --\x3e</require>\n  \x3c!-- <require path="C:UsersQuitterieDesktopQUITTERIE\facL3StageApterostageelyamoonrider-mastersrc\templatesmenu.html"> --\x3e\n\n \x3c!-- Macro is a templating function. It is rendered into the HTML below with searchResults(). --\x3e\n \n\n\n <template id="searchResultTemplate">\n   <a-entity\n     class="searchResult"\n     bind-item__data-id="item.id"\n     bind-item__data-index="item.index">\n     \x3c!--Permet de cliquer pour choisir une chanson--\x3e\n     <a-entity\n       class="searchResultBackground"\n       bind-item__active-item="active: menuSelectedChallenge.id === item.id"\n       bind-item__animation__mouseenter="enabled: menuSelectedChallenge.id !== item.id"\n       bind-item__animation__mouseleave="enabled: menuSelectedChallenge.id !== item.id"\n       bind-toggle__raycastable="mainMenuActive || isSearching"\n       bind__material="color: colorPrimary"\n       animation__mouseenter="property: components.material.material.opacity; to: 0.4; startEvents: mouseenter; pauseEvents: mouseleave; dur: 75; delay: 1"\n       animation__mouseleave="property: components.material.material.opacity; to: 0.0; startEvents: mouseleave; pauseEvents: mouseenter; dur: 75"\n       geometry="primitive: plane; width: 1.1; height: 0.2"\n       material="shader: flat; transparent: true; opacity: 0.0; src: #selectedImg"\n       position="0 -0.13 -0.002"\n       play-sound="event: mouseenter; sound: #hoverSound; volume: 0.03"\n       render-order="menuitem">\n     </a-entity>\n     \n   </a-entity>\n </template>\n\n\n\x3c!-- Menu container begins here. --\x3e\n<a-entity\n id="menu"\n bind__visible="menuActive"\n position="0 1.4 -2.3"\n animation__position="property: object3D.position.z; to: -2; dur: 1500; easing: easeInOutCubic; delay: 300; startEvents: startgame">\n\n <a-entity\n   id="menuBackground"\n   bind__menu-midsection="active: !!menuSelectedChallenge.id && (mainMenuActive || difficultyFilterMenuOpen) || difficultyFilterMenuOpen; selectedChallenge: menuSelectedChallenge.id"\n   bind-toggle__raycastable="menuActive || genreMenuOpen || isSearching || difficultyFilterMenuOpen"\n   geometry="primitive: plane; width: 3.4; height: 1.82"\n   material="shader: panelShader; ratio: 1.86; opacity: 0"\n   animation__opacity="property: components.material.material.uniforms.opacity.value; from: 0; to: 1; dur: 1000; delay: 300; startEvents: startgame"\n   animation__midsectionshow="property: components.material.material.uniforms.midSection.value; from: 0; to: 1; dur: 160; startEvents: showdifficultysection; easing: easeOutCubic"\n   animation__midsectionhide="property: components.material.material.uniforms.midSection.value; from: 1: to: 0; dur: 160; startEvents: hidedifficultysection; easing: easeOutCubic"\n   render-order="menu"\n   position="0 0 -0.005"></a-entity>\n\n <a-entity id="mainMenu" bind__visible="mainMenuActive && !isMenuOpening || isSearching">\n   \n   <a-entity id="searchResultsContainer" position="0 0 0.001"\n     class="menuAnimation"\n     bind__menu-slide-animation="isSearching: isSearching; menuSelectedChallengeId: menuSelectedChallenge.id"\n     animation__menuleft="property: object3D.position.x; to: -0.79; dur: 200; easing: easeOutCubic; autoplay: false"\n     animation__menuright="property: object3D.position.x; from: -0.79; to: 0; dur: 200; easing: easeOutCubic; autoplay: false">\n\n     \n \x3c!-- TODO: Sort the layout based on the IDs. --\x3e\n \n <a-entity id="searchResultList"\n           bind-for="for: item; in: searchResultsPage; key: id; template: #searchResultTemplate; updateInPlace: true; pool: 6; delay: 25"\n           layout="type: box; columns: 1; marginRow: -0.2; orderAttribute: data-index"\n           search-result-list\n           position="0 0.644 0"></a-entity>\n\n \x3c!-- All search result text merged and spaced out. --\x3e\n <a-entity\n   id="searchSongNameTexts"\n   mixin="font"\n   bind__text="value: search.songNameTexts"\n   render-order="menutext"\n   text="baseline: top; align: left; color: #FAFAFA; wrapCount: 28; lineHeight: 130"\n   position="0.181 0.51943 0.001">\n </a-entity>\n <a-entity\n   id="searchSongSubNameTexts"\n   mixin="font"\n   bind__text="color: colorSecondaryBright; value: search.songSubNameTexts"\n   render-order="menutext"\n   text="baseline: top; align: left; wrapCount: 42; lineHeight: 190"\n   position="0.181 0.445 0.001">\n </a-entity>\n\n <a-entity\n   id="searchThumbnailImages"\n   bind__search-thumbnail-atlas="dummyUpdater: search.songSubNameTexts"\n   bind__visible="searchResultsPage.length > 0"\n   geometry="primitive: plane; buffer: false; width: 0.2; height: 1.2"\n   dynamic-texture-atlas="canvasId: thumbnailAtlasMap; canvasWidth: 64; canvasHeight: 512; numColumns: 1; numRows: 6"\n   material="shader: flat; transparent: true"\n   render-order="menubutton"\n   position="-0.45 0.0146 0.002"></a-entity>\n \n <a-mixin id="searchPageButton"\n   animation__mouseenter="property: components.slice9.material.opacity; from: 0; to: 0.3; startEvents: mouseenter; pauseEvents: mouseleave; dur: 150"\n   animation__mouseleave="property: components.slice9.material.opacity; from: 0.3; to: 0; startEvents: mouseleave; pauseEvents: mouseenter; dur: 150"\n   mixin="slice"\n   raycaster-target="width: 1; height: 0.32"\n   render-order="menubutton"\n   slice9="width: 0.8; color: #08bfa2; height: 0.130; padding: 0.03; opacity: 0"></a-mixin>\n \n <a-entity\n   id="searchPrevPage"\n   mixin="searchPageButton"\n   bind__slice9="color: colorPrimary"\n   bind__visible-raycastable="search.hasPrev && (mainMenuActive || isSearching)"\n   raycaster-target="bindToggle: search.hasNext && menuActive; position: 0 0.08 0"\n   position="-0 0.69 0.01"\n   proxy-event="event: click; to: a-scene; as: searchprevpage; captureBubbles: true">\n   <a-entity id="prevArrow" bind__material="color: colorPrimary" geometry="primitive: plane; width: 0.12; height: 0.12" material="shader: flat; src: #downIconImg; transparent: true" rotation="0 0 180" position="0 0 -0.001"></a-entity>\n </a-entity>\n \n <a-entity\n   id="searchNextPage"\n   mixin="searchPageButton"\n   bind__slice9="color: colorSecondary"\n   raycaster-target="bindToggle: search.hasNext && (mainMenuActive || isSearching); position: 0 -0.08 0"\n   position="-0 -0.674 0.01"\n   proxy-event="event: click; to: a-scene; as: searchnextpage; captureBubbles: true"\n   bind__visible="search.hasNext">\n   <a-entity id="nextArrow" bind__material="color: colorSecondary" geometry="primitive: plane; width: 0.12; height: 0.12" material="shader: flat; src: #downIconImg; transparent: true" position="0 0 -0.001"></a-entity>\n </a-entity>\n\n\n\n   </a-entity>\n      \n   \n   <a-entity id="menuDifficultiesGroup" position="0 0.18 0">\n     \n\n     \x3c!-- Top-aligned. --\x3e\n     \x3c!-- Uses bind-for and bind-item to render difficulties. --\x3e\n     <a-entity id="menuDifficulties"\n       bind-for="for: item; in: menuDifficulties; updateInPlace: true; pool: 5"\n       bind__visible="!!menuSelectedChallenge.id"\n       layout="type: box; columns: 1; marginRow: -0.2; orderAttribute: data-bind-for-key"\n       position="0 0.34 0"\n       menu-difficulty-select>\n       \n       <template>\n         \x3c!-- Item is a string representing the difficulty. --\x3e\n         <a-entity class="difficultyOption" bind-item__data-difficulty="item">\n           <a-entity class="difficultyBackground"\n               bind-item__active-item="active: menuSelectedChallenge.difficulty === item"\n               bind-item__animation__mouseenter="enabled: menuSelectedChallenge.difficulty !== item"\n               bind-item__animation__mouseleave="enabled: menuSelectedChallenge.difficulty !== item"\n               bind-item__difficulty-background="enabled: menuActive && !!menuSelectedChallenge.id && menuSelectedChallenge.difficulty !== item && !difficultyFilterMenuOpen"\n               bind__material="color: colorPrimary"\n               geometry="primitive: plane; width: 0.4; height: 0.2"\n               material="shader: flat; transparent: true; opacity: 0.0; src: #difficultyImg"\n               position="0 -0.005 0"\n               play-sound="event: mouseenter; sound: #hoverSound; volume: 0.03"\n               animation__mouseenter="property: components.material.material.opacity; to: 0.3; startEvents: mouseenter; pauseEvents: mouseleave; dur: 75"\n               event-set__mouseenter="visible: true"\n               animation__mouseleave="property: components.material.material.opacity; to: 0.0; startEvents: mouseleave; pauseEvents: mouseenter; dur: 75"\n               event-set__mouseleave="visible: true; _delay: 160"\n               render-order="menuitem"></a-entity>\n           <a-entity\n             class="difficultyText"\n             mixin="font"\n             bind-item__active-text-color="active: menuSelectedChallenge.difficulty === item"\n             bind-item__difficulty-text="difficulty: item"\n             active-text-color="color: #fff"\n             text="wrapCount: 30; align: center; color: #8d8d8d"\n             position="0 -0.057 0.001"\n             render-order="menutext"></a-entity>\n         </a-entity>\n       </template>\n     \n     </a-entity>\n   </a-entity>\n\n   \x3c!-- Selected challenge info. --\x3e\n   <a-entity\n     id="menuSelectedChallengePanel"\n     bind__visible="!!menuSelectedChallenge.id"\n     position="0.8394583182784089 0 0.001">\n    \n     <a-entity\n       id="menuFavoriteButton"\n       bind__animation__mouseenter="to: menuSelectedChallenge.isFavorited && 0.25 || 1"\n       bind__animation__mouseleave="to: menuSelectedChallenge.isFavorited && 1 || 0.25"\n       bind__material="color: colorTertiary; opacity: menuSelectedChallenge.isFavorited && 1 || 0.25"\n       bind__raycastable="menuActive && !!menuSelectedChallenge.id"\n       animation__mouseenter="property: components.material.material.opacity; startEvents: mouseenter; dur: 150; easing: easeInOutCubic"\n       animation__mouseleave="property: components.material.material.opacity; startEvents: mouseleave; dur: 100; easing: easeInOutCubic"\n       geometry="primitive: plane; width: 0.1; height: 0.1"\n       material="src: #favoriteImg; shader: flat; transparent: true; opacity: 0.25"\n       play-sound__hover="event: mouseenter; sound: #hoverSound; volume: 0.1"\n       position="0.46 0.68 0.001"\n       proxy-event="event: click; to: a-scene; as: favoritetoggle"\n       render-order="menuitem"></a-entity>\n \n     <a-entity\n       id="menuSelectedChallengeImage"\n       bind__menu-selected-challenge-image="selectedChallengeId: menuSelectedChallenge.id"\n       geometry="primitive: plane; height: 0.4; width: 0.4"\n       material="shader: flat"\n       position="0 0.42 0"></a-entity>\n     \x3c!--Information sur la chanson choisie--\x3e\n     <a-entity id="menuSelectedChallengeInfoContainer" position="0 0.058 0">\n       <a-entity\n         id="menuSelectedChallengeSongAuthor"\n         mixin="font"\n         bind__text="color: colorSecondaryBright; value: menuSelectedChallenge.songSubName"\n         position="0 0.042 0"\n         render-order="menutext"\n         text="wrapCount: 40; lineHeight: 40; width: 1.185; align: center; baseline: center"></a-entity>\n       <a-entity\n         id="menuSelectedChallengeSongName"\n         mixin="font"\n         bind__text="color: colorPrimary; value: menuSelectedChallenge.songName"\n         position="0 -0.059 0"\n         render-order="menutext"\n         text="align: center; wrapCount: 31; baseline: top; lineHeight: 36; width: 1.4"></a-entity>\n       <a-entity\n         id="menuSelectedChallengeInfo"\n         mixin="font"\n         bind__text="value: menuSelectedChallenge.songInfoText"\n         mixin="font"\n         position="0 -0.18 0"\n         render-order="menutext"\n         text="align: center; color: #989898; wrapCount: 55; lineHeight: 72; width: 1.5; baseline: top"></a-entity>\n     </a-entity>\n   \n     <a-entity\n       id="playButton"\n       bind__visible-raycastable="menuActive && !!menuSelectedChallenge.id && !genreMenuOpen && !difficultyFilterMenuOpen && !isIOS && !hasSongLoadError"\n       geometry="primitive: plane; width: 0.7; height: 0.25"\n       play-sound="event: mouseenter; sound: #hoverSound; volume: 0.03"\n       play-sound__click="event: click; sound: #confirmSound; volume: 0.25"\n       position="0 -0.561 0"\n       proxy-event="event: click; to: a-scene; as: playbuttonclick"\n       material="shader: panelShader; brightness: 0.7; transparent: true; midSection: 0; ratio: 2.8; borderRadius: 0.6; borderWidth: 0.08"\n       render-order="menubutton"\n       animation__mouseenter1="property: components.material.material.uniforms.activePanel.value; from: 0; to: 1; startEvents: mouseenter; pauseEvents: mouseleave; dur: 100"\n       animation__mouseleave1="property: components.material.material.uniforms.activePanel.value; from: 1; to: 0; startEvents: mouseleave; pauseEvents: mouseenter; dur: 100"\n       animation__mouseenter2="property: scale; from: 1 1 1; to: 1.1 1.1 1.1; startEvents: mouseenter; pauseEvents: mouseleave; dur: 100"\n       animation__mouseleave2="property: scale; to: 1 1 1; from: 1.1 1.1 1.1; startEvents: mouseleave; pauseEvents: mouseenter; dur: 100">\n         <a-entity mixin="font" text="align: center; color: #FFF; wrapCount: 15; value: PLAY" position="0 -0.085 0.01"></a-entity>\n     </a-entity>\n     \n     <a-entity\n       id="iOSNotice"\n       bind__visible="mainMenuActive && isIOS"\n       mixin="font"\n       position="0 -0.5 0.01"\n       text="align: center; baseline: top; color: #FFF; wrapCount: 32; value: Sorry, iOS is currently not playable but support is coming soon!"></a-entity>\n     \n     <a-entity\n       id="menuLoadError"\n       bind__visible="hasSongLoadError"\n       mixin="font"\n       position="0 -0.5 0.01"\n       text="align: center; baseline: top; color: #FFF; wrapCount: 32; value: Sorry! There was an error loading this song."></a-entity>\n   </a-entity>\n\n   <a-entity\n     id="searchError"\n     mixin="font"\n     bind__visible="search.hasError"\n     render-order="menuText"\n     text="align: center; value: Sorry, there was an issue fetching search results. Please try again."\n     position="0 0 0.01"></a-entity>\n\n   <a-entity\n     id="menuNoPlaylists"\n     mixin="font"\n     bind__visible="playlist === \'favorites\' && favorites.length === 0 && !menuSelectedChallenge.id"\n     render-order="menuText"\n     position="0 0.1 0.01"\n     text="align: center; baseline: top; color: #FFF; wrapCount: 32; value: Add a song to your favorites by clicking the star in the top right of the menu after selected a song."></a-entity>\n\n   <a-entity\n     id="searchNoResults"\n     mixin="font"\n     bind__visible="!isSearching && search.results.length === 0 && playlist !== \'favorites\'"\n     render-order="menuText"\n     text="align: center; value: No search results found. Please try again with another query."\n     position="0 0 0.01"></a-entity>\n </a-entity>\n\n \x3c!-- <require path="C:UsersQuitterieDesktopQUITTERIE\facL3StageApterostageelyamoonrider-mastersrc\templatesgenreMenu.html"> --\x3e\n<a-entity\n  id="genreMenu"\n  bind-for="for: genre; in: genres; updateInPlace: true; key: name"\n  bind__visible="genreMenuOpen"\n  layout="type: box; columns: 6; marginRow: 0.4; marginColumn: 0.4; align: center"\n  menu-genre\n  position="0 0 0.05">\n  <template>\n    <a-entity class="genre" bind-item__data-genre="item">\n      <a-entity\n        mixin="slice"\n        slice9="opacity: 0.9; width: 0.35; left: 70; top: 70; height: 0.35; padding: 0.07"\n        animation__mouseenter2="property: scale; from: 1 1 1; to: 1.03 1.03 1.03; startEvents: mouseenter; pauseEvents: mouseleave; easing: easeOutCubic; dur: 150"\n        animation__mouseleave2="property: scale; from: 1.03 1.03 1.03; to: 1 1 1; startEvents: mouseleave; pauseEvents: mouseenter; easing: easeOutCubic; dur: 150"\n        proxy-event__enter="event: mouseenter; to: CHILDREN; captureBubbles: true"\n        proxy-event__leave="event: mouseleave; to: CHILDREN; captureBubbles: true"\n        play-sound__click="event: click; sound: #confirmSound; volume: 0.1"\n        raycaster-target="bindToggle: genreMenuOpen; width: 0.35; height: 0.35"\n        render-order__nonrecursive="menubutton">\n        <a-entity\n          mixin="font"\n          bind-item__text="value: item.name"\n          text="align: center; width: 1.1; color: #888"\n          animation__mouseenter="property: components.text.material.uniforms.color.value; from: #888; to: #FFF; type: color; startEvents: mouseenter; pauseEvents: mouseleave; easing: easeOutCubic; dur: 150"\n          animation__mouseleave="property: components.text.material.uniforms.color.value; from: #FFF; to: #888; type: color; startEvents: mouseleave; pauseEvents: mouseenter; easing: easeOutCubic; dur: 150"\n          render-order="menutext"\n          position="0 -0.16 0.001"></a-entity>\n        <a-entity\n          class="genreIcon"\n          bind-item__atlas-uvs="totalColumns: 6; totalRows: 3; row: item.row; column: item.column"\n          geometry="primitive: plane; width: 0.22; height: 0.22; buffer: false; skipCache: true"\n          position="0 0.04 0.002"\n          material="shader: flat; src: #genresImg; transparent: true; color: #888"\n          render-order="menutext"\n          animation__mouseenter="property: components.material.material.color; type: color; from: #888; to: #FFF; startEvents: mouseenter; pauseEvents: mouseleave; easing: easeOutCubic; dur: 150"\n          animation__mouseleave="property: components.material.material.color; type: color; from: #FAFAFA; to: #888; startEvents: mouseleave; pauseEvents: mouseenter; easing: easeOutCubic; dur: 150"></a-entity>\n      </a-entity>\n    </a-entity>\n  </template>\n</a-entity>\n\x3c!-- </require> --\x3e</require>\n \x3c!-- <require path="C:UsersQuitterieDesktopQUITTERIE\facL3StageApterostageelyamoonrider-mastersrc\templatesdifficultyMenu.html"> --\x3e\n\n\n\n\n<a-entity\n  id="difficultyFilterMenu"\n  bind__visible="difficultyFilterMenuOpen"\n  layout="type: box; columns: 1; marginRow: -0.2"\n  difficulty-filter\n  position="0 0.5 0">\n  \n    \n  <a-entity class="difficultyFilterOption" data-difficulty-filter="All">\n    <a-entity class="difficultyFilterBackground"\n        bind__active-item="active: difficultyFilter === \'All\'"\n        bind__animation__mouseenter="enabled: difficultyFilter !== \'All\'"\n        bind__animation__mouseleave="enabled: difficultyFilter !== \'All\'"\n        bind__animation__mouseentervisible="enabled: difficultyFilter !== \'All\'"\n        bind__animation__mouseleavevisible="enabled: difficultyFilter !== \'All\'"\n        bind__difficulty-background="enabled: difficultyFilterMenuOpen && difficultyFilter !== \'All\'"\n        bind__material="color: colorPrimary"\n        animation__mouseenter="property: components.material.material.opacity; to: 0.3; startEvents: mouseenter; dur: 150"\n        animation__mouseleave="property: components.material.material.opacity; to: 0.0; startEvents: mouseleave; dur: 75"\n        event-set__mouseenter="visible: true"\n        event-set__mouseleave="visible: true; _delay: 160"\n        geometry="primitive: plane; width: 0.4; height: 0.2"\n        material="shader: flat; transparent: true; opacity: 0; src: #difficultyImg"\n        position="0 -0.005 0"\n        play-sound="event: mouseenter; sound: #hoverSound; volume: 0.03"\n        render-order="menuitem"></a-entity>\n    <a-entity\n      class="difficultyFilterText"\n      mixin="font"\n      bind__active-text-color="active: difficultyFilter === \'All\'"\n      active-text-color="color: #fff"\n      difficulty-text="difficulty: All"\n      text="wrapCount: 30; align: center; color: #8d8d8d"\n      position="0 -0.057 0.001"\n      render-order="menutext"></a-entity>\n  </a-entity>\n\n  \n    \n  <a-entity class="difficultyFilterOption" data-difficulty-filter="Easy">\n    <a-entity class="difficultyFilterBackground"\n        bind__active-item="active: difficultyFilter === \'Easy\'"\n        bind__animation__mouseenter="enabled: difficultyFilter !== \'Easy\'"\n        bind__animation__mouseleave="enabled: difficultyFilter !== \'Easy\'"\n        bind__animation__mouseentervisible="enabled: difficultyFilter !== \'Easy\'"\n        bind__animation__mouseleavevisible="enabled: difficultyFilter !== \'Easy\'"\n        bind__difficulty-background="enabled: difficultyFilterMenuOpen && difficultyFilter !== \'Easy\'"\n        bind__material="color: colorPrimary"\n        animation__mouseenter="property: components.material.material.opacity; to: 0.3; startEvents: mouseenter; dur: 150"\n        animation__mouseleave="property: components.material.material.opacity; to: 0.0; startEvents: mouseleave; dur: 75"\n        event-set__mouseenter="visible: true"\n        event-set__mouseleave="visible: true; _delay: 160"\n        geometry="primitive: plane; width: 0.4; height: 0.2"\n        material="shader: flat; transparent: true; opacity: 0; src: #difficultyImg"\n        position="0 -0.005 0"\n        play-sound="event: mouseenter; sound: #hoverSound; volume: 0.03"\n        render-order="menuitem"></a-entity>\n    <a-entity\n      class="difficultyFilterText"\n      mixin="font"\n      bind__active-text-color="active: difficultyFilter === \'Easy\'"\n      active-text-color="color: #fff"\n      difficulty-text="difficulty: Easy"\n      text="wrapCount: 30; align: center; color: #8d8d8d"\n      position="0 -0.057 0.001"\n      render-order="menutext"></a-entity>\n  </a-entity>\n\n  \n    \n  <a-entity class="difficultyFilterOption" data-difficulty-filter="Normal">\n    <a-entity class="difficultyFilterBackground"\n        bind__active-item="active: difficultyFilter === \'Normal\'"\n        bind__animation__mouseenter="enabled: difficultyFilter !== \'Normal\'"\n        bind__animation__mouseleave="enabled: difficultyFilter !== \'Normal\'"\n        bind__animation__mouseentervisible="enabled: difficultyFilter !== \'Normal\'"\n        bind__animation__mouseleavevisible="enabled: difficultyFilter !== \'Normal\'"\n        bind__difficulty-background="enabled: difficultyFilterMenuOpen && difficultyFilter !== \'Normal\'"\n        bind__material="color: colorPrimary"\n        animation__mouseenter="property: components.material.material.opacity; to: 0.3; startEvents: mouseenter; dur: 150"\n        animation__mouseleave="property: components.material.material.opacity; to: 0.0; startEvents: mouseleave; dur: 75"\n        event-set__mouseenter="visible: true"\n        event-set__mouseleave="visible: true; _delay: 160"\n        geometry="primitive: plane; width: 0.4; height: 0.2"\n        material="shader: flat; transparent: true; opacity: 0; src: #difficultyImg"\n        position="0 -0.005 0"\n        play-sound="event: mouseenter; sound: #hoverSound; volume: 0.03"\n        render-order="menuitem"></a-entity>\n    <a-entity\n      class="difficultyFilterText"\n      mixin="font"\n      bind__active-text-color="active: difficultyFilter === \'Normal\'"\n      active-text-color="color: #fff"\n      difficulty-text="difficulty: Normal"\n      text="wrapCount: 30; align: center; color: #8d8d8d"\n      position="0 -0.057 0.001"\n      render-order="menutext"></a-entity>\n  </a-entity>\n\n  \n    \n  <a-entity class="difficultyFilterOption" data-difficulty-filter="Hard">\n    <a-entity class="difficultyFilterBackground"\n        bind__active-item="active: difficultyFilter === \'Hard\'"\n        bind__animation__mouseenter="enabled: difficultyFilter !== \'Hard\'"\n        bind__animation__mouseleave="enabled: difficultyFilter !== \'Hard\'"\n        bind__animation__mouseentervisible="enabled: difficultyFilter !== \'Hard\'"\n        bind__animation__mouseleavevisible="enabled: difficultyFilter !== \'Hard\'"\n        bind__difficulty-background="enabled: difficultyFilterMenuOpen && difficultyFilter !== \'Hard\'"\n        bind__material="color: colorPrimary"\n        animation__mouseenter="property: components.material.material.opacity; to: 0.3; startEvents: mouseenter; dur: 150"\n        animation__mouseleave="property: components.material.material.opacity; to: 0.0; startEvents: mouseleave; dur: 75"\n        event-set__mouseenter="visible: true"\n        event-set__mouseleave="visible: true; _delay: 160"\n        geometry="primitive: plane; width: 0.4; height: 0.2"\n        material="shader: flat; transparent: true; opacity: 0; src: #difficultyImg"\n        position="0 -0.005 0"\n        play-sound="event: mouseenter; sound: #hoverSound; volume: 0.03"\n        render-order="menuitem"></a-entity>\n    <a-entity\n      class="difficultyFilterText"\n      mixin="font"\n      bind__active-text-color="active: difficultyFilter === \'Hard\'"\n      active-text-color="color: #fff"\n      difficulty-text="difficulty: Hard"\n      text="wrapCount: 30; align: center; color: #8d8d8d"\n      position="0 -0.057 0.001"\n      render-order="menutext"></a-entity>\n  </a-entity>\n\n  \n    \n  <a-entity class="difficultyFilterOption" data-difficulty-filter="Expert">\n    <a-entity class="difficultyFilterBackground"\n        bind__active-item="active: difficultyFilter === \'Expert\'"\n        bind__animation__mouseenter="enabled: difficultyFilter !== \'Expert\'"\n        bind__animation__mouseleave="enabled: difficultyFilter !== \'Expert\'"\n        bind__animation__mouseentervisible="enabled: difficultyFilter !== \'Expert\'"\n        bind__animation__mouseleavevisible="enabled: difficultyFilter !== \'Expert\'"\n        bind__difficulty-background="enabled: difficultyFilterMenuOpen && difficultyFilter !== \'Expert\'"\n        bind__material="color: colorPrimary"\n        animation__mouseenter="property: components.material.material.opacity; to: 0.3; startEvents: mouseenter; dur: 150"\n        animation__mouseleave="property: components.material.material.opacity; to: 0.0; startEvents: mouseleave; dur: 75"\n        event-set__mouseenter="visible: true"\n        event-set__mouseleave="visible: true; _delay: 160"\n        geometry="primitive: plane; width: 0.4; height: 0.2"\n        material="shader: flat; transparent: true; opacity: 0; src: #difficultyImg"\n        position="0 -0.005 0"\n        play-sound="event: mouseenter; sound: #hoverSound; volume: 0.03"\n        render-order="menuitem"></a-entity>\n    <a-entity\n      class="difficultyFilterText"\n      mixin="font"\n      bind__active-text-color="active: difficultyFilter === \'Expert\'"\n      active-text-color="color: #fff"\n      difficulty-text="difficulty: Expert"\n      text="wrapCount: 30; align: center; color: #8d8d8d"\n      position="0 -0.057 0.001"\n      render-order="menutext"></a-entity>\n  </a-entity>\n\n  \n    \n  <a-entity class="difficultyFilterOption" data-difficulty-filter="Expertplus">\n    <a-entity class="difficultyFilterBackground"\n        bind__active-item="active: difficultyFilter === \'Expertplus\'"\n        bind__animation__mouseenter="enabled: difficultyFilter !== \'Expertplus\'"\n        bind__animation__mouseleave="enabled: difficultyFilter !== \'Expertplus\'"\n        bind__animation__mouseentervisible="enabled: difficultyFilter !== \'Expertplus\'"\n        bind__animation__mouseleavevisible="enabled: difficultyFilter !== \'Expertplus\'"\n        bind__difficulty-background="enabled: difficultyFilterMenuOpen && difficultyFilter !== \'Expertplus\'"\n        bind__material="color: colorPrimary"\n        animation__mouseenter="property: components.material.material.opacity; to: 0.3; startEvents: mouseenter; dur: 150"\n        animation__mouseleave="property: components.material.material.opacity; to: 0.0; startEvents: mouseleave; dur: 75"\n        event-set__mouseenter="visible: true"\n        event-set__mouseleave="visible: true; _delay: 160"\n        geometry="primitive: plane; width: 0.4; height: 0.2"\n        material="shader: flat; transparent: true; opacity: 0; src: #difficultyImg"\n        position="0 -0.005 0"\n        play-sound="event: mouseenter; sound: #hoverSound; volume: 0.03"\n        render-order="menuitem"></a-entity>\n    <a-entity\n      class="difficultyFilterText"\n      mixin="font"\n      bind__active-text-color="active: difficultyFilter === \'Expertplus\'"\n      active-text-color="color: #fff"\n      difficulty-text="difficulty: Expertplus"\n      text="wrapCount: 30; align: center; color: #8d8d8d"\n      position="0 -0.057 0.001"\n      render-order="menutext"></a-entity>\n  </a-entity>\n\n  \n</a-entity>\n\x3c!-- </require> --\x3e</require>\n \x3c!-- <require path="C:UsersQuitterieDesktopQUITTERIE\facL3StageApterostageelyamoonrider-mastersrc\templatesoptionsMenu.html"> --\x3e\n<a-entity\n  id="optionsMenu"\n  bind__visible="optionsMenuOpen"\n  position="0 0.5 0.01"\n  render-order="menutext">\n\n  <a-entity id="optionsTitle" mixin="font" text="align: center; value: OPTIONS; width: 2.5"></a-entity>\n\n  <a-entity id="colorOptionsContainer" position="0 -0.25 0">\n    <a-entity id="colorTitle" mixin="font" text="align: center; value: THEMES; width: 2"></a-entity>\n\n    <a-entity id="colorOptions" position="-0.79 -0.175 0.00" layout="type: box; columns: 10; margin: 0.2" materials-color-menu>\n      \n        <a-entity\n          class="colorOption"\n          data-color-name="Super Medium"\n          data-color-scheme="default"\n          mixin="clickSoundUI hoverSoundUI"\n          animation__mouseenter="property: scale; to: 1.2 1.2 1.2; dur: 150; easing: easeInOutCubic; startEvents: mouseenter"\n          animation__mouseleave="property: scale; to: 1 1 1; dur: 125; easing: easeInOutCubic; startEvents: mouseleave"\n          geometry="primitive: plane; width: 0.15; height: 0.15"\n          material="shader: gradientShader; color1: #f971c3; color2: #6ff9ea; transparent: true"\n          render-order="menutext"\n          bind-toggle__raycastable="optionsMenuOpen">\n        </a-entity>\n      \n        <a-entity\n          class="colorOption"\n          data-color-name="Star Warrior"\n          data-color-scheme="blue"\n          mixin="clickSoundUI hoverSoundUI"\n          animation__mouseenter="property: scale; to: 1.2 1.2 1.2; dur: 150; easing: easeInOutCubic; startEvents: mouseenter"\n          animation__mouseleave="property: scale; to: 1 1 1; dur: 125; easing: easeInOutCubic; startEvents: mouseleave"\n          geometry="primitive: plane; width: 0.15; height: 0.15"\n          material="shader: gradientShader; color1: #1e4482; color2: #c27727; transparent: true"\n          render-order="menutext"\n          bind-toggle__raycastable="optionsMenuOpen">\n        </a-entity>\n      \n        <a-entity\n          class="colorOption"\n          data-color-name="Galactic Royal"\n          data-color-scheme="purple"\n          mixin="clickSoundUI hoverSoundUI"\n          animation__mouseenter="property: scale; to: 1.2 1.2 1.2; dur: 150; easing: easeInOutCubic; startEvents: mouseenter"\n          animation__mouseleave="property: scale; to: 1 1 1; dur: 125; easing: easeInOutCubic; startEvents: mouseleave"\n          geometry="primitive: plane; width: 0.15; height: 0.15"\n          material="shader: gradientShader; color1: #6A39B3; color2: #FAF239; transparent: true"\n          render-order="menutext"\n          bind-toggle__raycastable="optionsMenuOpen">\n        </a-entity>\n      \n        <a-entity\n          class="colorOption"\n          data-color-name="Space Joker"\n          data-color-scheme="green"\n          mixin="clickSoundUI hoverSoundUI"\n          animation__mouseenter="property: scale; to: 1.2 1.2 1.2; dur: 150; easing: easeInOutCubic; startEvents: mouseenter"\n          animation__mouseleave="property: scale; to: 1 1 1; dur: 125; easing: easeInOutCubic; startEvents: mouseleave"\n          geometry="primitive: plane; width: 0.15; height: 0.15"\n          material="shader: gradientShader; color1: #779E37; color2: #6A39B3; transparent: true"\n          render-order="menutext"\n          bind-toggle__raycastable="optionsMenuOpen">\n        </a-entity>\n      \n        <a-entity\n          class="colorOption"\n          data-color-name="Solar Flare"\n          data-color-scheme="yellow"\n          mixin="clickSoundUI hoverSoundUI"\n          animation__mouseenter="property: scale; to: 1.2 1.2 1.2; dur: 150; easing: easeInOutCubic; startEvents: mouseenter"\n          animation__mouseleave="property: scale; to: 1 1 1; dur: 125; easing: easeInOutCubic; startEvents: mouseleave"\n          geometry="primitive: plane; width: 0.15; height: 0.15"\n          material="shader: gradientShader; color1: #C2C04C; color2: #E03A3E; transparent: true"\n          render-order="menutext"\n          bind-toggle__raycastable="optionsMenuOpen">\n        </a-entity>\n      \n        <a-entity\n          class="colorOption"\n          data-color-name="Trail Blazer"\n          data-color-scheme="red"\n          mixin="clickSoundUI hoverSoundUI"\n          animation__mouseenter="property: scale; to: 1.2 1.2 1.2; dur: 150; easing: easeInOutCubic; startEvents: mouseenter"\n          animation__mouseleave="property: scale; to: 1 1 1; dur: 125; easing: easeInOutCubic; startEvents: mouseleave"\n          geometry="primitive: plane; width: 0.15; height: 0.15"\n          material="shader: gradientShader; color1: #E03A3E; color2: #DADADA; transparent: true"\n          render-order="menutext"\n          bind-toggle__raycastable="optionsMenuOpen">\n        </a-entity>\n      \n        <a-entity\n          class="colorOption"\n          data-color-name="Mint Choco"\n          data-color-scheme="rgb"\n          mixin="clickSoundUI hoverSoundUI"\n          animation__mouseenter="property: scale; to: 1.2 1.2 1.2; dur: 150; easing: easeInOutCubic; startEvents: mouseenter"\n          animation__mouseleave="property: scale; to: 1 1 1; dur: 125; easing: easeInOutCubic; startEvents: mouseleave"\n          geometry="primitive: plane; width: 0.15; height: 0.15"\n          material="shader: gradientShader; color1: #34eb89; color2: #34ebd8; transparent: true"\n          render-order="menutext"\n          bind-toggle__raycastable="optionsMenuOpen">\n        </a-entity>\n      \n        <a-entity\n          class="colorOption"\n          data-color-name="Cheetah SoL"\n          data-color-scheme="cheetah"\n          mixin="clickSoundUI hoverSoundUI"\n          animation__mouseenter="property: scale; to: 1.2 1.2 1.2; dur: 150; easing: easeInOutCubic; startEvents: mouseenter"\n          animation__mouseleave="property: scale; to: 1 1 1; dur: 125; easing: easeInOutCubic; startEvents: mouseleave"\n          geometry="primitive: plane; width: 0.15; height: 0.15"\n          material="shader: gradientShader; color1: #c27727; color2: #635c54; transparent: true"\n          render-order="menutext"\n          bind-toggle__raycastable="optionsMenuOpen">\n        </a-entity>\n      \n        <a-entity\n          class="colorOption"\n          data-color-name="Ash Nova"\n          data-color-scheme="black"\n          mixin="clickSoundUI hoverSoundUI"\n          animation__mouseenter="property: scale; to: 1.2 1.2 1.2; dur: 150; easing: easeInOutCubic; startEvents: mouseenter"\n          animation__mouseleave="property: scale; to: 1 1 1; dur: 125; easing: easeInOutCubic; startEvents: mouseleave"\n          geometry="primitive: plane; width: 0.15; height: 0.15"\n          material="shader: gradientShader; color1: #555; color2: #FFF; transparent: true"\n          render-order="menutext"\n          bind-toggle__raycastable="optionsMenuOpen">\n        </a-entity>\n      \n    </a-entity>\n\n    <a-entity\n      id="colorName"\n      mixin="font"\n      text="align: center; color: #CCC; width: 1"\n      position="0 -0.35 0.1"\n      render-order="menutext"></a-entity>\n  </a-entity>\n</a-entity>\n\x3c!-- </require> --\x3e</require>\n \x3c!-- <require path="C:UsersQuitterieDesktopQUITTERIE\facL3StageApterostageelyamoonrider-mastersrc\templatesplaylistMenu.html"> --\x3e\n<a-entity\n  id="playlistMenu"\n  bind-for="for: playlist; in: playlists; updateInPlace: true; key: name"\n  bind__visible="playlistMenuOpen"\n  layout="type: box; columns: 2; marginRow: -0.23; marginColumn: 1.3; align: center"\n  menu-playlist\n  position="0 0 0.05">\n  <template>\n    \n    <a-entity class="playlist" data-playlist="{{ item.name }}" data-title="{{ item.title }}">\n    \n      <a-entity\n        mixin="slice"\n        slice9="opacity: 0.9; width: 1.2; left: 70; top: 70; height: 0.19; padding: 0.07"\n        animation__mouseenter="property: scale; from: 1 1 1; to: 1.03 1.03 1.03; startEvents: mouseenter; pauseEvents: mouseleave; easing: easeOutCubic; dur: 150"\n        animation__mouseleave="property: scale; from: 1.03 1.03 1.03; to: 1 1 1; startEvents: mouseleave; pauseEvents: mouseenter; easing: easeOutCubic; dur: 150"\n        proxy-event__enter="event: mouseenter; to: CHILDREN; captureBubbles: true"\n        proxy-event__leave="event: mouseleave; to: CHILDREN; captureBubbles: true"\n        play-sound__click="event: click; sound: #confirmSound; volume: 0.1"\n        raycaster-target="bindToggle: playlistMenuOpen; width: 1.2; height: 0.19"\n        render-order__nonrecursive="menubutton">\n        <a-entity\n          class="playlistTitle"\n          mixin="font"\n          bind-item__text-uppercase="value: item.title"\n          text="align: left; width: 1.3; color: #CCC"\n          animation__mouseenter="property: components.text.material.uniforms.color.value; from: #CCC; to: #FFF; type: color; startEvents: mouseenter; pauseEvents: mouseleave; easing: easeOutCubic; dur: 150"\n          animation__mouseleave="property: components.text.material.uniforms.color.value; from: #FFF; to: #CCC; type: color; startEvents: mouseleave; pauseEvents: mouseenter; easing: easeOutCubic; dur: 150"\n          render-order="menutext"\n          position="0.11 -0.01 0.001"></a-entity>\n\n        <a-entity\n          class="playlistAuthor"\n          mixin="font"\n          bind-item__text="value: item.author"\n          bind__text="color: colorPrimary"\n          text="align: left; width: 1.1"\n          render-order="menutext"\n          position="0.01 -0.08 0.001"></a-entity>\n      </a-entity>\n    </a-entity>\n  </template>\n</a-entity>\n\x3c!-- </require> --\x3e</require>\n\n</a-entity>\n\n\x3c!-- Search. --\x3e\n<a-entity\n id="keyboard"\n bind__super-keyboard="hand: activeHand === \'left\' && \'#leftHand\' || \'#rightHand\'; show: isSearching"\n super-keyboard="label: Search 15000 Community Songs; inputColor: #fff; labelColor: #f0f0f0; width: 1.5; hand: #rightHand; imagePath: assets/img/keyboard; font: assets/fonts/Viga-Regular.json; align: center; model: superkeyboard; keyColor: #fff; injectToRaycasterObjects: false; filters: allupper; keyHoverColor: #fff"\n position="0.58 1.2 -1.95"\n keyboard-raycastable="condition: isSearching"\n search\n proxy-event__dismiss="event: superkeyboarddismiss; to: a-scene; as: keyboardclose"\n proxy-event__accept="event: superkeyboardinput; to: a-scene; as: keyboardclose"\n render-order="menubutton"\n render-order-recursive>\n</a-entity>\n\n<a-entity\n id="backButton"\n mixin="bigMenuTopButton"\n bind__visible-raycastable="genreMenuOpen || isSearching || difficultyFilterMenuOpen || playlistMenuOpen || optionsMenuOpen"\n position="0 2.32 -1.96"\n play-sound__hover="event: mouseenter; sound: #hoverSound; volume: 0.1"\n proxy-event="event: click; to: a-scene; as: menuback">\n <a-entity mixin="font" text="align: center; color: #FFF; wrapCount: 20; value: BACK" position="0 -0.07 0.01"></a-entity>\n</a-entity>\n\n\x3c!-- Top menu buttons. --\x3e\n<a-mixin id="bigMenuTopButton" mixin="bigMenuButton" geometry="height: 0.17; width: 0.7"></a-mixin>\n<a-mixin id="bigMenuTopButtonFont" mixin="font" text="width: 0.75" position="0 -0.05 0.01"></a-mixin>\n<a-entity\n id="menuTopButtons"\n animation__position="property: object3D.position.z; to: -1.98; dur: 1500; easing: easeInOutCubic; delay: 300; startEvents: startgame"\n layout="type: line; margin: 0.65"\n position="-0.95 2.30 -1.96"\n proxy-event="event: startgame; to: #searchButton, #difficultyButton, #genreButton, #playlistButton, #optionButton">\n\n\n \x3c!-- Playlist menu toggle.--\x3e\n <a-entity id="playlistButtons">\n   \n   \n   <a-entity id="playlistButton"\n     mixin="bigMenuTopButton"\n     bind__menu-playlist-button="isFavorited: menuSelectedChallenge.isFavorited; selectedChallenge: menuSelectedChallenge.id"\n     bind__visible-raycastable="mainMenuActive && !playlist"\n     material="opacity: 0"\n     animation__opacity="property: components.material.material.uniforms.opacity.value; from: 0; to: 1; dur: 1000; delay: 300; startEvents: startgame"\n     play-sound__hover="event: mouseenter; sound: #hoverSound; volume: 0.1"\n     proxy-event="event: click; to: a-scene; as: playlistmenuopen">\n     <a-entity mixin="bigMenuTopButtonFont" text="align: center; color: #FFF; wrapCount: 20; value: PLAYLISTS" bind__visible="!isMenuOpening"></a-entity>\n   </a-entity>\n  \n   <a-entity id="clearPlaylistButton"\n     mixin="bigMenuTopButton"\n     bind__visible-raycastable="menuActive && !!playlist"\n     play-sound__hover="event: mouseenter; sound: #hoverSound; volume: 0.1"\n     play-sound__click="event: click; sound: #clearSound"\n     proxy-event="event: click; to: a-scene; as: playlistclear">\n     <a-entity mixin="bigMenuTopButtonFont" text="align: center; color: #FFF; wrapCount: 20; value: CLEAR PLAYLIST"></a-entity>\n   </a-entity>\n\n   <a-entity\n     id="playlistText"\n     mixin="font"\n     bind__text="color: colorPrimary"\n     bind__text-uppercase="value: playlistTitle"\n     bind__visible="mainMenuActive && !!playlist"\n     text="align: center; baseline: bottom; wrapCount: 30; width: 0.7"\n     position="0 0.1 0.035"\n     render-order="menutext"></a-entity>\n </a-entity>\n\n \n \x3c!-- Search toggle. --\x3e\n <a-entity id="searchButtons">\n   <a-entity\n     id="searchButton"\n     mixin="bigMenuTopButton"\n     bind__visible-raycastable="mainMenuActive && !search.query"\n     material="opacity: 0"\n     animation__opacity="property: components.material.material.uniforms.opacity.value; from: 0; to: 1; dur: 1000; delay: 300; startEvents: startgame"\n     play-sound__hover="event: mouseenter; sound: #hoverSound; volume: 0.1"\n     proxy-event="event: click; to: a-scene; as: keyboardopen">\n     <a-entity mixin="bigMenuTopButtonFont" text="align: center; color: #FFF; wrapCount: 20; value: SEARCH" bind__visible="!isMenuOpening"></a-entity>\n   </a-entity>\n\n   <a-entity id="searchClearButton"\n     mixin="bigMenuTopButton"\n     bind__visible-raycastable="mainMenuActive && !!search.query"\n     play-sound__hover="event: mouseenter; sound: #hoverSound; volume: 0.1"\n     play-sound__click="event: click; sound: #clearSound"\n     proxy-event="event: click; to: a-scene; as: searchclear">\n     <a-entity mixin="bigMenuTopButtonFont" text="align: center; color: #FFF; wrapCount: 20; value: CLEAR SEARCH"></a-entity>\n   </a-entity>\n\n   <a-entity\n     id="searchText"\n     mixin="font"\n     bind__text="color: colorPrimary"\n     bind__text-uppercase="value: search.queryText"\n     bind__visible="mainMenuActive && !!search.query"\n     text="align: center; wrapCount: 20"\n     position="0 0.1 0.035"\n     render-order="menutext"></a-entity>\n </a-entity>\n \n \x3c!-- Difficulty menu toggle. --\x3e\n <a-entity id="difficultyFilter">\n   <a-entity id="difficultyButton"\n     mixin="bigMenuTopButton"\n     material="opacity: 0"\n     bind__visible-raycastable="mainMenuActive"\n     animation__opacity="property: components.material.material.uniforms.opacity.value; from: 0; to: 1; dur: 1000; delay: 300; startEvents: startgame"\n     play-sound__hover="event: mouseenter; sound: #hoverSound; volume: 0.1"\n     proxy-event="event: click; to: a-scene; as: difficultyfiltermenuopen">\n     <a-entity mixin="bigMenuTopButtonFont" text="align: center; color: #FFF; wrapCount: 20; value: DIFFICULTY" bind__visible="!isMenuOpening"></a-entity>\n   </a-entity>\n\n   <a-entity\n     id="difficultyFilterText"\n     mixin="font"\n     bind__difficulty-text="difficulty: difficultyFilter"\n     bind__text="color: colorPrimary"\n     bind__visible="mainMenuActive && difficultyFilter !== \'All\'"\n     text="align: center; wrapCount: 20"\n     position="0 0.1 0.035"\n     render-order="menutext"></a-entity>\n </a-entity>\n\n \x3c!-- Genre menu toggle. --\x3e\n <a-entity id="genreButtons">\n   <a-entity id="genreButton"\n     mixin="bigMenuTopButton"\n     bind__visible-raycastable="mainMenuActive && !genre"\n     material="opacity: 0"\n     animation__opacity="property: components.material.material.uniforms.opacity.value; from: 0; to: 1; dur: 1000; delay: 300; startEvents: startgame"\n     play-sound__hover="event: mouseenter; sound: #hoverSound; volume: 0.1"\n     proxy-event="event: click; to: a-scene; as: genremenuopen">\n     <a-entity mixin="bigMenuTopButtonFont" text="align: center; color: #FFF; wrapCount: 20; value: GENRES" bind__visible="!isMenuOpening"></a-entity>\n   </a-entity>\n  \n   <a-entity id="clearGenreButton"\n     mixin="bigMenuTopButton"\n     bind__visible-raycastable="mainMenuActive && !!genre"\n     play-sound__hover="event: mouseenter; sound: #hoverSound; volume: 0.1"\n     play-sound__click="event: click; sound: #clearSound"\n     proxy-event="event: click; to: a-scene; as: genreclear">\n     <a-entity mixin="bigMenuTopButtonFont" text="align: center; color: #FFF; wrapCount: 20; value: CLEAR GENRE"></a-entity>\n   </a-entity>\n  \n   <a-entity\n     id="genreText"\n     mixin="font"\n     bind__text="color: colorPrimary"\n     bind__text-uppercase="value: genre"\n     bind__visible="mainMenuActive && !!genre"\n     text="align: center; wrapCount: 20"\n     position="0 0.1 0.035"\n     render-order="menutext"></a-entity>\n </a-entity>\n</a-entity>\n\n<button id="option" name="testOption" disabled style="opacity: 0;">THEMES</button>\n\x3c!-- Options menu toggle. --\x3e\n<a-entity id="optionsButtons" position="0 0.45 -1.96">\n <a-entity id="optionButton"\n   mixin="bigMenuButton"\n   bind__visible-raycastable="mainMenuActive"\n   material="opacity: 0"\n   animation__opacity="property: components.material.material.uniforms.opacity.value; from: 0; to: 1; dur: 1000; delay: 300; startEvents: startgame"\n   play-sound__hover="event: mouseenter; sound: #hoverSound; volume: 0.1"\n   proxy-event="event: click; to: a-scene; as: optionsmenuopen">\n   <a-entity mixin="bigMenuTopButtonFont" text="align: center; color: #FFF; wrapCount: 20; value: THEMES" bind__visible="!isMenuOpening"></a-entity>\n </a-entity>\n</a-entity>\n\x3c!-- </require> --\x3e</require>\n  \x3c!-- <require path="C:UsersQuitterieDesktopQUITTERIE\facL3StageApterostageelyamoonrider-mastersrc\templatesmodes.html"> --\x3e\n<a-mixin\n  id="modeAnimations"\n  animation__select="property: object3D.position.z; to: 0.06; dur: 200; easing: easeOutQuad; startEvents: select"\n  animation__deselect="property: object3D.position.z; to: 0; dur: 200; easing: easeOutQuad; startEvents: deselect"></a-mixin>\n\n<a-mixin\n  id="modeThumbAnimations"\n  animation__select="property: components.material.material.color; type: color; to: #FFF; dur: 200; easing: easeOutQuad; startEvents: select"\n  animation__deselect="property: components.material.material.color; type: color; to: #888; dur: 200; easing: easeOutQuad; startEvents: deselect"></a-mixin>\n\n<a-mixin\n  id="modeBackgroundHover"\n  animation__mouseenter="property: components.material.material.uniforms.borderWidth.value; from: 0.002; to: 0.01; startEvents: mouseenter; pauseEvents: mouseleave; easing: linear; dur: 150"\n  animation__mouseleave="property: components.material.material.uniforms.borderWidth.value; from: 0.01; to: 0.002; startEvents: mouseleave; pauseEvents: mouseenter; easing: linear; dur: 150"\n  play-sound__hover="event: mouseenter; sound: #hoverSound; volume: 0.3"\n  play-sound__click="event: click; sound: #confirmSound; volume: 0.1"\n\n  ></a-mixin>\n\n<a-mixin\n  id="modeBackgroundSelect"\n  animation__select="property: components.material.material.uniforms.brightness.value; to: 0.5; startEvents: select; easing: easeOutQuad; dur: 200"\n  animation__deselect="property: components.material.material.uniforms.brightness.value; to: 0.1; startEvents: deselect; easing: easeOutQuad; dur: 200"\n  animation__select2="property: components.material.material.uniforms.borderWidth.value; to: 0.015; startEvents: select; easing: linear; dur: 200"\n  animation__deselect2="property: components.material.material.uniforms.borderWidth.value; to: 0.002; startEvents: deselect; easing: linear; dur: 200"></a-mixin>\n\n\n\n<a-entity\n  id="modes"\n  bind__menu-mode="colorScheme: colorScheme; hasVR: hasVR"\n  bind__position="hasVR && \'-2.56 1.3 -0.7\' || \'-2.56 1 -0.7\'"\n  bind__visible="menuActive && !isMenuOpening"\n  rotation="0 60 0"\n  render-order="menuitem">\n\n  <a-entity id="modeIcon"\n    geometry="primitive: cylinder;  height: 0.01; segmentsHeight: 1; radius: 0.1; segmentsRadial: 3"\n    rotation="0 90 90"\n    position="-1.275 0.32 0.1"\n    materials="name: merkaba"\n    animation="property: object3D.position.x; from: -1.275; to: -1.3; dir: alternate; easing: easeOutQuad; loop: true; dur: 900"></a-entity>\n\x3c!--\n  <a-entity id="mode2d" bind__visible="!hasVR">\n    \n\n<a-entity\n  id="moderide2d"\n  class="modeItem"\n  data-mode="ride"\n  data-name="ride2d"\n  position="0 0.75 0"\n  mixin="modeAnimations">\n  <a-entity\n    class="modeBackground"\n    bind-toggle__raycastable="menuActive && !hasVR"\n    position="0 0 -0.01"\n    geometry="primitive: plane; width: 3; height: 0.8"\n    material="shader: panelShader; brightness: 0.1; ratio: 4; borderWidth: 0.002"\n    mixin="modeBackgroundHover modeBackgroundSelect"></a-entity>\n  <a-entity\n    class="modeTitle"\n    mixin="font"\n    text="align: left; value: RIDE\nMODE; lineHeight: 45; width: 2.6"\n    render-order="menutext"\n    position="0.14 0.05 0"></a-entity>\n  <a-entity\n    class="modeThumb"\n    mixin="modeThumbAnimations"\n    geometry="primitive: plane; width: 0.7; height: 0.5"\n    material="src: #modeRideImg; shader: flat"\n    position="-0.20 0 0"></a-entity>\n  <a-entity\n    class="modeInstructions"\n    mixin="font"\n    render-order="menutext"\n    bind__text="color: colorPrimary"\n    text="value: Relax and enjoy the ride.; width: 1.6; lineHeight: 47"\n    position="1.1 -0.05 0"></a-entity>\n</a-entity>\n\n    \n\n<a-entity\n  id="modeviewer2d"\n  class="modeItem"\n  data-mode="classic"\n  data-name="viewer2d"\n  position="0 0 0"\n  mixin="modeAnimations">\n  <a-entity\n    class="modeBackground"\n    bind-toggle__raycastable="menuActive && !hasVR"\n    position="0 0 -0.01"\n    geometry="primitive: plane; width: 3; height: 0.8"\n    material="shader: panelShader; brightness: 0.1; ratio: 4; borderWidth: 0.002"\n    mixin="modeBackgroundHover modeBackgroundSelect"></a-entity>\n  <a-entity\n    class="modeTitle"\n    mixin="font"\n    text="align: left; value: VIEWER\nMODE; lineHeight: 45; width: 2.6"\n    render-order="menutext"\n    position="0.14 0.05 0"></a-entity>\n  <a-entity\n    class="modeThumb"\n    mixin="modeThumbAnimations"\n    geometry="primitive: plane; width: 0.7; height: 0.5"\n    material="src: #modeViewerImg; shader: flat"\n    position="-0.20 0 0"></a-entity>\n  <a-entity\n    class="modeInstructions"\n    mixin="font"\n    render-order="menutext"\n    bind__text="color: colorPrimary"\n    text="value: View the beat map.\n\nConnect a VR headset\nwith controllers\nto experience\nmore modes!; width: 1.6; lineHeight: 47"\n    position="1.1 -0.05 0"></a-entity>\n</a-entity>\n\n  </a-entity>\n\n  <a-entity id="modeVR" bind__visible="hasVR">\n    \n\n<a-entity\n  id="modepunchvr"\n  class="modeItem"\n  data-mode="punch"\n  data-name="punchvr"\n  position="0 0.75 0"\n  mixin="modeAnimations">\n  <a-entity\n    class="modeBackground"\n    bind-toggle__raycastable="menuActive && hasVR"\n    position="0 0 -0.01"\n    geometry="primitive: plane; width: 3; height: 0.8"\n    material="shader: panelShader; brightness: 0.1; ratio: 4; borderWidth: 0.002"\n    mixin="modeBackgroundHover modeBackgroundSelect"></a-entity>\n  <a-entity\n    class="modeTitle"\n    mixin="font"\n    text="align: left; value: PUNCH\nMODE; lineHeight: 45; width: 2.6"\n    render-order="menutext"\n    position="0.14 0.05 0"></a-entity>\n  <a-entity\n    class="modeThumb"\n    mixin="modeThumbAnimations"\n    geometry="primitive: plane; width: 0.7; height: 0.5"\n    material="src: #modePunchImg; shader: flat"\n    position="-0.20 0 0"></a-entity>\n  <a-entity\n    class="modeInstructions"\n    mixin="font"\n    render-order="menutext"\n    bind__text="color: colorPrimary"\n    text="value: Punch the beats, mind\ncolor.\n\nAvoid all things yellow.\n\nPunch harder\n for better score.; width: 1.6; lineHeight: 47"\n    position="1.1 -0.05 0"></a-entity>\n</a-entity>\n\n    \n\n<a-entity\n  id="moderidevr"\n  class="modeItem"\n  data-mode="ride"\n  data-name="ridevr"\n  position="0 0 0"\n  mixin="modeAnimations">\n  <a-entity\n    class="modeBackground"\n    bind-toggle__raycastable="menuActive && hasVR"\n    position="0 0 -0.01"\n    geometry="primitive: plane; width: 3; height: 0.8"\n    material="shader: panelShader; brightness: 0.1; ratio: 4; borderWidth: 0.002"\n    mixin="modeBackgroundHover modeBackgroundSelect"></a-entity>\n  <a-entity\n    class="modeTitle"\n    mixin="font"\n    text="align: left; value: RIDE\nMODE; lineHeight: 45; width: 2.6"\n    render-order="menutext"\n    position="0.14 0.05 0"></a-entity>\n  <a-entity\n    class="modeThumb"\n    mixin="modeThumbAnimations"\n    geometry="primitive: plane; width: 0.7; height: 0.5"\n    material="src: #modeRideImg; shader: flat"\n    position="-0.20 0 0"></a-entity>\n  <a-entity\n    class="modeInstructions"\n    mixin="font"\n    render-order="menutext"\n    bind__text="color: colorPrimary"\n    text="value: Relax and enjoy the ride.\n\nTake a quick breather.\n\nNo score!; width: 1.6; lineHeight: 47"\n    position="1.1 -0.05 0"></a-entity>\n</a-entity>\n\n    \n\n<a-entity\n  id="modeclassicvr"\n  class="modeItem"\n  data-mode="classic"\n  data-name="classicvr"\n  position="0 -0.75 0"\n  mixin="modeAnimations">\n  <a-entity\n    class="modeBackground"\n    bind-toggle__raycastable="menuActive && hasVR"\n    position="0 0 -0.01"\n    geometry="primitive: plane; width: 3; height: 0.8"\n    material="shader: panelShader; brightness: 0.1; ratio: 4; borderWidth: 0.002"\n    mixin="modeBackgroundHover modeBackgroundSelect"></a-entity>\n  <a-entity\n    class="modeTitle"\n    mixin="font"\n    text="align: left; value: CLASSIC\nMODE; lineHeight: 45; width: 2.6"\n    render-order="menutext"\n    position="0.14 0.05 0"></a-entity>\n  <a-entity\n    class="modeThumb"\n    mixin="modeThumbAnimations"\n    geometry="primitive: plane; width: 0.7; height: 0.5"\n    material="src: #modeClassicImg; shader: flat"\n    position="-0.20 0 0"></a-entity>\n  <a-entity\n    class="modeInstructions"\n    mixin="font"\n    render-order="menutext"\n    bind__text="color: colorPrimary"\n    text="value: Cut the beats, mind\ncolor and direction.\n\nAvoid all things yellow.\n\nSwing fast and accurate\nfor better score.; width: 1.6; lineHeight: 47"\n    position="1.1 -0.05 0"></a-entity>\n</a-entity>\n\n  </a-entity>\n--\x3e\n  <a-entity\n    id="loadingTipsContainer"\n    bind__visible="menuActive"\n    position="0 -1.3 0.1"\n    rotation="0 0 0">\n\n    <a-entity\n      id="loadingTipsBackground"\n      bind-toggle__raycastable="menuActive"\n      render-order="menu"\n      geometry="primitive: plane; width: 1.5; height: 0.3"\n      material="shader: panelShader; ratio: 1.15; borderRadius: 0.4"\n      render-order="menubutton"\n      position="0 0 -0.03"></a-entity>\n\n    <a-entity\n      id="loadingTipsText"\n      mixin="font"\n      bind__text="color: colorPrimary"\n      text="align: center; wrapCount: 30; width: 1; value: Press down on thumbstick center to open menu while playing."\n      render-order="menutext"\n      position="0 -0.02 0.001"></a-entity>\n  </a-entity>\n</a-entity>\n\x3c!-- </require> --\x3e</require>\n  \x3c!-- <require path="C:UsersQuitterieDesktopQUITTERIE\facL3StageApterostageelyamoonrider-mastersrc\templates\victory.html"> --\x3e\n\x3c!-- Victory. --\x3e\n<a-entity\n  id="victoryInfoContainer"\n  position="0 1.5 -2"\n  bind__visible="isVictory">\n\n  <a-entity\n    id="victoryAccuracyRing"\n    bind__material="color: colorPrimary"k\n    bind__victory-accuracy-ring="accuracy: score.finalAccuracy"\n    animation="property: components.material.material.uniforms.progress.value; from: 0; easing: easeOutQuad; delay: 500; dur: 2500; autoplay: false"\n    geometry="primitive: plane; width: 0.7; height: 0.7"\n    material="shader: ring; transparent: true; radiusInner: 0.8; blending: additive; depthWrite: false"\n    position="0 0.18 0"\n    render-order="victory"></a-entity>\n\n  <a-entity\n    id="victoryInfoRank"\n    class="accuracyTextCounterSubscribe"\n    bind__animation="enabled: isVictory"\n    bind__victory-rank="isVictory: isVictory; rank: score.rank"\n    bind-toggle__raycastable="isVictory"\n    scale="0 0 0"\n    position="0 -0.034 0"\n    animation__rotation="property: object3D.rotation.y; from: 0; to: -360; loop: true; easing: linear; dur: 5000; startEvents: textcounterdone"\n    animation__scale="property: scale; from: 0 0 0; to: 1 1 1; loop: false; easing: easeOutQuad; dur: 300; startEvents: textcounterdone"\n    play-sound="sound: #victorySound; event: textcounterdone"\n    render-order="menuitemtext"\n    text-geometry="font: #VigaRegularThree; bevelEnabled: true; bevelSize: 0.01; bevelThickness: 0.01; curveSegments: 7; height: 0.15; size: 0.4"></a-entity>\n\n  <a-entity\n    id="victoryInfoAccuracy"\n    class="accuracyTextCounterSubscribe"\n    mixin="font"\n    bind__text="color: colorSecondary; opacity: isVictory && 0 || 0; value: score.score + \' POINTS\'"\n    animation="property: components.text.material.uniforms.opacity.value; from: 0; to: 1; startEvents: textcounterdone"\n    text="align: left; wrapCount: 22; baseline: top; width: 0.81"\n    position="0.85 0.2 0"\n    render-order="menuitemtext"></a-entity>\n\n  <a-entity\n    id="victoryInfoBeatsHit"\n    class="accuracyTextCounterSubscribe"\n    mixin="font"\n    bind__text="color: colorSecondary; opacity: isVictory && 0 || 0; value: score.beatsText"\n    animation="property: components.text.material.uniforms.opacity.value; from: 0; to: 1; startEvents: textcounterdone"\n    text="align: left; wrapCount: 22; baseline: top; width: 0.81"\n    position="0.85 0.1 0"\n    render-order="menuitemtext"></a-entity>\n\n  <a-entity\n    id="victoryInfoAccuracy"\n    mixin="font"\n    bind__text="color: colorTertiary"\n    text="value: 0; align: center; wrapCount: 15; baseline: top; width: 2.25"\n    bind__text-counter="enabled: isVictory; value: score.finalAccuracy"\n    text-counter="suffix: %"\n    position="0 -0.47 0"\n    render-order="menuitemtext"></a-entity>\n\n  <a-entity\n    id="victoryInfoMaxCombo"\n    mixin="font"\n    bind__text="color: colorSecondary"\n    bind__text-counter="enabled: isVictory; value: score.maxCombo"\n    text="align: center; wrapCount: 22; baseline: top; width: 1"\n    text-counter="prefix: MAX STREAK: ; emit: true"\n    proxy-event="event: textcounterdone; to: .accuracyTextCounterSubscribe"\n    position="0 -0.58 0"\n    render-order="menuitemtext"></a-entity>\n\n  <a-entity\n    id="victoryButtons"\n    play-sound="event: mouseenter; sound: #hoverSound; volume: 0.03"\n    play-sound__click="event: click; sound: #confirmSound; volume: 0.25"\n    render-order="menubutton">\n    <a-entity\n      id="victoryRestartButton"\n      class="accuracyTextCounterSubscribe"\n      mixin="gameMenuButton"\n      bind-toggle__raycastable="isVictory"\n      bind__material="opacity: isVictory && 0 || 0"\n      animation="property: components.material.material.uniforms.opacity.value; from: 0; to: 1; startEvents: textcounterdone"\n      position="-0.56 -0.79 0.05"\n      proxy-event="event: click; to: a-scene; as: gamemenurestart">\n      <a-entity\n        class="accuracyTextCounterSubscribe"\n        mixin="gameMenuButtonText"\n        bind__text="opacity: isVictory && 0 || 0"\n        animation="property: components.text.material.uniforms.opacity.value; from: 0; to: 1; startEvents: textcounterdone"\n        render-order="menuitemtext"\n        text="opacity: 0; value: PLAY AGAIN"></a-entity>\n    </a-entity>\n\n    <a-entity\n      id="victoryExitButton"\n      class="accuracyTextCounterSubscribe"\n      mixin="gameMenuButton"\n      bind-toggle__raycastable="isVictory"\n      bind__material="opacity: isVictory && 0 || 0"\n      animation="property: components.material.material.uniforms.opacity.value; from: 0; to: 1; startEvents: textcounterdone"\n      position="0.56 -0.79 0.05"\n      proxy-event="event: click; to: a-scene; as: gamemenuexit">\n      <a-entity\n        class="accuracyTextCounterSubscribe"\n        mixin="gameMenuButtonText"\n        bind__text="opacity: isVictory && 0 || 0"\n        animation="property: components.text.material.uniforms.opacity.value; from: 0; to: 1; startEvents: textcounterdone"\n        render-order="menuitemtext"\n        text="opacity: 0; value: BACK TO MENU"></a-entity>\n    </a-entity>\n  </a-entity>\n</a-entity>\n\x3c!-- </require> --\x3e</require>\n  \x3c!-- <require path="C:UsersQuitterieDesktopQUITTERIE\facL3StageApterostageelyamoonrider-mastersrc\templatesleaderboard.html"> --\x3e\n<a-entity\n  id="leaderboard"\n  class="accuracyTextCounterSubscribe"\n  bind__animation="enabled: isVictory"\n  bind__scale="isVictory && \'0 0 0\' || \'1 1 1\'"\n  bind__visible="(!!menuSelectedChallenge.id || !!challenge.id) && (menuActive || isPaused || isVictory || isLoading) && !genreMenuOpen && gameMode !== \'ride\'"\n  position="2.36 1.5 -1.19"\n  rotation="0 -60 0"\n  animation="property: scale; from: 0 0 0; to: 1 1 1; easing: easeOutBack; startEvents: textcounterdone"\n  render-order="menuitem">\n\n  <a-entity\n    bind-toggle__raycastable="leaderboardActive"\n    id="leaderboardBackground" position="0 0 0"\n    geometry="primitive: plane; width: 2; height: 2"\n    material="shader: panelShader; ratio: 1.16; brightness: 0.2"></a-entity>\n\n  <a-entity\n    id="leaderboardChallengeImage"\n    bind__menu-selected-challenge-image="selectedChallengeId: menuSelectedChallenge.id"\n    bind__visible="!isVictory"\n    geometry="primitive: plane; height: 0.12; width: 0.12"\n    material="shader: flat"\n    position="-0.44 0.63 0.001"></a-entity>\n\n  <a-entity\n    id="leaderboardTitle"\n    mixin="font"\n    text="align: center; width: 2.5; value: LEADERBOARD"\n    position="0.05 0.55 0.001"\n    bind__visible="!leaderboardQualified"></a-entity>\n\n  <a-entity\n    id="leaderboardNames"\n    mixin="font"\n    bind__text="color: colorSecondary; value: leaderboardNames"\n    bind__visible="!leaderboardQualified && !leaderboardEmpty"\n    text="baseline: top; width: 1.2; anchor: left; wrapCount: 28; lineHeight: 53;"\n    position="-0.7 0.3 0.001"></a-entity>\n\n  <a-entity\n    id="leaderboardScores"\n    mixin="font"\n    bind__text="value: leaderboardScores"\n    bind__visible="!leaderboardQualified && !leaderboardEmpty"\n    text="baseline: top; align: right; width: 1.2; anchor: right; color: #fff; wrapCount: 28; lineHeight: 53;"\n    position="0.7 0.3 0.001"></a-entity>\n\n  <a-entity\n    id="leaderboardEmpty"\n    mixin="font"\n    bind__visible="leaderboard.length === 0 && !leaderboardQualified && !leaderboardLoading"\n    text="align: center; color: #999; baseline: center; width: 2; value: No high scores. Be the first!"\n    position="0 0 0.001"></a-entity>\n\n  <a-entity\n    id="leaderboardKeyboard"\n    bind__super-keyboard="hand: activeHand === \'left\' && \'#leftHand\' || \'#rightHand\'; show: leaderboardQualified"\n    super-keyboard="inputColor: #fff; hand: #rightHand; imagePath: assets/img/keyboard; font: assets/fonts/Viga-Regular.json; align: center; model: superkeyboard; keyColor: #fff; injectToRaycasterObjects: false; filters: allupper; keyHoverColor: #fff; maxLength: 15; width: 1.5; label: NEW HIGH SCORE!\nENTER THE LEADERBOARD; labelColor: #FAFAFA"\n    position="0 -0.08 0.02"\n    proxy-event__change="event: superkeyboardchange; to: a-scene; as: leaderboardusername"\n    keyboard-raycastable="condition: leaderboardQualified"\n    render-order="menutext"\n    render-order-recursive>\n  </a-entity>\n\n  <a-entity id="leaderboardSubmit"\n    position="0 -0.67 0.002"\n    mixin="bigMenuButton"\n    bind__visible-raycastable="leaderboardQualified"\n    proxy-event="event: click; to: a-scene; as: leaderboardsubmit">\n      <a-entity mixin="font" text="align: center; color: #FFF; wrapCount: 26; value: SUBMIT HIGH SCORE" position="0 -0.055 0.01"></a-entity>\n    \x3c!--slice9="width: 1.5; height: 0.24"--\x3e\n  </a-entity>\n</a-entity>\n\x3c!-- </require> --\x3e</require>\n  \x3c!-- <require path="C:UsersQuitterieDesktopQUITTERIE\facL3StageApterostageelyamoonrider-mastersrc\templates\news.html"> --\x3e\n\x3c!-- </require> --\x3e</require>\n\n  <a-entity\n    id="curve"\n    material="shader: supercurve"\n    supercurve\n    supercurve-color\n    render-order="curve"></a-entity>\n\n  <a-entity\n    id="tunnelsContainer"\n    render-order="curve"\n    bind__visible="isPlaying || isPaused"></a-entity>\n\n  <a-entity\n    id="beatContainer"\n    beat-hit-sound\n    bind__visible="isPlaying"></a-entity>\n\n  <a-entity\n    id="wallContainer"\n    bind__visible="isPlaying"></a-entity>\n\n  <a-entity id="curveFollowRig"\n    bind__curve-follow-rig-reset="isVictory: isVictory"\n    bind__supercurve-follow="enabled: isPlaying; speed: speed"\n    supercurve-follow="target: #curve">\n\n    \x3c!-- <require path="C:UsersQuitterieDesktopQUITTERIE\facL3StageApterostageelyamoonrider-mastersrc\templatesstageFollow.html"> --\x3e\n<a-entity\n  id="tube"\n  bind__visible="isPlaying"\n  rotation="90 180 0"\n  position="0 0 -5"\n  geometry="primitive: cylinder; radius: 3; openEnded: true; height: 20"\n  materials="name: tube"\n  animation="property: components.materials.material.uniforms.opacity.value; from: 1; to: 0; easing: easeInOutCubic; startEvents: pulse"></a-entity>\n\n<a-entity\n  id="platformShadow"\n  obj-model="obj: #homeShadowObj"\n  position="0 0.02 0"\n  material="src: #homeShadowImg; shader: flat; blending: multiply; transparent: true;"\n  raycastable-game\n  render-order="curveshadow"\n  stepback></a-entity>\n\n<a-entity\n  id="platform"\n  obj-model="obj: #homeObj"\n  materials="name: home"\n  bind__materials="animate: isPlaying"></a-entity>\n\n<a-entity\n  id="sideGlows"\n  bind__visible="isPlaying || isPaused">\n  <a-entity\n    id="leftSideGlow"\n    geometry="primitive: plane; width: 8; height: 2"\n    materials="name: leftsideglow"\n    position="-2.1 .5 -3"\n    rotation="20 -90 0"\n    render-order="sideglow">\n  </a-entity>\n  <a-entity\n    id="rightSideGlow"\n    geometry="primitive: plane; width: 8; height: 2"\n    materials="name: rightsideglow"\n    position="2.1 .5 -3"\n    rotation="-20 -90 0"\n    render-order="sideglow">\n  </a-entity>\n</a-entity>\n\n<a-entity\n  id="light"\n  light="type: hemisphere; color: #666"\n  position="0 10 20"></a-entity>\n\n\n\x3c!-- </require> --\x3e</require>\n    \x3c!-- <require path="C:UsersQuitterieDesktopQUITTERIE\facL3StageApterostageelyamoonrider-mastersrc\templatesscore.html"> --\x3e\n<a-mixin\n  id="scoreText"\n  mixin="font"\n  text="lineHeight: 40; color: #FAFAFA; letterSpacing: -2; align: center; opacity: 0.7"></a-mixin>\n\n<a-entity\n  id="scoreContainer"\n  bind__score-texts="isLoading: isLoading"\n  bind__visible="score.active"\n  render-order="score">\n\n  <a-entity\n    id="songProgressRing"\n    bind__material="color: colorSecondary"\n    bind__song-progress-info="enabled: isPlaying || isPaused && challenge.isBeatsPreloaded"\n    geometry="primitive: plane; width: 0.57; height: 0.03"\n    material="shader: flat"\n    position="1.525 0.1 -3.94"\n    rotation="-30 0 0">\n  </a-entity>\n\n  <a-entity id="scoreNumberContainer" position="1.5 0.13 -4">\n    <a-entity\n      id="combo"\n      mixin="scoreText"\n      bind__text="color: colorPrimary; value: \'STREAK  \' + score.combo"\n      text="width: 3.5; align: left; anchor: left"\n      rotation="-20 0 0"\n      position="-0.025 0.175 0"></a-entity>\n\n    <a-entity\n      id="accuracy"\n      mixin="scoreText"\n      bind__text="color: colorSecondary; value: score.accuracyInt + \'%\' + \' / \' + score.score"\n      text="width: 3.5; align: left; anchor: left"\n      rotation="-20 0 0"></a-entity>\n  </a-entity>\n</a-entity>\n\x3c!-- </require> --\x3e</require>\n    \x3c!-- <require path="C:UsersQuitterieDesktopQUITTERIE\facL3StageApterostageelyamoonrider-mastersrc\templatesgameMenu.html"> --\x3e\n<a-mixin\n  id="gameMenuButton"\n  mixin="bigMenuButton"\n  animation__mouseenter="property: components.material.material.uniforms.activePanel.value; from: 0; to: 1; startEvents: mouseenter; pauseEvents: mouseleave; dur: 70"\n  animation__mouseleave="property: components.material.material.uniforms.activePanel.value; from: 1; to: 0; startEvents: mouseleave; pauseEvents: mouseenter; dur: 70"\n  geometry="height: 0.28"></a-mixin>\n\n<a-mixin\n  id="gameMenuButtonText"\n  mixin="font"\n  position="0 -0.08 0.01"\n  render-order="menutext"\n  text="align: center; wrapCount: 17"></a-mixin>\n\n\x3c!-- Titles. --\x3e\n<a-entity id="inGameMenuTitles" position="0 2.2 -2.3">\n  <a-entity mixin="gameMenuButtonText" text="value: GAME OVER; color: #f01978; width: 3.5" bind__visible="isGameOver"></a-entity>\n  <a-entity mixin="gameMenuButtonText" text="value: SONG CLEARED; color: #FFF; width: 3.5" bind__visible="isVictory" position="0 0.1 0"></a-entity>\n  <a-entity mixin="gameMenuButtonText" bind__text="color: colorPrimary" text="value: PAUSED; width: 3.5" bind__visible="isPaused"></a-entity>\n</a-entity>\n\n<a-entity\n  id="gameMenu"\n  bind__visible="isPaused || isVictory"\n  position="0 1.5 -2"\n  play-sound="event: mouseenter; sound: #hoverSound; volume: 0.1"\n  play-sound__click="event: click; sound: #confirmSound; volume: 0.25">\n\n  \x3c!-- Actions. --\x3e\n  <a-entity\n    id="resumeButton"\n    mixin="gameMenuButton"\n    bind-toggle__raycastable="isPaused"\n    bind__visible="isPaused"\n    position="0 0.35 0"\n    proxy-event="event: click; to: a-scene; as: gamemenuresume">\n    <a-entity mixin="gameMenuButtonText" text="value: RESUME"></a-entity>\n  </a-entity>\n\n  <a-entity\n    id="restartButton"\n    mixin="gameMenuButton"\n    bind__visible="!isVictory"\n    bind-toggle__raycastable="isPaused || isGameOver"\n    proxy-event="event: click; to: a-scene; as: gamemenurestart">\n    <a-entity mixin="gameMenuButtonText" text="value: RESTART SONG"></a-entity>\n  </a-entity>\n\n  <a-entity\n    id="exitButton"\n    mixin="gameMenuButton"\n    bind__visible="!isVictory"\n    bind-toggle__raycastable="isPaused || isGameOver"\n    position="0 -0.35 0"\n    proxy-event="event: click; to: a-scene; as: gamemenuexit">\n    <a-entity mixin="gameMenuButtonText" text="value: EXIT TO MENU"></a-entity>\n  </a-entity>\n\n  \x3c!-- Song info. --\x3e\n  <a-entity id="gameMenuSongInfoContainer"\n    position="0 -1 0.15473"\n    rotation="-20 0 0"\n    song-info-positioner\n    bind__song-info-positioner="victory: isVictory">\n    <a-entity id="gameMenuSongBackground"\n      bind-toggle__raycastable="isPaused || isVictory"\n      render-order="menu"\n      geometry="primitive: plane; width: 2.5; height: 0.3"\n      material="shader: panelShader; transparent: true; ratio: 4; borderRadius: 0.5; borderWidth: 0.02"\n      position="0 0 -0.03"></a-entity>\n\n    <a-entity id="gameMenuSongImage"\n      copy-texture="from: #menuSelectedChallengeImage"\n      geometry="primitive: plane; buffer: false; skipCache: true; height: 0.3; width: 0.3"\n      material="shader: flat"\n      position="-1 0 0"></a-entity>\n\n    <a-entity id="gameMenuSongInfo">\n      <a-entity\n        id="gameMenuSongName"\n        position="0 0.01 0"\n        mixin="font" text="align: center; color: #fff; wrapCount: 30; baseline: top; lineHeight: 36; width: 1.2"\n        bind__text="value: challenge.songName"></a-entity>\n      <a-entity\n        id="gameMenuSongSubName"\n        mixin="font"\n        position="0 -0.09 0"\n        bind__text="color: colorSecondary"\n        bind__text-truncate="value: challenge.songSubName + \' - \' + challenge.author"\n        text-truncate="length: 80"\n        text="wrapCount: 80; align: center; width: 2.4" bind__text="value: menuSelectedChallenge.songSubName"></a-entity>\n    </a-entity>\n  </a-entity>\n</a-entity>\n\x3c!-- </require> --\x3e</require>\n\n    \x3c!-- Beat pieces, explosions, fx, and weapon trail. --\x3e\n    <a-entity id="rigContainer"></a-entity>\n\n    \x3c!-- Supercut FX rings. --\x3e\n    \n      <a-entity class="superCutFx" mixin="superCut"></a-entity>\n    \n      <a-entity class="superCutFx" mixin="superCut"></a-entity>\n    \n      <a-entity class="superCutFx" mixin="superCut"></a-entity>\n    \n      <a-entity class="superCutFx" mixin="superCut"></a-entity>\n    \n\n    \x3c!-- Player. --\x3e\n    <a-entity id="cameraRig">\n      <a-entity\n        id="camera"\n        bind__wasd-controls="enabled: !inVr"\n        position="0 1.6 0.5"\n        camera="far: 10000"\n        look-controls\n        player-height\n        wasd-controls="acceleration: 15"></a-entity>\n      <a-entity\n        id="cameraWallCollider"\n        bind__raycaster__wall="enabled: isPlaying && gameMode !== \'ride\'"\n        proxy-event__wallhitstart="event: raycaster-intersection; to: a-scene; as: wallhitstart"\n        proxy-event__wallhitend="event: raycaster-intersection-cleared; to: a-scene; as: wallhitend"\n        follow-position="target: #camera"\n        raycaster__wall="objects: [data-wall-active]; interval: 150; direction: 0 -1 0; far: 5"\n        visible="false"></a-entity>\n    </a-entity>\n\n    <a-entity\n      id="controllerRig"\n      proxy-event="event: recentered; to: #cameraRig; captureBubbles: true; as: recenter">\n      \n\n      \n        <a-entity id="leftHand"\n          class="weapon"\n          bind__hand-swapper="enabled: rightRaycasterActive"\n          bind__haptics-wall="enabled: isPlaying && gameMode === \'classic\'"\n          bind__headfist="isPlaying: isPlaying"\n          bind__menu-controls="enabled: mainMenuActive"\n          bind__pauser="enabled: isPlaying"\n          bind__punch="enabled: isPlaying && gameMode === \'punch\'"\n          bind__raycaster="enabled: leftRaycasterActive"\n          bind__raycaster__game="enabled: isPlaying && (gameMode === \'classic\' || gameMode === \'punch\')"\n          bind__blade="enabled: isPlaying && gameMode === \'classic\'"\n          bind__weapon-particles="enabled: isPlaying; gameMode: gameMode"\n          bind__trail="colorScheme: colorScheme; enabled: isPlaying && gameMode === \'classic\'"\n          controller="hand: left"\n          data-hand="left"\n          haptics="events: mouseenter; dur: 35; force: 0.075"\n          haptics__beat="events: beathaptic; dur: 90; force: 0.55"\n          haptics__draw="events: drawblade; dur: 750; force: 0.025"\n          haptics__plume="events: plumepulse; dur: 35; force: 0.1"\n          headfist="hand: left"\n          raycaster="objects: [raycastable]; far: 5; showLine: false"\n          raycaster__game="objects: [raycastable-game]; far: 1; interval: 71; direction: 0 1 -1"\n          weapon="hand: left"\n          weapon-particles="hand: left"\n          thumb-controls\n          thumb-controls-debug="enabled: false; hand: left; controllerType: vive-controls"\n          render-order="weapon"\n          trail="color: primary; hand: left">\n          <a-entity bind__position="has3DOFVR && \'0 0 -0.5\' || \'0 0 0\'">\n            <a-entity\n              id="leftLaser"\n              class="laser"\n              bind__material="color: colorPrimary"\n              bind__cursor-laser="enabled: activeHand === \'left\' && !isPlaying"\n              geometry="primitive: cylinder; height: 1; radius: 0.005"\n              material="shader: flat; opacity: 0.25; transparent: true"\n              rotation="-90 0 0"></a-entity>\n          </a-entity>\n\n          \x3c!-- Blade. --\x3e\n          <a-entity bind__position="has3DOFVR && \'0 0 -0.5\' || \'0 0 0\'"\n                    bind__rotation="controllerType.indexOf(\'oculus\') !== -1 && \'135 0 0\' || \'90 0 0\'">\n            <a-entity\n              class="bladeContainer"\n              bind__visible="isPlaying && gameMode === \'classic\'"\n              animation="property: scale; from: 0 0 0; to: 1 1 1; dur: 750; easing: linear; startEvents: drawblade"\n              scale="0.001 0.001 0.001">\n              <a-entity\n                class="blade bladeleft"\n                obj-model="obj: #weaponObj"\n                materials="name: leftWeapon"\n                render-order="weapon"\n                position="0 -0.43 0">\n                <a-entity class="bladeTipHelper" position="0 -0.45 0"></a-entity>\n              </a-entity>\n            </a-entity>\n\n            <a-entity\n              class="bladeHandle"\n              bind__visible="!isPlaying || gameMode === \'classic\'"\n              obj-model="obj: #weaponHandleObj"\n              materials="name: leftWeaponHandle">\n              <a-entity class="bladeHandleHelper"></a-entity>\n            </a-entity>\n          </a-entity>\n\n          \x3c!-- Punch. --\x3e\n          <a-entity\n            id="leftpunch"\n            class="punch"\n            render-order="weapon"\n            bind__visible="isPlaying && gameMode === \'punch\'"\n            bind__position="has3DOFVR && \'0 0 -0.75\' || \'0 0 0\'"\n            rotation="0 0 0">\n              <a-entity\n                class="punchFist"\n                obj-model="obj: #leftFistObj"\n                materials="name: leftFist"></a-entity>\n              <a-entity\n                class="punchBbox"\n                geometry="primitive: box; width: 0.2; height: 0.23; depth: 0.15"\n                material="shader: flat; opacity: 0.5"\n                position="0 0.05 0.1"\n                rotation="30 0 0"\n                visible="false"></a-entity>\n              <a-entity\n                obj-model="obj: #leftFistWeaponObj"\n                materials="name: leftFistWeapon"></a-entity>\n          </a-entity>\n\n          \x3c!-- Ride. --\x3e\n          <a-entity\n            id="leftstar"\n            class="handStar"\n            render-order="weapon"\n            bind__visible="isPlaying && gameMode === \'ride\'">\n              <a-entity\n                class="handStar"\n                bind__material="colorPrimary: colorPrimary; colorSecondary: colorSecondary; colorTertiary: colorTertiary"\n                geometry="primitive: sphere; radius: 0.1"\n                material="shader: handStar"\n                animation__pulse="property: components.material.material.uniforms.pulse.value; from: 2; to: 0; dur: 300; startEvents: plumepulse; easing: easeInOutQuad"\n                animation__scale="property: scale; from: 2 2 2; to: 1 1 1; dur: 1200; startEvents: plumepulse; easing: easeInOutQuad"></a-entity>\n          </a-entity>\n        </a-entity>\n\n        <a-entity\n          id="leftCursorMesh"\n          mixin="cursorMesh"\n          bind__cursor-mesh="active: leftRaycasterActive && !isPlaying"\n          bind__material="color: colorPrimary"\n          cursor-mesh="cursorEl: #leftHand"\n          material\n          render-order="cursor"\n          scale="1.3 1.3 1.3"></a-entity>\n      \n      \n        <a-entity id="rightHand"\n          class="weapon"\n          bind__hand-swapper="enabled: leftRaycasterActive"\n          bind__haptics-wall="enabled: isPlaying && gameMode === \'classic\'"\n          bind__headfist="isPlaying: isPlaying"\n          bind__menu-controls="enabled: mainMenuActive"\n          bind__pauser="enabled: isPlaying"\n          bind__punch="enabled: isPlaying && gameMode === \'punch\'"\n          bind__raycaster="enabled: rightRaycasterActive"\n          bind__raycaster__game="enabled: isPlaying && (gameMode === \'classic\' || gameMode === \'punch\')"\n          bind__blade="enabled: isPlaying && gameMode === \'classic\'"\n          bind__weapon-particles="enabled: isPlaying; gameMode: gameMode"\n          bind__trail="colorScheme: colorScheme; enabled: isPlaying && gameMode === \'classic\'"\n          controller="hand: right"\n          data-hand="right"\n          haptics="events: mouseenter; dur: 35; force: 0.075"\n          haptics__beat="events: beathaptic; dur: 90; force: 0.55"\n          haptics__draw="events: drawblade; dur: 750; force: 0.025"\n          haptics__plume="events: plumepulse; dur: 35; force: 0.1"\n          headfist="hand: right"\n          raycaster="objects: [raycastable]; far: 5; showLine: false"\n          raycaster__game="objects: [raycastable-game]; far: 1; interval: 70; direction: 0 1 -1"\n          weapon="hand: right"\n          weapon-particles="hand: right"\n          thumb-controls\n          thumb-controls-debug="enabled: false; hand: right; controllerType: vive-controls"\n          render-order="weapon"\n          trail="color: secondary; hand: right">\n          <a-entity bind__position="has3DOFVR && \'0 0 -0.5\' || \'0 0 0\'">\n            <a-entity\n              id="rightLaser"\n              class="laser"\n              bind__material="color: colorSecondary"\n              bind__cursor-laser="enabled: activeHand === \'right\' && !isPlaying"\n              geometry="primitive: cylinder; height: 1; radius: 0.005"\n              material="shader: flat; opacity: 0.25; transparent: true"\n              rotation="-90 0 0"></a-entity>\n          </a-entity>\n\n          \x3c!-- Blade. --\x3e\n          <a-entity bind__position="has3DOFVR && \'0 0 -0.5\' || \'0 0 0\'"\n                    bind__rotation="controllerType.indexOf(\'oculus\') !== -1 && \'135 0 0\' || \'90 0 0\'">\n            <a-entity\n              class="bladeContainer"\n              bind__visible="isPlaying && gameMode === \'classic\'"\n              animation="property: scale; from: 0 0 0; to: 1 1 1; dur: 750; easing: linear; startEvents: drawblade"\n              scale="0.001 0.001 0.001">\n              <a-entity\n                class="blade bladeright"\n                obj-model="obj: #weaponObj"\n                materials="name: rightWeapon"\n                render-order="weapon"\n                position="0 -0.43 0">\n                <a-entity class="bladeTipHelper" position="0 -0.45 0"></a-entity>\n              </a-entity>\n            </a-entity>\n\n            <a-entity\n              class="bladeHandle"\n              bind__visible="!isPlaying || gameMode === \'classic\'"\n              obj-model="obj: #weaponHandleObj"\n              materials="name: rightWeaponHandle">\n              <a-entity class="bladeHandleHelper"></a-entity>\n            </a-entity>\n          </a-entity>\n\n          \x3c!-- Punch. --\x3e\n          <a-entity\n            id="rightpunch"\n            class="punch"\n            render-order="weapon"\n            bind__visible="isPlaying && gameMode === \'punch\'"\n            bind__position="has3DOFVR && \'0 0 -0.75\' || \'0 0 0\'"\n            rotation="0 0 0">\n              <a-entity\n                class="punchFist"\n                obj-model="obj: #rightFistObj"\n                materials="name: rightFist"></a-entity>\n              <a-entity\n                class="punchBbox"\n                geometry="primitive: box; width: 0.2; height: 0.23; depth: 0.15"\n                material="shader: flat; opacity: 0.5"\n                position="0 0.05 0.1"\n                rotation="30 0 0"\n                visible="false"></a-entity>\n              <a-entity\n                obj-model="obj: #rightFistWeaponObj"\n                materials="name: rightFistWeapon"></a-entity>\n          </a-entity>\n\n          \x3c!-- Ride. --\x3e\n          <a-entity\n            id="rightstar"\n            class="handStar"\n            render-order="weapon"\n            bind__visible="isPlaying && gameMode === \'ride\'">\n              <a-entity\n                class="handStar"\n                bind__material="colorPrimary: colorPrimary; colorSecondary: colorSecondary; colorTertiary: colorTertiary"\n                geometry="primitive: sphere; radius: 0.1"\n                material="shader: handStar"\n                animation__pulse="property: components.material.material.uniforms.pulse.value; from: 2; to: 0; dur: 300; startEvents: plumepulse; easing: easeInOutQuad"\n                animation__scale="property: scale; from: 2 2 2; to: 1 1 1; dur: 1200; startEvents: plumepulse; easing: easeInOutQuad"></a-entity>\n          </a-entity>\n        </a-entity>\n\n        <a-entity\n          id="rightCursorMesh"\n          mixin="cursorMesh"\n          bind__cursor-mesh="active: rightRaycasterActive && !isPlaying"\n          bind__material="color: colorSecondary"\n          cursor-mesh="cursorEl: #rightHand"\n          material\n          render-order="cursor"\n          scale="1.3 1.3 1.3"></a-entity>\n      \n    </a-entity>\n\n    <a-entity\n      id="stepback"\n      position="0 1.6 -1.55"\n      geometry="primitive: plane; width: 0.25; height: 0.25;"\n      material="shader: flat; src: #stepbackImg; transparent: true; opacity: 0"\n      render-order="stepback"></a-entity>\n  </a-entity>\n\n  <a-entity\n    id="mouseCursor"\n    bind__raycaster="enabled: !inVR"\n    cursor="rayOrigin: mouse"\n    raycaster="objects: [raycastable]"></a-entity>\n  <a-entity\n    id="mouseCursorMesh"\n    mixin="cursorMesh"\n    cursor-mesh="cursorEl: #mouseCursor"\n    bind__cursor-mesh="active: menuActive"\n    render-order="cursor"></a-entity>\n\n  <a-entity\n    tail="target: #leftstar"\n    render-order="weapon"\n    bind__visible="isPlaying && gameMode === \'ride\'"></a-entity>\n  <a-entity\n    tail="target: #rightstar"\n    render-order="weapon"\n    bind__visible="isPlaying && gameMode === \'ride\'"></a-entity>\n</a-scene>\n';document.addEventListener("DOMContentLoaded",(function(){let e=document.getElementById("app");e||((e=document.createElement("div")).id="app",document.body.appendChild(e)),e.innerHTML=r}));{const t=n(221).DiffDOM;if(e.hot.accept(),e.hot.data&&e.hot.data.oldHtml){const n=e.hot.data.oldHtml,i=new t,o=document.createElement("div");o.innerHTML=n;const a=document.createElement("div");a.innerHTML=r;const s=i.diff(o.querySelector("a-scene"),a.querySelector("a-scene"));i.apply(document.querySelector("a-scene"),s)}e.hot.dispose(e=>{e.oldHtml=r})}},function(e,t,n){"use strict";function r(e,t,n){let i;return"#text"===e.nodeName?i=n.document.createTextNode(e.data):"#comment"===e.nodeName?i=n.document.createComment(e.data):("svg"===e.nodeName||t?(i=n.document.createElementNS("http://www.w3.org/2000/svg",e.nodeName),t=!0):i=n.document.createElement(e.nodeName),e.attributes&&Object.entries(e.attributes).forEach(([e,t])=>i.setAttribute(e,t)),e.childNodes&&e.childNodes.forEach(e=>i.appendChild(r(e,t,n))),n.valueDiffing&&(e.value&&(i.value=e.value),e.checked&&(i.checked=e.checked),e.selected&&(i.selected=e.selected))),i}function i(e,t){for(t=t.slice();t.length>0;){if(!e.childNodes)return!1;const n=t.splice(0,1)[0];e=e.childNodes[n]}return e}function o(e,t,n){let o,a,s,u,l,c=i(e,t[n._const.route]);const h={diff:t,node:c};if(n.preDiffApply(h))return!0;switch(t[n._const.action]){case n._const.addAttribute:if(!c||!c.setAttribute)return!1;c.setAttribute(t[n._const.name],t[n._const.value]);break;case n._const.modifyAttribute:if(!c||!c.setAttribute)return!1;c.setAttribute(t[n._const.name],t[n._const.newValue]),"INPUT"===c.nodeName&&"value"===t[n._const.name]&&(c.value=t[n._const.oldValue]);break;case n._const.removeAttribute:if(!c||!c.removeAttribute)return!1;c.removeAttribute(t[n._const.name]);break;case n._const.modifyTextElement:if(!c||3!==c.nodeType)return!1;n.textDiff(c,c.data,t[n._const.oldValue],t[n._const.newValue]);break;case n._const.modifyValue:if(!c||void 0===c.value)return!1;c.value=t[n._const.newValue];break;case n._const.modifyComment:if(!c||void 0===c.data)return!1;n.textDiff(c,c.data,t[n._const.oldValue],t[n._const.newValue]);break;case n._const.modifyChecked:if(!c||void 0===c.checked)return!1;c.checked=t[n._const.newValue];break;case n._const.modifySelected:if(!c||void 0===c.selected)return!1;c.selected=t[n._const.newValue];break;case n._const.replaceElement:c.parentNode.replaceChild(r(t[n._const.newValue],"http://www.w3.org/2000/svg"===c.namespaceURI,n),c);break;case n._const.relocateGroup:(u=Array(...new Array(t.groupLength)).map(()=>c.removeChild(c.childNodes[t[n._const.from]]))).forEach((e,r)=>{0===r&&(a=c.childNodes[t[n._const.to]]),c.insertBefore(e,a||null)});break;case n._const.removeElement:c.parentNode.removeChild(c);break;case n._const.addElement:l=(s=t[n._const.route].slice()).splice(s.length-1,1)[0],(c=i(e,s)).insertBefore(r(t[n._const.element],"http://www.w3.org/2000/svg"===c.namespaceURI,n),c.childNodes[l]||null);break;case n._const.removeTextElement:if(!c||3!==c.nodeType)return!1;c.parentNode.removeChild(c);break;case n._const.addTextElement:if(l=(s=t[n._const.route].slice()).splice(s.length-1,1)[0],o=n.document.createTextNode(t[n._const.value]),!(c=i(e,s))||!c.childNodes)return!1;c.insertBefore(o,c.childNodes[l]||null);break;default:console.log("unknown action")}return h.newNode=o,n.postDiffApply(h),!0}function a(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}n.r(t);class s{constructor(e={}){Object.entries(e).forEach(([e,t])=>this[e]=t)}toString(){return JSON.stringify(this)}setValue(e,t){return this[e]=t,this}}function u(e){const t=[];return"#text"!==e.nodeName&&"#comment"!==e.nodeName&&(t.push(e.nodeName),e.attributes&&(e.attributes.class&&t.push(`${e.nodeName}.${e.attributes.class.replace(/ /g,".")}`),e.attributes.id&&t.push(`${e.nodeName}#${e.attributes.id}`))),t}function l(e){const t={},n={};return e.forEach(e=>{u(e).forEach(e=>{const r=e in t;r||e in n?r&&(delete t[e],n[e]=!0):t[e]=!0})}),t}function c(e,t){const n=l(e),r=l(t),i={};return Object.keys(n).forEach(e=>{r[e]&&(i[e]=!0)}),i}function h(e){return delete e.outerDone,delete e.innerDone,delete e.valueDone,!e.childNodes||e.childNodes.every(h)}function d(e,t){if(!["nodeName","value","checked","selected","data"].every(n=>e[n]===t[n]))return!1;if(Boolean(e.attributes)!==Boolean(t.attributes))return!1;if(Boolean(e.childNodes)!==Boolean(t.childNodes))return!1;if(e.attributes){const n=Object.keys(e.attributes),r=Object.keys(t.attributes);if(n.length!==r.length)return!1;if(!n.every(n=>e.attributes[n]===t.attributes[n]))return!1}if(e.childNodes){if(e.childNodes.length!==t.childNodes.length)return!1;if(!e.childNodes.every((e,n)=>d(e,t.childNodes[n])))return!1}return!0}function f(e,t,n,r,i){if(!e||!t)return!1;if(e.nodeName!==t.nodeName)return!1;if("#text"===e.nodeName)return!!i||e.data===t.data;if(e.nodeName in n)return!0;if(e.attributes&&t.attributes){if(e.attributes.id){if(e.attributes.id!==t.attributes.id)return!1;if(`${e.nodeName}#${e.attributes.id}`in n)return!0}if(e.attributes.class&&e.attributes.class===t.attributes.class&&`${e.nodeName}.${e.attributes.class.replace(/ /g,".")}`in n)return!0}if(r)return!0;const o=e.childNodes?e.childNodes.slice().reverse():[],a=t.childNodes?t.childNodes.slice().reverse():[];if(o.length!==a.length)return!1;if(i)return o.every((e,t)=>e.nodeName===a[t].nodeName);{const e=c(o,a);return o.every((t,n)=>f(t,a[n],e,!0,!0))}}function p(e){return JSON.parse(JSON.stringify(e))}function m(e,t,n,r){let i=0,o=[];const a=e.length,s=t.length,l=Array(...new Array(a+1)).map(()=>[]),h=c(e,t);let d=a===s;d&&e.some((e,n)=>{const r=u(e),i=u(t[n]);return r.length!==i.length?(d=!1,!0):(r.some((e,t)=>{if(e!==i[t])return d=!1,!0}),!d||void 0)});for(let u=0;u<a;u++){const a=e[u];for(let e=0;e<s;e++){const s=t[e];n[u]||r[e]||!f(a,s,h,d)?l[u+1][e+1]=0:(l[u+1][e+1]=l[u][e]?l[u][e]+1:1,l[u+1][e+1]>=i&&(i=l[u+1][e+1],o=[u+1,e+1]))}}return 0!==i&&{oldValue:o[0]-i,newValue:o[1]-i,length:i}}function g(e,t){return Array(...new Array(e)).map(()=>t)}class y{constructor(){this.list=[]}add(e){this.list.push(...e)}forEach(e){this.list.forEach(t=>e(t))}}function v(e,t){let n,r,i=e;for(t=t.slice();t.length>0;){if(!i.childNodes)return!1;r=t.splice(0,1)[0],n=i,i=i.childNodes[r]}return{node:i,parentNode:n,nodeIndex:r}}function b(e,t,n){return t.forEach(t=>{!function(e,t,n){const r=v(e,t[n._const.route]);let i=r.node;const o=r.parentNode,a=r.nodeIndex,s=[],u={diff:t,node:i};if(n.preDiffApply(u))return!0;let l,c,h,d;switch(t[n._const.action]){case n._const.addAttribute:i.attributes||(i.attributes={}),i.attributes[t[n._const.name]]=t[n._const.value],"checked"===t[n._const.name]?i.checked=!0:"selected"===t[n._const.name]?i.selected=!0:"INPUT"===i.nodeName&&"value"===t[n._const.name]&&(i.value=t[n._const.value]);break;case n._const.modifyAttribute:i.attributes[t[n._const.name]]=t[n._const.newValue];break;case n._const.removeAttribute:delete i.attributes[t[n._const.name]],0===Object.keys(i.attributes).length&&delete i.attributes,"checked"===t[n._const.name]?i.checked=!1:"selected"===t[n._const.name]?delete i.selected:"INPUT"===i.nodeName&&"value"===t[n._const.name]&&delete i.value;break;case n._const.modifyTextElement:i.data=t[n._const.newValue];break;case n._const.modifyValue:i.value=t[n._const.newValue];break;case n._const.modifyComment:i.data=t[n._const.newValue];break;case n._const.modifyChecked:i.checked=t[n._const.newValue];break;case n._const.modifySelected:i.selected=t[n._const.newValue];break;case n._const.replaceElement:(l=p(t[n._const.newValue])).outerDone=!0,l.innerDone=!0,l.valueDone=!0,o.childNodes[a]=l;break;case n._const.relocateGroup:(c=i.childNodes.splice(t[n._const.from],t.groupLength).reverse()).forEach(e=>i.childNodes.splice(t[n._const.to],0,e)),i.subsets&&i.subsets.forEach(e=>{if(t[n._const.from]<t[n._const.to]&&e.oldValue<=t[n._const.to]&&e.oldValue>t[n._const.from]){e.oldValue-=t.groupLength;const r=e.oldValue+e.length-t[n._const.to];r>0&&(s.push({oldValue:t[n._const.to]+t.groupLength,newValue:e.newValue+e.length-r,length:r}),e.length-=r)}else if(t[n._const.from]>t[n._const.to]&&e.oldValue>t[n._const.to]&&e.oldValue<t[n._const.from]){e.oldValue+=t.groupLength;const r=e.oldValue+e.length-t[n._const.to];r>0&&(s.push({oldValue:t[n._const.to]+t.groupLength,newValue:e.newValue+e.length-r,length:r}),e.length-=r)}else e.oldValue===t[n._const.from]&&(e.oldValue=t[n._const.to])});break;case n._const.removeElement:o.childNodes.splice(a,1),o.subsets&&o.subsets.forEach(e=>{e.oldValue>a?e.oldValue-=1:e.oldValue===a?e.delete=!0:e.oldValue<a&&e.oldValue+e.length>a&&(e.oldValue+e.length-1===a?e.length--:(s.push({newValue:e.newValue+a-e.oldValue,oldValue:a,length:e.length-a+e.oldValue-1}),e.length=a-e.oldValue))}),i=o;break;case n._const.addElement:h=t[n._const.route].slice(),d=h.splice(h.length-1,1)[0],i=v(e,h).node,(l=p(t[n._const.element])).outerDone=!0,l.innerDone=!0,l.valueDone=!0,i.childNodes||(i.childNodes=[]),d>=i.childNodes.length?i.childNodes.push(l):i.childNodes.splice(d,0,l),i.subsets&&i.subsets.forEach(e=>{if(e.oldValue>=d)e.oldValue+=1;else if(e.oldValue<d&&e.oldValue+e.length>d){const t=e.oldValue+e.length-d;s.push({newValue:e.newValue+e.length-t,oldValue:d+1,length:t}),e.length-=t}});break;case n._const.removeTextElement:o.childNodes.splice(a,1),"TEXTAREA"===o.nodeName&&delete o.value,o.subsets&&o.subsets.forEach(e=>{e.oldValue>a?e.oldValue-=1:e.oldValue===a?e.delete=!0:e.oldValue<a&&e.oldValue+e.length>a&&(e.oldValue+e.length-1===a?e.length--:(s.push({newValue:e.newValue+a-e.oldValue,oldValue:a,length:e.length-a+e.oldValue-1}),e.length=a-e.oldValue))}),i=o;break;case n._const.addTextElement:h=t[n._const.route].slice(),d=h.splice(h.length-1,1)[0],(l={}).nodeName="#text",l.data=t[n._const.value],(i=v(e,h).node).childNodes||(i.childNodes=[]),d>=i.childNodes.length?i.childNodes.push(l):i.childNodes.splice(d,0,l),"TEXTAREA"===i.nodeName&&(i.value=t[n._const.newValue]),i.subsets&&i.subsets.forEach(e=>{if(e.oldValue>=d&&(e.oldValue+=1),e.oldValue<d&&e.oldValue+e.length>d){const t=e.oldValue+e.length-d;s.push({newValue:e.newValue+e.length-t,oldValue:d+1,length:t}),e.length-=t}});break;default:console.log("unknown action")}i.subsets&&(i.subsets=i.subsets.filter(e=>!e.delete&&e.oldValue!==e.newValue),s.length&&(i.subsets=i.subsets.concat(s))),u.newNode=l,n.postDiffApply(u)}(e,t,n)}),!0}function A(e,t){const n={};return n.nodeName=e.nodeName,"#text"===n.nodeName||"#comment"===n.nodeName?n.data=e.data:(e.attributes&&e.attributes.length>0&&(n.attributes={},Array.prototype.slice.call(e.attributes).forEach(e=>n.attributes[e.name]=e.value)),"TEXTAREA"===n.nodeName?n.value=e.value:e.childNodes&&e.childNodes.length>0&&(n.childNodes=[],Array.prototype.slice.call(e.childNodes).forEach(e=>n.childNodes.push(A(e,t)))),t.valueDiffing&&(void 0!==e.checked&&e.type&&["radio","checkbox"].includes(e.type.toLowerCase())?n.checked=e.checked:void 0!==e.value&&(n.value=e.value),void 0!==e.selected&&(n.selected=e.selected))),n}class E{constructor(e,t,n){this.options=n,this.t1=A(e,this.options),this.t2=A(t,this.options),this.diffcount=0,this.foundAll=!1,this.debug&&(this.t1Orig=A(e,this.options),this.t2Orig=A(t,this.options)),this.tracker=new y}init(){return this.findDiffs(this.t1,this.t2)}findDiffs(e,t){let n;do{if(this.options.debug&&(this.diffcount+=1,this.diffcount>this.options.diffcap))throw window.diffError=[this.t1Orig,this.t2Orig],new Error(`surpassed diffcap:${JSON.stringify(this.t1Orig)} -> ${JSON.stringify(this.t2Orig)}`);0===(n=this.findNextDiff(e,t,[])).length&&(d(e,t)||(this.foundAll?(console.error("Could not find remaining diffs!"),console.log({t1:e,t2:t})):(this.foundAll=!0,h(e),n=this.findNextDiff(e,t,[])))),n.length>0&&(this.foundAll=!1,this.tracker.add(n),b(e,n,this.options))}while(n.length>0);return this.tracker.list}findNextDiff(e,t,n){let r,i;if(this.options.maxDepth&&n.length>this.options.maxDepth)return[];if(!e.outerDone){if(r=this.findOuterDiff(e,t,n),this.filterOuterDiff&&(i=this.filterOuterDiff(e,t,r))&&(r=i),r.length>0)return e.outerDone=!0,r;e.outerDone=!0}if(!e.innerDone){if((r=this.findInnerDiff(e,t,n)).length>0)return r;e.innerDone=!0}if(this.options.valueDiffing&&!e.valueDone){if((r=this.findValueDiff(e,t,n)).length>0)return e.valueDone=!0,r;e.valueDone=!0}return[]}findOuterDiff(e,t,n){const r=[];let i,o,a,u,l,c;if(e.nodeName!==t.nodeName)return[(new s).setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,p(e)).setValue(this.options._const.newValue,p(t)).setValue(this.options._const.route,n)];if(n.length&&this.options.maxChildCount&&e.childNodes&&t.childNodes&&e.childNodes.length>this.options.maxChildCount&&t.childNodes.length>this.options.maxChildCount){const r=e.childNodes.length<t.childNodes.length?e.childNodes.length:t.childNodes.length;let i=0,o=0;for(;i<this.options.maxChildDiffCount&&o<r;)d(e.childNodes[o],t.childNodes[o])||i++,o++;if(i===this.options.maxChildDiffCount)return[(new s).setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,p(e)).setValue(this.options._const.newValue,p(t)).setValue(this.options._const.route,n)]}if(e.data!==t.data)return"#text"===e.nodeName?[(new s).setValue(this.options._const.action,this.options._const.modifyTextElement).setValue(this.options._const.route,n).setValue(this.options._const.oldValue,e.data).setValue(this.options._const.newValue,t.data)]:[(new s).setValue(this.options._const.action,this.options._const.modifyComment).setValue(this.options._const.route,n).setValue(this.options._const.oldValue,e.data).setValue(this.options._const.newValue,t.data)];for(o=e.attributes?Object.keys(e.attributes).sort():[],a=t.attributes?Object.keys(t.attributes).sort():[],u=o.length,c=0;c<u;c++)i=o[c],-1===(l=a.indexOf(i))?r.push((new s).setValue(this.options._const.action,this.options._const.removeAttribute).setValue(this.options._const.route,n).setValue(this.options._const.name,i).setValue(this.options._const.value,e.attributes[i])):(a.splice(l,1),e.attributes[i]!==t.attributes[i]&&r.push((new s).setValue(this.options._const.action,this.options._const.modifyAttribute).setValue(this.options._const.route,n).setValue(this.options._const.name,i).setValue(this.options._const.oldValue,e.attributes[i]).setValue(this.options._const.newValue,t.attributes[i])));for(u=a.length,c=0;c<u;c++)i=a[c],r.push((new s).setValue(this.options._const.action,this.options._const.addAttribute).setValue(this.options._const.route,n).setValue(this.options._const.name,i).setValue(this.options._const.value,t.attributes[i]));return r}findInnerDiff(e,t,n){const r=e.subsets&&e.subsetsAge--?e.subsets:e.childNodes&&t.childNodes?function(e,t){const n=e.childNodes?e.childNodes:[],r=t.childNodes?t.childNodes:[],i=g(n.length,!1),o=g(r.length,!1),a=[];let s=!0;const u=function(){return arguments[1]},l=e=>{i[s.oldValue+e]=!0,o[s.newValue+e]=!0};for(;s;)(s=m(n,r,i,o))&&(a.push(s),Array(...new Array(s.length)).map(u).forEach(e=>l(e)));return e.subsets=a,e.subsetsAge=100,a}(e,t):[],i=e.childNodes?e.childNodes:[],o=t.childNodes?t.childNodes:[];let a,u=[],l=0;if(r.length>0&&(u=this.attemptGroupRelocation(e,t,r,n)).length>0)return u;const c=Math.max(i.length,o.length);i.length!==o.length&&(a=!0);for(let e=0;e<c;e+=1){const t=i[e],r=o[e];a&&(t&&!r?"#text"===t.nodeName?(u.push((new s).setValue(this.options._const.action,this.options._const.removeTextElement).setValue(this.options._const.route,n.concat(l)).setValue(this.options._const.value,t.data)),l-=1):(u.push((new s).setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.route,n.concat(l)).setValue(this.options._const.element,p(t))),l-=1):r&&!t&&("#text"===r.nodeName?u.push((new s).setValue(this.options._const.action,this.options._const.addTextElement).setValue(this.options._const.route,n.concat(l)).setValue(this.options._const.value,r.data)):u.push((new s).setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.route,n.concat(l)).setValue(this.options._const.element,p(r))))),t&&r&&(u=u.concat(this.findNextDiff(t,r,n.concat(l)))),l+=1}return e.innerDone=!0,u}attemptGroupRelocation(e,t,n,r){const i=function(e,t,n){const r=e.childNodes?g(e.childNodes.length,!0):[],i=t.childNodes?g(t.childNodes.length,!0):[];let o=0;return n.forEach(e=>{const t=e.oldValue+e.length,n=e.newValue+e.length;for(let n=e.oldValue;n<t;n+=1)r[n]=o;for(let t=e.newValue;t<n;t+=1)i[t]=o;o+=1}),{gaps1:r,gaps2:i}}(e,t,n),o=i.gaps1,a=i.gaps2;let u,l,c,h,d,m,y=Math.min(o.length,a.length);const v=[];for(let i=0,g=0;i<y;g+=1,i+=1)if(!0===o[i])if("#text"===(h=e.childNodes[g]).nodeName){if("#text"===t.childNodes[i].nodeName&&h.data!==t.childNodes[i].data){for(m=g;e.childNodes.length>m+1&&"#text"===e.childNodes[m+1].nodeName;)if(m+=1,t.childNodes[i].data===e.childNodes[m].data){d=!0;break}if(!d)return v.push((new s).setValue(this.options._const.action,this.options._const.modifyTextElement).setValue(this.options._const.route,r.concat(i)).setValue(this.options._const.oldValue,h.data).setValue(this.options._const.newValue,t.childNodes[i].data)),v}v.push((new s).setValue(this.options._const.action,this.options._const.removeTextElement).setValue(this.options._const.route,r.concat(i)).setValue(this.options._const.value,h.data)),o.splice(i,1),y=Math.min(o.length,a.length),i-=1}else v.push((new s).setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.route,r.concat(i)).setValue(this.options._const.element,p(h))),o.splice(i,1),y=Math.min(o.length,a.length),i-=1;else if(!0===a[i])"#text"===(h=t.childNodes[i]).nodeName?(v.push((new s).setValue(this.options._const.action,this.options._const.addTextElement).setValue(this.options._const.route,r.concat(i)).setValue(this.options._const.value,h.data)),o.splice(i,0,!0),y=Math.min(o.length,a.length),g-=1):(v.push((new s).setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.route,r.concat(i)).setValue(this.options._const.element,p(h))),o.splice(i,0,!0),y=Math.min(o.length,a.length),g-=1);else if(o[i]!==a[i]){if(v.length>0)return v;if(c=n[o[i]],(l=Math.min(c.newValue,e.childNodes.length-c.length))!==c.oldValue){u=!1;for(let t=0;t<c.length;t+=1)f(e.childNodes[l+t],e.childNodes[c.oldValue+t],[],!1,!0)||(u=!0);if(u)return[(new s).setValue(this.options._const.action,this.options._const.relocateGroup).setValue("groupLength",c.length).setValue(this.options._const.from,c.oldValue).setValue(this.options._const.to,l).setValue(this.options._const.route,r)]}}return v}findValueDiff(e,t,n){const r=[];return e.selected!==t.selected&&r.push((new s).setValue(this.options._const.action,this.options._const.modifySelected).setValue(this.options._const.oldValue,e.selected).setValue(this.options._const.newValue,t.selected).setValue(this.options._const.route,n)),(e.value||t.value)&&e.value!==t.value&&"OPTION"!==e.nodeName&&r.push((new s).setValue(this.options._const.action,this.options._const.modifyValue).setValue(this.options._const.oldValue,e.value||"").setValue(this.options._const.newValue,t.value||"").setValue(this.options._const.route,n)),e.checked!==t.checked&&r.push((new s).setValue(this.options._const.action,this.options._const.modifyChecked).setValue(this.options._const.oldValue,e.checked).setValue(this.options._const.newValue,t.checked).setValue(this.options._const.route,n)),r}}const w={debug:!1,diffcap:10,maxDepth:!1,maxChildCount:50,maxChildDiffCount:3,valueDiffing:!0,textDiff(e,t,n,r){e.data=r},preVirtualDiffApply(){},postVirtualDiffApply(){},preDiffApply(){},postDiffApply(){},filterOuterDiff:null,compress:!1,_const:!1,document:!(!window||!window.document)&&window.document};class S{constructor(e={}){if(this.options=e,Object.entries(w).forEach(([e,t])=>{Object.prototype.hasOwnProperty.call(this.options,e)||(this.options[e]=t)}),!this.options._const){const e=["addAttribute","modifyAttribute","removeAttribute","modifyTextElement","relocateGroup","removeElement","addElement","removeTextElement","addTextElement","replaceElement","modifyValue","modifyChecked","modifySelected","modifyComment","action","route","oldValue","newValue","element","group","from","to","name","value","data","attributes","nodeName","childNodes","checked","selected"];this.options._const={},this.options.compress?e.forEach((e,t)=>this.options._const[e]=t):e.forEach(e=>this.options._const[e]=e)}this.DiffFinder=E}apply(e,t){return function(e,t,n){return t.every(t=>o(e,t,n))}(e,t,this.options)}undo(e,t){return function(e,t,n){t.length||(t=[t]),(t=t.slice()).reverse(),t.forEach(t=>{!function(e,t,n){switch(t[n._const.action]){case n._const.addAttribute:t[n._const.action]=n._const.removeAttribute,o(e,t,n);break;case n._const.modifyAttribute:a(t,n._const.oldValue,n._const.newValue),o(e,t,n);break;case n._const.removeAttribute:t[n._const.action]=n._const.addAttribute,o(e,t,n);break;case n._const.modifyTextElement:case n._const.modifyValue:case n._const.modifyComment:case n._const.modifyChecked:case n._const.modifySelected:case n._const.replaceElement:a(t,n._const.oldValue,n._const.newValue),o(e,t,n);break;case n._const.relocateGroup:a(t,n._const.from,n._const.to),o(e,t,n);break;case n._const.removeElement:t[n._const.action]=n._const.addElement,o(e,t,n);break;case n._const.addElement:t[n._const.action]=n._const.removeElement,o(e,t,n);break;case n._const.removeTextElement:t[n._const.action]=n._const.addTextElement,o(e,t,n);break;case n._const.addTextElement:t[n._const.action]=n._const.removeTextElement,o(e,t,n);break;default:console.log("unknown action")}}(e,t,n)})}(e,t,this.options)}diff(e,t){return new this.DiffFinder(e,t,this.options).init()}}class _{constructor(e={}){this.pad="   ",this.padding="",this.tick=1,this.messages=[];const t=(e,t)=>{const n=e[t];e[t]=(...r)=>{this.fin(t,Array.prototype.slice.call(r));const i=n.apply(e,r);return this.fout(t,i),i}};for(let n in e)"function"==typeof e[n]&&t(e,n);this.log(" TRACELOG START")}fin(e,t){this.padding+=this.pad,this.log("> entering "+e,t)}fout(e,t){this.log("< generated return value",t),this.padding=this.padding.substring(0,this.padding.length-this.pad.length)}format(e,t){return`${function(e){for(e=""+e;e.length<4;)e="0"+e;return e}(t)}> ${this.padding}${e}`}log(){let e=Array.prototype.slice.call(arguments);const t=function(e){return e?"string"==typeof e?e:e instanceof HTMLElement?e.outerHTML||"<empty>":e instanceof Array?`[${e.map(t).join(",")}]`:e.toString()||e.valueOf()||"<unknown>":"<falsey>"};e=e.map(t).join(", "),this.messages.push(this.format(e,this.tick++))}toString(){let e="";for(;e.length<=this.padding.length+this.pad.length;)e+="   ";let t=this.padding;return this.padding="",e=this.format(e,this.tick),this.padding=t,`${this.messages.join("\n")}\n${e}`}}n.d(t,"DiffDOM",(function(){return S})),n.d(t,"TraceLogger",(function(){return _}))}]),window.AFRAME){const t=["beat-generator","beat-system","beat","aabb-collider","atlas-uvs","dynamic-texture-atlas","audioanalyser","event-set","geometry-merger","buffer-geometry-merger","haptics","layout","log","orbit-controls","proxy-event","render-order","render-order-recursive","bind","bind-toggle","bind-for","bind-item","slice9","thumb-controls","thumb-controls-debug","active-item","active-text-color","beat-cut-fx","beat-hit-sound","blade","console-shortcuts","controller","copy-texture","cursor-laser","cursor-mesh","curve-follow-rig-reset","debug-beat-generator","debug-beat-positioning","debug-controller","debug-cursor","debug-intro","debug-song-time","debug-state","delayed-proxy-event","difficulty-background","difficulty-filter","difficulty-text","follow-position","follow-z","gameover","gpu-preloader","hand-swapper","haptics-wall","haptics-weapons","headfist","history","intro-song","keyboard-raycastable","leaderboard","materials","materials-color-menu","menu-controls","menu-difficulty-select","menu-genre","menu-midsection","menu-mode","menu-playlist-button","menu-playlist","menu-selected-challenge-image","menu-slide-animation","multiplier-ring","no-frustum-cull","pause","pauser","play-sound","player-height","plume","punch","raycaster-target","recenter","score-texts","search-thumbnail-atlas","search","search-result-list","song-info-positioner","song-preview-system","song-progress-info","song","stage-colors","stage-lasers","stars","stats-param","stepback","sub-object","super-keyboard","supercurve-color","supercurve","supercurve-follow","supercutfx","tail","text-counter","text-geometry","text-truncate","text-uppercase","toggle-pause-play","trail","tunnels","vertex-colors-buffer","victory-accuracy-ring","victory-rank","visible-raycastable","wall","weapon-particles","zip-loader"],n=["cutfxShader","gradientShader","handStar","panelShader","ring","supercurve","superCutFxShader","wallShader"],r=["log","render-order","state","check-vr","materials","play-sound"];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),r.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let r=0;r<n.length;r++)n[r].setAttribute(e,JSON.parse(n[r].getAttribute(t)),!0),n[r].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}}]);